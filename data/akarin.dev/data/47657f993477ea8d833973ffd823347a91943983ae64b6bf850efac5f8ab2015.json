{
  "Source": "akarin.dev",
  "Title": "在 Windows 下检测深色模式并监听变化",
  "Link": "https://akarin.dev/2023/03/29/detect-dark-theme-on-windows/",
  "Content": "\u003carticle class=\"mdui-p-a-3 mdui-card-content mdui-typo\"\u003e\u003cp\u003e最近几年很多应用都加入了深色模式，或者叫暗黑模式，英文的写法是 Dark Theme 或 Dark Mode。一般的说法是，深色模式对于 OLED 屏幕可以达到省电的效果，在夜晚等较暗的环境下使用深色模式可以保护视力。保护视力这一点其实还存在争议，有些理论表示人类的视觉本来就偏向于前暗后亮，因此使用深色模式反而会影响阅读效率并且更容易导致疲劳。不过我自己的感受是在夜晚使用深色模式不至于被屏幕上很亮的一大片亮瞎眼睛，从这个体验来说使用深色模式还是有着一定的意义的。\u003c/p\u003e\u003cp\u003e之前出于自己的需求用 Python 和 Tkinter 给图片放大工具 Real-ESRGAN 做了一个 \u003ca href=\"https://github.com/TransparentLC/realesrgan-gui\" target=\"_blank\" rel=\"noopener\"\u003eGUI\u003c/a\u003e，选择了 \u003ca href=\"https://github.com/rdbende/Sun-Valley-ttk-theme\" target=\"_blank\" rel=\"noopener\"\u003eSun-Valley-ttk-theme\u003c/a\u003e 这个非常符合 Windows 11 的设计风格的主题，正好发现它同时提供了浅色和深色模式的主题，就打算借用这个在自己做的 GUI 里也加入深色模式的支持了。\u003c/p\u003e\u003cp\u003e首先需要解决的问题是：如何检测当前是否正在使用深色模式？\u003c/p\u003e\u003cp\u003e如果用的是 Qt 之类的大而全的 GUI 框架，这种功能说不定都\u003ca href=\"https://forum.qt.io/topic/130589\" target=\"_blank\" rel=\"noopener\"\u003e已经封装好了\u003c/a\u003e，不过 Tkinter 是没有这种功能的。还好，有人写了一个叫 \u003ca href=\"https://github.com/albertosottile/darkdetect\" target=\"_blank\" rel=\"noopener\"\u003eDarkdetect\u003c/a\u003e 的包，可以跨平台（Windows、Linux 和 macOS）检测系统是否启用了深色模式，使用 \u003ccode\u003edarkdetect.isDark()\u003c/code\u003e 就可以了。\u003c/p\u003e\u003cp\u003e不过如果只是推荐一个包的话我就不会特地写这个了（笑），那么 Darkdetect 又是怎么实现检测的呢？在 Windows 下，设置里“个性化→颜色→选择模式→选择默认应用模式”就是是否使用深色模式的选项，底层的记录则是注册表里 \u003ccode\u003eHKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Themes\\Personalize\u003c/code\u003e 的 \u003ccode\u003eDWORD\u003c/code\u003e 类型的键 \u003ccode\u003eAppsUseLightTheme\u003c/code\u003e。从名字就可以看出来，值为 \u003ccode\u003e0\u003c/code\u003e 表示使用深色模式，值为 \u003ccode\u003e1\u003c/code\u003e 表示不使用深色模式。\u003c/p\u003e\u003cfigure class=\"akarin-blurred-container\"\u003e\u003cdiv style=\"padding-bottom:min(calc(100%/1113*509),509px,480px)\"\u003e\u003c/div\u003e\u003cimg class=\"mdui-hoverable mdui-img-rounded\" data-src=\"https://fs-im-kefu.7moor-fs2.com/im/2768a390-5474-11ea-afc9-7b323e3e16c0/pWt1NPyu.png\" data-src-webp=\"https://fs-im-kefu.7moor-fs2.com/im/2768a390-5474-11ea-afc9-7b323e3e16c0/DsUux8mF.webp\"/\u003e \u003cimg class=\"mdui-hoverable mdui-img-rounded akarin-blurred\" src=\"data:image/jpeg;base64,/9j/2wBDAAgICAgJCAkKCgkNDgwODRMREBARExwUFhQWFBwrGx8bGx8bKyYuJSMlLiZENS8vNUROQj5CTl9VVV93cXecnNH/2wBDAQgICAgJCAkKCgkNDgwODRMREBARExwUFhQWFBwrGx8bGx8bKyYuJSMlLiZENS8vNUROQj5CTl9VVV93cXecnNH/wAARCAAPACADASIAAhEBAxEB/8QAGQAAAQUAAAAAAAAAAAAAAAAACAACAwQH/8QAIhAAAgEEAgIDAQAAAAAAAAAAAQIDAAQFERIxE2EUI1GC/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/xAAYEQADAQEAAAAAAAAAAAAAAAAAAREhMf/aAAwDAQACEQMRAD8Ay28eKRw6W4hUqo0vIjYGj2T3SjhVouWvROuvfdFaMFiFliT4MGm73EpqS4xGNhuRGuLtWTQ2THGpG/4NFvC2LQR/EP004wAJy2aLy5w+KhcquMtT9fLfhTurUOBw8kaucdajY68KUFP/2Q\"/\u003e\u003cnoscript\u003e\u003cimg class=\"mdui-hoverable mdui-img-rounded mdui-center mdui-img-fluid\" src=\"https://fs-im-kefu.7moor-fs2.com/im/2768a390-5474-11ea-afc9-7b323e3e16c0/pWt1NPyu.png\" alt=\"undefined\" title=\"undefined\"\u003e\u003c/noscript\u003e\u003c/figure\u003e\u003cp\u003e通过读取注册表就可以实现检测了。Python 自带的 \u003ca href=\"https://docs.python.org/zh-cn/3/library/winreg.html\" target=\"_blank\" rel=\"noopener\"\u003e\u003ccode\u003ewinreg\u003c/code\u003e\u003c/a\u003e 模块可以用来读写注册表，其他语言的话也总有读取注册表的办法，实在没有的话直接用 Windows API 也不是不可以（\u003c/p\u003e\u003cp\u003e以前我写过一个简单的 PowerShell 脚本，功能就是读取和写入 \u003ccode\u003eAppsUseLightTheme\u003c/code\u003e 来快速切换深色模式，借助计划任务就可以实现每天早上和晚上的定时切换了，后来发现了 \u003ca href=\"https://github.com/AutoDarkMode/Windows-Auto-Night-Mode\" target=\"_blank\" rel=\"noopener\"\u003eAuto Dark Mode\u003c/a\u003e 这个小工具就转而使用它了。\u003c/p\u003e\u003cp\u003e检测深色模式的问题解决了，现在可以实现在系统使用深色模式的情况下打开那个 GUI 就选择使用深色模式的主题了，不过还有一个问题：在切换深色模式的设置时，GUI 还不能根据跟着自动切换主题。\u003c/p\u003e\u003cp\u003eDarkdetect（当时）还不支持监听深色模式的设置变化，有人\u003ca href=\"https://github.com/albertosottile/darkdetect/issues/14\" target=\"_blank\" rel=\"noopener\"\u003e提议添加这个功能\u003c/a\u003e，但是对于怎么实现大家也没什么头绪。如果在 Google 上搜索“检测深色模式”的话，搜索结果基本上都是\u003cstrong\u003e前端开发\u003c/strong\u003e相关的，教你用 CSS 的 \u003ccode\u003e@media (prefers-color-scheme: dark)\u003c/code\u003e 检测深色模式以及用 JS 的 \u003ccode\u003ematchMedia(\u0026#39;(prefers-color-scheme: dark)\u0026#39;).addEventListener(\u0026#39;change\u0026#39;, e =\u0026gt; e.matches)\u003c/code\u003e 来监听变化的各种教程；如果搜索“windows detect dark mode change”的话，也基本上只能搜索到怎么“detect”，没什么和“change”有关的东西。\u003c/p\u003e\u003cp\u003e如果 GUI 用的是 Electron 之类的使用 Webview 的方案自然就可以把前端开发的那一套直接拿来用了，但是不使用浏览器的话要怎么办？总不能每秒轮询一次吧？浏览器已经能实现深色模式的监听了，它是怎么实现的呢？\u003c/p\u003e\u003cp\u003eChromium 是开源的浏览器内核，于是我就试着去翻了 Chromium 的源代码，用前面提过的 \u003ccode\u003eAppsUseLightTheme\u003c/code\u003e 作为关键词搜索，还真的翻到了几个相关的函数：\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003eui/native_theme/native_theme_win.cc\u003c/code\u003e 的 \u003ca href=\"https://source.chromium.org/chromium/chromium/src/+/main:ui/native_theme/native_theme_win.cc;l=1581;drc=8101d6d81854e4f437e0f03f77694a01aaa8df7a\" target=\"_blank\" rel=\"noopener\"\u003eNativeThemeWin::UpdateDarkModeStatus\u003c/a\u003e，这个函数是用来检测深色模式的，读取的就是注册表的 \u003ccode\u003eAppsUseLightTheme\u003c/code\u003e。\u003c/li\u003e\u003cli\u003e\u003ccode\u003eui/native_theme/native_theme_win.cc\u003c/code\u003e 的 \u003ca href=\"https://source.chromium.org/chromium/chromium/src/+/main:ui/native_theme/native_theme_win.cc;l=1569;drc=8101d6d81854e4f437e0f03f77694a01aaa8df7a\" target=\"_blank\" rel=\"noopener\"\u003eNativeThemeWin::RegisterThemeRegkeyObserver\u003c/a\u003e，就在上一个函数旁边，从名字就可以看出，功能是通过检测注册表的改变来实现对深色模式的监听。\u003c/li\u003e\u003cli\u003e\u003ccode\u003ebase/win/registry.cc\u003c/code\u003e 的 \u003ca href=\"https://source.chromium.org/chromium/chromium/src/+/main:base/win/registry.cc;l=74;drc=8101d6d81854e4f437e0f03f77694a01aaa8df7a\" target=\"_blank\" rel=\"noopener\"\u003eRegKey::Watcher::StartWatching\u003c/a\u003e，用来实现“检测注册表的改变”。\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e翻了 \u003ccode\u003eRegKey::Watcher::StartWatching\u003c/code\u003e 的源代码才知道，原来 Windows API 里提供了 \u003ca href=\"https://learn.microsoft.com/zh-cn/windows/win32/api/winreg/nf-winreg-regnotifychangekeyvalue\" target=\"_blank\" rel=\"noopener\"\u003e\u003ccode\u003eRegNotifyChangeKeyValue\u003c/code\u003e\u003c/a\u003e 这个函数可以在注册表更改时进行通知。如果用它检测 \u003ccode\u003eAppsUseLightTheme\u003c/code\u003e 的更改，就可以实现深色模式的监听了。\u003c/p\u003e\u003cp\u003e用 C 写了一个简单的示例：\u003c/p\u003e\u003cpre class=\"language-c line-numbers\" data-language=\"c\"\u003e\u003ccode class=\"language-c\"\u003e\u003cspan class=\"token macro property\"\u003e\u003cspan class=\"token directive-hash\"\u003e#\u003c/span\u003e\u003cspan class=\"token keyword directive\"\u003epragma\u003c/span\u003e \u003cspan class=\"token expression\"\u003e\u003cspan class=\"token function\"\u003ecomment\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003elib\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003c/span\u003e\u003cspan class=\"token string\"\u003e\u0026#34;Advapi32.lib\u0026#34;\u003c/span\u003e\u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\n\u003cspan class=\"token macro property\"\u003e\u003cspan class=\"token directive-hash\"\u003e#\u003c/span\u003e\u003cspan class=\"token keyword directive\"\u003einclude\u003c/span\u003e \u003cspan class=\"token string\"\u003e\u0026lt;stdio.h\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token macro property\"\u003e\u003cspan class=\"token directive-hash\"\u003e#\u003c/span\u003e\u003cspan class=\"token keyword directive\"\u003einclude\u003c/span\u003e \u003cspan class=\"token string\"\u003e\u0026lt;windows.h\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e \u003cspan class=\"token function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e argc\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token keyword\"\u003echar\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003eargv\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    HKEY hKey\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003eRegOpenKeyExA\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eHKEY_CURRENT_USER\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\u0026#34;SOFTWARE\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Themes\\\\Personalize\u0026#34;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e KEY_NOTIFY \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e KEY_READ\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003ehKey\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    DWORD dwSize \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003esizeof\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eDWORD\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    DWORD queryValueLast\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    DWORD queryValue\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003eRegQueryValueExA\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ehKey\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\u0026#34;AppsUseLightTheme\u0026#34;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eNULL\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eNULL\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eLPBYTE\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003equeryValueLast\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003edwSize\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ewhile\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eTRUE\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token function\"\u003eRegNotifyChangeKeyValue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ehKey\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e TRUE\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e REG_NOTIFY_CHANGE_LAST_SET\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eNULL\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e FALSE\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token function\"\u003eRegQueryValueExA\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ehKey\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\u0026#34;AppsUseLightTheme\u0026#34;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eNULL\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eNULL\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eLPBYTE\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003equeryValue\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003edwSize\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003equeryValueLast \u003cspan class=\"token operator\"\u003e!=\u003c/span\u003e queryValue\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            queryValueLast \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e queryValue\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"token function\"\u003eputs\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003equeryValue \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e \u003cspan class=\"token string\"\u003e\u0026#34;Light\u0026#34;\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\u0026#34;Dark\u0026#34;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"line-numbers-rows\" aria-hidden=\"true\"\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e在运行到 \u003ccode\u003eRegNotifyChangeKeyValue\u003c/code\u003e 这里的时候会一直阻塞，直到注册表的值改变为止，然后读取 \u003ccode\u003eAppsUseLightTheme\u003c/code\u003e 的值检查深色模式的设置是否有变化，如果有则输出当前的主题。这个监听是死循环，实际使用的时候单独开一个线程就可以了。效果如下：\u003c/p\u003e\u003cvideo controls=\"\" poster=\"https://fs-im-kefu.7moor-fs2.com/im/2768a390-5474-11ea-afc9-7b323e3e16c0/UDGCaVKn.jpg\" preload=\"metadata\"\u003e\u003csource type=\"video/mp4; codecs=av01.0.09M.10\" src=\"https://fs-im-kefu.7moor-fs2.com/im/2768a390-5474-11ea-afc9-7b323e3e16c0/6xRqEH2a.mp4\"/\u003e\u003csource type=\"video/mp4; codecs=avc1.640033\" src=\"https://fs-im-kefu.7moor-fs2.com/im/2768a390-5474-11ea-afc9-7b323e3e16c0/gyqOVFFf.mp4\"/\u003e\u003c/video\u003e\u003cp\u003e发现这个之后顺便就给 Darkdetect 提交了一个 \u003ca href=\"https://github.com/albertosottile/darkdetect/pull/20\" target=\"_blank\" rel=\"noopener\"\u003ePull request\u003c/a\u003e，因为原作者希望使用纯 Python 代码，后来使用 \u003ccode\u003ectypes\u003c/code\u003e 进行了\u003ca href=\"https://github.com/albertosottile/darkdetect/blob/64ce54e20be54cc41f85c8c208d35a4137b958d3/darkdetect/_windows_detect.py#L82\" target=\"_blank\" rel=\"noopener\"\u003e改写\u003c/a\u003e。\u003c/p\u003e\u003cp\u003e与此同时还发现了 Linux 下的监听方法，于是也写进了 Pull request，具体做法可以参见\u003ca href=\"https://github.com/albertosottile/darkdetect/blob/64ce54e20be54cc41f85c8c208d35a4137b958d3/darkdetect/_linux_detect.py#L38\" target=\"_blank\" rel=\"noopener\"\u003e当时提交的代码\u003c/a\u003e，这里就不详细介绍了。我没有使用 macOS 的设备，所以当时没有添加 macOS 下的实现，不过这个后来也有人\u003ca href=\"https://github.com/albertosottile/darkdetect/blob/64ce54e20be54cc41f85c8c208d35a4137b958d3/darkdetect/_mac_detect.py\" target=\"_blank\" rel=\"noopener\"\u003e补充\u003c/a\u003e了。\u003c/p\u003e\u003cp\u003e“很惭愧，做了一点微小的工作，谢谢大家！”\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003e封面图：\u003ca href=\"https://www.pixiv.net/artworks/96300365\" target=\"_blank\" rel=\"noopener\"\u003ePixiv ID: 96300365 「温かいコーヒーどうぞ！」 by チノマロン\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\u003cblockquote class=\"mdui-m-b-0 mdui-m-x-0 mdui-p-y-1\" style=\"border-left:4px solid rgba(0,0,0,.36)\"\u003e\u003cstrong\u003e本作品采用\u003ca href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh\" target=\"_blank\"\u003e知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议\u003c/a\u003e进行许可。不允许内容农场类网站、CSDN 用户和微信公众号转载。\u003c/strong\u003e\u003cbr/\u003e\u003cstrong\u003e本文作者：✨小透明・宸✨\u003c/strong\u003e\u003cbr/\u003e\u003cstrong\u003e本文链接：\u003ca href=\"https://akarin.dev/2023/03/29/detect-dark-theme-on-windows/\"\u003ehttps://akarin.dev/2023/03/29/detect-dark-theme-on-windows/\u003c/a\u003e\u003c/strong\u003e\u003c/blockquote\u003e\u003c/article\u003e",
  "Date": "2023-03-29T13:50:12Z",
  "Author": "✨小透明・宸✨"
}