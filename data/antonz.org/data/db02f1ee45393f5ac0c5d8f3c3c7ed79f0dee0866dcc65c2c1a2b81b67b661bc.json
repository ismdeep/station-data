{
  "Source": "antonz.org",
  "Title": "Compact objects in Python",
  "Link": "https://antonz.org/compact-objects/",
  "Content": "\u003carticle class=\"post\"\u003e\u003cdiv class=\"row\"\u003e\u003cdiv class=\"col-xs-12 col-md-10 article\"\u003e\u003cheader\u003e\u003ch1\u003eCompact objects in Python\u003c/h1\u003e\u003c/header\u003e\u003cp\u003ePython is an object language. This is all nice and cozy until you run out of memory holding 10 million objects at once. Let\u0026#39;s talk about how to reduce its appetite.\u003c/p\u003e\u003ch2 id=\"tuples\"\u003eTuples\u003c/h2\u003e\u003cp\u003eImagine you have a simple \u003ccode\u003ePet\u003c/code\u003e object with the \u003ccode\u003ename\u003c/code\u003e (string) and \u003ccode\u003eprice\u003c/code\u003e (integer) attributes. Intuitively, it seems that the most compact representation is a tuple:\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;Frank the Pigeon\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#1c01ce\"\u003e50000\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eLet\u0026#39;s measure how much memory this beauty eats:\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#000\"\u003erandom\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#000\"\u003estring\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#000\"\u003epympler.asizeof\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#000\"\u003easizeof\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003ename_gen\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e (\u003cspan style=\"color:#000\"\u003erandom\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003echoice\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003eascii_uppercase\u003c/span\u003e) \u003cspan style=\"color:#a90d91\"\u003efor\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e_\u003c/span\u003e \u003cspan style=\"color:#000\"\u003ein\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003erange\u003c/span\u003e(\u003cspan style=\"color:#1c01ce\"\u003e10\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003ename\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#c41a16\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ejoin\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003ename_gen\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003eprice\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003erandom\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003erandint\u003c/span\u003e(\u003cspan style=\"color:#1c01ce\"\u003e10000\u003c/span\u003e, \u003cspan style=\"color:#1c01ce\"\u003e99999\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a90d91\"\u003ereturn\u003c/span\u003e (\u003cspan style=\"color:#000\"\u003ename\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003eprice\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003ename\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efn\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003en\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#1c01ce\"\u003e10_000\u003c/span\u003e):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003epets\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e [\u003cspan style=\"color:#000\"\u003efn\u003c/span\u003e() \u003cspan style=\"color:#a90d91\"\u003efor\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e_\u003c/span\u003e \u003cspan style=\"color:#000\"\u003ein\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003erange\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003en\u003c/span\u003e)]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003esize\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003eround\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003easizeof\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003epets\u003c/span\u003e) \u003cspan style=\"color:#000\"\u003e/\u003c/span\u003e \u003cspan style=\"color:#000\"\u003en\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a90d91\"\u003eprint\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003ef\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;Pet size (\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e) = \u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#000\"\u003esize\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e bytes\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a90d91\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#000\"\u003esize\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003ebaseline\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;tuple\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ccodapi-snippet sandbox=\"python\" editor=\"basic\"\u003e\u003c/codapi-snippet\u003e\u003cp\u003e161 bytes. Let\u0026#39;s use that as a baseline for further comparison.\u003c/p\u003e\u003ch2 id=\"dataclasses-vs-named-tuples\"\u003eDataclasses vs named tuples\u003c/h2\u003e\u003cp\u003eBut who works with tuples these days? You would probably choose a dataclass:\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#000\"\u003edataclasses\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#000\"\u003edataclass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003e@dataclass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#3f6e75\"\u003ePetData\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#a90d91\"\u003estr\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003eprice\u003c/span\u003e: \u003cspan style=\"color:#a90d91\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003efn\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003elambda\u003c/span\u003e: \u003cspan style=\"color:#000\"\u003ePetData\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;baseline\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;dataclass\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efn\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003ebaseline\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ccodapi-snippet sandbox=\"python\" editor=\"basic\" template=\"measure.py\"\u003e\u003c/codapi-snippet\u003e\u003cp\u003eThing is, it\u0026#39;s 1.6 times larger than a tuple.\u003c/p\u003e\u003cp\u003eLet\u0026#39;s try a named tuple then:\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#000\"\u003etyping\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#000\"\u003eNamedTuple\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#3f6e75\"\u003ePetTuple\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003eNamedTuple\u003c/span\u003e):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#a90d91\"\u003estr\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003eprice\u003c/span\u003e: \u003cspan style=\"color:#a90d91\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003efn\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003elambda\u003c/span\u003e: \u003cspan style=\"color:#000\"\u003ePetTuple\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;baseline\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;named tuple\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efn\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003ebaseline\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ccodapi-snippet sandbox=\"python\" editor=\"basic\" template=\"measure.py\"\u003e\u003c/codapi-snippet\u003e\u003cp\u003eLooks like a dataclass, works like a tuple. Perfect. Or not?\u003c/p\u003e\u003ch2 id=\"slots\"\u003eSlots\u003c/h2\u003e\u003cp\u003ePython 3.10 received dataclasses with slots:\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003e@dataclass\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003eslots\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#a90d91\"\u003eTrue\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#3f6e75\"\u003ePetData\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#a90d91\"\u003estr\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003eprice\u003c/span\u003e: \u003cspan style=\"color:#a90d91\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003efn\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003elambda\u003c/span\u003e: \u003cspan style=\"color:#000\"\u003ePetData\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;baseline\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;dataclass w/slots\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efn\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003ebaseline\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ccodapi-snippet sandbox=\"python\" editor=\"basic\" template=\"measure.py\"\u003e\u003c/codapi-snippet\u003e\u003cp\u003eWow! Slots magic creates special skinny objects without an underlying dictionary, unlike regular Python objects. Such a dataclass is even lighter than a tuple.\u003c/p\u003e\u003cp\u003eWhat if 3.10 is out of the question yet? Use \u003ccode\u003eNamedTuple\u003c/code\u003e. Or add a slots dunder manually:\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003e@dataclass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#3f6e75\"\u003ePetData\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003e__slots__\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e (\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#c41a16\"\u003e\u0026#34;price\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#a90d91\"\u003estr\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003eprice\u003c/span\u003e: \u003cspan style=\"color:#a90d91\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eSlot objects have their own shortcomings. But they are great for simple cases (without inheritance and other complex stuff).\u003c/p\u003e\u003ch2 id=\"numpy-arrays\"\u003enumpy arrays\u003c/h2\u003e\u003cp\u003eThe real winner, of course, is the \u003ccode\u003enumpy\u003c/code\u003e array:\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#000\"\u003enumpy\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003eas\u003c/span\u003e \u003cspan style=\"color:#000\"\u003enp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003ePetNumpy\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003enp\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003edtype\u003c/span\u003e([(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#c41a16\"\u003e\u0026#34;S10\u0026#34;\u003c/span\u003e), (\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;price\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#c41a16\"\u003e\u0026#34;i4\u0026#34;\u003c/span\u003e)])\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003en\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#1c01ce\"\u003e10_000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003egenerator\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e (\u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e() \u003cspan style=\"color:#a90d91\"\u003efor\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e_\u003c/span\u003e \u003cspan style=\"color:#000\"\u003ein\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003erange\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003en\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003epets\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003enp\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003efromiter\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003egenerator\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003edtype\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ePetNumpy\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003esize\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003eround\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003easizeof\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003epets\u003c/span\u003e) \u003cspan style=\"color:#000\"\u003e/\u003c/span\u003e \u003cspan style=\"color:#000\"\u003en\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;baseline\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003eprint\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003ef\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;Pet size (numpy array) = \u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#000\"\u003esize\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e bytes\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003ex\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#000\"\u003esize\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e.2f\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e to baseline\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ccodapi-snippet sandbox=\"python\" editor=\"basic\" template=\"measure.py\"\u003e\u003c/codapi-snippet\u003e\u003cp\u003eThis is not a flawless victory, though. If names are unicode (\u003ccode\u003eU\u003c/code\u003e type instead of \u003ccode\u003eS\u003c/code\u003e), the advantage is not so impressive:\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#000\"\u003enumpy\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003eas\u003c/span\u003e \u003cspan style=\"color:#000\"\u003enp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003ePetNumpy\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003enp\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003edtype\u003c/span\u003e([(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#c41a16\"\u003e\u0026#34;U10\u0026#34;\u003c/span\u003e), (\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;price\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#c41a16\"\u003e\u0026#34;i4\u0026#34;\u003c/span\u003e)])\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003en\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#1c01ce\"\u003e10_000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003egenerator\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e (\u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e() \u003cspan style=\"color:#a90d91\"\u003efor\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e_\u003c/span\u003e \u003cspan style=\"color:#000\"\u003ein\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003erange\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003en\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003epets\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003enp\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003efromiter\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003egenerator\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003edtype\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ePetNumpy\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003esize\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003eround\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003easizeof\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003epets\u003c/span\u003e) \u003cspan style=\"color:#000\"\u003e/\u003c/span\u003e \u003cspan style=\"color:#000\"\u003en\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;baseline\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003eprint\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003ef\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;Pet size (numpy U10) = \u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#000\"\u003esize\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e bytes\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003ex\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#000\"\u003esize\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e.2f\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e to baseline\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ccodapi-snippet sandbox=\"python\" editor=\"basic\" template=\"measure.py\"\u003e\u003c/codapi-snippet\u003e\u003cp\u003eIf the name length is not strictly 10 characters, but varies, say, up to 50 characters (\u003ccode\u003eU50\u003c/code\u003e instead of \u003ccode\u003eU10\u003c/code\u003e) â€” the advantage disappears completely:\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#000\"\u003erandom\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#000\"\u003enumpy\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003eas\u003c/span\u003e \u003cspan style=\"color:#000\"\u003enp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#000\"\u003efields_var_name\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003ename_len\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003erandom\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003erandint\u003c/span\u003e(\u003cspan style=\"color:#1c01ce\"\u003e10\u003c/span\u003e, \u003cspan style=\"color:#1c01ce\"\u003e50\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003ename_gen\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e (\u003cspan style=\"color:#000\"\u003erandom\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003echoice\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003eascii_uppercase\u003c/span\u003e) \u003cspan style=\"color:#a90d91\"\u003efor\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e_\u003c/span\u003e \u003cspan style=\"color:#000\"\u003ein\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003erange\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003ename_len\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003ename\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#c41a16\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ejoin\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003ename_gen\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003eprice\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003erandom\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003erandint\u003c/span\u003e(\u003cspan style=\"color:#1c01ce\"\u003e10000\u003c/span\u003e, \u003cspan style=\"color:#1c01ce\"\u003e99999\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a90d91\"\u003ereturn\u003c/span\u003e (\u003cspan style=\"color:#000\"\u003ename\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003eprice\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003ePetNumpy\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003enp\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003edtype\u003c/span\u003e([(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#c41a16\"\u003e\u0026#34;U50\u0026#34;\u003c/span\u003e), (\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;price\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#c41a16\"\u003e\u0026#34;i4\u0026#34;\u003c/span\u003e)])\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003en\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#1c01ce\"\u003e10_000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003egenerator\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e (\u003cspan style=\"color:#000\"\u003efields_var_name\u003c/span\u003e() \u003cspan style=\"color:#a90d91\"\u003efor\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e_\u003c/span\u003e \u003cspan style=\"color:#000\"\u003ein\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003erange\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003en\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003epets\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003enp\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003efromiter\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003egenerator\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003edtype\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ePetNumpy\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003esize\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003eround\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003easizeof\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003epets\u003c/span\u003e) \u003cspan style=\"color:#000\"\u003e/\u003c/span\u003e \u003cspan style=\"color:#000\"\u003en\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;baseline\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003eprint\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003ef\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;Pet size (numpy U50) = \u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#000\"\u003esize\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e bytes\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003ex\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#000\"\u003esize\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e.2f\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#c41a16\"\u003e to baseline\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ccodapi-snippet sandbox=\"python\" editor=\"basic\" template=\"measure.py\"\u003e\u003c/codapi-snippet\u003e\u003ch2 id=\"others\"\u003eOthers\u003c/h2\u003e\u003cp\u003eLet\u0026#39;s consider alternatives for completeness.\u003c/p\u003e\u003cp\u003eA \u003cstrong\u003eregular class\u003c/strong\u003e is no different than a dataclass:\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#3f6e75\"\u003ePetClass\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a90d91\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e__init__\u003c/span\u003e(\u003cspan style=\"color:#5b269a\"\u003eself\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#a90d91\"\u003estr\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003eprice\u003c/span\u003e: \u003cspan style=\"color:#a90d91\"\u003eint\u003c/span\u003e):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#5b269a\"\u003eself\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ename\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003ename\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#5b269a\"\u003eself\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#000\"\u003eprice\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003eprice\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003efn\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003elambda\u003c/span\u003e: \u003cspan style=\"color:#000\"\u003ePetClass\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;baseline\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;class\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efn\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003ebaseline\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ccodapi-snippet sandbox=\"python\" editor=\"basic\" template=\"measure.py\"\u003e\u003c/codapi-snippet\u003e\u003cp\u003eAnd a \u003cstrong\u003efrozen\u003c/strong\u003e (immutable) dataclass too:\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003e@dataclass\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003efrozen\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#a90d91\"\u003eTrue\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#3f6e75\"\u003ePetDataFrozen\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#a90d91\"\u003estr\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003eprice\u003c/span\u003e: \u003cspan style=\"color:#a90d91\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003efn\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003elambda\u003c/span\u003e: \u003cspan style=\"color:#000\"\u003ePetDataFrozen\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;baseline\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;frozen dataclass\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efn\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003ebaseline\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ccodapi-snippet sandbox=\"python\" editor=\"basic\" template=\"measure.py\"\u003e\u003c/codapi-snippet\u003e\u003cp\u003eA \u003cstrong\u003edict\u003c/strong\u003e is even worse:\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003enames\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e (\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#c41a16\"\u003e\u0026#34;price\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003efn\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003elambda\u003c/span\u003e: \u003cspan style=\"color:#a90d91\"\u003edict\u003c/span\u003e(\u003cspan style=\"color:#a90d91\"\u003ezip\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003enames\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e()))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;baseline\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;dict\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efn\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003ebaseline\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ccodapi-snippet sandbox=\"python\" editor=\"basic\" template=\"measure.py\"\u003e\u003c/codapi-snippet\u003e\u003cp\u003e\u003cstrong\u003ePydantic model\u003c/strong\u003e sets an anti-record (no wonder, it uses inheritance):\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#000\"\u003epydantic\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#000\"\u003eBaseModel\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a90d91\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#3f6e75\"\u003ePetModel\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003eBaseModel\u003c/span\u003e):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#a90d91\"\u003estr\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#000\"\u003eprice\u003c/span\u003e: \u003cspan style=\"color:#a90d91\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003enames\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e (\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#c41a16\"\u003e\u0026#34;price\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003efn\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a90d91\"\u003elambda\u003c/span\u003e: \u003cspan style=\"color:#000\"\u003ePetModel\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003e**\u003c/span\u003e\u003cspan style=\"color:#a90d91\"\u003edict\u003c/span\u003e(\u003cspan style=\"color:#a90d91\"\u003ezip\u003c/span\u003e(\u003cspan style=\"color:#000\"\u003enames\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e())))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e \u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;baseline\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efields\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex\"\u003e\u003cspan\u003e\u003cspan style=\"color:#000\"\u003emeasure\u003c/span\u003e(\u003cspan style=\"color:#c41a16\"\u003e\u0026#34;pydantic\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003efn\u003c/span\u003e, \u003cspan style=\"color:#000\"\u003ebaseline\u003c/span\u003e\u003cspan style=\"color:#000\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#000\"\u003ebase\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ccodapi-snippet sandbox=\"python\" editor=\"basic\" template=\"measure.py\"\u003e\u003c/codapi-snippet\u003e\u003ch2 id=\"summary\"\u003eSummary\u003c/h2\u003e\u003cp\u003eHere are some Python object implementations, ranked from more compact to less compact:\u003c/p\u003e\u003col\u003e\u003cli\u003enumpy (specific use cases only)\u003c/li\u003e\u003cli\u003eSlotted dataclass.\u003c/li\u003e\u003cli\u003eNamed tuple / ordinary tuple.\u003c/li\u003e\u003cli\u003eDataclass / regular class.\u003c/li\u003e\u003cli\u003eDictionary.\u003c/li\u003e\u003cli\u003ePydantic model.\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eâ”€â”€\u003c/p\u003e\u003cp\u003e\u003cmark\u003eInteractive examples in this post\u003c/mark\u003e are powered by \u003ca href=\"https://codapi.org/\"\u003e\u003cstrong\u003ecodapi\u003c/strong\u003e\u003c/a\u003e â€” an open source tool I\u0026#39;m building. Use it to embed live code snippets into your product docs, online course or blog.\u003c/p\u003e\u003cscript defer=\"\" src=\"/modules/codapi/snippet.js\"\u003e\u003c/script\u003e\u003cp\u003e\u003cem\u003e\u003ca href=\"/subscribe/\"\u003e\u003ci class=\"fas fa-star\"\u003e\u003c/i\u003eÂ \u003cstrong\u003eSubscribe\u003c/strong\u003e\u003c/a\u003e\nto keep up with new posts.\u003c/em\u003e\u003c/p\u003e\u003c/div\u003e\u003c/div\u003e\u003cfooter class=\"post__footer\"\u003e\u003cdiv class=\"row\"\u003e\u003cdiv class=\"col-xs-12\"\u003e\u003cdiv class=\"post__date\"\u003e\u003ctime datetime=\"2022-05-13 20:25:00 +0000 UTC\"\u003e13 May, 2022\u003c/time\u003e\u003c/div\u003e\u003cdiv class=\"post__tags\"\u003e\u003ca href=\"/tags/python/\"\u003epython\u003c/a\u003eÂ \u003c/div\u003e\u003c/div\u003e\u003c/div\u003e\u003c/footer\u003e\u003c/article\u003e",
  "Date": "2022-05-13T20:25:00Z",
  "Author": "Anton Zhiyanov"
}