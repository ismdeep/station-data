{
  "Source": "arthurchiao.art",
  "Title": "[è¯‘] [è®ºæ–‡] BBRï¼šåŸºäºæ‹¥å¡ï¼ˆè€Œéä¸¢åŒ…ï¼‰çš„æ‹¥å¡æ§åˆ¶ï¼ˆACM, 2017ï¼‰",
  "Link": "https://arthurchiao.art/blog/bbr-paper-zh/",
  "Content": "\u003cdiv class=\"post\"\u003e\n  \n  \u003ch1 class=\"postTitle\"\u003e[è¯‘] [è®ºæ–‡] BBRï¼šåŸºäºæ‹¥å¡ï¼ˆè€Œéä¸¢åŒ…ï¼‰çš„æ‹¥å¡æ§åˆ¶ï¼ˆACM, 2017ï¼‰\u003c/h1\u003e\n  \u003cp class=\"meta\"\u003ePublished at 2022-01-02 | Last Update 2022-01-02\u003c/p\u003e\n  \n  \u003ch3 id=\"è¯‘è€…åº\"\u003eè¯‘è€…åº\u003c/h3\u003e\n\n\u003cp\u003eæœ¬æ–‡ç¿»è¯‘è‡ª Google 2017 çš„è®ºæ–‡ï¼š\u003c/p\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003eCardwell N, Cheng Y, Gunn CS, Yeganeh SH, Jacobson V.\n\u003ca href=\"https://queue.acm.org/detail.cfm?id=3022184\"\u003eBBR: congestion-based congestion control\u003c/a\u003e.\nCommunications of the ACM. 2017 Jan 23;60(2):58-66.\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eè®ºæ–‡å‰¯æ ‡é¢˜ï¼šMeasuring \u003cstrong\u003e\u003cmark\u003eB\u003c/mark\u003e\u003c/strong\u003eottleneck \u003cstrong\u003e\u003cmark\u003eB\u003c/mark\u003e\u003c/strong\u003eandwidth and\n\u003cstrong\u003e\u003cmark\u003eR\u003c/mark\u003e\u003c/strong\u003eound-trip propagation timeï¼ˆæµ‹é‡ç“¶é¢ˆå¸¦å®½å’Œå¾€è¿”ä¼ è¾“æ—¶é—´ï¼‰ã€‚\u003c/p\u003e\n\n\u003cp\u003eBBR ä¹‹å‰ï¼Œä¸»æµçš„ TCP æ‹¥å¡æ§åˆ¶ç®—æ³•éƒ½æ˜¯åŸºäº\u003cstrong\u003e\u003cmark\u003eä¸¢åŒ…\u003c/mark\u003e\u003c/strong\u003eï¼ˆloss-basedï¼‰è®¾è®¡çš„ï¼Œ\nè¿™ä¸€å‡è®¾æœ€æ—©å¯è¿½æº¯åˆ°ä¸Šä¸–çºªå…«ä¹åå¹´ä»£ï¼Œé‚£æ—¶çš„é“¾è·¯å¸¦å®½å’Œå†…å­˜å®¹é‡åˆ†åˆ«ä»¥ Mbps å’Œ KB\nè®¡ï¼Œé“¾è·¯è´¨é‡ï¼ˆä»¥ä»Šå¤©çš„æ ‡å‡†æ¥è¯´ï¼‰ä¹Ÿå¾ˆå·®ã€‚\u003c/p\u003e\n\n\u003cp\u003eä¸‰åå¹´å¤šåï¼Œè¿™ä¸¤ä¸ªç‰©ç†å®¹é‡éƒ½å·²ç»å¢é•¿äº†è‡³å°‘å…­ä¸ªæ•°é‡çº§ï¼Œé“¾è·¯è´¨é‡ä¹Ÿä¸å¯åŒæ—¥è€Œè¯­ã€‚ç‰¹åˆ«åœ°ï¼Œåœ¨ç°ä»£åŸºç¡€è®¾æ–½ä¸­ï¼Œ\n\u003cstrong\u003e\u003cmark\u003eä¸¢åŒ…å’Œå»¶è¿Ÿä¸ä¸€å®šè¡¨ç¤ºç½‘ç»œå‘ç”Ÿäº†æ‹¥å¡\u003c/mark\u003e\u003c/strong\u003eï¼Œå› æ­¤åŸæ¥çš„å‡è®¾å·²ç»ä¸å†æˆç«‹ã€‚\nGoogle çš„ç½‘ç»œå›¢é˜Ÿä»è¿™ä¸€\u003cstrong\u003e\u003cmark\u003eæ ¹æœ¬é—®é¢˜\u003c/mark\u003e\u003c/strong\u003eå‡ºå‘ï¼Œï¼ˆåœ¨å‰äººå·¥ä½œçš„åŸºç¡€ä¸Šï¼‰\nè®¾è®¡å¹¶å®ç°äº†ä¸€ä¸ª\u003cstrong\u003e\u003cmark\u003eåŸºäºæ‹¥å¡æœ¬èº«\u003c/mark\u003e\u003c/strong\u003eè€ŒéåŸºäºä¸¢åŒ…æˆ–å»¶è¿Ÿçš„æ‹¥å¡æ§åˆ¶æ–°ç®—æ³•ï¼Œç¼©å†™ä¸º BBRã€‚\u003c/p\u003e\n\n\u003cp\u003eç®€å•æ¥è¯´ï¼ŒBBR é€šè¿‡\u003cstrong\u003e\u003cmark\u003eåº”ç­”åŒ…ï¼ˆACKï¼‰ä¸­çš„ RTT ä¿¡æ¯\u003c/mark\u003e\u003c/strong\u003eå’Œå·²å‘é€å­—èŠ‚æ•°æ¥è®¡ç®—\n\u003cstrong\u003e\u003cmark\u003eçœŸå®ä¼ è¾“é€Ÿç‡\u003c/mark\u003e\u003c/strong\u003eï¼ˆdelivery rateï¼‰ï¼Œç„¶åæ ¹æ®åè€…æ¥è°ƒèŠ‚å®¢æˆ·ç«¯æ¥ä¸‹æ¥çš„\n\u003cstrong\u003e\u003cmark\u003eå‘é€é€Ÿç‡\u003c/mark\u003e\u003c/strong\u003eï¼ˆsending rateï¼‰ï¼Œé€šè¿‡ä¿æŒåˆç†çš„ inflight æ•°æ®é‡æ¥ä½¿\n\u003cstrong\u003e\u003cmark\u003eä¼ è¾“å¸¦å®½æœ€å¤§ã€ä¼ è¾“å»¶è¿Ÿæœ€ä½\u003c/mark\u003e\u003c/strong\u003eã€‚å¦å¤–ï¼Œå®ƒå®Œå…¨è¿è¡Œåœ¨å‘é€ç«¯ï¼Œæ— éœ€åè®®ã€\næ¥æ”¶ç«¯æˆ–ç½‘ç»œçš„æ”¹åŠ¨ï¼Œå› æ­¤è½åœ°ç›¸å¯¹å®¹æ˜“ã€‚\u003c/p\u003e\n\n\u003cp\u003eGoogle çš„å…¨çƒå¹¿åŸŸç½‘ï¼ˆB4ï¼‰åœ¨ 2016 å¹´å°±å·²ç»å°†å…¨éƒ¨ TCP æµé‡ä» CUBIC åˆ‡æ¢åˆ° BBRï¼Œ\nååæå‡äº† 2~25 å€ï¼›åœ¨åšäº†ä¸€äº›é…ç½®è°ƒä¼˜ä¹‹åï¼Œç”šè‡³è¿›ä¸€æ­¥æå‡åˆ°äº† 133 å€ï¼ˆæ–‡ä¸­æœ‰è¯¦ç»†ä»‹ç»ï¼‰ã€‚\u003c/p\u003e\n\n\u003cp\u003eLinux å®ç°ï¼š\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003einclude/uapi/linux/inet_diag.h\u003c/code\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003enet/ipv4/tcp_bbr.c\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eç¿»è¯‘æ—¶é€‚å½“åŠ å…¥äº†ä¸€äº›å°æ ‡é¢˜ï¼Œå¦å¤–æ’å…¥äº†ä¸€äº›å†…æ ¸ä»£ç ç‰‡æ®µï¼ˆåŸºäºå†…æ ¸ \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e5.10\u003c/code\u003eï¼‰ï¼Œä»¥æ›´æ–¹ä¾¿ç†è§£ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eç”±äºè¯‘è€…æ°´å¹³æœ‰é™ï¼Œæœ¬æ–‡ä¸å…å­˜åœ¨é—æ¼æˆ–é”™è¯¯ä¹‹å¤„ã€‚å¦‚æœ‰ç–‘é—®ï¼Œè¯·æŸ¥é˜…åŸæ–‡ã€‚\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eä»¥ä¸‹æ˜¯è¯‘æ–‡ã€‚\u003c/p\u003e\n\n\u003chr/\u003e\n\n\u003cul id=\"markdown-toc\"\u003e\n  \u003cli\u003e\u003ca href=\"#è¯‘è€…åº\" id=\"markdown-toc-è¯‘è€…åº\"\u003eè¯‘è€…åº\u003c/a\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#1-æ‹¥å¡å’Œç“¶é¢ˆcongestion-and-bottlenecks\" id=\"markdown-toc-1-æ‹¥å¡å’Œç“¶é¢ˆcongestion-and-bottlenecks\"\u003e1 æ‹¥å¡å’Œç“¶é¢ˆï¼ˆCongestion and Bottlenecksï¼‰\u003c/a\u003e    \u003cul\u003e\n      \u003cli\u003e\u003ca href=\"#11-ä¸¤ä¸ªç‰©ç†ç‰¹æ€§ä¼ è¾“æ—¶å»¶rtpropå’Œç“¶é¢ˆå¸¦å®½btlbw\" id=\"markdown-toc-11-ä¸¤ä¸ªç‰©ç†ç‰¹æ€§ä¼ è¾“æ—¶å»¶rtpropå’Œç“¶é¢ˆå¸¦å®½btlbw\"\u003e1.1 ä¸¤ä¸ªç‰©ç†ç‰¹æ€§ï¼šä¼ è¾“æ—¶å»¶ï¼ˆRTpropï¼‰å’Œç“¶é¢ˆå¸¦å®½ï¼ˆBtlBwï¼‰\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#12-ä¼ è¾“æ—¶å»¶ç“¶é¢ˆå¸¦å®½ä¸-inflight-æ•°æ®é‡çš„å…³ç³»\" id=\"markdown-toc-12-ä¼ è¾“æ—¶å»¶ç“¶é¢ˆå¸¦å®½ä¸-inflight-æ•°æ®é‡çš„å…³ç³»\"\u003e1.2 ä¼ è¾“æ—¶å»¶/ç“¶é¢ˆå¸¦å®½ä¸ inflight æ•°æ®é‡çš„å…³ç³»\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#13-ä»¥ä¸Šå…³ç³»çš„è¿›ä¸€æ­¥è§£é‡Š\" id=\"markdown-toc-13-ä»¥ä¸Šå…³ç³»çš„è¿›ä¸€æ­¥è§£é‡Š\"\u003e1.3 ä»¥ä¸Šå…³ç³»çš„è¿›ä¸€æ­¥è§£é‡Š\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#14-æ‹¥å¡å’Œæ‹¥å¡æ§åˆ¶çš„ç›´è§‚å«ä¹‰\" id=\"markdown-toc-14-æ‹¥å¡å’Œæ‹¥å¡æ§åˆ¶çš„ç›´è§‚å«ä¹‰\"\u003e1.4 æ‹¥å¡å’Œæ‹¥å¡æ§åˆ¶çš„ç›´è§‚å«ä¹‰\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#15-åŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶å·¥ä½œæœºåˆ¶\" id=\"markdown-toc-15-åŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶å·¥ä½œæœºåˆ¶\"\u003e1.5 åŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶å·¥ä½œæœºåˆ¶\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#16-æ›´å¥½çš„å·¥ä½œæœºåˆ¶åŠå­˜åœ¨çš„æŒ‘æˆ˜\" id=\"markdown-toc-16-æ›´å¥½çš„å·¥ä½œæœºåˆ¶åŠå­˜åœ¨çš„æŒ‘æˆ˜\"\u003e1.6 æ›´å¥½çš„å·¥ä½œæœºåˆ¶åŠå­˜åœ¨çš„æŒ‘æˆ˜\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#17-bbråŸºäºå¯¹ä¸¤ä¸ªå‚æ•°rtpropbtlbwçš„æµ‹é‡å®ç°æ‹¥å¡æ§åˆ¶\" id=\"markdown-toc-17-bbråŸºäºå¯¹ä¸¤ä¸ªå‚æ•°rtpropbtlbwçš„æµ‹é‡å®ç°æ‹¥å¡æ§åˆ¶\"\u003e1.7 BBRï¼šåŸºäºå¯¹ä¸¤ä¸ªå‚æ•°ï¼ˆRTpropã€BtlBwï¼‰çš„æµ‹é‡å®ç°æ‹¥å¡æ§åˆ¶\u003c/a\u003e\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#2-ç“¶é¢ˆçš„æ•°å­¦è¡¨ç¤ºcharacterizing-the-bottleneck\" id=\"markdown-toc-2-ç“¶é¢ˆçš„æ•°å­¦è¡¨ç¤ºcharacterizing-the-bottleneck\"\u003e2 ç“¶é¢ˆçš„æ•°å­¦è¡¨ç¤ºï¼ˆCharacterizing the Bottleneckï¼‰\u003c/a\u003e    \u003cul\u003e\n      \u003cli\u003e\u003ca href=\"#21-æœ€å°åŒ–ç¼“å†²åŒºç§¯å‹æˆ–æœ€é«˜ååæœ€ä½å»¶è¿Ÿéœ€æ»¡è¶³çš„æ¡ä»¶\" id=\"markdown-toc-21-æœ€å°åŒ–ç¼“å†²åŒºç§¯å‹æˆ–æœ€é«˜ååæœ€ä½å»¶è¿Ÿéœ€æ»¡è¶³çš„æ¡ä»¶\"\u003e2.1 æœ€å°åŒ–ç¼“å†²åŒºç§¯å‹ï¼ˆæˆ–æœ€é«˜åå+æœ€ä½å»¶è¿Ÿï¼‰éœ€æ»¡è¶³çš„æ¡ä»¶\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#22-æ— åä¼°è®¡unbiased-estimator\" id=\"markdown-toc-22-æ— åä¼°è®¡unbiased-estimator\"\u003e2.2 æ— åä¼°è®¡ï¼ˆunbiased estimatorï¼‰\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#23-ä¼ è¾“æ—¶å»¶rtpropçš„è¡¨ç¤ºä¸ä¼°è®¡\" id=\"markdown-toc-23-ä¼ è¾“æ—¶å»¶rtpropçš„è¡¨ç¤ºä¸ä¼°è®¡\"\u003e2.3 ä¼ è¾“æ—¶å»¶ï¼ˆRTPropï¼‰çš„è¡¨ç¤ºä¸ä¼°è®¡\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#24-ç“¶é¢ˆå¸¦å®½btlbwçš„è¡¨ç¤ºä¸ä¼°è®¡\" id=\"markdown-toc-24-ç“¶é¢ˆå¸¦å®½btlbwçš„è¡¨ç¤ºä¸ä¼°è®¡\"\u003e2.4 ç“¶é¢ˆå¸¦å®½ï¼ˆBtlBwï¼‰çš„è¡¨ç¤ºä¸ä¼°è®¡\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#25-bbr-æµ‹é‡æœºåˆ¶\" id=\"markdown-toc-25-bbr-æµ‹é‡æœºåˆ¶\"\u003e2.5 BBR æµ‹é‡æœºåˆ¶\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#26-ä¸ç¡®å®šæ€§åŸç†\" id=\"markdown-toc-26-ä¸ç¡®å®šæ€§åŸç†\"\u003e2.6 ä¸ç¡®å®šæ€§åŸç†\u003c/a\u003e\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#3-ä½¿æ•°æ®æµpacket-flowä¸ä¼ è¾“è·¯å¾„delivery-pathç›¸åŒ¹é…\" id=\"markdown-toc-3-ä½¿æ•°æ®æµpacket-flowä¸ä¼ è¾“è·¯å¾„delivery-pathç›¸åŒ¹é…\"\u003e3 ä½¿æ•°æ®æµï¼ˆPacket Flowï¼‰ä¸ä¼ è¾“è·¯å¾„ï¼ˆDelivery Pathï¼‰ç›¸åŒ¹é…\u003c/a\u003e    \u003cul\u003e\n      \u003cli\u003e\u003ca href=\"#31-bbr-æ”¶åˆ°åº”ç­”åŒ…ackæ—¶çš„é€»è¾‘\" id=\"markdown-toc-31-bbr-æ”¶åˆ°åº”ç­”åŒ…ackæ—¶çš„é€»è¾‘\"\u003e3.1 BBR æ”¶åˆ°åº”ç­”åŒ…ï¼ˆACKï¼‰æ—¶çš„é€»è¾‘\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#32-tcp-pacingåœ¨æ¯ä¸ª-rtt-çª—å£å†…å‡åŒ€å‘é€æ•°æ®\" id=\"markdown-toc-32-tcp-pacingåœ¨æ¯ä¸ª-rtt-çª—å£å†…å‡åŒ€å‘é€æ•°æ®\"\u003e3.2 TCP Pacingï¼ˆåœ¨æ¯ä¸ª RTT çª—å£å†…å‡åŒ€å‘é€æ•°æ®ï¼‰\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#33-bbr-å‘é€æ•°æ®æ—¶çš„é€»è¾‘\" id=\"markdown-toc-33-bbr-å‘é€æ•°æ®æ—¶çš„é€»è¾‘\"\u003e3.3 BBR å‘é€æ•°æ®æ—¶çš„é€»è¾‘\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#34-ç¨³æ€è¡Œä¸ºsteady-state-behavior\" id=\"markdown-toc-34-ç¨³æ€è¡Œä¸ºsteady-state-behavior\"\u003e3.4 ç¨³æ€è¡Œä¸ºï¼ˆSteady-state behaviorï¼‰\u003c/a\u003e        \u003cul\u003e\n          \u003cli\u003e\u003ca href=\"#è·¯å¾„é€‚é…ä¸æ§åˆ¶å¾ªç¯\" id=\"markdown-toc-è·¯å¾„é€‚é…ä¸æ§åˆ¶å¾ªç¯\"\u003eè·¯å¾„é€‚é…ä¸æ§åˆ¶å¾ªç¯\u003c/a\u003e\u003c/li\u003e\n          \u003cli\u003e\u003ca href=\"#ç¨³æ€çš„æ”¶æ•›è¿‡ç¨‹\" id=\"markdown-toc-ç¨³æ€çš„æ”¶æ•›è¿‡ç¨‹\"\u003eç¨³æ€çš„æ”¶æ•›è¿‡ç¨‹\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n      \u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#4-bbr-flow-è¡Œä¸º\" id=\"markdown-toc-4-bbr-flow-è¡Œä¸º\"\u003e4 BBR Flow è¡Œä¸º\u003c/a\u003e    \u003cul\u003e\n      \u003cli\u003e\u003ca href=\"#41-bbr-çŠ¶æ€æœº\" id=\"markdown-toc-41-bbr-çŠ¶æ€æœº\"\u003e4.1 BBR çŠ¶æ€æœº\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#42-å•æ¡-bbr-flow-çš„å¯åŠ¨æ—¶è¡Œä¸º\" id=\"markdown-toc-42-å•æ¡-bbr-flow-çš„å¯åŠ¨æ—¶è¡Œä¸º\"\u003e4.2 å•æ¡ BBR flow çš„å¯åŠ¨æ—¶è¡Œä¸º\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#43-å…±äº«åŒä¸€ç“¶é¢ˆçš„å¤šæ¡-bbr-flow-çš„è¡Œä¸º\" id=\"markdown-toc-43-å…±äº«åŒä¸€ç“¶é¢ˆçš„å¤šæ¡-bbr-flow-çš„è¡Œä¸º\"\u003e4.3 å…±äº«åŒä¸€ç“¶é¢ˆçš„å¤šæ¡ BBR flow çš„è¡Œä¸º\u003c/a\u003e\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#5-éƒ¨ç½²ç»éªŒ\" id=\"markdown-toc-5-éƒ¨ç½²ç»éªŒ\"\u003e5 éƒ¨ç½²ç»éªŒ\u003c/a\u003e    \u003cul\u003e\n      \u003cli\u003e\u003ca href=\"#51-google-b4-å¹¿åŸŸç½‘wanéƒ¨ç½²ç»éªŒ\" id=\"markdown-toc-51-google-b4-å¹¿åŸŸç½‘wanéƒ¨ç½²ç»éªŒ\"\u003e5.1 Google B4 å¹¿åŸŸç½‘ï¼ˆWANï¼‰éƒ¨ç½²ç»éªŒ\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#52-youtube-è¾¹ç¼˜ç½‘ç»œéƒ¨ç½²ç»éªŒ\" id=\"markdown-toc-52-youtube-è¾¹ç¼˜ç½‘ç»œéƒ¨ç½²ç»éªŒ\"\u003e5.2 YouTube è¾¹ç¼˜ç½‘ç»œéƒ¨ç½²ç»éªŒ\u003c/a\u003e\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#6-é—®é¢˜è®¨è®º\" id=\"markdown-toc-6-é—®é¢˜è®¨è®º\"\u003e6 é—®é¢˜è®¨è®º\u003c/a\u003e    \u003cul\u003e\n      \u003cli\u003e\u003ca href=\"#61-ç§»åŠ¨èœ‚çªç½‘ç»œä¸­çš„è‡ªé€‚åº”å¸¦å®½\" id=\"markdown-toc-61-ç§»åŠ¨èœ‚çªç½‘ç»œä¸­çš„è‡ªé€‚åº”å¸¦å®½\"\u003e6.1 ç§»åŠ¨èœ‚çªç½‘ç»œä¸­çš„è‡ªé€‚åº”å¸¦å®½\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#62-å»¶è¿Ÿå’Œèšåˆåº”ç­”\" id=\"markdown-toc-62-å»¶è¿Ÿå’Œèšåˆåº”ç­”\"\u003e6.2 å»¶è¿Ÿå’Œèšåˆåº”ç­”\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#63-å…¥å‘æµé‡æ•´å½¢token-bucket-policers\" id=\"markdown-toc-63-å…¥å‘æµé‡æ•´å½¢token-bucket-policers\"\u003e6.3 å…¥å‘æµé‡æ•´å½¢ï¼ˆToken-Bucket Policersï¼‰\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#64-ä¸åŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶çš„ç«äº‰\" id=\"markdown-toc-64-ä¸åŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶çš„ç«äº‰\"\u003e6.4 ä¸åŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶çš„ç«äº‰\u003c/a\u003e\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#7-æ€»ç»“\" id=\"markdown-toc-7-æ€»ç»“\"\u003e7 æ€»ç»“\u003c/a\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#è‡´è°¢\" id=\"markdown-toc-è‡´è°¢\"\u003eè‡´è°¢\u003c/a\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#é™„å½•è¯¦ç»†æè¿°\" id=\"markdown-toc-é™„å½•è¯¦ç»†æè¿°\"\u003eé™„å½•ï¼šè¯¦ç»†æè¿°\u003c/a\u003e    \u003cul\u003e\n      \u003cli\u003e\u003ca href=\"#é¡ºåºæ¢æµ‹çŠ¶æ€æœºa-state-machine-for-sequential-probing\" id=\"markdown-toc-é¡ºåºæ¢æµ‹çŠ¶æ€æœºa-state-machine-for-sequential-probing\"\u003eé¡ºåºæ¢æµ‹çŠ¶æ€æœºï¼ˆA State Machine for Sequential Probingï¼‰\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#ç¨³æ€è¡Œä¸ºsteady-state-behavior\" id=\"markdown-toc-ç¨³æ€è¡Œä¸ºsteady-state-behavior\"\u003eç¨³æ€è¡Œä¸ºï¼ˆSteady-State Behaviorï¼‰\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#å¯åŠ¨è¡Œä¸ºstartup-behavior\" id=\"markdown-toc-å¯åŠ¨è¡Œä¸ºstartup-behavior\"\u003eå¯åŠ¨è¡Œä¸ºï¼ˆStartup Behaviorï¼‰\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#åº”å¯¹çªå‘æµé‡reacting-to-transients\" id=\"markdown-toc-åº”å¯¹çªå‘æµé‡reacting-to-transients\"\u003eåº”å¯¹çªå‘æµé‡ï¼ˆReacting to Transientsï¼‰\u003c/a\u003e\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#references\" id=\"markdown-toc-references\"\u003eReferences\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003chr/\u003e\n\n\u003cp\u003eä»å„æ–¹é¢æ¥è¯´ï¼Œä»Šå¤©çš„äº’è”ç½‘\u003cstrong\u003e\u003cmark\u003eä¼ è¾“æ•°æ®çš„é€Ÿåº¦\u003c/mark\u003e\u003c/strong\u003eéƒ½ä¸ç”šç†æƒ³ï¼š\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eå¤§éƒ¨åˆ†ç§»åŠ¨ç”¨æˆ·éƒ½åœ¨å¿å—æ•°ç§’ä¹ƒè‡³æ•°åˆ†é’Ÿçš„å»¶è¿Ÿï¼›\u003c/li\u003e\n  \u003cli\u003eæœºåœºå’Œå¤§ä¼šåœºé¦†çš„å…±äº« WIFI ä¿¡å·ä¸€èˆ¬éƒ½å¾ˆå·®ï¼›\u003c/li\u003e\n  \u003cli\u003eç‰©ç†å’Œæ°”å€™å­¦å®¶éœ€è¦ä¸å…¨çƒåˆä½œè€…äº¤æ¢ PB çº§çš„æ•°æ®ï¼Œæœ€åå´å‘ç°ç²¾å¿ƒè®¾è®¡çš„ Gbps\nåŸºç¡€è®¾æ–½åœ¨\u003cstrong\u003e\u003cmark\u003eè·¨å¤§æ´²é€šä¿¡æ—¶\u003c/mark\u003e\u003c/strong\u003eå¸¦å®½ç»å¸¸åªèƒ½è¾¾åˆ° Mbps\u003csup\u003e6\u003c/sup\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eè¿™äº›é—®é¢˜æ˜¯ç”± \u003cstrong\u003e\u003cmark\u003eTCP çš„è®¾è®¡å¯¼è‡´çš„ â€”â€” 20 ä¸–çºª 80 å¹´ä»£è®¾è®¡ TCP æ‹¥å¡æ§åˆ¶\u003c/mark\u003e\u003c/strong\u003eï¼ˆcongestion controlï¼‰\næ—¶ï¼Œè®¤ä¸º\u003cstrong\u003e\u003cmark\u003eä¸¢åŒ…æ˜¯å‘ç”Ÿäº†â€œæ‹¥å¡â€\u003c/mark\u003e\u003c/strong\u003e\u003csup\u003e13\u003c/sup\u003eã€‚\nåœ¨å½“æ—¶çš„æŠ€æœ¯æ¡ä»¶ä¸‹æˆ‘ä»¬å¯ä»¥è¿™æ ·è®¤ä¸ºï¼Œä½†å®ƒ\u003cstrong\u003e\u003cmark\u003eå¹¶éç¬¬ä¸€åŸåˆ™\u003c/mark\u003e\u003c/strong\u003e\nï¼ˆtechnology limitations, not first principlesï¼‰ã€‚éšç€ç½‘å¡ä» Mbps åˆ° Gbpsã€\nå†…å­˜ä» KB åˆ° GBï¼Œ\u003cstrong\u003e\u003cmark\u003eä¸¢åŒ…å’Œæ‹¥å¡ä¹‹é—´çš„å…³ç³»ä¹Ÿå˜å¾—æ„ˆå‘å¾®å¼±\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/p\u003e\n\n\u003cp\u003eä»Šå¤©ï¼ŒTCP é‚£äº›\u003cstrong\u003e\u003cmark\u003eåŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶\u003c/mark\u003e\u003c/strong\u003eï¼ˆloss-based congestion controlï¼‰ â€”â€”\nå³ä½¿æ˜¯ç›®å‰å…¶ä¸­æœ€å¥½çš„ CUBIC\u003csup\u003e11\u003c/sup\u003e â€”â€” æ˜¯\u003cstrong\u003e\u003cmark\u003eå¯¼è‡´è¿™äº›é—®é¢˜çš„ä¸»è¦åŸå› \u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eé“¾è·¯ç“¶é¢ˆå¤„çš„ buffer å¾ˆå¤§æ—¶ï¼Œè¿™ç±»ç®—æ³•ä¼š\u003cstrong\u003e\u003cmark\u003eæŒç»­å æ»¡æ•´ä¸ªç¼“å†²åŒº\u003c/mark\u003e\u003c/strong\u003eï¼Œå¯¼è‡´ \u003cstrong\u003e\u003cmark\u003ebufferbloat\u003c/mark\u003e\u003c/strong\u003eï¼›\u003c/li\u003e\n  \u003cli\u003eé“¾è·¯ç“¶é¢ˆå¤„çš„ buffer å¾ˆå°æ—¶ï¼Œè¿™ç±»ç®—æ³•åˆä¼š\u003cstrong\u003e\u003cmark\u003eè¯¯å°†ä¸¢åŒ…å½“ä½œæ‹¥å¡çš„ä¿¡å·\u003c/mark\u003e\u003c/strong\u003eï¼Œå¯¼è‡´\u003cstrong\u003e\u003cmark\u003eååå¾ˆä½\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eè§£å†³è¿™äº›é—®é¢˜éœ€è¦ä¸€ç§å…¨æ–°çš„æ–¹å¼ï¼Œè€Œè¿™é¦–å…ˆéœ€è¦å¯¹ä»¥ä¸‹ä¸¤ç‚¹æœ‰æ·±å…¥ç†è§£ï¼š\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003e\u003cstrong\u003e\u003cmark\u003eæ‹¥å¡ä¼šå‘ç”Ÿå“ªé‡Œ\u003c/mark\u003e\u003c/strong\u003eï¼ˆwhereï¼‰\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003e\u003cmark\u003eæ‹¥å¡æ˜¯å¦‚ä½•å‘ç”Ÿçš„\u003c/mark\u003e\u003c/strong\u003eï¼ˆhowï¼‰\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch1 id=\"1-æ‹¥å¡å’Œç“¶é¢ˆcongestion-and-bottlenecks\"\u003e1 æ‹¥å¡å’Œç“¶é¢ˆï¼ˆCongestion and Bottlenecksï¼‰\u003c/h1\u003e\n\n\u003ch2 id=\"11-ä¸¤ä¸ªç‰©ç†ç‰¹æ€§ä¼ è¾“æ—¶å»¶rtpropå’Œç“¶é¢ˆå¸¦å®½btlbw\"\u003e1.1 ä¸¤ä¸ªç‰©ç†ç‰¹æ€§ï¼šä¼ è¾“æ—¶å»¶ï¼ˆRTpropï¼‰å’Œç“¶é¢ˆå¸¦å®½ï¼ˆBtlBwï¼‰\u003c/h2\u003e\n\n\u003cp\u003eå¯¹äºä¸€ä¸ªï¼ˆå…¨åŒå·¥ï¼‰TCP è¿æ¥ï¼Œåœ¨ä»»æ„æ—¶åˆ»ï¼Œå®ƒåœ¨æ¯ä¸ªæ–¹å‘éƒ½æœ‰ä¸”åªæœ‰\u003cstrong\u003e\u003cmark\u003eä¸€æ®µæœ€æ…¢çš„é“¾è·¯\u003c/mark\u003e\u003c/strong\u003e\nï¼ˆexactly one slowest linkï¼‰æˆ–ç§°\u003cstrong\u003e\u003cmark\u003eç“¶é¢ˆ\u003c/mark\u003e\u003c/strong\u003eï¼ˆbottleneckï¼‰ã€‚è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œå› ä¸ºï¼š\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003e\n    \u003cp\u003eç“¶é¢ˆ\u003cstrong\u003e\u003cmark\u003eå†³å®šäº†è¿æ¥çš„æœ€å¤§æ•°æ®ä¼ è¾“é€Ÿç‡\u003c/mark\u003e\u003c/strong\u003eã€‚è¿™æ˜¯\u003cstrong\u003e\u003cmark\u003eä¸å¯å‹ç¼©æµ\u003c/mark\u003e\u003c/strong\u003eï¼ˆincompressible flowï¼‰çš„ä¸€ä¸ªå¸¸è§„ç‰¹æ€§ã€‚\u003c/p\u003e\n\n    \u003cp\u003eä¾‹å¦‚ï¼Œè€ƒè™‘äº¤é€šé«˜å³°æœŸçš„ä¸€ä¸ªå…­è½¦é“é«˜é€Ÿå…¬è·¯ï¼Œä¸€èµ·äº¤é€šäº‹æ•…ä½¿å…¶ä¸­ä¸€æ®µå˜æˆäº†å•è½¦é“ï¼Œ\n  é‚£ä¹ˆè¿™æ•´æ¡é«˜é€Ÿå…¬è·¯çš„ååå°±ä¸ä¼šè¶…è¿‡é‚£æ¡å”¯ä¸€è¿˜åœ¨æ­£å¸¸é€šè½¦çš„è½¦é“çš„ååã€‚\u003c/p\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003eç“¶é¢ˆä¹Ÿæ˜¯\u003cstrong\u003e\u003cmark\u003eæŒä¹…é˜Ÿåˆ—ï¼ˆpersistent queuesï¼‰å½¢æˆçš„åœ°æ–¹\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/p\u003e\n\n    \u003cp\u003eå¯¹äºä¸€æ¡é“¾è·¯ï¼Œåªæœ‰å½“å®ƒçš„\u003cstrong\u003e\u003cmark\u003eç¦»å¼€é€Ÿç‡\u003c/mark\u003e\u003c/strong\u003eï¼ˆdeparture rateï¼‰å¤§äº\u003cstrong\u003e\u003cmark\u003eåˆ°è¾¾é€Ÿç‡\u003c/mark\u003e\u003c/strong\u003eï¼ˆarrival\n  rateï¼‰æ—¶ï¼Œè¿™ä¸ªé˜Ÿåˆ—æ‰ä¼šå¼€å§‹æ”¶ç¼©ã€‚å¯¹äºä¸€æ¡æœ‰å¤šæ®µé“¾è·¯ã€è¿è¡Œåœ¨æœ€å¤§ä¼ è¾“é€Ÿç‡çš„è¿\n  æ¥ï¼ˆconnectionï¼‰ï¼Œé™¤ç“¶é¢ˆç‚¹ä¹‹å¤–çš„åœ°æ–¹éƒ½æœ‰æ›´å¤§çš„ç¦»å¼€é€Ÿç‡ï¼Œå› æ­¤é˜Ÿåˆ—ä¼šæœç€ç“¶é¢ˆ\n  ç§»åŠ¨ï¼ˆmigrate to the bottleneckï¼‰ã€‚\u003c/p\u003e\n  \u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eä¸ç®¡ä¸€æ¡è¿æ¥ä¼šç»è¿‡å¤šå°‘æ¡é“¾è·¯ï¼Œä»¥åŠæ¯æ¡é“¾è·¯çš„é€Ÿåº¦æ˜¯å¤šå°‘ï¼Œä» TCP çš„è§’åº¦æ¥çœ‹ï¼Œ\nä»»ä½•ä¸€æ¡å¤æ‚è·¯å¾„çš„è¡Œä¸ºï¼Œä¸ RTTï¼ˆround-trip timeï¼‰åŠç“¶é¢ˆé€Ÿç‡ç›¸åŒçš„å•æ¡é“¾è·¯çš„è¡Œä¸ºæ˜¯ä¸€æ ·çš„ã€‚\næ¢å¥è¯è¯´ï¼Œ\u003cstrong\u003e\u003cmark\u003eä»¥ä¸‹ä¸¤ä¸ªç‰©ç†ç‰¹æ€§å†³å®šäº†ä¼ è¾“çš„æ€§èƒ½\u003c/mark\u003e\u003c/strong\u003eï¼š\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003eRTprop\u003c/code\u003e (round-trip propagation time)ï¼šå¾€è¿”ä¼ è¾“æ—¶é—´\u003c/li\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003eBtlBw\u003c/code\u003e (bottleneck bandwidth)ï¼šç“¶é¢ˆå¸¦å®½\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003eå¦‚æœç½‘ç»œè·¯å¾„æ˜¯ä¸€æ¡ç‰©ç†ç®¡é“ï¼Œé‚£ RTprop å°±æ˜¯ç®¡é“çš„\u003cstrong\u003e\u003cmark\u003eé•¿åº¦\u003c/mark\u003e\u003c/strong\u003eï¼Œè€Œ\nBtlBw åˆ™æ˜¯ç®¡é“\u003cstrong\u003e\u003cmark\u003eæœ€çª„å¤„çš„ç›´å¾„\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch2 id=\"12-ä¼ è¾“æ—¶å»¶ç“¶é¢ˆå¸¦å®½ä¸-inflight-æ•°æ®é‡çš„å…³ç³»\"\u003e1.2 ä¼ è¾“æ—¶å»¶/ç“¶é¢ˆå¸¦å®½ä¸ inflight æ•°æ®é‡çš„å…³ç³»\u003c/h2\u003e\n\n\u003cp\u003eå›¾ 1 å±•ç¤ºäº† \u003cstrong\u003e\u003cmark\u003einflight æ•°æ®é‡\u003c/mark\u003e\u003c/strong\u003eï¼ˆå·²å‘é€ä½†è¿˜æœªè¢«ç¡®è®¤çš„æ•°æ®é‡ï¼‰ä¸æ–­å¢å¤§æ—¶ï¼Œ\nRTT å’Œä¼ è¾“é€Ÿç‡ï¼ˆdelivery rateï¼‰çš„å˜åŒ–æƒ…å†µï¼š\u003c/p\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003eç›´è§‚ä¸Šï¼Œè¿™å¼ å›¾æƒ³è§£é‡Šçš„æ˜¯ï¼šéšç€\u003cstrong\u003e\u003cmark\u003eæ­£åœ¨ä¼ è¾“ä¸­çš„æ•°æ®çš„ä¸æ–­å¢å¤šï¼Œä¼ è¾“å»¶è¿Ÿå’Œä¼ è¾“é€Ÿç‡å°†å¦‚ä½•å˜åŒ–\u003c/mark\u003e\u003c/strong\u003eã€‚\néš¾ç‚¹åœ¨äºäºŒè€…å¹¶æ²¡æœ‰ç®€å•çš„å…³ç³»å¯ä»¥è¡¨ç¤ºã€‚ä¸ä»…å¦‚æ­¤ï¼Œåæ–‡è¿˜å°†çœ‹åˆ°äºŒè€…ç”šè‡³ä¸å¯åŒ\næ—¶æµ‹é‡ â€”â€” å°±åƒé‡å­åŠ›å­¦ä¸­ä½ç½®å’ŒåŠ¨é‡ä¸å¯åŒæ—¶æµ‹é‡ã€‚\nè¯‘æ³¨ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/bbr-paper/vanjacobson1.png\" width=\"50%\" height=\"50%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eFig 1. Delivery rate and RTT vs. inflight data\u003c/p\u003e\n\n\u003cblockquote\u003e\n  \u003cul\u003e\n    \u003cli\u003eè“çº¿å±•ç¤º RTprop é™åˆ¶ï¼Œ\u003c/li\u003e\n    \u003cli\u003eç»¿çº¿å±•ç¤º BtlBw é™åˆ¶ï¼Œ\u003c/li\u003e\n    \u003cli\u003eçº¢çº¿æ˜¯ç“¶é¢ˆç¼“å†²åŒºï¼ˆbottleneck bufferï¼‰\u003c/li\u003e\n  \u003c/ul\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eæ¨ªè½´è¡¨ç¤º inflight æ•°æ®é‡ï¼Œå…³é”®çš„ç‚¹æœ‰ä¸‰ä¸ªï¼Œä¾æ¬¡ä¸º \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e0 -\u0026gt; BDP -\u0026gt; BDP+BtlneckBuffSize\u003c/code\u003eï¼Œ\nåä¸¤ä¸ªç‚¹åšå‚çº¿ï¼Œå°†æ•´ä¸ªç©ºé—´åˆ†ä¸ºäº†ä¸‰ä¸ªéƒ¨åˆ†ï¼š\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003e(0, BDP)\u003c/code\u003eï¼šè¿™ä¸ªåŒºé—´å†…ï¼Œåº”ç”¨ï¼ˆå®¢æˆ·ç«¯ï¼‰å‘é€çš„æ•°æ®å¹¶æœªå æ»¡ç“¶é¢ˆå¸¦å®½ï¼ˆå®¹é‡ï¼‰ï¼Œå› æ­¤ç§°ä¸º\n  \u003cstrong\u003e\u003cmark\u003eåº”ç”¨å—é™ï¼ˆapp limitedï¼‰\u003c/mark\u003e\u003c/strong\u003eåŒºåŸŸï¼›\u003c/li\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003e(BDP, BDP+BtlneckBuffSize)\u003c/code\u003eï¼šè¿™ä¸ªåŒºé—´å†…ï¼Œå·²ç»è¾¾åˆ°é“¾è·¯ç“¶é¢ˆå®¹é‡ï¼Œä½†è¿˜æœªè¶…è¿‡\n  \u003cstrong\u003e\u003cmark\u003eç“¶é¢ˆå®¹é‡+ç¼“å†²åŒºå®¹é‡\u003c/mark\u003e\u003c/strong\u003eï¼Œæ­¤æ—¶åº”ç”¨èƒ½å‘é€çš„æ•°æ®é‡ä¸»è¦å—å¸¦å®½é™åˆ¶ï¼Œ\n  å› æ­¤ç§°ä¸º\u003cstrong\u003e\u003cmark\u003eå¸¦å®½å—é™ï¼ˆbandwidth limitedï¼‰\u003c/mark\u003e\u003c/strong\u003eåŒºåŸŸï¼›\u003c/li\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003e(BDP+BtlneckBuffSize, infinity)\u003c/code\u003eï¼šè¿™ä¸ªåŒºé—´å†…ï¼Œå®é™…å‘é€é€Ÿç‡å·²ç»è¶…è¿‡ç“¶é¢ˆå®¹é‡+ç¼“å†²åŒºå®¹é‡\nï¼Œå¤šå‡ºæ¥çš„æ•°æ®ä¼šè¢«ä¸¢å¼ƒï¼Œç¼“å†²åŒºå¤§å°å†³å®šäº†ä¸¢åŒ…å¤šå°‘ï¼Œå› æ­¤ç§°ä¸º\u003cstrong\u003e\u003cmark\u003eç¼“å†²åŒºå—é™ï¼ˆbuffer limitedï¼‰\u003c/mark\u003e\u003c/strong\u003eåŒºåŸŸã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003eä»¥ä¸Šä¸‰è€…ï¼Œä¹Ÿå¯ä»¥æ›´ç›´ç™½åœ°ç§°ä¸º\u003cstrong\u003e\u003cmark\u003eåº”ç”¨ä¸è¶³ã€å¸¦å®½ä¸è¶³ã€ç¼“å†²åŒºä¸è¶³\u003c/mark\u003e\u003c/strong\u003eåŒºåŸŸã€‚\nè¯‘æ³¨ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch2 id=\"13-ä»¥ä¸Šå…³ç³»çš„è¿›ä¸€æ­¥è§£é‡Š\"\u003e1.3 ä»¥ä¸Šå…³ç³»çš„è¿›ä¸€æ­¥è§£é‡Š\u003c/h2\u003e\n\n\u003cp\u003eæˆ‘ä»¬æ¥æ›´å…·ä½“åœ°çœ‹ä¸€ä¸‹ä¼ è¾“æ—¶å»¶ï¼ˆRTpropï¼‰å’Œç“¶é¢ˆå¸¦å®½ï¼ˆBtlBwï¼‰ä¸ä¸ inflight æ•°æ®é‡å‘ˆç°ä»¥ä¸Šå…³ç³»ï¼š\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003e\n    \u003cp\u003einflight æ•°æ®é‡åœ¨ \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e0 -\u0026gt; BDP\u003c/code\u003e åŒºé—´å†…æ—¶ï¼Œå‘é€çš„æ•°æ®è¿˜æœªè¾¾åˆ°ç“¶é¢ˆå®¹é‡ï¼Œæ­¤æ—¶ï¼Œ\u003c/p\u003e\n\n    \u003col\u003e\n      \u003cli\u003e\u003cstrong\u003e\u003cmark\u003eå¾€è¿”æ—¶é—´ä¸å˜\u003c/mark\u003e\u003c/strong\u003eï¼šå¯¹åº”ä¸ŠåŠéƒ¨åˆ†å›¾ï¼Œå› ä¸ºæ­¤æ—¶è¿˜æœªè¾¾åˆ°ç“¶é¢ˆå¸¦å®½ï¼Œé“¾è·¯ä¸ä¼šéšæ•°æ®é‡å¢åŠ è€Œå¸¦æ¥é¢å¤–å»¶è¿Ÿï¼›\u003c/li\u003e\n      \u003cli\u003e\u003cstrong\u003e\u003cmark\u003eä¼ è¾“é€Ÿç‡çº¿æ€§å¢å¤§\u003c/mark\u003e\u003c/strong\u003eï¼šå¯¹åº”ä¸‹åŠéƒ¨åˆ†å›¾ï¼›\u003c/li\u003e\n    \u003c/ol\u003e\n\n    \u003cp\u003eå› æ­¤ï¼Œè¿™ä¸ªé˜¶æ®µçš„è¡Œä¸ºç”± RTprop å†³å®šã€‚\u003c/p\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003einflight æ•°æ®é‡åˆšå¥½ç­‰äº \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eBDP\u003c/code\u003e æ—¶ï¼Œ\u003c/p\u003e\n\n    \u003col\u003e\n      \u003cli\u003eä¸¤æ¡é™åˆ¶çº¿ç›¸äº¤çš„ç‚¹ç§°ä¸º BDP ç‚¹ï¼Œè¿™ä¹Ÿæ˜¯ BDPï¼ˆbandwidth-delay productï¼Œ\u003cstrong\u003e\u003cmark\u003eå¸¦å®½-å»¶è¿Ÿä¹˜ç§¯\u003c/mark\u003e\u003c/strong\u003eï¼‰è¿™ä¸ªåç§°çš„ç”±æ¥ï¼›\u003c/li\u003e\n      \u003cli\u003eæ­¤æ—¶å¯ä»¥ç®—å‡ºï¼š\u003cstrong\u003e\u003cmark\u003e\u003ccode\u003einflight = BtlBw Ã— RTprop\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003eï¼›\u003c/li\u003e\n    \u003c/ol\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003einflight å¤§äº \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eBDP\u003c/code\u003e ä¹‹åï¼Œç®¡é“å°±æ»¡äº†ï¼ˆè¶…è¿‡ç“¶é¢ˆå¸¦å®½ï¼‰\u003c/p\u003e\n\n    \u003col\u003e\n      \u003cli\u003eè¶…è¿‡ç“¶é¢ˆå¸¦å®½çš„æ•°æ®å°±ä¼šå½¢æˆä¸€ä¸ªé˜Ÿåˆ—ï¼ˆqueueï¼‰ï¼Œå †ç§¯åœ¨é“¾è·¯ç“¶é¢ˆå¤„ï¼Œç„¶å\u003c/li\u003e\n      \u003cli\u003eRTT å°†éšç€ inflight æ•°æ®çš„å¢åŠ è€Œçº¿æ€§å¢åŠ ï¼Œå¦‚ä¸ŠåŠéƒ¨åˆ†å›¾æ‰€ç¤ºã€‚\u003c/li\u003e\n    \u003c/ol\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003einflight ç»§ç»­å¢å¤§ï¼Œè¶…è¿‡ \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eBDP+BtlneckBuffSize\u003c/code\u003e ä¹‹åï¼Œå³è¶…è¿‡é“¾è·¯ç“¶é¢ˆæ‰€æ”¯æŒçš„æœ€å¤§ç¼“å†²åŒºä¹‹åï¼Œå°±å¼€å§‹ä¸¢åŒ…ã€‚\u003c/p\u003e\n  \u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eç°è‰²åŒºåŸŸæ˜¯ä¸å¯è¾¾çš„ï¼Œå› ä¸ºå®ƒè¿åäº†è‡³å°‘å…¶ä¸­ä¸€ä¸ªé™åˆ¶ã€‚é™åˆ¶æ¡ä»¶çš„ä¸åŒå¯¼è‡´äº†ä¸‰ä¸ªå¯è¡ŒåŒºåŸŸ\nï¼ˆapp-limited, bandwidth-limited, and buffer-limitedï¼‰å„è‡ªæœ‰ä¸åŒçš„è¡Œä¸ºã€‚\u003c/p\u003e\n\n\u003ch2 id=\"14-æ‹¥å¡å’Œæ‹¥å¡æ§åˆ¶çš„ç›´è§‚å«ä¹‰\"\u003e1.4 æ‹¥å¡å’Œæ‹¥å¡æ§åˆ¶çš„ç›´è§‚å«ä¹‰\u003c/h2\u003e\n\n\u003cp\u003eå†æ¬¡ç»™å‡ºå›¾ 1ï¼Œ\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/bbr-paper/vanjacobson1.png\" width=\"40%\" height=\"40%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eFig 1. Delivery rate and RTT vs. inflight data\u003c/p\u003e\n\n\u003cp\u003eç›´è§‚ä¸Šæ¥è¯´ï¼Œ\n\u003cstrong\u003e\u003cmark\u003eæ‹¥å¡\u003c/mark\u003e\u003c/strong\u003eï¼ˆcongestionï¼‰å°±æ˜¯ \u003cstrong\u003e\u003cmark\u003einflight æ•°æ®é‡æŒç»­å‘å³ä¾§åç¦» BDP çº¿\u003c/mark\u003e\u003c/strong\u003eçš„è¡Œä¸ºï¼Œ\nè€Œ\u003cstrong\u003e\u003cmark\u003eæ‹¥å¡æ§åˆ¶\u003c/mark\u003e\u003c/strong\u003eï¼ˆcongestion controlï¼‰å°±æ˜¯å„ç§åœ¨å¹³å‡ç¨‹åº¦ä¸Š\u003cstrong\u003e\u003cmark\u003eæ§åˆ¶è¿™ç§åç¦»ç¨‹åº¦\u003c/mark\u003e\u003c/strong\u003eçš„æ–¹æ¡ˆæˆ–ç®—æ³•ã€‚\u003c/p\u003e\n\n\u003ch2 id=\"15-åŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶å·¥ä½œæœºåˆ¶\"\u003e1.5 åŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶å·¥ä½œæœºåˆ¶\u003c/h2\u003e\n\n\u003cp\u003eåŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶å·¥ä½œåœ¨ bandwidth-limited åŒºåŸŸçš„å³ä¾§ï¼Œä¾é ï¼š\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003e\u003cstrong\u003e\u003cmark\u003eå¾ˆé«˜çš„å»¶è¿Ÿ\u003c/mark\u003e\u003c/strong\u003eï¼Œä»¥åŠ\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003e\u003cmark\u003eé¢‘ç¹çš„ä¸¢åŒ…\u003c/mark\u003e\u003c/strong\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eå°†è¿æ¥çš„\u003cstrong\u003e\u003cmark\u003eä¼ è¾“é€Ÿç‡ç»´æŒåœ¨å…¨é€Ÿç“¶é¢ˆå¸¦å®½\u003c/mark\u003e\u003c/strong\u003eï¼ˆfull bottleneck bandwidthï¼‰ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eåœ¨å†…å­˜å¾ˆè´µçš„å¹´ä»£ï¼Œç“¶é¢ˆé“¾è·¯çš„\u003cstrong\u003e\u003cmark\u003eç¼“å†²åŒºåªæ¯” BDP ç•¥å¤§\u003c/mark\u003e\u003c/strong\u003eï¼Œè¿™ä½¿å¾—\nåŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶å¯¼è‡´çš„\u003cstrong\u003e\u003cmark\u003eé¢å¤–å»¶è¿Ÿå¾ˆå°\u003c/mark\u003e\u003c/strong\u003eï¼›\u003c/li\u003e\n  \u003cli\u003eéšç€å†…å­˜è¶Šæ¥è¶Šä¾¿å®œï¼Œ\u003cstrong\u003e\u003cmark\u003eç¼“å†²åŒºå·²ç»æ¯” ISP é“¾è·¯çš„ BDP è¦å¤§ä¸Šå‡ ä¸ªæ•°é‡çº§äº†\u003c/mark\u003e\u003c/strong\u003eï¼Œ\nå…¶ç»“æœæ˜¯ï¼Œbufferbloat å¯¼è‡´çš„ \u003cstrong\u003e\u003cmark\u003eRTT è¾¾åˆ°äº†ç§’çº§\u003c/mark\u003e\u003c/strong\u003eï¼Œè€Œä¸å†æ˜¯æ¯«ç§’çº§\u003csup\u003e9\u003c/sup\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"16-æ›´å¥½çš„å·¥ä½œæœºåˆ¶åŠå­˜åœ¨çš„æŒ‘æˆ˜\"\u003e1.6 æ›´å¥½çš„å·¥ä½œæœºåˆ¶åŠå­˜åœ¨çš„æŒ‘æˆ˜\u003c/h2\u003e\n\n\u003cp\u003eBandwidth-limited åŒºåŸŸçš„\u003cstrong\u003e\u003cmark\u003eå·¦ä¾§è¾¹ç•Œ\u003c/mark\u003e\u003c/strong\u003eæ˜¯æ¯”å³ä¾§æ›´å¥½çš„ä¸€ä¸ªæ‹¥å¡æ§åˆ¶ç‚¹ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003e1979 å¹´ï¼ŒLeonard Kleinrock\u003csup\u003e16\u003c/sup\u003e \u003cstrong\u003e\u003cmark\u003eè¯æ˜äº†è¿™ä¸ªç‚¹æ˜¯æœ€ä¼˜çš„\u003c/mark\u003e\u003c/strong\u003eï¼Œ\nèƒ½æœ€å¤§åŒ–ä¼ è¾“é€Ÿç‡ã€æœ€å°åŒ–å»¶è¿Ÿå’Œä¸¢åŒ…ï¼Œä¸ç®¡æ˜¯å¯¹äºå•ä¸ªè¿æ¥è¿˜æ˜¯æ•´ä¸ªç½‘ç»œ\u003csup\u003e8\u003c/sup\u003eã€‚\u003c/li\u003e\n  \u003cli\u003eä¸å¹¸çš„æ˜¯ï¼Œå¤§çº¦åœ¨åŒä¸€æ—¶é—´ï¼ŒJeffrey M. Jaffe\u003csup\u003e14\u003c/sup\u003e è¯æ˜äº†\n\u003cstrong\u003e\u003cmark\u003eä¸å­˜åœ¨èƒ½æ”¶æ•›åˆ°è¿™ä¸ªç‚¹çš„åˆ†å¸ƒå¼ç®—æ³•\u003c/mark\u003e\u003c/strong\u003eã€‚è¿™ä¸ªç»“æœä½¿å¾—ç ”ç©¶æ–¹å‘ä»å¯»æ‰¾ä¸€ä¸ªèƒ½è¾¾åˆ° Kleinrock\næœ€ä½³å·¥ä½œç‚¹ï¼ˆoperating pointï¼‰çš„åˆ†å¸ƒå¼ç®—æ³•ï¼Œè½¬å‘äº†å¯¹ä¸åŒæ‹¥å¡æ§åˆ¶æ–¹å¼çš„ç ”ç©¶ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eåœ¨ Googleï¼Œæˆ‘ä»¬å›¢é˜Ÿæ¯å¤©éƒ½ä¼šèŠ±æ•°å°æ—¶æ¥åˆ†æä»ä¸–ç•Œå„åœ°æ”¶é›†ä¸Šæ¥çš„ TCP åŒ…å¤´ï¼Œ\næ¢ç©¶å„ç§å¼‚å¸¸å’Œåå¸¸ç°è±¡èƒŒåçš„æ„ä¹‰ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eç¬¬ä¸€æ­¥é€šå¸¸æ˜¯å¯»æ‰¾åŸºæœ¬çš„è·¯å¾„ç‰¹æ€§ RTprop å’Œ BtlBwã€‚\u003c/li\u003e\n  \u003cli\u003eèƒ½ä»è·Ÿè¸ªä¿¡æ¯ä¸­æ‹¿åˆ°è¿™äº›æ•°æ®è¿™ä¸€äº‹å®ï¼Œè¯´æ˜ Jaffe çš„ç»“è®ºå¯èƒ½å¹¶æ²¡æœ‰çœ‹ä¸Šå»é‚£ä¹ˆæ‚²è§‚ã€‚\nJaffe çš„ç»“æœåœ¨æœ¬è´¨ä¸Šå…·æœ‰æµ‹é‡æ¨¡ç³Šæ€§ï¼ˆfundamental measurement ambiguitiesï¼‰ï¼Œä¾‹\nå¦‚ï¼Œæµ‹é‡åˆ°çš„ RTT å¢åŠ æ˜¯ç”±äºè·¯å¾„é•¿åº¦å˜åŒ–å¯¼è‡´çš„ï¼Œè¿˜æ˜¯ç“¶é¢ˆå¸¦å®½å˜å°å¯¼è‡´çš„ï¼Œè¿˜æ˜¯å¦\nä¸€ä¸ªè¿æ¥çš„æµé‡ç§¯å‹ã€å»¶è¿Ÿå¢åŠ å¯¼è‡´çš„ã€‚\u003c/li\u003e\n  \u003cli\u003eè™½ç„¶æ— æ³•è®©ä»»ä½•å•ä¸ªæµ‹é‡å‚æ•°å˜å¾—å¾ˆç²¾ç¡®ï¼Œä½†ä¸€ä¸ª\u003cstrong\u003e\u003cmark\u003eè¿æ¥éšç€æ—¶é—´å˜åŒ–çš„è¡Œä¸º\u003c/mark\u003e\u003c/strong\u003e\nè¿˜æ˜¯èƒ½æ¸…æ™°åœ°åæ˜ å‡ºæŸäº›ä¸œè¥¿ï¼Œä¹Ÿé¢„ç¤ºç€ç”¨äº\u003cstrong\u003e\u003cmark\u003eè§£å†³è¿™ç§æ¨¡ç³Šæ€§çš„æµ‹é‡ç­–ç•¥\u003c/mark\u003e\u003c/strong\u003eæ˜¯å¯è¡Œçš„ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"17-bbråŸºäºå¯¹ä¸¤ä¸ªå‚æ•°rtpropbtlbwçš„æµ‹é‡å®ç°æ‹¥å¡æ§åˆ¶\"\u003e1.7 BBRï¼šåŸºäºå¯¹ä¸¤ä¸ªå‚æ•°ï¼ˆRTpropã€BtlBwï¼‰çš„æµ‹é‡å®ç°æ‹¥å¡æ§åˆ¶\u003c/h2\u003e\n\n\u003cp\u003eç»„åˆè¿™äº›æµ‹é‡æŒ‡æ ‡ï¼ˆmeasurementsï¼‰ï¼Œå†å¼•å…¥ä¸€ä¸ªå¥å£®çš„\u003cstrong\u003e\u003cmark\u003eä¼ºæœç³»ç»Ÿ\u003c/mark\u003e\u003c/strong\u003e\nï¼ˆåŸºäº\u003cstrong\u003e\u003cmark\u003eæ§åˆ¶ç³»ç»Ÿ\u003c/mark\u003e\u003c/strong\u003eé¢†åŸŸçš„è¿‘æœŸè¿›å±•ï¼‰\n\u003csup\u003e12\u003c/sup\u003eï¼Œæˆ‘ä»¬ä¾¿å¾—åˆ°ä¸€ä¸ªèƒ½\u003cstrong\u003e\u003cmark\u003eé’ˆå¯¹å¯¹çœŸå®æ‹¥å¡ â€”â€” è€Œéä¸¢åŒ…æˆ–å»¶è¿Ÿ\u003c/mark\u003e\u003c/strong\u003e â€”â€” åšå‡ºååº”çš„\n\u003cstrong\u003e\u003cmark\u003eåˆ†å¸ƒå¼æ‹¥å¡æ§åˆ¶åè®®\u003c/mark\u003e\u003c/strong\u003eï¼Œèƒ½ä»¥å¾ˆå¤§æ¦‚ç‡æ”¶æ•›åˆ° Kleinrock çš„æœ€ä¼˜å·¥ä½œç‚¹ã€‚\u003c/p\u003e\n\n\u003cp\u003eæˆ‘ä»¬çš„ä¸‰å¹´åŠªåŠ›ä¹Ÿæ­£æ˜¯ä»è¿™é‡Œå¼€å§‹ï¼šè¯•å›¾åŸºäºå¯¹å¦‚ä¸‹\u003cstrong\u003e\u003cmark\u003eåˆ»ç”»ä¸€æ¡è·¯å¾„çš„ä¸¤ä¸ªå‚æ•°\u003c/mark\u003e\u003c/strong\u003eçš„æµ‹é‡ï¼Œ\næ¥å®ç°ä¸€ç§æ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼Œ\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eç“¶é¢ˆå¸¦å®½ï¼ˆ\u003cstrong\u003e\u003cmark\u003eB\u003c/mark\u003e\u003c/strong\u003eottleneck \u003cstrong\u003e\u003cmark\u003eB\u003c/mark\u003e\u003c/strong\u003eandwidthï¼‰\u003c/li\u003e\n  \u003cli\u003eå¾€è¿”ä¼ è¾“æ—¶é—´ï¼ˆ\u003cstrong\u003e\u003cmark\u003eR\u003c/mark\u003e\u003c/strong\u003eound-trip propagation timeï¼‰\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1 id=\"2-ç“¶é¢ˆçš„æ•°å­¦è¡¨ç¤ºcharacterizing-the-bottleneck\"\u003e2 ç“¶é¢ˆçš„æ•°å­¦è¡¨ç¤ºï¼ˆCharacterizing the Bottleneckï¼‰\u003c/h1\u003e\n\n\u003ch2 id=\"21-æœ€å°åŒ–ç¼“å†²åŒºç§¯å‹æˆ–æœ€é«˜ååæœ€ä½å»¶è¿Ÿéœ€æ»¡è¶³çš„æ¡ä»¶\"\u003e2.1 æœ€å°åŒ–ç¼“å†²åŒºç§¯å‹ï¼ˆæˆ–æœ€é«˜åå+æœ€ä½å»¶è¿Ÿï¼‰éœ€æ»¡è¶³çš„æ¡ä»¶\u003c/h2\u003e\n\n\u003cp\u003eå½“ä¸€ä¸ªè¿æ¥æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶æ—¶ï¼Œå®ƒå°†è¿è¡Œåœ¨\u003cstrong\u003e\u003cmark\u003eæœ€é«˜ååå’Œæœ€ä½å»¶è¿Ÿ\u003c/mark\u003e\u003c/strong\u003eçŠ¶æ€ï¼š\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003e\n    \u003cp\u003e\u003cstrong\u003e\u003cmark\u003eé€Ÿç‡å¹³è¡¡ï¼ˆrate balanceï¼‰\u003c/mark\u003e\u003c/strong\u003eï¼šç“¶é¢ˆé“¾è·¯çš„\u003cstrong\u003e\u003cmark\u003eæ•°æ®åŒ…åˆ°è¾¾é€Ÿç‡\u003c/mark\u003e\u003c/strong\u003eåˆšå¥½ç­‰äºç“¶é¢ˆå¸¦å®½ \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eBtlBw\u003c/code\u003eï¼Œ\u003c/p\u003e\n\n    \u003cp\u003eè¿™ä¸ªæ¡ä»¶ä¿è¯äº†é“¾è·¯ç“¶é¢ˆå·²è¾¾åˆ° 100% åˆ©ç”¨ç‡ã€‚\u003c/p\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003e\u003cstrong\u003e\u003cmark\u003eç®¡é“å¡«æ»¡ï¼ˆfull pipeï¼‰\u003c/mark\u003e\u003c/strong\u003eï¼šä¼ è¾“ä¸­çš„æ€»æ•°æ®ï¼ˆinflightï¼‰ç­‰äº BDPï¼ˆ\u003ccode class=\"language-plaintext highlighter-rouge\"\u003e= BtlBw Ã— RTprop\u003c/code\u003eï¼‰ã€‚\u003c/p\u003e\n\n    \u003cp\u003eè¿™ä¸ªæ¡ä»¶ä¿è¯äº†æœ‰æ°å¥½è¶³å¤Ÿçš„æ•°æ®ï¼Œæ—¢ä¸ä¼šäº§ç”Ÿç“¶é¢ˆé¥¥é¥¿ï¼ˆbottleneck starvationï¼‰ï¼Œ\n åˆä¸ä¼šäº§ç”Ÿç®¡é“æº¢å‡ºï¼ˆoverfill the pipeï¼‰ã€‚\u003c/p\u003e\n  \u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eéœ€è¦æ³¨æ„ï¼Œ\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003e\n    \u003cp\u003eä»…å‡­ rate balance ä¸€ä¸ªæ¡ä»¶\u003cstrong\u003e\u003cmark\u003eå¹¶ä¸èƒ½ç¡®ä¿æ²¡æœ‰ç§¯å‹\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/p\u003e\n\n    \u003cp\u003eä¾‹å¦‚ï¼ŒæŸä¸ªè¿æ¥åœ¨ä¸€ä¸ª BDP=5 çš„é“¾è·¯ä¸Šï¼Œå¼€å§‹æ—¶å®ƒå‘é€äº† 10 ä¸ªåŒ…ç»„æˆçš„ Initial\n  Windowï¼Œä¹‹åå°±ä¸€ç›´ç¨³å®šè¿è¡Œåœ¨ç“¶é¢ˆé€Ÿç‡ä¸Šã€‚é‚£ä¹ˆï¼Œåœ¨è¿™ä¸ªé“¾è·¯æ­¤åçš„è¡Œä¸ºå°±æ˜¯ï¼š\u003c/p\u003e\n\n    \u003cul\u003e\n      \u003cli\u003eç¨³å®šè¿è¡Œåœ¨ç“¶é¢ˆé€Ÿç‡ä¸Š\u003c/li\u003e\n      \u003cli\u003eç¨³å®šæœ‰ 5 ä¸ªåŒ…çš„ç§¯å‹ï¼ˆæ’é˜Ÿï¼‰\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003eç±»ä¼¼åœ°ï¼Œä»…å‡­ full pipe ä¸€ä¸ªæ¡ä»¶\u003cstrong\u003e\u003cmark\u003eä¹Ÿæ— æ³•ç¡®ä¿æ²¡æœ‰ç§¯å‹\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/p\u003e\n\n    \u003cp\u003eä¾‹å¦‚ï¼Œå¦‚æœæŸä¸ªè¿æ¥ä»¥ \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eBDP/2\u003c/code\u003e çš„\u003cstrong\u003e\u003cmark\u003eçªå‘æ–¹å¼\u003c/mark\u003e\u003c/strong\u003eå‘é€ä¸€ä¸ª BDP çš„æ•°æ®ï¼Œ\n  é‚£ä»ç„¶èƒ½è¾¾åˆ°ç“¶é¢ˆåˆ©ç”¨ç‡ï¼Œä½†å´ä¼šäº§ç”Ÿå¹³å‡ BDP/4 çš„ç“¶é¢ˆç§¯å‹ã€‚\u003c/p\u003e\n  \u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eåœ¨é“¾è·¯ç“¶é¢ˆä»¥åŠæ•´æ¡è·¯å¾„ä¸Š\u003cstrong\u003e\u003cmark\u003eæœ€å°åŒ–ç§¯å‹çš„å”¯ä¸€æ–¹å¼\u003c/mark\u003e\u003c/strong\u003eæ˜¯åŒæ—¶æ»¡è¶³ä»¥ä¸Šä¸¤ä¸ªæ¡ä»¶ã€‚\u003c/p\u003e\n\n\u003ch2 id=\"22-æ— åä¼°è®¡unbiased-estimator\"\u003e2.2 æ— åä¼°è®¡ï¼ˆunbiased estimatorï¼‰\u003c/h2\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003eä¸‹æ–‡ä¼šæåˆ°â€œæ— åä¼°è®¡â€è¿™ä¸ªç»Ÿè®¡å­¦æœ¯è¯­ï¼Œè¿™é‡Œå…ˆç§‘æ™®ä¸‹ï¼š\u003c/p\u003e\n\n  \u003cp\u003eIn statistics, the bias (or bias function) of an estimator is the difference\nbetween this estimatorâ€™s expected value and the true value of the parameter\nbeing estimated. An estimator or decision rule with zero bias is called\nunbiased.\u003c/p\u003e\n\n  \u003cp\u003e\u003ca href=\"https://en.wikipedia.org/wiki/Bias_of_an_estimator\"\u003eWikipedia: Bias of an estimator\u003c/a\u003e\u003c/p\u003e\n\n  \u003cp\u003eè¯‘æ³¨ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch2 id=\"23-ä¼ è¾“æ—¶å»¶rtpropçš„è¡¨ç¤ºä¸ä¼°è®¡\"\u003e2.3 ä¼ è¾“æ—¶å»¶ï¼ˆRTPropï¼‰çš„è¡¨ç¤ºä¸ä¼°è®¡\u003c/h2\u003e\n\n\u003cp\u003eBtlBw å’Œ RTprop åœ¨ä¸€ä¸ªè¿æ¥çš„ç”Ÿå‘½å‘¨æœŸä¸­æ˜¯ä¸æ–­å˜åŒ–çš„ï¼Œå› æ­¤å¿…é¡»æŒç»­å¯¹å®ƒä»¬åšå‡º\u003cstrong\u003e\u003cmark\u003eä¼°è®¡\u003c/mark\u003e\u003c/strong\u003eï¼ˆestimationï¼‰ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e\u003cmark\u003eTCP ç›®å‰è·Ÿè¸ªäº† RTT\u003c/mark\u003e\u003c/strong\u003eï¼ˆä»å‘é€ä¸€æ®µæ•°æ®åˆ°è¿™æ®µæ•°æ®è¢«ç¡®è®¤æ¥æ”¶çš„æ—¶é—´ï¼‰\nï¼Œå› ä¸ºæ£€æµ‹æ˜¯å¦æœ‰ä¸¢åŒ…è¦ç”¨åˆ°è¿™ä¸ªå‚æ•°ã€‚åœ¨ä»»æ„æ—¶åˆ» \u003ci\u003et\u003c/i\u003e,\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/bbr-paper/eq1.png\" width=\"20%\" height=\"20%\"/\u003e\u003c/p\u003e\n\n\u003cp\u003eå…¶ä¸­\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003e\u003ci\u003eğ›ˆ â‰¥ 0\u003c/i\u003e è¡¨ç¤ºè·¯å¾„ä¸Šå› ä¸ºç§¯å‹ã€æ¥æ”¶æ–¹å»¶è¿Ÿåº”ç­”ç­–ç•¥ã€åº”ç­”èšåˆç­‰å› ç´ è€Œå¼•å…¥çš„\u003cstrong\u003e\u003cmark\u003eâ€œå™ªå£°â€\u003c/mark\u003e\u003c/strong\u003eï¼›\u003c/li\u003e\n  \u003cli\u003e\u003ci\u003eRTprop\u003c/i\u003e æ˜¯å¾€è¿”ä¼ è¾“æ—¶å»¶ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eå‰é¢å·²ç»æåˆ°ï¼Œ\u003ccode class=\"language-plaintext highlighter-rouge\"\u003eRTprop\u003c/code\u003e æ˜¯è·¯å¾„ï¼ˆconnectionâ€™s pathï¼‰çš„ä¸€ä¸ªç‰©ç†ç‰¹æ€§ï¼Œåªæœ‰å½“è·¯å¾„å‘\nç”Ÿå˜åŒ–æ—¶å®ƒæ‰ä¼šå˜åŒ–ã€‚ç”±äºè·¯å¾„å˜åŒ–çš„æ—¶é—´å°ºåº¦è¿œå¤§äº RTPropï¼Œå› æ­¤åœ¨æ—¶åˆ» Tï¼Œä¸€ä¸ªæ— åã€é«˜æ•ˆä¼°è®¡æ˜¯ï¼š\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/bbr-paper/eq2.png\" width=\"55%\" height=\"55%\"/\u003e\u003c/p\u003e\n\n\u003cp\u003eä¾‹å¦‚ï¼Œåœ¨æ—¶é—´çª—å£ \u003ci\u003eW\u003csub\u003eR\u003c/sub\u003e\u003c/i\u003e å†…çš„ç§»åŠ¨æœ€å°å€¼ï¼ˆrunning minï¼‰ï¼Œå…¶ä¸­å…¸å‹æƒ…å†µä¸‹ï¼Œ\n\u003ci\u003eW\u003csub\u003eR\u003c/sub\u003e\u003c/i\u003e çš„æŒç»­æ—¶é—´æ˜¯\u003cstrong\u003e\u003cmark\u003eå‡ åç§’åˆ°å‡ åˆ†é’Ÿ\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/p\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003eè¿™é‡Œç›´è§‚ä¸Šçš„è§£é‡Šæ˜¯ï¼š\u003cstrong\u003e\u003cmark\u003eä¸€æ®µæ—¶é—´å†…çš„æœ€å° RTT\u003c/mark\u003e\u003c/strong\u003eï¼ˆå¯æµ‹é‡ï¼‰ï¼Œå°±æ˜¯\nè¿™æ¡è·¯å¾„\u003cstrong\u003e\u003cmark\u003eï¼ˆåœ¨ä¸€æ®µæ—¶é—´å†…ï¼‰çš„å¾€è¿”ä¼ è¾“å»¶è¿Ÿ\u003c/mark\u003e\u003c/strong\u003eã€‚\nè¯‘æ³¨ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch2 id=\"24-ç“¶é¢ˆå¸¦å®½btlbwçš„è¡¨ç¤ºä¸ä¼°è®¡\"\u003e2.4 ç“¶é¢ˆå¸¦å®½ï¼ˆBtlBwï¼‰çš„è¡¨ç¤ºä¸ä¼°è®¡\u003c/h2\u003e\n\n\u003cp\u003eä¸åŒäº RTTï¼ŒTCP è§„èŒƒä¸­å¹¶æ²¡æœ‰è¦æ±‚è·Ÿè¸ª bottleneck bandwidthï¼Œä½†å¯ä»¥é€šè¿‡\n\u003cstrong\u003e\u003cmark\u003eè·Ÿè¸ªä¼ è¾“é€Ÿç‡\u003c/mark\u003e\u003c/strong\u003eï¼ˆdelivery rateï¼‰æ¥å¾—åˆ°ä¸€ä¸ªå¯¹ç“¶é¢ˆå¸¦å®½çš„ä¸é”™ä¼°è®¡ã€‚\u003c/p\u003e\n\n\u003cp\u003eå½“åº”ç­”åŒ…ï¼ˆACKï¼‰åˆ°è¾¾å‘é€ç«¯æ—¶ï¼Œå…¶ä¸­é™¤äº†åŒ…å« RTT ä¿¡æ¯ï¼Œè¿˜åŒ…å«åŒ…ç¦»å¼€æ—¶çš„ inflight\ndata ä¼ è¾“æƒ…å†µã€‚å·²ä¼ è¾“çš„æ•°æ®é‡é™¤ä»¥ä¼ è¾“æ—¶é—´ï¼Œå°±æ˜¯å‘é€å’Œåº”ç­”ä¹‹é—´çš„\u003cstrong\u003e\u003cmark\u003eå¹³å‡ä¼ è¾“é€Ÿç‡\u003c/mark\u003e\u003c/strong\u003eï¼š\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e \u003ci\u003edeliveryRate = Î”delivered/Î”t\u003c/i\u003e \u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eè¿™ä¸ªé€Ÿç‡ä¸€å®š \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e\u0026lt;= bottleneck rate\u003c/code\u003eï¼›\u003c/li\u003e\n  \u003cli\u003eåˆ°è¾¾æ•°æ®é‡ \u003ci\u003eÎ”delivered\u003c/i\u003e å·²ç»çŸ¥é“äº†ï¼Œå› æ­¤æ¥ä¸‹æ¥éœ€è¦ç¡®å®šçš„æ˜¯ \u003ci\u003eÎ”t\u003c/i\u003eï¼Œè€Œ \u003ci\u003eÎ”t â‰¥ true arrival interval\u003c/i\u003eï¼›\u003c/li\u003e\n  \u003cli\u003eå› æ­¤ï¼Œ\u003ccode class=\"language-plaintext highlighter-rouge\"\u003edeliveryRate \u0026lt;= the true delivery rate\u003c/code\u003eï¼Œä¹Ÿå°±æ˜¯\u003cstrong\u003e\u003cmark\u003eä¼°è®¡å‡ºçš„ä¼ è¾“é€Ÿç‡ï¼Œä¸ä¼šè¶…è¿‡çœŸå®ç“¶é¢ˆå¸¦å®½\u003c/mark\u003e\u003c/strong\u003eï¼Œåè€…æ˜¯å‰è€…çš„ä¸Šé™ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eå› æ­¤ï¼Œä¼ è¾“é€Ÿç‡åœ¨ä¸€æ®µæ—¶é—´çª—å£å†…çš„æœ€å¤§å€¼ï¼ˆwindowed-maxï¼‰ï¼Œæ˜¯ BtlBw çš„ä¸€ä¸ªé«˜æ•ˆã€\næ— åä¼°è®¡ï¼š\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/bbr-paper/eq3.png\" width=\"45%\" height=\"45%\"/\u003e\u003c/p\u003e\n\n\u003cp\u003eå…¶ä¸­æ—¶é—´çª—å£ \u003ci\u003eW\u003csub\u003eB\u003c/sub\u003e\u003c/i\u003e å…¸å‹æƒ…å†µä¸‹æ˜¯ 6~10 ä¸ª RTTã€‚\u003c/p\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003eè¿™é‡Œç›´è§‚ä¸Šçš„è§£é‡Šæ˜¯ï¼š\u003cstrong\u003e\u003cmark\u003eä¸€æ®µæ—¶é—´å†…çš„é“¾è·¯æœ€å¤§ä¼ è¾“å¸¦å®½\u003c/mark\u003e\u003c/strong\u003eï¼ˆå¯æµ‹é‡ï¼‰ï¼Œå°±æ˜¯è¿™æ¡é“¾è·¯çš„\u003cstrong\u003e\u003cmark\u003eç“¶é¢ˆå¸¦å®½\u003c/mark\u003e\u003c/strong\u003eã€‚\nè¯‘æ³¨ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch2 id=\"25-bbr-æµ‹é‡æœºåˆ¶\"\u003e2.5 BBR æµ‹é‡æœºåˆ¶\u003c/h2\u003e\n\n\u003cp\u003eTCP è®°å½•äº†æ¯ä¸ªåŒ…çš„ç¦»å¼€æ—¶é—´ï¼Œå†åŠ ä¸Šå·²ä¼ è¾“çš„æ•°æ®é‡ï¼Œå½“\u003cstrong\u003e\u003cmark\u003eæ¯ä¸ª ACK åŒ…åˆ°è¾¾å‘é€ç«¯æ—¶ï¼Œå°†äº§ç”Ÿ\u003c/mark\u003e\u003c/strong\u003eï¼š\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003eä¸€ä¸ª RTT å€¼\u003c/li\u003e\n  \u003cli\u003eä¼ è¾“é€Ÿç‡çš„ä¸€æ¬¡æµ‹é‡å€¼ï¼ˆa delivery rate measurementï¼‰\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eè¿‡æ»¤å™¨å¯ä»¥å°†è¿™ä¸¤ä¸ªæµ‹é‡åˆ°çš„å€¼è½¬æ¢æˆå¯¹ RTprop å’Œ BtlBw çš„ä¼°è®¡ã€‚\u003c/p\u003e\n\n\u003cp\u003eæ³¨æ„ï¼Œ\u003cstrong\u003e\u003cmark\u003eè¿™ä¸¤ä¸ªå˜é‡æ˜¯å®Œå…¨ç‹¬ç«‹çš„\u003c/mark\u003e\u003c/strong\u003eï¼š\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eåœ¨ç“¶é¢ˆå¸¦å®½ä¸å˜çš„æƒ…å†µä¸‹ï¼ŒRTprop ä»å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼ˆä¾‹å¦‚ï¼Œè·¯ç”±å˜äº†ï¼‰ï¼›\u003c/li\u003e\n  \u003cli\u003eè·¯å¾„ï¼ˆpathï¼‰ä¸å˜çš„æƒ…å†µä¸‹ï¼ˆå› æ­¤ RTprop ä¹Ÿä¸å˜ï¼‰ï¼ŒBtlBw ä¹Ÿå¯èƒ½å‘ç”Ÿå˜åŒ–ï¼ˆä¾‹å¦‚ï¼ŒæŸæ¡æ— çº¿é“¾è·¯é€Ÿç‡å˜äº†ï¼‰\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eè¿™ç§æ— å…³æ€§ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆ\u003cstrong\u003e\u003cmark\u003eéœ€è¦åŒæ—¶çŸ¥é“è¿™ä¸¤ä¸ªé™åˆ¶æ¡ä»¶ï¼Œæ‰èƒ½ç¡®å®šä¼ è¾“è·¯å¾„çš„å‘é€è¡Œä¸º\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/p\u003e\n\n\u003ch2 id=\"26-ä¸ç¡®å®šæ€§åŸç†\"\u003e2.6 ä¸ç¡®å®šæ€§åŸç†\u003c/h2\u003e\n\n\u003cp\u003eç”±äº RTprop åªå¯¹ BDP çš„å·¦ä¾§å¯è§ï¼ŒBtlBw åªå¯¹å³ä¾§å¯è§ï¼Œå› æ­¤å®ƒä»¬æœä»ä¸ç¡®å®šæ€§åŸç†ï¼ˆ\nuncertainty principleï¼‰ï¼š\u003cstrong\u003e\u003cmark\u003eå½“æµ‹é‡å…¶ä¸­ä¸€ä¸ªæ—¶ï¼Œå¦ä¸€ä¸ªå°†ä¸å¯æµ‹é‡\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e\u003cmark\u003eç›´è§‚ä¸Šçš„è§£é‡Š\u003c/mark\u003e\u003c/strong\u003eæ˜¯ï¼šç®¡é“æ•´ä¸ªé•¿åº¦è¢«å¡«æ»¡ â€”â€” æˆ–ç§°æº¢å‡ºï¼ˆoverfilledï¼‰â€”â€” æ—¶æ‰èƒ½è¾¾åˆ°å®ƒçš„\næœ€å¤§å®¹é‡ï¼Œè€Œæº¢å‡ºä¹‹åä¼šï¼ˆåœ¨ç¼“å†²åŒºä¸­ï¼‰åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼ˆqueueï¼‰ï¼Œåè€…ä½œä¸ºç®¡é“çš„\nå»¶ä¼¸åˆ\u003cstrong\u003e\u003cmark\u003eåè¿‡æ¥æ¨¡ç³Šäº†ç®¡é“çš„é•¿åº¦\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/p\u003e\n\n\u003cp\u003eä¾‹å¦‚ï¼Œ\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003eå‘é€è¯·æ±‚/æ¥æ”¶å“åº”çš„çš„åº”ç”¨ï¼šå¯èƒ½æ°¸è¿œæ— æ³•å‘é€è¶³å¤Ÿå¤šçš„æ•°æ®æ¥å¡«æ»¡ç®¡é“ï¼Œå› æ­¤å®ƒ\n\u003cstrong\u003e\u003cmark\u003eåªèƒ½æµ‹é‡åˆ°ä¼ è¾“å»¶è¿Ÿï¼Œè€Œæ— æ³•æµ‹é‡åˆ° BtlBw\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/li\u003e\n  \u003cli\u003eæŒç»­å‡ å°æ—¶çš„å¤§æ‰¹é‡æ•°æ®ä¼ è¾“ï¼šå¯èƒ½æ•´ä¸ªç”Ÿå‘½å‘¨æœŸéƒ½ä½äºå›¾ä¸­çš„å¸¦å®½å—é™åŒºåŸŸï¼Œå› æ­¤å®ƒ\n  \u003cstrong\u003e\u003cmark\u003eè‡ªå§‹è‡³ç»ˆåªæœ‰ä¸€ä¸ª RTprop æ ·æœ¬ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªåŒ…çš„ RTT\u003c/mark\u003e\u003c/strong\u003eï¼ˆå…¶ä»–åŒ…\n  çš„ RTT å¯¹è¿™ç§åœºæ™¯æ¥è¯´æ˜¯æ— æ•ˆæ ·æœ¬ï¼‰ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eè¿™ç§å†…åœ¨çš„ä¸ç¡®å®šæ€§æ„å‘³ç€ï¼Œé™¤äº†ä¾é æµ‹é‡å€¼æ¥ä¼°è®¡ï¼ˆæ¢å¤ï¼‰å‡ºä¸¤ä¸ªè·¯å¾„å˜é‡ä¹‹å¤–ï¼Œ\nå¿…é¡»æœ‰çŠ¶æ€æ¥è·Ÿè¸ªï¼š\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003e\u003cstrong\u003e\u003cmark\u003eä»å½“å‰çš„å·¥ä½œä½ç½®å¯ä»¥å­¦åˆ°ä»€ä¹ˆ\u003c/mark\u003e\u003c/strong\u003eï¼ˆwhat can be learned at the current operating pointï¼‰\u003c/li\u003e\n  \u003cli\u003eå½“ä¿¡æ¯å¤±æ•ˆæ—¶ï¼Œ\u003cstrong\u003e\u003cmark\u003eå¦‚ä½•æ‰¾åˆ°ä¸‹ä¸€ä¸ª\u003c/mark\u003e\u003c/strong\u003eå¯ä»¥ç»§ç»­å­¦ä¹ çš„å·¥ä½œä½ç½®ï¼ˆhow to get to an operating point where it can be relearnedï¼‰\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eè¿™é‡Œè¯´çš„\u003cstrong\u003e\u003cmark\u003eâ€œå·¥ä½œä½ç½®â€\u003c/mark\u003e\u003c/strong\u003eï¼Œæ˜¯æŒ‡å›¾ 1 ä¸­çš„ RTProp å’Œ BtlBw ä¸åŒç»„åˆäº§ç”Ÿçš„ä½ç½®ã€‚\u003c/p\u003e\n\n\u003ch1 id=\"3-ä½¿æ•°æ®æµpacket-flowä¸ä¼ è¾“è·¯å¾„delivery-pathç›¸åŒ¹é…\"\u003e3 ä½¿æ•°æ®æµï¼ˆPacket Flowï¼‰ä¸ä¼ è¾“è·¯å¾„ï¼ˆDelivery Pathï¼‰ç›¸åŒ¹é…\u003c/h1\u003e\n\n\u003cp\u003eBBR çš„æ ¸å¿ƒç®—æ³•åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003eå½“æ”¶åˆ°ä¸€ä¸ª ACK æ—¶ï¼Œåº”è¯¥åšä»€ä¹ˆæ“ä½œï¼›\u003c/li\u003e\n  \u003cli\u003eå½“å‘é€ä¸€æ®µæ•°æ®æ—¶ï¼Œåº”è¯¥åšä»€ä¹ˆæ“ä½œã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2 id=\"31-bbr-æ”¶åˆ°åº”ç­”åŒ…ackæ—¶çš„é€»è¾‘\"\u003e3.1 BBR æ”¶åˆ°åº”ç­”åŒ…ï¼ˆACKï¼‰æ—¶çš„é€»è¾‘\u003c/h2\u003e\n\n\u003cp\u003eæ¯ä¸ª ACK éƒ½ä¸ºæˆ‘ä»¬æä¾›äº† \u003cstrong\u003e\u003cmark\u003eRTT\u003c/mark\u003e\u003c/strong\u003e å’Œ\u003cstrong\u003e\u003cmark\u003eå¹³å‡ä¼ è¾“é€Ÿç‡\u003c/mark\u003e\u003c/strong\u003e\nçš„ä¸€æ¬¡\u003cstrong\u003e\u003cmark\u003eæµ‹é‡\u003c/mark\u003e\u003c/strong\u003eï¼ŒäºŒè€…åˆå°†åˆ†åˆ«æ›´æ–°å¯¹ RTprop å’Œ BtlBw çš„ä¼°è®¡ã€‚\u003c/p\u003e\n\n\u003cp\u003eå…·ä½“æ¥è¯´ï¼Œæ”¶åˆ°ä¸€ä¸ª ACK æ—¶ï¼ŒBBR å°†æ‰§è¡Œä»¥ä¸‹é€»è¾‘ï¼š\u003c/p\u003e\n\n\u003cdiv class=\"language-c highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003efunction\u003c/span\u003e \u003cspan class=\"n\"\u003eonAck\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epacket\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003ertt\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enow\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003epacket\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esendtime\u003c/span\u003e                      \u003cspan class=\"c1\"\u003e// æ”¶åŒ…æ—¶é—´ å‡å» åŒ…ä¸­è®°å½•çš„å‘åŒ…æ—¶é—´\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eupdate_min_filter\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eRTpropFilter\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ertt\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e             \u003cspan class=\"c1\"\u003e// æ ¹æ® 2.2 ä¸­çš„æ–¹ç¨‹ï¼Œæ›´æ–°å¯¹ RTT çš„ä¼°è®¡\u003c/span\u003e\n \n  \u003cspan class=\"n\"\u003edelivered\u003c/span\u003e      \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"n\"\u003epacket\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\n  \u003cspan class=\"n\"\u003edelivered_time\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e  \u003cspan class=\"n\"\u003enow\u003c/span\u003e\n  \u003cspan class=\"n\"\u003edelivery_rate\u003c/span\u003e  \u003cspan class=\"o\"\u003e=\u003c/span\u003e  \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edelivered\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003epacket\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edelivered\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edelivered_time\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003epacket\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edelivered_time\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n \n  \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edelivery_rate\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eBtlBwFilter\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecurrent_max\u003c/span\u003e      \u003cspan class=\"c1\"\u003e// å®é™…ä¼ è¾“é€Ÿç‡å·²ç»å¤§äºå½“å‰ä¼°è®¡çš„ç“¶é¢ˆå¸¦å®½ï¼Œæˆ–\u003c/span\u003e\n     \u003cspan class=\"o\"\u003e||\u003c/span\u003e \u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003epacket\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eapp_limited\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e                       \u003cspan class=\"c1\"\u003e// ä¸æ˜¯åº”ç”¨å—é™ï¼ˆåº”ç”¨å—é™çš„æ ·æœ¬å¯¹ä¼°è®¡ BtlBw æ— æ„ä¹‰ï¼‰\u003c/span\u003e\n     \u003cspan class=\"n\"\u003eupdate_max_filter\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBtlBwFilter\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edelivery_rate\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"c1\"\u003e// æ ¹æ® 2.3 ä¸­çš„æ–¹ç¨‹ï¼Œæ›´æ–°å¯¹ BtlBw çš„ä¼°è®¡\u003c/span\u003e\n \n  \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eapp_limited_until\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e                       \u003cspan class=\"c1\"\u003e// è¾¾åˆ°ç“¶é¢ˆå¸¦å®½å‰ï¼Œä»ç„¶å¯å‘é€çš„å­—èŠ‚æ•°\u003c/span\u003e\n     \u003cspan class=\"n\"\u003eapp_limited_until\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eapp_limited_until\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003epacket\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eå‡ ç‚¹è¯´æ˜ï¼š\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003eæ¯ä¸ªåŒ…éƒ½ä¼šæ›´æ–°å¯¹ RTProp çš„ä¼°è®¡ï¼Œä½†\u003cstrong\u003e\u003cmark\u003eåªæœ‰éƒ¨åˆ†åŒ…ä¼šæ›´æ–°å¯¹ BtlBw çš„ä¼°è®¡\u003c/mark\u003e\u003c/strong\u003eï¼›\u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003eåº”ç”¨å—é™çš„åŒ…\u003c/p\u003e\n\n    \u003cul\u003e\n      \u003cli\u003eå¯¹äºä¸€ä¸ªåŒ…ï¼Œå½“åº”ç”¨ï¼ˆapplicationï¼‰å…¨é€Ÿå‘é€å®ƒè€Œä»ç„¶æ²¡æœ‰å æ»¡ç“¶é¢ˆå¸¦å®½æ—¶ï¼Œ\nBBR ä¼šè¿™ä¸ªåŒ…æ ‡è®°ä¸º \u003cstrong\u003e\u003cmark\u003e\u003ccode\u003eapp_limited\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003eï¼ˆè§ä¸‹é¢çš„ \u003ccode class=\"language-plaintext highlighter-rouge\"\u003esend()\u003c/code\u003e ä¼ªä»£ç ï¼‰ï¼Œ\nå³ \u003ccode class=\"language-plaintext highlighter-rouge\"\u003epacket.app_limited = true\u003c/code\u003eã€‚\u003c/li\u003e\n      \u003cli\u003eè¿™å°†å†³å®šå“ªäº›æ ·æœ¬ä¼šç”¨æ¥æ›´æ–°å¯¹å¸¦å®½çš„ä¼°è®¡ã€‚\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003eç“¶é¢ˆå¸¦å®½ BtlBw æ˜¯ä¼ è¾“é€Ÿç‡çš„ä¸€ä¸ªç¡¬æ€§ä¸Šé™ï¼Œå› æ­¤\u003c/p\u003e\n\n    \u003cul\u003e\n      \u003cli\u003eå¦‚æœæµ‹é‡åˆ°\u003cstrong\u003e\u003cmark\u003eå½“å‰çš„ä¼ è¾“é€Ÿç‡ \u0026gt; å½“å‰å¯¹ BtlBw ä¼°è®¡\u003c/mark\u003e\u003c/strong\u003eï¼Œ\nå¿…å®šæ„å‘³ç€è¿™ä¸ªä¼°è®¡å¤ªä½äº†ï¼Œä¸ç®¡æ ·æœ¬æ˜¯ä¸æ˜¯ app-limitedï¼›å¯¹åº”åˆ°ä¸Šé¢çš„ä»£ç ï¼Œå°±æ˜¯åªè¦\n\u003ccode class=\"language-plaintext highlighter-rouge\"\u003edelivery_rate \u0026gt; BtlBwFilter.current_max\u003c/code\u003eï¼Œå°±ä¸€å®šæ›´æ–° BtlBw ä¼°è®¡ï¼›å¦åˆ™ï¼Œ\u003c/li\u003e\n      \u003cli\u003eå¦‚æœæ ·æœ¬ä¸æ˜¯ app-limitedï¼ˆè¯´æ˜å®é™…å¸¦å®½å·²ç»é¥±å’Œï¼‰ï¼Œä¹Ÿæ›´æ–° BtlBw ä¼°è®¡ã€‚\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2 id=\"32-tcp-pacingåœ¨æ¯ä¸ª-rtt-çª—å£å†…å‡åŒ€å‘é€æ•°æ®\"\u003e3.2 TCP Pacingï¼ˆåœ¨æ¯ä¸ª RTT çª—å£å†…å‡åŒ€å‘é€æ•°æ®ï¼‰\u003c/h2\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003eç§‘æ™®ä¸‹ TCP pacing è¿™ä¸ªä¸‹æ–‡å°†ç”¨åˆ°çš„æ¦‚å¿µï¼š\u003c/p\u003e\n\n  \u003cp\u003ePaper: \u003ca href=\"https://homes.cs.washington.edu/~tom/pubs/pacing.pdf\"\u003eUnderstanding the Performance of TCP Pacing\u003c/a\u003e\u003c/p\u003e\n\n  \u003cp\u003eTCPâ€™s congestion control  mechanisms  can lead  to  bursty  traffic  flows\non  modern  high-speednetworks,  with  a negative  impact  on  overall\nnetwork  efficiency.   A  pro-posed solution to this problem is to\n\u003cstrong\u003e\u003cmark\u003eevenly space, or â€œpaceâ€, data sent intothe network  over  an entire round-trip  time\u003c/mark\u003e\u003c/strong\u003e,\nso that  data is  not  sent  in  aburst.  In this paper, we quantitatively evaluate this approach.\u003c/p\u003e\n\n  \u003cp\u003eè¯‘æ³¨ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eä¸ºäº†è®©\u003cstrong\u003e\u003cmark\u003eæ•°æ®åŒ…çš„åˆ°è¾¾é€Ÿç‡\u003c/mark\u003e\u003c/strong\u003eï¼ˆpacket-arrival rateï¼‰èƒ½åŒ¹é…åˆ°\n\u003cstrong\u003e\u003cmark\u003eç“¶é¢ˆé“¾è·¯çš„ç¦»å¼€é€Ÿç‡\u003c/mark\u003e\u003c/strong\u003eï¼ˆdeparture rateï¼‰, BBR ä¼š\u003cstrong\u003e\u003cmark\u003eå¯¹æ¯ä¸ªæ•°æ®è¿›è¡Œ pace\u003c/mark\u003e\u003c/strong\u003e\nï¼ˆåœ¨æ¯ä¸ª RTT çª—å£å†…å‡åŒ€å‘é€æ•°æ®ï¼‰ã€‚\u003c/p\u003e\n\n\u003cp\u003eæœ‰ä¸¤ä¸ªæ§åˆ¶å‚æ•°ï¼š\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003e\n    \u003cp\u003e\u003cstrong\u003e\u003cmark\u003e\u003ccode\u003epacing_rate\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003eï¼šBBR çš„\u003cstrong\u003e\u003cmark\u003eä¸»è¦æ§åˆ¶å‚æ•°\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/p\u003e\n\n    \u003cp\u003eè¦æ±‚è¾¾åˆ°é€Ÿç‡å¿…é¡»åŒ¹é…åˆ°ç“¶é¢ˆé€Ÿç‡ï¼Œæ„å‘³ç€ \u003cstrong\u003e\u003cmark\u003epacing æ˜¯ BBR\u003c/mark\u003e\u003c/strong\u003e è®¾è®¡ä»¥åŠå®é™…æ“ä½œä¸­\n \u003cstrong\u003e\u003cmark\u003eå¿…ä¸å¯å°‘çš„éƒ¨åˆ†\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/p\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003e\u003cstrong\u003e\u003cmark\u003e\u003ccode\u003ecwnd_gain\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003eï¼šç­‰äº BDP ä¹˜ä»¥ä¸€ä¸ªç•¥å¤§äº 1 çš„ç³»æ•°ï¼Œ\nç”¨æ¥å®¹å¿å¸¸è§çš„ç½‘ç»œå’Œæ¥æ”¶ç«¯å¼‚å¸¸ï¼ˆpathologiesï¼‰ (è§åæ–‡ Delayed and Stretched\nACKs å°èŠ‚)ã€‚\u003c/p\u003e\n  \u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2 id=\"33-bbr-å‘é€æ•°æ®æ—¶çš„é€»è¾‘\"\u003e3.3 BBR å‘é€æ•°æ®æ—¶çš„é€»è¾‘\u003c/h2\u003e\n\n\u003cp\u003eTCP å‘åŒ…æ—¶çš„ BBR é€»è¾‘å¦‚ä¸‹ï¼š\u003c/p\u003e\n\n\u003cdiv class=\"language-c highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003efunction\u003c/span\u003e \u003cspan class=\"n\"\u003esend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epacket\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003ebdp\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eBtlBwFilter\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecurrent_max\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eRTpropFilter\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecurrent_min\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// è®¡ç®— BDP\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einflight\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"n\"\u003ecwnd_gain\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ebdp\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e                          \u003cspan class=\"c1\"\u003e// å¦‚æœæ­£åœ¨ä¼ è¾“ä¸­çš„æ•°æ®é‡è¶…è¿‡äº†å…è®¸çš„æœ€å¤§å€¼\u003c/span\u003e\n     \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e                                                 \u003cspan class=\"c1\"\u003e// ç›´æ¥è¿”å›ï¼Œæ¥ä¸‹æ¥å°±ç­‰ä¸‹ä¸€ä¸ª ACKï¼Œæˆ–è€…ç­‰è¶…æ—¶é‡ä¼ \u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e// èƒ½æ‰§è¡Œåˆ°è¿™è¯´æ˜ inflight \u0026lt; cwnd_gain * bdpï¼Œå³æ­£åœ¨ä¼ è¾“ä¸­çš„æ•°æ®é‡ \u0026lt; ç“¶é¢ˆå®¹é‡\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enow\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"n\"\u003enext_send_time\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n     \u003cspan class=\"n\"\u003epacket\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enextPacketToSend\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n     \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003epacket\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e                      \u003cspan class=\"c1\"\u003e// å¦‚æœæ²¡æœ‰æ•°æ®è¦å‘é€\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eapp_limited_until\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003einflight\u003c/span\u003e   \u003cspan class=\"c1\"\u003e// æ›´æ–° â€œåœ¨è¾¾åˆ°ç“¶é¢ˆå®¹é‡ä¹‹å‰ï¼Œä»ç„¶å¯å‘é€çš„æ•°æ®é‡â€\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\n\n     \u003cspan class=\"n\"\u003epacket\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eapp_limited\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eapp_limited_until\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// å¦‚æœä»ç„¶èƒ½å‘é€è‹¥å¹²å­—èŠ‚æ‰ä¼šè¾¾åˆ°ç“¶é¢ˆå®¹é‡ï¼Œè¯´æ˜å¤„äº app_limited çŠ¶æ€\u003c/span\u003e\n     \u003cspan class=\"n\"\u003epacket\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esendtime\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enow\u003c/span\u003e\n     \u003cspan class=\"n\"\u003epacket\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edelivered\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edelivered\u003c/span\u003e\n     \u003cspan class=\"n\"\u003epacket\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edelivered_time\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edelivered_time\u003c/span\u003e\n     \u003cspan class=\"n\"\u003eship\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epacket\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n     \u003cspan class=\"n\"\u003enext_send_time\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enow\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003epacket\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epacing_gain\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eBtlBwFilter\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecurrent_max\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n  \u003cspan class=\"n\"\u003etimerCallbackAt\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esend\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003enext_send_time\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eåœ¨ Linux å®ç°ä¸­ï¼ŒBBR å‘é€è¿‡ç¨‹ä¼šç”¨åˆ°é«˜æ•ˆçš„ \u003cstrong\u003e\u003cmark\u003eFQ/pacing qdisc\u003c/mark\u003e\u003c/strong\u003e\u003csup\u003e4\u003c/sup\u003eï¼Œ\nè¿™ä½¿å¾— BBR åœ¨å¤šæ¡ Gbps é“¾è·¯ä¸Šï¼Œå•æ¡è¿æ¥çš„æ€§èƒ½å°±èƒ½è¾¾åˆ°çº¿é€Ÿï¼›CPU å¼€é”€å‡ ä¹å¯ä»¥å¿½ç•¥\nï¼Œå°±èƒ½å¤„ç†å‡ åƒæ¡ä½é€Ÿ paced è¿æ¥ã€‚\u003c/p\u003e\n\n\u003ch2 id=\"34-ç¨³æ€è¡Œä¸ºsteady-state-behavior\"\u003e3.4 ç¨³æ€è¡Œä¸ºï¼ˆSteady-state behaviorï¼‰\u003c/h2\u003e\n\n\u003ch3 id=\"è·¯å¾„é€‚é…ä¸æ§åˆ¶å¾ªç¯\"\u003eè·¯å¾„é€‚é…ä¸æ§åˆ¶å¾ªç¯\u003c/h3\u003e\n\n\u003cp\u003eBBR çš„\u003cstrong\u003e\u003cmark\u003eå‘é€é€Ÿç‡\u003c/mark\u003e\u003c/strong\u003eå’Œå‘é€æ•°æ®é‡åªæ˜¯ä¼°è®¡å‡ºçš„ \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eBtlBw\u003c/code\u003e å’Œ \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eRTprop\u003c/code\u003e\nçš„ä¸€ä¸ªå‡½æ•°ï¼Œè¿‡æ»¤å™¨ï¼ˆfiltersï¼‰é™¤äº†è¦å¯¹ç“¶é¢ˆè¿›è¡Œä¼°è®¡ä¹‹å¤–ï¼Œè¿˜è¦æ§åˆ¶\u003cstrong\u003e\u003cmark\u003eå¯¹ä¼ è¾“è·¯å¾„çš„é€‚é…\u003c/mark\u003e\u003c/strong\u003e\nï¼ˆcontrol adaptationï¼‰ã€‚è¿™äº§ç”Ÿäº†å¦‚å›¾ 2 æ‰€ç¤ºçš„æ–°çš„æ§åˆ¶å¾ªç¯ï¼Œ\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/bbr-paper/vanjacobson2.png\" width=\"60%\" height=\"60%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eFig 2.  RTT (blue), inflight (green), BtlBw max filter (black) and delivery rate (red) detail\u003c/p\u003e\n\n\u003cp\u003eä»ä¸Šåˆ°ä¸‹å››æ¡æ¨ªçº¿ï¼š\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003eRTT\u003c/li\u003e\n  \u003cli\u003einflight\u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003eBtlBw çš„ä¼°è®¡å€¼ï¼ˆçŠ¶æ€ï¼‰\u003c/p\u003e\n\n    \u003cul\u003e\n      \u003cli\u003eå®ƒä¸Šé¢çš„é‚£è¡Œè¡¨æ ¼æ˜¯\u003cstrong\u003e\u003cmark\u003epacing_gain\u003c/mark\u003e\u003c/strong\u003eï¼Œå®ƒæ˜¯ä¸€ä¸ªå›ºå®šæ•°ç»„ï¼Œä¸æ–­å¾ªç¯ï¼›\u003c/li\u003e\n      \u003cli\u003eæ¯ä¸ªæ—¶åˆ»ä½¿ç”¨çš„ pacing_gain åŠå…¶æ•ˆæœåœ¨å›¾ä¸­æ˜¯å¯¹é½çš„ï¼›\u003c/li\u003e\n      \u003cli\u003eæ¯ä¸ª gain ä¼šåœ¨å‘é€æ•°æ®æ—¶ä½¿ç”¨ï¼Œå› æ­¤æ˜¯æ—©ä¸€ä¸ª RTT çª—å£ï¼›è¿™å¯ä»¥ä»å›¾ä¸­ä»ä¸‹å¾€ä¸Šã€å†ä»ä¸Šå¾€ä¸‹çš„æ•´ä¸ªç¯è·¯çœ‹å‡ºæ¥ã€‚\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003edelivery rateï¼ˆå®é™…ä¼ è¾“é€Ÿç‡ï¼‰\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eå‡ ç‚¹è¯´æ˜ï¼š\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003eå›¾ä¸­å‡¸èµ·çš„\u003cstrong\u003e\u003cmark\u003eå°–å³°æ˜¯ BBR ä½¿ç”¨ pacing_gain å‘¨æœŸåˆ‡æ¢å¯¼è‡´\u003c/mark\u003e\u003c/strong\u003eçš„ï¼Œç›®çš„æ˜¯åˆ¤æ–­ BtlBw æ˜¯å¦æœ‰å¢åŠ ã€‚\u003c/li\u003e\n  \u003cli\u003eBBR åœ¨å¤§éƒ¨åˆ†æ—¶é—´éƒ½\u003cstrong\u003e\u003cmark\u003eå°† inflight æ•°æ®é‡ä¿æŒåœ¨ä¸€ä¸ª BDP\u003c/mark\u003e\u003c/strong\u003eï¼Œå¹¶ç”¨ BtlBw estimate è¿›è¡Œ paceï¼Œä»¥æ­¤æ¥\u003cstrong\u003e\u003cmark\u003eæœ€å°åŒ–å»¶è¿Ÿ\u003c/mark\u003e\u003c/strong\u003eã€‚\n  è¿™å°†\u003cstrong\u003e\u003cmark\u003eç“¶é¢ˆä»é“¾è·¯å‰ç§»åˆ°äº†å‘é€ç«¯\u003c/mark\u003e\u003c/strong\u003eï¼Œå› æ­¤å‘é€ç«¯æ˜¯æ— æ³•çœ‹åˆ° BtlBw å‡é«˜çš„ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch3 id=\"ç¨³æ€çš„æ”¶æ•›è¿‡ç¨‹\"\u003eç¨³æ€çš„æ”¶æ•›è¿‡ç¨‹\u003c/h3\u003e\n\n\u003cp\u003eBBR ä¼šå®šæœŸä½¿ç”¨ \u003ccode class=\"language-plaintext highlighter-rouge\"\u003epacing_gain \u0026gt; 1\u003c/code\u003e æ¥å‡åˆ†æ¯ä¸ª RTprop intervalï¼Œå¢å¤§äº†å‘é€é€Ÿç‡å’Œ inflight æ•°æ®é‡ã€‚\nä¸‹é¢è¿™æ˜¯å¦‚ä½•ä¿æŒï¼ˆæˆ–è¾¾åˆ°æ–°çš„ï¼‰ç¨³æ€çš„ã€‚\u003c/p\u003e\n\n\u003cp\u003eè€ƒè™‘é“¾è·¯ç“¶é¢ˆå¸¦å®½ BtlBw çš„ä¸¤ç§å¯èƒ½æƒ…å†µï¼š\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003eç»§ç»­ä¿æŒæ’å®šï¼ˆå¤§éƒ¨åˆ†æƒ…å†µï¼‰\u003c/li\u003e\n  \u003cli\u003eçªç„¶å¢å¤§ï¼ˆä¾‹å¦‚\u003cstrong\u003e\u003cmark\u003eç‰©ç†é“¾è·¯æ‰©å®¹\u003c/mark\u003e\u003c/strong\u003eï¼‰\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eå¦‚æœ BtlBw æ’å®šï¼Œ\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eå¢åŠ çš„æ•°æ®é‡ä¼šåœ¨ç“¶é¢ˆå¤„åˆ›å»ºä¸€ä¸ª queueï¼Œè¿™ä¼šå¯¼è‡´ RTT å˜å¤§ï¼Œä½† \u003ccode class=\"language-plaintext highlighter-rouge\"\u003edeliveryRate\u003c/code\u003e æ­¤æ—¶è¿˜æ˜¯æ’å®šçš„ï¼›\u003c/li\u003e\n  \u003cli\u003eä¸‹ä¸€ä¸ª RTprop çª—å£ä¼šä»¥ \u003ccode class=\"language-plaintext highlighter-rouge\"\u003epacing_gain \u0026lt; 1\u003c/code\u003e å‘é€æ•°æ®ï¼Œä»è€Œä¼šå°†è¿™ä¸ª queue ç§»é™¤ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eå¦‚æœ BtlBw å¢å¤§äº†ï¼Œ\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003edeliveryRate\u003c/code\u003e ä¹Ÿä¼šå¢å¤§ï¼Œé‚£ä¹ˆæ–°çš„æœ€å¤§å€¼ä¼šç«‹å³å¯¼è‡´ BtlBw çš„ä¼°è®¡å€¼å˜å¤§ï¼Œä»è€Œå¢å¤§äº†åŸºç¡€ pacing é€Ÿç‡ã€‚\u003c/li\u003e\n  \u003cli\u003eå› æ­¤ï¼ŒBBR ä¼šä»¥\u003cstrong\u003e\u003cmark\u003eæŒ‡æ•°çº§å¿«é€Ÿæ”¶æ•›åˆ°æ–°çš„ç“¶é¢ˆé€Ÿç‡\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eå›¾ 3 å±•ç¤ºäº†ä¸€ä¸ªåŸæœ¬è¿è¡Œåœ¨ \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e10-Mbps/40-ms\u003c/code\u003e flowï¼Œé“¾è·¯ç“¶é¢ˆçªç„¶ç¿»å€åˆ° 20 Mbpsï¼Œå¹³ç¨³è¿è¡Œ 20s ä¹‹å\nåˆé‡æ–°å›åˆ° 10Mbps çš„æ•ˆæœï¼š\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/bbr-paper/vanjacobson3.png\" width=\"90%\" height=\"90%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eFig 3. Bandwidth change\u003c/p\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003eBBR æ˜¯ä¸€ä¸ª max-plus æ§åˆ¶ç³»ç»Ÿï¼ˆä¸€ç§åŸºäº \u003ccode class=\"language-plaintext highlighter-rouge\"\u003emax()\u003c/code\u003e å’ŒåŠ æ³•æ“ä½œçš„ä»£æ•°ï¼‰çš„ä¸€ä¸ªå…·ä½“ä½¿ç”¨åœºæ™¯ï¼Œè¿™æ˜¯ä¸€ç§åŸºäºéæ ‡å‡†ä»£æ•°è¿›è¡Œæ§åˆ¶çš„æ–°æ–¹å¼\u003csup\u003e12\u003c/sup\u003eã€‚\nè¿™ç§æ–¹å¼å…è®¸ adaptation rate ï¼ˆç”± \u003ci\u003emax\u003c/i\u003e gain æ§åˆ¶ï¼‰ç‹¬ç«‹äº queue growth ï¼ˆç”± \u003ci\u003eaverage\u003c/i\u003e gain æ§åˆ¶ï¼‰ã€‚\nåº”ç”¨åˆ°è¿™é‡Œï¼Œå¾—åˆ°çš„å°±æ˜¯ä¸€ä¸ªç®€å•ã€éšå«çš„æ§åˆ¶å¾ªç¯ï¼Œå…¶ä¸­ï¼Œå¯¹ç‰©ç†é™åˆ¶çš„å˜åŒ–çš„é€‚åº”è¿‡ç¨‹ï¼Œ\nç”±ä»£è¡¨è¿™äº›é™åˆ¶çš„ filters è‡ªåŠ¨å¤„ç†ã€‚è€Œä¼ ç»Ÿæ§åˆ¶ç³»ç»Ÿåˆ™éœ€è¦é€šè¿‡ä¸€ä¸ªå¤æ‚çŠ¶æ€æœºè¿æ¥\nèµ·æ¥çš„å¤šä¸ªå¾ªç¯ï¼Œæ‰èƒ½å®ŒæˆåŒæ ·æ•ˆæœã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch1 id=\"4-bbr-flow-è¡Œä¸º\"\u003e4 BBR Flow è¡Œä¸º\u003c/h1\u003e\n\n\u003ch2 id=\"41-bbr-çŠ¶æ€æœº\"\u003e4.1 BBR çŠ¶æ€æœº\u003c/h2\u003e\n\n\u003cp\u003eç°æœ‰çš„å®ç°ä½¿ç”¨äº‹ä»¶ç›¸å…³ï¼ˆevent-specificï¼‰çš„ç®—æ³•å’Œä»£ç æ¥å¤„ç†å¯åŠ¨ã€å…³é—­å’Œä¸¢åŒ…æ¢å¤ç­‰äº‹ä»¶ã€‚\u003c/p\u003e\n\n\u003cp\u003eBBR ä½¿ç”¨ä¸Šä¸€èŠ‚çš„\u003cstrong\u003e\u003cmark\u003eä¸¤ä¸ªå‡½æ•°\u003c/mark\u003e\u003c/strong\u003e \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eonAck()\u003c/code\u003e å’Œ \u003ccode class=\"language-plaintext highlighter-rouge\"\u003esend()\u003c/code\u003e \u003cstrong\u003e\u003cmark\u003eå¤„ç†æ‰€æœ‰äº‹æƒ…\u003c/mark\u003e\u003c/strong\u003eï¼Œ\né€šè¿‡åºåˆ—åŒ–ä¸€ç»„â€œçŠ¶æ€â€æ¥å¤„ç†äº‹ä»¶ï¼Œå…¶ä¸­â€œçŠ¶æ€â€å®šä¹‰ä¸ºä¸€ä¸ª tableï¼Œå…¶ä¸­æè¿°çš„æ˜¯ä¸€ç»„å›ºå®šå¢ç›Šå’Œé€€å‡ºæ¡ä»¶ï¼ˆfixed gains and exit criteriaï¼‰ã€‚\u003c/p\u003e\n\n\u003cdiv class=\"language-c highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// include/uapi/linux/inet_diag.h\u003c/span\u003e\n\n\u003cspan class=\"cm\"\u003e/* BBR has the following modes for deciding how fast to send: */\u003c/span\u003e\n\u003cspan class=\"k\"\u003eenum\u003c/span\u003e \u003cspan class=\"n\"\u003ebbr_mode\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\u003cspan class=\"n\"\u003eBBR_STARTUP\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\t\u003cspan class=\"cm\"\u003e/* ramp up sending rate rapidly to fill pipe */\u003c/span\u003e\n\t\u003cspan class=\"n\"\u003eBBR_DRAIN\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\t\u003cspan class=\"cm\"\u003e/* drain any queue created during startup */\u003c/span\u003e\n\t\u003cspan class=\"n\"\u003eBBR_PROBE_BW\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\t\u003cspan class=\"cm\"\u003e/* discover, share bw: pace around estimated bw */\u003c/span\u003e\n\t\u003cspan class=\"n\"\u003eBBR_PROBE_RTT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\t\u003cspan class=\"cm\"\u003e/* cut inflight to min to probe min_rtt */\u003c/span\u003e\n\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n\u003cspan class=\"cm\"\u003e/* The pacing_gain values for the PROBE_BW gain cycle, to discover/share bw: */\u003c/span\u003e\n\u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ebbr_pacing_gain\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\u003cspan class=\"n\"\u003eBBR_UNIT\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\t\u003cspan class=\"cm\"\u003e/* probe for more available bw */\u003c/span\u003e\n\t\u003cspan class=\"n\"\u003eBBR_UNIT\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\t\u003cspan class=\"cm\"\u003e/* drain queue and/or yield bw to other flows */\u003c/span\u003e\n\t\u003cspan class=\"n\"\u003eBBR_UNIT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eBBR_UNIT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eBBR_UNIT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\t\u003cspan class=\"cm\"\u003e/* cruise at 1.0*bw to utilize pipe, */\u003c/span\u003e\n\t\u003cspan class=\"n\"\u003eBBR_UNIT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eBBR_UNIT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eBBR_UNIT\u003c/span\u003e\t\u003cspan class=\"cm\"\u003e/* without creating excess queue... */\u003c/span\u003e\n\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eçŠ¶æ€æœºï¼š\u003c/p\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e// net/ipv4/tcp_bbr.c\n\n                                   |\n                                   V\n                          +---\u0026gt; STARTUP  ----+\n                          |        |         |\n                          |        V         |\n                          |      DRAIN   ----+\n                          |        |         |\n                          |        V         |\n                          +---\u0026gt; PROBE_BW ----+\n                          |      ^    |      |\n                          |      |    |      |\n                          |      +----+      |\n                          |                  |\n                          +---- PROBE_RTT \u0026lt;--+\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003col\u003e\n  \u003cli\u003e\n    \u003cp\u003eStartup çŠ¶æ€å‘ç”Ÿåœ¨è¿æ¥å¯åŠ¨æ—¶ï¼›\u003c/p\u003e\n\n    \u003col\u003e\n      \u003cli\u003eä¸ºäº†å¤„ç†è·¨ 12 ä¸ªé‡çº§çš„äº’è”ç½‘é“¾è·¯å¸¦å®½ï¼ŒStartup ä¸º BtlBw å®ç°äº†ä¸€ä¸ªäºŒåˆ†æŸ¥æ‰¾ï¼Œéš\n   ç€ä¼ è¾“é€Ÿç‡å¢åŠ ï¼Œæ¯æ¬¡ç”¨ 2/ln2 å¢ç›Šæ¥ double å‘é€é€Ÿç‡ã€‚\n   è¿™ä¼šåœ¨ \u003ci\u003elog\u003csub\u003e2\u003c/sub\u003eBDP\u003c/i\u003e ä¸ª RTT çª—å£å†…æ¢æµ‹å‡º BDPï¼Œä½†è¿‡ç¨‹ä¸­ä¼šå¯¼è‡´æœ€å¤šä¸¤ä¸ª \n   \u003ci\u003e2BDP\u003c/i\u003e çš„ç§¯å‹ï¼ˆexcess queueï¼‰ã€‚\u003c/li\u003e\n      \u003cli\u003eæ¢æµ‹å‡º BtlBw ä¹‹åï¼ŒBBR è½¬å…¥ Drain çŠ¶æ€ã€‚\u003c/li\u003e\n    \u003c/ol\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003eDrain çŠ¶æ€å‘ç”Ÿåœ¨è¿æ¥å¯åŠ¨æ—¶ï¼›\u003c/p\u003e\n\n    \u003col\u003e\n      \u003cli\u003eDrain çŠ¶æ€åˆ©ç”¨ä¸ Startup ç›¸åçš„å¢ç›Šï¼Œæ¥æ’å°½é‚£äº›ç§¯å‹åœ¨ç¼“å†²åŒºä¸­çš„æ•°æ®ï¼Œ\u003c/li\u003e\n      \u003cli\u003einflight æ•°æ®é‡é™ä½åˆ°ä¸€ä¸ª BDP ä¹‹åï¼Œè½¬å…¥ ProbeBW çŠ¶æ€ï¼›\u003c/li\u003e\n    \u003c/ol\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003e\u003cstrong\u003e\u003cmark\u003eå¤§éƒ¨åˆ†æ—¶é—´èŠ±åœ¨ ProbeBW çŠ¶æ€\u003c/mark\u003e\u003c/strong\u003eï¼Œå…·ä½“å†…å®¹å°±æ˜¯å‰é¢å·²ç»ä»‹ç»çš„\u003cstrong\u003e\u003cmark\u003eâ€œç¨³æ€è¡Œä¸ºâ€æ”¶æ•›è¿‡ç¨‹\u003c/mark\u003e\u003c/strong\u003eï¼›\u003c/p\u003e\n  \u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2 id=\"42-å•æ¡-bbr-flow-çš„å¯åŠ¨æ—¶è¡Œä¸º\"\u003e4.2 å•æ¡ BBR flow çš„å¯åŠ¨æ—¶è¡Œä¸º\u003c/h2\u003e\n\n\u003cp\u003eå›¾ 4 å±•ç¤ºäº†ä¸€ä¸ª \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e10-Mbps/40-ms\u003c/code\u003e BBR TCP flow çš„å‰ 1 ç§’ï¼Œ\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eå‘é€ç«¯ï¼ˆç»¿è‰²ï¼‰å’Œæ¥æ”¶ç«¯ï¼ˆè“è‰²ï¼‰éšæ—¶é—´çš„å˜åŒ–ã€‚\u003c/li\u003e\n  \u003cli\u003eçº¢è‰²æ˜¯ CUBIC å‘é€ç«¯åœ¨å®Œå…¨ç›¸åŒæ¡ä»¶ä¸‹çš„è¡Œä¸ºã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/bbr-paper/vanjacobson4.png\" width=\"60%\" height=\"60%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eFig 4. First second of a 10-Mbps, 40-ms BBR flow. \u003c/p\u003e\n\n\u003cp\u003eå‡ ç‚¹è§£é‡Šï¼š\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003e\n    \u003cp\u003eä¸ŠåŠéƒ¨åˆ†å›¾å±•ç¤ºçš„æ˜¯ BBR å’Œ CUBIC è¿æ¥çš„ RTT éšæ—¶é—´çš„å˜åŒ–ã€‚æ³¨æ„ï¼Œè¿™ä»½æ•°æ®çš„æ—¶\né—´å‚è€ƒæ˜¯ ACK åˆ°è¾¾ï¼ˆè“è‰²ï¼‰ï¼Œå› æ­¤ï¼Œwhile they appear to be time shifted,\nevents are shown at the point where BBR learns of them and acts.\u003c/p\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003eä¸‹åŠéƒ¨åˆ†å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒBBR å’Œ CUBIC çš„åˆå§‹è¡Œä¸ºæ˜¯ç±»ä¼¼çš„ï¼Œä½† \u003cstrong\u003e\u003cmark\u003eBBR èƒ½å®Œå…¨æ’å°½å®ƒçš„ startup queue è€Œ CUBIC ä¸èƒ½\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/p\u003e\n\n    \u003cp\u003eCUBIC ç®—æ³•ä¸­æ²¡æœ‰ inflight ä¿¡æ¯ï¼Œå› æ­¤å®ƒåé¢çš„ inflight è¿˜ä¼šæŒç»­å¢é•¿ï¼ˆè™½ç„¶æ²¡é‚£ä¹ˆæ¿€è¿›ï¼‰ï¼Œç›´åˆ°\n ç“¶é¢ˆ buffer æ»¡äº†å¯¼è‡´ä¸¢åŒ…ï¼Œæˆ–è€…æ¥æ”¶æ–¹çš„ inflight limit (TCPâ€™s receive window) è¾¾åˆ°äº†ã€‚\u003c/p\u003e\n  \u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eå›¾ 5 æ˜¯è¿™æ¡ flow å‰ 8 ç§’çš„è¯¦æƒ…ï¼Œ\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/bbr-paper/vanjacobson5.png\" width=\"60%\" height=\"60%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eFig 5. First eight seconds of 10-Mbps, 40-ms CUBIC and BBR flows. \u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003eCUBIC (red) å¡«æ»¡äº†å¯ç”¨ç¼“å†²åŒºï¼Œç„¶åæ¯éš”å‡ ç§’å°±ä¼šä» 70% to 100%ï¼›\u003c/li\u003e\n  \u003cli\u003eè€Œ BBRï¼ˆç»¿è‰²ï¼‰å¯åŠ¨ä¹‹åï¼Œåé¢è¿è¡Œæ—¶å°±\u003cstrong\u003e\u003cmark\u003eä¸ä¼šå†å‡ºç°ç§¯å‹\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2 id=\"43-å…±äº«åŒä¸€ç“¶é¢ˆçš„å¤šæ¡-bbr-flow-çš„è¡Œä¸º\"\u003e4.3 å…±äº«åŒä¸€ç“¶é¢ˆçš„å¤šæ¡ BBR flow çš„è¡Œä¸º\u003c/h2\u003e\n\n\u003cp\u003eå›¾ 6 å±•ç¤ºäº†å…±äº«åŒä¸€ 100-Mbps/10-ms ç“¶é¢ˆçš„å¤šæ¡ BBR flow å„è‡ªçš„ååï¼Œä»¥åŠå¦‚ä½•æ”¶æ•›åˆ°å…¬å¹³ä»½é¢çš„ï¼š\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/bbr-paper/vanjacobson6.png\" width=\"60%\" height=\"60%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eFig 6. Throughputs of 5 BBR flows sharing a bottleneck \u003c/p\u003e\n\n\u003cp\u003eå›¾ä¸­å‘ä¸‹çš„å‡ ä¸ªä¸‰è§’å½¢ï¼Œæ˜¯ connection ProbeRTT statesï¼Œå®ƒä»¬çš„ self-synchronization åŠ é€Ÿäº†æœ€ç»ˆæ”¶æ•›ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eProbeBW gain å‘¨æœŸæ€§å˜åŒ–ï¼ˆè§å‰é¢å›¾ 2ï¼‰ï¼Œä½¿\u003cstrong\u003e\u003cmark\u003eå¤§ flow å°†å¸¦å®½åŒ€ç»™å° flow\u003c/mark\u003e\u003c/strong\u003eï¼Œ\næœ€ç»ˆæ¯ä¸ª flow éƒ½å¾—åˆ°ä¸€ä¸ªå…¬å¹³çš„ä»½é¢ï¼›\u003c/li\u003e\n  \u003cli\u003eæ•´ä¸ªè¿‡ç¨‹éå¸¸å¿«ï¼ˆ\u003cstrong\u003e\u003cmark\u003eå‡ ä¸ª ProbeBW å‘¨æœŸ\u003c/mark\u003e\u003c/strong\u003eï¼‰ï¼›\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eä½†å¦‚æœæŸäº› flow å·²ç»ï¼ˆçŸ­æ—¶åœ°ï¼‰å¯¼è‡´ç§¯å‹ï¼Œåæ¥è€…ä¼šè¿‡é«˜ä¼°è®¡ RTPropï¼Œå¯èƒ½ä¸€æ®µæ—¶é—´å†…\nçš„ä¸å…¬å¹³ï¼ˆæ”¶æ•›æ—¶é—´è¶…å‡ºå‡ ä¸ª ProbeBW å‘¨æœŸï¼‰ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eè¦å­¦ä¹ åˆ°çœŸæ­£çš„ RTPropï¼Œéœ€è¦é€šè¿‡ ProbeRTT çŠ¶æ€ç§»åŠ¨åˆ° BDP çš„å·¦ä¾§ï¼š\u003c/li\u003e\n  \u003cli\u003eå½“ RTProp estimate æŒç»­å‡ ç§’é’Ÿæœªè¢«æ›´æ–°æ—¶ï¼ˆä¾‹å¦‚ï¼Œæ²¡æœ‰æµ‹é‡åˆ°ä¸€ä¸ªæ›´ä½çš„ RTTï¼‰\nBBR è¿›å…¥ ProbeRTTï¼Œè¿™ä¼šå°† inflight é™ä½åˆ°æ¯ä¸ª RTT ä¸è¶…è¿‡ 4 åŒ…ï¼Œç„¶åå†è¿”å›ä¹‹å‰çš„çŠ¶æ€ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eå¤§ flow è¿›å…¥ ProbeRTT ä¹‹åä¼šä»ç§¯å‹é˜Ÿåˆ—ä¸­ drain å¾ˆå¤šåŒ…ï¼Œå› æ­¤ä¸€äº› flows å°±èƒ½è§‚æµ‹\nåˆ°ä¸€ä¸ªæ–°çš„ RTprop (new minimum RTT)ã€‚è¿™ä½¿å¾—å®ƒä»¬çš„ RTprop estimates åœ¨åŒä¸€æ—¶é—´è¿‡\næœŸï¼Œå› æ­¤é›†ä¸­è¿›å…¥ ProbeRTT çŠ¶æ€ï¼Œè¿™ä¼šè¿›ä¸€æ­¥ä½¿ç§¯å‹çš„æ•°æ®æ›´å¿«æ¶ˆåŒ–ï¼Œä»è€Œä½¿æ›´å¤š flow\nçœ‹åˆ°æ–°çš„ RTpropï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™ç§\u003cstrong\u003e\u003cmark\u003eåˆ†å¸ƒå¼åè°ƒ\u003c/mark\u003e\u003c/strong\u003eï¼ˆdistributed\ncoordinationï¼‰æ˜¯å…¬å¹³æ€§å’Œç¨³å®šæ€§ï¼ˆfairness and stabilityï¼‰çš„å…³é”®ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eBBR çš„æœŸæœ›çŠ¶æ€æ˜¯\u003cstrong\u003e\u003cmark\u003eç“¶é¢ˆé˜Ÿåˆ—é›¶ç§¯å‹\u003c/mark\u003e\u003c/strong\u003eï¼ˆan empty bottleneck queueï¼‰\nï¼Œå¹¶å›´ç»•è¿™ä¸ªç›®æ ‡ä¸æ–­åŒæ­¥ flowï¼›\u003c/li\u003e\n  \u003cli\u003eåŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶ï¼ŒæœŸæœ›çŠ¶æ€æ˜¯\u003cstrong\u003e\u003cmark\u003eé˜Ÿåˆ—çš„å®šæœŸç§¯å‹å’Œæº¢å‡º\u003c/mark\u003e\u003c/strong\u003eï¼ˆ\nperiodic queue growth and overflowï¼Œè¿™ä¼šå¯¼è‡´å»¶è¿Ÿæ”¾å¤§å’Œä¸¢åŒ…ï¼‰ï¼Œå¹¶å›´ç»•è¿™ä¸ªç›®æ ‡ä¸æ–­åŒæ­¥ flowã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1 id=\"5-éƒ¨ç½²ç»éªŒ\"\u003e5 éƒ¨ç½²ç»éªŒ\u003c/h1\u003e\n\n\u003ch2 id=\"51-google-b4-å¹¿åŸŸç½‘wanéƒ¨ç½²ç»éªŒ\"\u003e5.1 Google B4 å¹¿åŸŸç½‘ï¼ˆWANï¼‰éƒ¨ç½²ç»éªŒ\u003c/h2\u003e\n\n\u003cp\u003eB4 æ˜¯ Google ç”¨\u003cstrong\u003e\u003cmark\u003eå•†ç”¨äº¤æ¢æœº\u003c/mark\u003e\u003c/strong\u003eï¼ˆcommodity switchesï¼‰æ„å»ºçš„é«˜é€Ÿå¹¿åŸŸç½‘\u003csup\u003e15\u003c/sup\u003eã€‚\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eè¿™äº›\u003cstrong\u003e\u003cmark\u003eå°ç¼“å†²åŒºï¼ˆshallow-bufferedï¼‰äº¤æ¢æœº\u003c/mark\u003e\u003c/strong\u003eçš„ä¸¢åŒ…ä¸»è¦æ¥è‡ª\u003cstrong\u003e\u003cmark\u003eå¶å‘çš„çªå‘æµé‡\u003c/mark\u003e\u003c/strong\u003eï¼›\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003e\u003cmark\u003e2015\u003c/mark\u003e\u003c/strong\u003e å¹´ï¼ŒGoogle å¼€å§‹å°† B4 ä¸Šçš„ç”Ÿäº§æµé‡\u003cstrong\u003e\u003cmark\u003eä» CUBIC åˆ‡æ¢åˆ° BBR\u003c/mark\u003e\u003c/strong\u003eï¼ŒæœŸé—´æ²¡æœ‰å‡ºç°é‡å¤§é—®é¢˜ï¼›\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003e\u003cmark\u003e2016\u003c/mark\u003e\u003c/strong\u003e å¹´ï¼Œ\u003cstrong\u003e\u003cmark\u003eæ‰€æœ‰ B4 TCP æµé‡\u003c/mark\u003e\u003c/strong\u003eéƒ½å·²ç»åˆ‡åˆ° BBRã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eå›¾ 7 å¯ä»¥çœ‹å‡ºï¼Œ\u003cstrong\u003e\u003cmark\u003eBBR çš„ååç¨³å®šåœ°æ¯” CUBIC é«˜ 2~25 å€\u003c/mark\u003e\u003c/strong\u003eï¼Œ\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/bbr-paper/vanjacobson7.png\" width=\"55%\" height=\"55%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eFig 7. BBR vs. CUBIC relative throughput improvement. \u003cbr/\u003e\n\nä»¥æˆ‘ä»¬æŸä¸ªæ´»è·ƒçš„æ¢æµ‹å™¨ï¼ˆproberï¼‰æœåŠ¡ä½œä¸ºå®éªŒå¯¹è±¡ï¼Œè¯¥æœåŠ¡ä¼šåˆ›å»ºåˆ°è¿œç¨‹æ•°æ®ä¸­å¿ƒçš„æŒä¹… BBR å’Œ CUBIC è¿æ¥ï¼Œ\nç„¶åæ¯åˆ†é’Ÿä¼ è¾“ 8MB æ•°æ®ã€‚æ¢æµ‹å™¨ä¹‹é—´ä¼šé€šè¿‡åŒ—ç¾ã€æ¬§æ´²å’Œäºšæ´²çš„å¤šæ¡è·¨æ´²æˆ–æ´²å†… B4 è·¯å¾„é€šä¿¡ã€‚\n\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e\u003cmark\u003eä½†æŒ‰ç…§æˆ‘ä»¬çš„ç†è®ºä¼°è®¡ï¼ŒBBR çš„æ€§èƒ½åº”è¯¥æ¯”è¿™ä¸ªæ›´å¥½\u003c/mark\u003e\u003c/strong\u003eï¼Œ\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eæ’æŸ¥ä¹‹åå‘ç°ï¼Œ75% çš„ BBR è¿æ¥éƒ½å—é™äºå†…æ ¸ TCP çš„æ¥æ”¶ç¼“å†²åŒºï¼Œæˆ‘ä»¬çš„ç½‘ç»œè¿è¥å›¢\né˜Ÿä¹‹å‰æœ‰æ„å°†è¿™ä¸ªå‚æ•°è°ƒä½äº†ï¼ˆè®¾ç½®ä¸º 8MBï¼‰ï¼Œç›®çš„æ˜¯é˜²æ­¢ CUBIC MB é‡çº§çš„ç§¯å‹æ•°æ®\næ³›æ´ªï¼ˆè·¨æ´² 8-MB/200-ms RTT å°†å¯¼è‡´æœ€å¤§ 335-Mbps å¸¦å®½å ç”¨ï¼‰ï¼Œ\u003c/li\u003e\n  \u003cli\u003eæ‰‹åŠ¨å°† US-Europe çš„ä¸€æ¡è·¯å¾„ä¸Šçš„æ¥æ”¶ç¼“å†²åŒºè°ƒå¤§ä¹‹åï¼ŒBBR ç«‹å³è¾¾åˆ°äº† 2Gbps çš„å¸¦å®½ â€”â€”\nè€Œ CUBIC ä»ç„¶åªèƒ½åˆ°è¾¾ 15Mbps â€”â€” \u003cstrong\u003e\u003cmark\u003e133 å€\u003c/mark\u003e\u003c/strong\u003eçš„æå‡ï¼Œæ­£å¦‚ Mathis ç­‰äººçš„é¢„æµ‹\u003csup\u003e17\u003c/sup\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eè¿™å·¨å¤§çš„æå‡æ˜¯ BBR \u003cstrong\u003e\u003cmark\u003eæ²¡æœ‰å°†ä¸¢åŒ…ä½œä¸ºæ‹¥å¡æŒ‡ç¤ºå™¨\u003c/mark\u003e\u003c/strong\u003eï¼ˆnot using loss as a congestion indicatorï¼‰çš„ä¸€ä¸ªç›´æ¥ç»“æœã€‚\nä¸ºè¾¾åˆ°å…¨é€Ÿå¸¦å®½ï¼Œç°æœ‰çš„åŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶ï¼Œè¦æ±‚ä¸¢åŒ…ç‡ä½äº BDP çš„ inverse square \u003csup\u003e17\u003c/sup\u003e\n(e.g., å°äº one loss per 30 million packets for a 10-Gbps/100-ms path)\u003c/p\u003e\n\n\u003cp\u003eFigure 8 æ¯”è¾ƒäº†ä¸åŒä¸¢åŒ…ç‡ä¸‹çš„å®é™…ååé‡ï¼š\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/bbr-paper/vanjacobson8.png\" width=\"60%\" height=\"60%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eFig 8. BBR vs. CUBIC goodput for 60-second flows on a 100-Mbps/100-ms link with 0.001 to 50 percent random loss.\u003c/p\u003e\n\n\u003cp\u003eæœ€å¤§å¯èƒ½çš„ååæ˜¯ \u003ccode\u003eé“¾è·¯é€Ÿç‡ä¹˜ä»¥ * (1 - lossRate)\u003c/code\u003eï¼Œ\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eCUBIC çš„åååœ¨ä¸¢åŒ…ç‡ \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e0.1%\u003c/code\u003e æ—¶ä¸‹é™åˆ°äº†åŸæ¥çš„ 1/10 å€ï¼Œåœ¨\u003cstrong\u003e\u003cmark\u003eä¸¢åŒ…ç‡ 1% æ—¶å®Œå…¨è·Œé›¶äº†\u003c/mark\u003e\u003c/strong\u003eã€‚\u003cbr/\u003e\u003c/li\u003e\n  \u003cli\u003eBBR çš„åå \u003cstrong\u003e\u003cmark\u003eåœ¨ä¸¢åŒ…ç‡å°äº 5% æ—¶èƒ½ç»´æŒåœ¨æœ€å¤§å€¼\u003c/mark\u003e\u003c/strong\u003eï¼Œåœ¨ä¸¢åŒ…ç‡è¶…è¿‡ \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e15%\u003c/code\u003e ä¹‹åæ‰å¼€å§‹æ€¥å‰§ä¸‹é™ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eCUBIC çš„ loss tolerance æ˜¯å…¶ç®—æ³•çš„ä¸€ä¸ª\u003cstrong\u003e\u003cmark\u003eç»“æ„ç‰¹æ€§\u003c/mark\u003e\u003c/strong\u003eï¼ˆstructural propertyï¼‰ï¼Œ\nè€Œ BBR ä¸­å®ƒæ˜¯ä¸€ä¸ª\u003cstrong\u003e\u003cmark\u003eé…ç½®å‚æ•°\u003c/mark\u003e\u003c/strong\u003eã€‚å½“ BBR çš„\u003cstrong\u003e\u003cmark\u003eä¸¢åŒ…ç‡æ¥è¿‘ ProbeBW å³°å€¼å¢ç›Š\u003c/mark\u003e\u003c/strong\u003eæ—¶ï¼Œ\næµ‹é‡çœŸå® BtlBw çš„ä¼ è¾“é€Ÿç‡çš„æ¦‚ç‡å°†å‰§çƒˆä¸‹é™ï¼Œå¯¼è‡´æœ€å¤§å€¼è¿‡æ»¤å™¨ï¼ˆthe max filterï¼‰å°†\näº§ç”Ÿè¿‡ä½ä¼°è®¡ï¼ˆunderestimateï¼‰ã€‚\u003c/p\u003e\n\n\u003ch2 id=\"52-youtube-è¾¹ç¼˜ç½‘ç»œéƒ¨ç½²ç»éªŒ\"\u003e5.2 YouTube è¾¹ç¼˜ç½‘ç»œéƒ¨ç½²ç»éªŒ\u003c/h2\u003e\n\n\u003cp\u003eBBR å·²ç»éƒ¨ç½²åˆ°äº† Google.com å’Œ YouTube è§†é¢‘æœåŠ¡å™¨ä¸Šã€‚æˆ‘ä»¬åœ¨å°è§„æ¨¡ç°åº¦ï¼Œä¸€å°éƒ¨åˆ†ç”¨æˆ·ä¼šéšæœºè¢«åˆ†åˆ° BBR æˆ– CUBICã€‚\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eä»¥ YouTube çš„æ‰€æœ‰ä½“éªŒè´¨é‡æŒ‡æ ‡æ¥è¡¡é‡ï¼ŒBBR ç»™ç”¨æˆ·å¸¦æ¥çš„æå‡éƒ½éå¸¸æ˜æ˜¾ï¼Œè¿™å¯èƒ½æ˜¯\nç”±äº BBR çš„è¡Œä¸ºæ›´åŠ ä¸€è‡´å’Œå¯é¢„æµ‹ï¼ˆconsistent and predictableï¼‰ã€‚\u003c/li\u003e\n  \u003cli\u003eBBR åªæ˜¯ç•¥å¾®æå‡äº† Youtube çš„è¿æ¥ååï¼ˆconnection throughputï¼‰ï¼Œè¿™æ˜¯å› ä¸º\nYouTube å·²ç»å°†æœåŠ¡å™¨çš„ streaming rate å……åˆ†æ§åˆ¶åœ¨ BtlBw ä»¥ä¸‹ï¼Œä»¥æœ€å°åŒ–ç¼“å†²åŒºè†¨èƒ€ï¼ˆbufferbloatï¼‰å’Œå¤šæ¬¡ç¼“å†²ï¼ˆrebufferï¼‰é—®é¢˜ã€‚\u003c/li\u003e\n  \u003cli\u003eä½†å³ä½¿æ˜¯åœ¨è¿™æ ·çš„æ¡ä»¶ä¸‹ï¼ŒBBR ä»ç„¶å°†\u003cstrong\u003e\u003cmark\u003eå…¨çƒèŒƒå›´å†… RTT çš„ä¸­å€¼å¹³å‡é™ä½äº† 53%\u003c/mark\u003e\u003c/strong\u003eï¼Œ\nè€Œåœ¨å‘å±•ä¸­å›½å®¶ï¼Œè¿™ä¸ªé™ä½çš„ç™¾åˆ†æ¯”æ›´æ˜¯è¾¾åˆ°äº† 80%ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eå›¾ 9 å±•ç¤ºäº† BBR vs. CUBIC çš„ä¸­å€¼ RTT æå‡ï¼Œæ•°æ®æ¥è‡ªä¸€ä¸ªæ˜ŸæœŸå†…ä»äº”ä¸ªå¤§æ´²é‡‡é›†çš„è¶…\nè¿‡ 2 äº¿æ¡ YouTube playback è¿æ¥ï¼Œ\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eåœ¨å…¨çƒ 70 äº¿ç§»åŠ¨äº’è”ç”¨æˆ·ä¸­ï¼Œè¶…è¿‡ä¸€åŠæ˜¯é€šè¿‡ \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e8-114kbps\u003c/code\u003e çš„ 2.5G ç½‘ç»œæ¥å…¥çš„\u003csup\u003e5\u003c/sup\u003eï¼Œ\nè¿™ä¼šå¯¼è‡´å¾ˆå¤šå·²çŸ¥é—®é¢˜ï¼Œé—®é¢˜çš„æ ¹æºåœ¨äºï¼ŒåŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶æœ‰æ‰€è°“çš„\u003cstrong\u003e\u003cmark\u003eç¼“å†²åŒºå¡«å……å€¾å‘\u003c/mark\u003e\u003c/strong\u003e\nï¼ˆbuffer-filling propensitiesï¼‰\u003csup\u003e3\u003c/sup\u003eï¼›\u003c/li\u003e\n  \u003cli\u003eè¿™äº›ç³»ç»Ÿçš„ç“¶é¢ˆé“¾è·¯é€šå¸¸ä½äºåœ¨ SGSN (serving GPRS support node)\u003csup\u003e18\u003c/sup\u003e å’Œç§»åŠ¨è®¾å¤‡ä¹‹é—´ã€‚\nSGSN è½¯ä»¶è¿è¡Œåœ¨æœ‰è¶³å¤Ÿå†…å­˜çš„æ ‡å‡† PC å¹³å°ä¸Šï¼Œå› æ­¤\u003cstrong\u003e\u003cmark\u003eåœ¨äº’è”ç½‘å’Œç§»åŠ¨è®¾å¤‡ä¹‹é—´ç»å¸¸æœ‰æ•° MB çš„ç¼“å†²åŒº\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/bbr-paper/vanjacobson9.png\" width=\"60%\" height=\"60%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eFig 9. BBR vs. CUBIC median RTT improvement.\u003c/p\u003e\n\n\u003cp\u003eå›¾ 10 æ¯”è¾ƒï¼ˆä»¿çœŸï¼‰äº† BBR å’Œ CUBIC çš„ SGSN Internet-to-mobile delayã€‚\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/bbr-paper/vanjacobson10.png\" width=\"60%\" height=\"60%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eFig 10. Steady-state median RTT variation with link buffer size.\u003cbr/\u003e\n\nç¨³æ€æ—¶çš„ RTT éšé“¾è·¯ç¼“å†²åŒºå¤§å°çš„å˜åŒ–ï¼Œé“¾è·¯ç‰©ç†ç‰¹æ€§ï¼š128-Kbps/40-msï¼Œ8 BBR (green) / CUBIC (red) flowsã€‚\u003cbr/\u003e\nä¸ç®¡ç“¶é¢ˆç¼“å†²åŒºå¤§å°å’Œæ´»è·ƒçš„ flow æ•°é‡å¦‚ä½•ï¼Œ\u003cmark\u003eBBR å‡ ä¹ä¸€ç›´å°†é˜Ÿåˆ—ï¼ˆå»¶è¿Ÿï¼‰ä¿æŒåœ¨æœ€å°\u003c/mark\u003eï¼›\u003cbr/\u003e\nCUBIC flow æ°¸è¿œä¼šå¡«æ»¡ç¼“å†²åŒºï¼Œ å› æ­¤\u003cmark\u003eå»¶è¿Ÿéšç€ buffer size çº¿æ€§å¢é•¿\u003c/mark\u003eã€‚\n\u003c/p\u003e\n\n\u003cp\u003eå‡ æ¡æ°´å¹³çº¿å¤„è¡¨ç¤ºçš„å«ä¹‰éå¸¸é‡è¦ï¼š\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eé™¤äº†è¿æ¥å»ºè¿æ—¶çš„ SYN åŒ…ä¹‹å¤–ï¼Œ\n\u003cstrong\u003e\u003cmark\u003eTCP å·²ç»é€‚åº”åˆ°äº†ä¸€ä¸ªéå¸¸å¤§çš„ RTT å»¶è¿Ÿ\u003c/mark\u003e\u003c/strong\u003eï¼ˆåˆå§‹ SYN åŒ…å»¶è¿Ÿç”±æ“ä½œç³»ç»Ÿ hardcodeï¼Œå› æ­¤ä¸ä¼šå¾ˆå¤§ï¼‰ã€‚\u003c/li\u003e\n  \u003cli\u003eå½“ç§»åŠ¨è®¾å¤‡é€šè¿‡ä¸€ä¸ªå¤§ç¼“å†²åŒºçš„ SGSN æ¥æ”¶å¤§å—æ•°æ®æ—¶ï¼ˆä¾‹å¦‚ï¼Œæ‰‹æœºè½¯ä»¶è‡ªåŠ¨æ›´æ–°ï¼‰ï¼Œ\né‚£è¿™ä¸ªè®¾å¤‡å°±æ— æ³•è¿æ¥åˆ°äº’è”ç½‘ä¸Šçš„ä»»ä½•ä¸œè¥¿ï¼Œç›´åˆ°é˜Ÿåˆ—è¢«æ¸…ç©ºï¼ˆSYN-ACK accept\npacket è¢«å»¶è¿Ÿçš„æ—¶é—´å¤§äºå›ºå®š SYN timeoutï¼‰ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003eLinux çš„åˆå§‹è¶…æ—¶æ—¶é—´æ˜¯ 1sï¼Œè§\n\u003ca href=\"/blog/customize-tcp-initial-rto-with-bpf/\"\u003e\u003cmark\u003eCustomize TCP initial RTO (retransmission timeout) with BPF\u003c/mark\u003e\u003c/a\u003eã€‚\nè¯‘æ³¨ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch1 id=\"6-é—®é¢˜è®¨è®º\"\u003e6 é—®é¢˜è®¨è®º\u003c/h1\u003e\n\n\u003ch2 id=\"61-ç§»åŠ¨èœ‚çªç½‘ç»œä¸­çš„è‡ªé€‚åº”å¸¦å®½\"\u003e6.1 ç§»åŠ¨èœ‚çªç½‘ç»œä¸­çš„è‡ªé€‚åº”å¸¦å®½\u003c/h2\u003e\n\n\u003cp\u003eèœ‚çªç½‘ç»œä¼šæ ¹æ®æ¯ä¸ªç”¨æˆ·çš„æ•°æ®åŒ…æ’é˜Ÿï¼ˆqueue of packetsï¼‰æƒ…å†µæ¥è°ƒæ•´æ¯ä¸ªç”¨æˆ·çš„å¸¦å®½\nï¼ˆadapt per-subscriber bandwidthï¼‰ã€‚\u003c/p\u003e\n\n\u003cp\u003eæ—©æœŸç‰ˆæœ¬çš„ BBR é€šè¿‡é’ˆå¯¹æ€§è°ƒä¼˜æ¥äº§ç”Ÿéå¸¸å°çš„é˜Ÿåˆ—ï¼Œå¯¼è‡´åœ¨ä½é€Ÿæƒ…å†µä¸‹è¿æ¥ä¼šå¡ä½ï¼ˆstuck at low ratesï¼‰ã€‚\nå¢å¤§å³°å€¼ ProbeBW \u003ccode class=\"language-plaintext highlighter-rouge\"\u003epacing_gain\u003c/code\u003e æ¥äº§ç”Ÿæ›´å¤§çš„é˜Ÿåˆ—ï¼Œä¼šä½¿å¾—å¡ä½çš„æƒ…å†µå¤§å¤§å‡å°‘ï¼Œè¿™æš—ç¤º\nå¤§é˜Ÿåˆ—ï¼ˆç¼“å†²åŒºï¼‰å¯¹æŸäº›ç½‘ç»œä¹Ÿä¸æ˜¯åäº‹ã€‚\u003c/p\u003e\n\n\u003cp\u003eä½¿ç”¨å½“å‰çš„ \u003ci\u003e1.25 Ã— BtlBw\u003c/i\u003epeak gainï¼Œ\u003cstrong\u003e\u003cmark\u003eBBR åœ¨ä»»ä½•ç½‘ç»œä¸Šéƒ½ä¸ä¼šæ¯” CUBIC å·®\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/p\u003e\n\n\u003ch2 id=\"62-å»¶è¿Ÿå’Œèšåˆåº”ç­”\"\u003e6.2 å»¶è¿Ÿå’Œèšåˆåº”ç­”\u003c/h2\u003e\n\n\u003cp\u003eèœ‚çªã€WIFI å’Œæœ‰çº¿å®½å¸¦ç½‘ç»œç»å¸¸ä¼š\u003cstrong\u003e\u003cmark\u003eå»¶è¿Ÿå’Œèšåˆ ACK\u003c/mark\u003e\u003c/strong\u003eï¼ˆdelay and aggregateï¼‰\n\u003csup\u003e1\u003c/sup\u003eã€‚å½“ inflight é™åˆ¶åˆ°å•ä¸ª BDP æ—¶ï¼Œè¿™ä¼šå¯¼è‡´å› ä¸ºæ•°æ®å¤ªå°‘è€Œå¯¼è‡´çš„å¡é¡¿ï¼ˆ\nthroughput-reducing stallsï¼‰ã€‚\u003c/p\u003e\n\n\u003cp\u003eå°†å¢å¤§ ProbeBW cwnd_gain å¢å¤§åˆ° 2 ä½¿å¾— BBR èƒ½åœ¨ä¼°è®¡çš„ä¼ è¾“é€Ÿç‡ä¸ŠæŒç»­å¹³ç¨³å‘é€ï¼Œå³ä½¿\nACK è¢«å»¶è¿Ÿäº†ä¸€ä¸ª RTTï¼Œè¿™æ˜¾è‘—é¿å…äº†å¡é¡¿ï¼ˆstallsï¼‰ã€‚\u003c/p\u003e\n\n\u003ch2 id=\"63-å…¥å‘æµé‡æ•´å½¢token-bucket-policers\"\u003e6.3 å…¥å‘æµé‡æ•´å½¢ï¼ˆToken-Bucket Policersï¼‰\u003c/h2\u003e\n\n\u003cp\u003eBBR åœ¨ YouTube éƒ¨ç½²ä¹‹åï¼Œæˆ‘ä»¬å‘ç°ä¸–ç•Œä¸Šå¤§éƒ¨åˆ† ISP éƒ½ä¼šç”¨ TBP æ¥å¯¹æ¥æ”¶åˆ°çš„æµé‡è¿›è¡Œå¤„ç†ï¼ˆmangleï¼‰ \u003csup\u003e7\u003c/sup\u003eã€‚\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eè¿æ¥åˆšå¯åŠ¨æ—¶ï¼Œbucket é€šå¸¸æ˜¯æ»¡çš„ï¼Œå› æ­¤ BBR èƒ½å­¦åˆ°åº•å±‚ç½‘ç»œçš„ BtlBwï¼Œ\u003c/li\u003e\n  \u003cli\u003eä¸€æ—¦ bucket ç©ºäº†ï¼Œæ‰€æœ‰å‘é€é€Ÿç‡å¿«äºï¼ˆæ¯” BtlBw ä½ä¸€äº›çš„ï¼‰bucket å¡«å……é€Ÿç‡çš„åŒ…ï¼Œéƒ½ä¼šè¢«ä¸¢å¼ƒï¼Œ\u003c/li\u003e\n  \u003cli\u003eBBR æœ€ç»ˆä¼šå­¦åˆ°è¿™ä¸ªæ–°çš„ä¼ è¾“é€Ÿç‡ï¼Œä½† ProbeBW gain cycle ä¼šå¯¼è‡´æŒç»­çš„ã€å°‘é‡çš„ä¸¢åŒ…ï¼ˆcontinuous moderate lossesï¼‰ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eä¸ºæœ€å°åŒ–ä¸Šæ¸¸å¸¦å®½æµªè´¹ï¼Œä»¥åŠæœ€å°åŒ–å› ä¸ºä¸¢åŒ…è€Œå¯¼è‡´çš„åº”ç”¨å»¶è¿Ÿå¢åŠ ï¼Œæˆ‘ä»¬ç»™ BBR æ·»åŠ äº†\npolicer detection å’Œä¸€ä¸ªæ˜¾å¼ policer æ¨¡å‹ï¼Œå¹¶è¿˜åœ¨æŒç»­ç ”ç©¶æ›´å¥½çš„æ–¹å¼æ¥å‡ç¼“\npolicer å¸¦æ¥çš„æŸå¤±ã€‚\u003c/p\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003eæ›´å¤šå…¥å‘æµé‡æ•´å½¢ï¼ˆpolicingï¼‰å†…å®¹ï¼Œå¯å‚è€ƒï¼š\n\u003ca href=\"/blog/lartc-qdisc-zh/\"\u003e\u003cmark\u003eï¼ˆè¯‘ï¼‰ã€ŠLinux é«˜çº§è·¯ç”±ä¸æµé‡æ§åˆ¶æ‰‹å†Œï¼ˆ2012ï¼‰ã€‹ç¬¬ä¹ç« ï¼šç”¨ tc qdisc ç®¡ç† Linux ç½‘ç»œå¸¦å®½\u003c/mark\u003e\u003c/a\u003eã€‚\nè¯‘æ³¨ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch2 id=\"64-ä¸åŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶çš„ç«äº‰\"\u003e6.4 ä¸åŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶çš„ç«äº‰\u003c/h2\u003e\n\n\u003cp\u003eä¸ç®¡æ˜¯ä¸å…¶ä»– BBR flow ç«äº‰ï¼Œè¿˜æ˜¯ä¸åŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶ç«äº‰ï¼Œ\nBBR \u003cstrong\u003e\u003cmark\u003eéƒ½èƒ½æ”¶æ•›åˆ°ç“¶é¢ˆå¸¦å®½çš„ä¸€ä¸ªå…¬å¹³ä»½é¢\u003c/mark\u003e\u003c/strong\u003eã€‚\u003c/p\u003e\n\n\u003cp\u003eå³ä½¿åŸºäºä¸¢åŒ…çš„æ‹¥å¡æ§åˆ¶å¡«æ»¡äº†å¯ç”¨ç¼“å†²åŒºï¼ŒProbeBW ä»ç„¶èƒ½å¥å£®åœ°å°†\nBtlBw estimate æœç€ flow çš„å…¬å¹³ä»½é¢ç§»åŠ¨ï¼ŒProbeRTT ä¹Ÿæ˜¯ç±»ä¼¼ã€‚\u003c/p\u003e\n\n\u003cp\u003eä½†æ˜¯ï¼Œä¸å—é€šä¿¡åŒæ–¹æ§åˆ¶çš„\u003cstrong\u003e\u003cmark\u003eè·¯ç”±å™¨ç¼“å†²åŒºä¼šæ¯” BDP å¤§å¥½å‡ å€\u003c/mark\u003e\u003c/strong\u003eï¼Œå¯¼è‡´\nlong-lived loss-based competitors å ç”¨å¤§é‡é˜Ÿåˆ—ï¼Œå› æ­¤è·å¾—è¶…å‡ºå…¶å…¬å¹³çš„ä»½é¢ã€‚\nå¦‚ä½•è§£å†³ï¼ˆç¼“è§£ï¼‰è¿™ä¸ªé—®é¢˜ä¹Ÿæ˜¯ç›®å‰ä¸šå†…å¾ˆçƒ­é—¨çš„ä¸€ä¸ªç ”ç©¶æ–¹å‘ã€‚\u003c/p\u003e\n\n\u003ch1 id=\"7-æ€»ç»“\"\u003e7 æ€»ç»“\u003c/h1\u003e\n\n\u003cp\u003e\u003cstrong\u003e\u003cmark\u003eé‡æ–°æ€è€ƒæ‹¥å¡æ§åˆ¶\u003c/mark\u003e\u003c/strong\u003eè®©æˆ‘ä»¬å‘æ˜å‡ºäº†è¿™ä¸ªå¤è€ä¸–ç•Œçš„è®¸å¤šæ–°ä¸œè¥¿ã€‚\nç›¸æ¯”äºä½¿ç”¨\u003cstrong\u003e\u003cmark\u003eä¸¢åŒ…ã€ç¼“å†²åŒºå¤§å°\u003c/mark\u003e\u003c/strong\u003eç­‰ç­‰è¿™äº›\u003cstrong\u003e\u003cmark\u003eä¸æ‹¥å¡åªæ˜¯å¼±ç›¸å…³\u003c/mark\u003e\u003c/strong\u003eçš„äº‹ä»¶ï¼Œ\nBBR ä»¥ Kleinrock å…³äºæ‹¥å¡çš„è§„èŒƒåŒ–æ¨¡å‹å’Œä¸ä¹‹ç›¸å…³çš„æœ€ä½³å·¥ä½œä½ç½®ä½œä¸ºå‡ºå‘ç‚¹ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e\u003cmark\u003eå…³é”®çš„ä¸¤ä¸ªå‚æ•°\u003c/mark\u003e\u003c/strong\u003e â€”â€” å»¶è¿Ÿå’Œå¸¦å®½ â€”â€” \u003cstrong\u003e\u003cmark\u003eæ— æ³•åŒæ—¶ç¡®å®š\u003c/mark\u003e\u003c/strong\u003eï¼Œ\nè¿™ä¸€ç»“è®ºçœ‹ä¼¼ç»æœ›ï¼Œä½†æˆ‘ä»¬å‘ç°é€šè¿‡å¯¹äºŒè€…è¿›è¡Œ\u003cstrong\u003e\u003cmark\u003eé¡ºåºä¼°è®¡\u003c/mark\u003e\u003c/strong\u003eï¼ˆestimated\nsequentiallyï¼‰èƒ½ç»•å¼€è¿™ä¸€é™åˆ¶ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨æ§åˆ¶ä¸ä¼°è®¡ç†è®ºé¢†åŸŸçš„ä¸€äº›æœ€æ–°è¿›\nå±•ï¼Œåˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„åˆ†å¸ƒå¼æ§åˆ¶å¾ªç¯ï¼Œåè€…èƒ½æ¥è¿‘æœ€ä¼˜å€¼ï¼Œåœ¨å……åˆ†åˆ©ç”¨ç½‘ç»œçš„\nåŒæ—¶è¿˜èƒ½ä¿æŒä¸€ä¸ªå¾ˆå°çš„ç¼“å†²é˜Ÿåˆ—ã€‚\u003c/p\u003e\n\n\u003cp\u003eGoogle BBR çš„å®ç°å·²ç»åˆå¹¶åˆ° Linux å†…æ ¸ï¼Œå…³äºä¸€äº›å®ç°ç»†èŠ‚è§æœ¬æ–‡é™„å½•ã€‚\u003c/p\u003e\n\n\u003cp\u003eBBR is deployed on Googleâ€™s B4 backbone, improving throughput by orders of\nmagnitude compared with CUBIC. It is also being deployed on Google and YouTube\nWeb servers, substantially reducing latency on all five continents tested to\ndate, most dramatically in developing regions.\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e\u003cmark\u003eBBR åªè¿è¡Œåœ¨å‘é€ç«¯ï¼Œæ— éœ€åè®®ã€æ¥æ”¶ç«¯æˆ–ç½‘ç»œçš„æ”¹åŠ¨\u003c/mark\u003e\u003c/strong\u003eï¼Œå› æ­¤å¯ä»¥åšåˆ°\nç°åº¦ï¼ˆå¢é‡ï¼‰éƒ¨ç½²ã€‚å®ƒåªä¾èµ– RTT å’Œåº”ç­”åŒ…ï¼Œå› æ­¤å¤§éƒ¨åˆ†äº’è”ç½‘ä¼ è¾“åè®®éƒ½èƒ½å®ç°è¿™ä¸ªç®—æ³•ã€‚\u003c/p\u003e\n\n\u003cp\u003eThe authors are members of Googleâ€™s make-tcp-fast project, whose goal is to\nevolve Internet transport via fundamental research and open source software.\nProject contributions include TFO (TCP Fast Open), TLP (Tail Loss Probe), RACK\nloss recovery, fq/pacing, and a large fraction of the git commits to the Linux\nkernel TCP code for the past five years.\u003c/p\u003e\n\n\u003cp\u003eThe authors can be contacted at \u003ca href=\"mailto:bbr-dev@googlegroups.com\"\u003ebbr-dev@googlegroups.com\u003c/a\u003e.\u003c/p\u003e\n\n\u003ch1 id=\"è‡´è°¢\"\u003eè‡´è°¢\u003c/h1\u003e\n\n\u003cul\u003e\n  \u003cli\u003eThe authors are grateful to Len Kleinrock for pointing out the right way to\ndo congestion control.\u003c/li\u003e\n  \u003cli\u003eWe are indebted to Larry Brakmo for pioneering work on Vegas\u003csup\u003e2\u003c/sup\u003e and\n\u003cstrong\u003e\u003cmark\u003eNew Vegas congestion control that presaged many elements of BBR\u003c/mark\u003e\u003c/strong\u003e,\nand for advice and guidance during BBRâ€™s early development.\u003c/li\u003e\n  \u003cli\u003eWe would also like to thank Eric Dumazet, Nandita Dukkipati, Jana Iyengar,\nIan Swett, M.  Fitz Nowlan, David Wetherall, Leonidas Kontothanassis, Amin\nVahdat, and the Google BwE and YouTube infrastructure teams for their\ninvaluable help and support.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1 id=\"é™„å½•è¯¦ç»†æè¿°\"\u003eé™„å½•ï¼šè¯¦ç»†æè¿°\u003c/h1\u003e\n\n\u003ch2 id=\"é¡ºåºæ¢æµ‹çŠ¶æ€æœºa-state-machine-for-sequential-probing\"\u003eé¡ºåºæ¢æµ‹çŠ¶æ€æœºï¼ˆA State Machine for Sequential Probingï¼‰\u003c/h2\u003e\n\n\u003cp\u003eThe pacing_gain controls how fast packets are sent relative to BtlBw and is key\nto BBRâ€™s ability to learn. A pacing_gain \u0026gt; 1 increases inflight and decreases\npacket inter-arrival time, moving the connection to the right on figure 1. A\n\u003ccode class=\"language-plaintext highlighter-rouge\"\u003epacing_gain \u0026lt; 1\u003c/code\u003e has the opposite effect, moving the connection to the left.\u003c/p\u003e\n\n\u003cp\u003eBBR uses this pacing_gain to implement a simple sequential probing state\nmachine that alternates between testing for higher bandwidths and then testing\nfor lower round-trip times. (Itâ€™s not necessary to probe for less bandwidth\nsince that is handled automatically by the BtlBw max filter: new\nmeasurements reflect the drop, so BtlBw will correct itself as soon as the\nlast old measurement times out of the filter. The RTprop min filter\nautomatically handles path length increases similarly.)\u003c/p\u003e\n\n\u003cp\u003eIf the bottleneck bandwidth increases, BBR must send faster to discover this.\nLikewise, if the actual round-trip propagation delay changes, this changes the\nBDP, and thus BBR must send slower to get inflight below BDP in order to\nmeasure the new RTprop. Thus, the only way to discover these changes is to run\nexperiments, sending faster to check for BtlBw increases or sending slower to\ncheck for RTprop decreases. The frequency, magnitude, duration, and structure\nof these experiments differ depending on whatâ€™s already known (startup or\nsteady-state) and sending app behavior (intermittent or continuous).\u003c/p\u003e\n\n\u003ch2 id=\"ç¨³æ€è¡Œä¸ºsteady-state-behavior\"\u003eç¨³æ€è¡Œä¸ºï¼ˆSteady-State Behaviorï¼‰\u003c/h2\u003e\n\n\u003cp\u003eBBR flows spend the vast majority of their time in ProbeBW state, probing for\nbandwidth using an approach called \u003ci\u003egain cycling\u003c/i\u003e, which helps BBR flows\nreach high throughput, low queuing delay, and convergence to a fair share of\nbandwidth. With gain cycling, BBR cycles through a sequence of values for the\npacing_gain. It uses an eight-phase cycle with the following pacing_gain\nvalues: 5/4, 3/4, 1, 1, 1, 1, 1, 1. Each phase normally lasts for the estimated\nRTprop. This design allows the gain cycle first to probe for more bandwidth\nwith a pacing_gain above 1.0, then drain any resulting queue with a pacing_gain\nan equal distance below 1.0, and then cruise with a short queue using a\npacing_gain of 1.0. The average gain across all phases is 1.0 because ProbeBW\naims for its average pacing rate to equal the available bandwidth and thus\nmaintain high utilization, while maintaining a small, well-bounded queue. Note\nthat while gain cycling varies the pacing_gain value, the cwnd_gain stays\nconstant at two, since delayed and stretched acks can strike at any time (see\nthe section on Delayed and Stretched Acks).\u003c/p\u003e\n\n\u003cp\u003eFurthermore, to improve mixing and fairness, and to reduce queues when multiple\nBBR flows share a bottleneck, BBR randomizes the phases of ProbeBW gain cycling\nby randomly picking an initial phaseâ€”from among all but the 3/4 phaseâ€”when\nentering ProbeBW. Why not start cycling with 3/4? The main advantage of the 3/4\npacing_gain is to drain any queue that can be created by running a 5/4\npacing_gain when the pipe is already full. When exiting Drain or ProbeRTT and\nentering ProbeBW, there is no queue to drain, so the 3/4 gain does not provide\nthat advantage. Using 3/4 in those contexts only has a cost: a link utilization\nfor that round of 3/4 instead of 1. Since starting with 3/4 would have a cost\nbut no benefit, and since entering ProbeBW happens at the start of any\nconnection long enough to have a Drain, BBR uses this small optimization.\u003c/p\u003e\n\n\u003cp\u003eBBR flows cooperate to periodically drain the bottleneck queue using a state\ncalled ProbeRTT. In any state other than ProbeRTT itself, if the RTProp\nestimate has not been updated (i.e., by getting a lower RTT measurement) for\nmore than 10 seconds, then BBR enters ProbeRTT and reduces the cwnd to a very\nsmall value (four packets). After maintaining this minimum number of packets in\nflight for at least 200 ms and one round trip, BBR leaves ProbeRTT and\ntransitions to either Startup or ProbeBW, depending on whether it estimates the\npipe was filled already.\u003c/p\u003e\n\n\u003cp\u003eBBR was designed to spend the vast majority of its time (about 98 percent) in\nProbeBW and the rest in ProbeRTT, based on a set of tradeoffs. ProbeRTT lasts\nlong enough (at least 200 ms) to allow flows with different RTTs to have\noverlapping ProbeRTT states, while still being short enough to bound the\nperformance penalty of ProbeRTTâ€™s cwnd capping to roughly 2 percent (200 ms/10\nseconds). The RTprop filter window (10 seconds) is short enough to allow quick\nconvergence if traffic levels or routes change, but long enough so that\ninteractive applications (e.g., Web pages, remote procedure calls, video\nchunks) often have natural silences or low-rate periods within the window where\nthe flowâ€™s rate is low enough or long enough to drain its queue in the\nbottleneck. Then the RTprop filter opportunistically picks up these RTprop\nmeasurements, and RTProp refreshes without requiring ProbeRTT. This way, flows\ntypically need only pay the 2 percent penalty if there are multiple bulk flows\nbusy sending over the entire RTProp window.\u003c/p\u003e\n\n\u003ch2 id=\"å¯åŠ¨è¡Œä¸ºstartup-behavior\"\u003eå¯åŠ¨è¡Œä¸ºï¼ˆStartup Behaviorï¼‰\u003c/h2\u003e\n\n\u003cp\u003eWhen a BBR flow starts up, it performs its first (and most rapid) sequential\nprobe/drain process. Network-link bandwidths span a range of 10\u003csup\u003e12\u003c/sup\u003eâ€”\nfrom a few bits to 100 gigabits per second. To learn BtlBw, given this huge\nrange to explore, BBR does a binary search of the rate space. This finds BtlBw\nvery quickly (\u003ci\u003elog\u003csub\u003e2\u003c/sub\u003eBDP\u003c/i\u003e round trips) but at the expense of\ncreating a 2BDP queue on the final step of the search. BBRâ€™s Startup state does\nthis search and then the Drain state drains the resulting queue.\u003c/p\u003e\n\n\u003cp\u003eFirst, Startup grows the sending rate exponentially, doubling it each round. To\nachieve this rapid probing in the smoothest possible fashion, in Startup the\npacing_gain and cwnd_gain are set to \u003cspan style=\"font-family:\u0026#34;Stone Serif\u0026#34;\"\u003e2/ln2\u003c/span\u003e, the minimum value that will allow the sending rate\nto double each round. Once the pipe is full, the cwnd_gain bounds the queue to\n(\u003ci\u003ecwnd_gain\u003c/i\u003e \u003ci\u003e- 1\u003c/i\u003e) Ã— \u003ci\u003eBDP\u003c/i\u003e.\u003c/p\u003e\n\n\u003cp\u003eDuring Startup, BBR estimates whether the pipe is full by looking for a plateau\nin the BtlBw estimate. If it notices that there are several (three) rounds\nwhere attempts to double the delivery rate actually result in little increase\n(less than 25 percent), then it estimates that it has reached BtlBw and exits\nStartup and enters Drain. BBR waits three rounds in order to have solid\nevidence that the sender is not detecting a delivery-rate plateau that was\ntemporarily imposed by the receive window. Allowing three rounds provides time\nfor the receiverâ€™s receive-window autotuning to open up the receive window and\nfor the BBR sender to realize that BtlBw should be higher: in the first\nround the receive-window autotuning algorithm grows the receive window;\nin the second round the sender fills the higher receive window; in the\nthird round the sender gets higher delivery-rate samples. This\nthree-round threshold was validated by YouTube experimental data.\u003c/p\u003e\n\n\u003cp\u003eIn Drain, BBR aims to quickly drain any queue created in Startup by switching\nto a pacing_gain that is the inverse of the value used during Startup, which\ndrains the queue in one round. When the number of packets in flight matches the\nestimated BDP, meaning BBR estimates that the queue has been fully drained but\nthe pipe is still full, then BBR leaves Drain and enters ProbeBW.\u003c/p\u003e\n\n\u003cp\u003eNote that BBRâ€™s Startup and CUBICâ€™s slow start both explore the bottleneck\ncapacity exponentially, doubling their sending rate each round; they differ in\nmajor ways, however. First, BBR is more robust in discovering available\nbandwidth, since it does not exit the search upon packet loss or (as in CUBICâ€™s\nHystart\u003csup\u003e10\u003c/sup\u003e) delay increases. Second, BBR smoothly accelerates its\nsending rate, while within every round CUBIC (even with pacing) sends a burst\nof packets and then imposes a gap of silence. Figure 4 demonstrates the number\nof packets in flight and the RTT observed on each acknowledgment for BBR and\nCUBIC.\u003c/p\u003e\n\n\u003ch2 id=\"åº”å¯¹çªå‘æµé‡reacting-to-transients\"\u003eåº”å¯¹çªå‘æµé‡ï¼ˆReacting to Transientsï¼‰\u003c/h2\u003e\n\n\u003cp\u003eThe network path and traffic traveling over it can make sudden dramatic\nchanges. To adapt to these smoothly and robustly, and reduce packet losses in\nsuch cases, BBR uses a number of strategies to implement the core model. First,\nBBR treats cwnd_gainÃ—BDP as a target that the current cwnd approaches\ncautiously from below, increasing cwnd by no more than the amount of data\nacknowledged at any time. Second, upon a retransmission timeout, meaning the\nsender thinks all in-flight packets are lost, BBR conservatively reduces cwnd\nto one packet and sends a single packet (just like loss-based\ncongestion-control algorithms such as CUBIC). Finally, when the sender detects\npacket loss but there are still packets in flight, on the first round of the\nloss-repair process BBR temporarily reduces the sending rate to match the\ncurrent delivery rate; on second and later rounds of loss repair it ensures the\nsending rate never exceeds twice the current delivery rate. This significantly\nreduces transient losses when BBR encounters policers or competes with other\nflows on a BDP-scale buffer.\u003c/p\u003e\n\n\u003ch1 id=\"references\"\u003eReferences\u003c/h1\u003e\n\n\u003col\u003e\n  \u003cli\u003eAbrahamsson, M. 2015. TCP ACK suppression. IETF AQM mailing list; \u003ca href=\"https://www.ietf.org/mail-archive/web/aqm/current/msg01480.html\"\u003ehttps://www.ietf.org/mail-archive/web/aqm/current/msg01480.html\u003c/a\u003e.\u003c/li\u003e\n  \u003cli\u003eBrakmo, L. S., Peterson, L.L. 1995. TCP Vegas: end-to-end congestion avoidance on a global Internet. \u003ci\u003eIEEE Journal on Selected Areas in Communications\u003c/i\u003e 13(8): 1465-1480.\u003c/li\u003e\n  \u003cli\u003eChakravorty, R., Cartwright, J., Pratt, I. 2002. Practical experience with TCP over GPRS. In \u003ci\u003eIEEE \u003c/i\u003e\u003ci\u003eGLOBECOM\u003c/i\u003e.\u003c/li\u003e\n  \u003cli\u003eCorbet, J. 2013. TSO sizing and the FQ scheduler. LWN.net; \u003ca href=\"https://lwn.net/Articles/564978/\"\u003ehttps://lwn.net/Articles/564978/\u003c/a\u003e.\u003c/li\u003e\n  \u003cli\u003eEricsson. 2015 Ericsson Mobility Report (June); \u003ca href=\"https://www.ericsson.com/res/docs/2015/ericsson-mobility-report-june-2015.pdf\"\u003ehttps://www.ericsson.com/res/docs/2015/ericsson-mobility-report-june-2015.pdf\u003c/a\u003e.\u003c/li\u003e\n  \u003cli\u003eESnet. Application tuning to optimize international astronomy workflow from NERSC to LFI-DPC at INAF-OATs; \u003ca href=\"http://fasterdata.es.net/data-transfer-tools/case-studies/nersc-astronomy/\"\u003ehttp://fasterdata.es.net/data-transfer-tools/case-studies/nersc-astronomy/\u003c/a\u003e.\u003c/li\u003e\n  \u003cli\u003eFlach, T., Papageorge, P., Terzis, A., Pedrosa, L., Cheng, Y., Karim, T., Katz-Bassett, E., Govindan, R. 2016. An Internet-wide analysis of traffic policing. In ACM \u003ci\u003eSIGCOMM\u003c/i\u003e: 468-482.\u003c/li\u003e\n  \u003cli\u003eGail, R., Kleinrock, L. 1981. An invariant property of computer network power. In \u003ci\u003eConference Record, International Conference on Communications\u003c/i\u003e: 63.1.1-63.1.5.\u003c/li\u003e\n  \u003cli\u003eGettys, J., Nichols, K. 2011. Bufferbloat: dark buffers in the Internet. \u003ci\u003eacmqueue\u003c/i\u003e 9(11); \u003ca href=\"https://queue.acm.org/detail.cfm?id=2071893\"\u003ehttp://queue.acm.org/detail.cfm?id=2071893\u003c/a\u003e.\u003c/li\u003e\n  \u003cli\u003eHa, S., Rhee, I. 2011. Taming the elephants: new TCP slow start. \u003ci\u003eComputer Networks\u003c/i\u003e 55(9): 2092-2110.\u003c/li\u003e\n  \u003cli\u003eHa, S., Rhee, I., Xu, L. 2008. CUBIC: a new TCP-friendly high-speed TCP variant. \u003ci\u003eACM SIGOPS Operating Systems Review\u003c/i\u003e 42(5): 64-74.\u003c/li\u003e\n  \u003cli\u003eHeidergott, B., Olsder, G. J., Van Der Woude, J. 2014. \u003ci\u003eMax Plus at Work: Modeling and Analysis of Synchronized Systems: a Course on Max-Plus Algebra and its Applications\u003c/i\u003e. Princeton University Press.\u003c/li\u003e\n  \u003cli\u003eJacobson, V. 1988. Congestion avoidance and control. \u003ci\u003eACM SIGCOMM Computer Communication Review\u003c/i\u003e 18(4): 314-329.\u003c/li\u003e\n  \u003cli\u003eJaffe, J. 1981. Flow control power is nondecentralizable. \u003ci\u003eIEEE Transactions on Communications\u003c/i\u003e 29(9): 1301-1306.\u003c/li\u003e\n  \u003cli\u003eJain, S., Kumar, A., Mandal, S., Ong, J., Poutievski, L., Singh, A., Venkata, S., Wanderer, J., Zhou, J., Zhu, M., et al. 2013. B4: experience with a globally-deployed software defined WAN. \u003ci\u003eACM SIGCOMM Computer Communication Review\u003c/i\u003e 43(4): 3-14.\u003c/li\u003e\n  \u003cli\u003eKleinrock, L. 1979. Power and deterministic rules of thumb for probabilistic problems in computer communications. In \u003ci\u003eConference Record, International Conference on Communications: 43.1.1-43.1.10.\u003c/i\u003e\u003c/li\u003e\n  \u003cli\u003eMathis, M., Semke, J., Mahdavi, J., Ott, T. 1997. The macroscopic behavior of the TCP congestion avoidance algorithm. \u003ci\u003eACM SIGCOMM Computer Communication Review\u003c/i\u003e 27(3): 67-82.\u003c/li\u003e\n  \u003cli\u003eWikipedia. \u003ca href=\"https://en.wikipedia.org/wiki/GPRS_core_network#Serving_GPRS_support_node_.28SGSN.29\"\u003eGPRS core network serving GPRS support node\u003c/a\u003e.\u003c/li\u003e\n\u003c/ol\u003e\n\n\n  \u003c!-- POST NAVIGATION --\u003e\n  \u003cdiv class=\"postNav clearfix\"\u003e\n     \n      \u003ca class=\"prev\" href=\"/blog/trip-first-step-towards-cloud-native-security/\"\u003e\u003cspan\u003eÂ«Â Trip.com: First Step towards Cloud Native Security\u003c/span\u003e\n      \n    \u003c/a\u003e\n      \n      \n      \u003ca class=\"next\" href=\"/blog/cracking-k8s-network-policy/\"\u003e\u003cspan\u003eCracking Kubernetes Network PolicyÂ Â»\u003c/span\u003e\n       \n      \u003c/a\u003e\n     \n  \u003c/div\u003e\n\u003c/div\u003e",
  "Date": "2022-01-02T00:00:00Z",
  "Author": "Arthur Chiao"
}