{
  "Source": "arthurchiao.art",
  "Title": "GPU 进阶笔记（三）：华为 NPU/GPU 演进（2024）",
  "Link": "https://arthurchiao.art/blog/gpu-advanced-notes-3-zh/",
  "Content": "\u003cdiv class=\"post\"\u003e\n  \n  \u003ch1 class=\"postTitle\"\u003eGPU 进阶笔记（三）：华为 NPU/GPU 演进（2024）\u003c/h1\u003e\n  \u003cp class=\"meta\"\u003ePublished at 2024-01-01 | Last Update 2024-01-01\u003c/p\u003e\n  \n  \u003cp\u003e记录一些平时接触到的 GPU 知识。由于是笔记而非教程，因此内容不会追求连贯，有基础的同学可作查漏补缺之用。\u003c/p\u003e\n\n\u003cp\u003e水平有限，文中不免有错误或过时之处，请酌情参考。\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003e\u003ca href=\"/blog/gpu-advanced-notes-1-zh/\"\u003eGPU 进阶笔记（一）：高性能 GPU 服务器硬件拓扑与集群组网（2023）\u003c/a\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"/blog/gpu-advanced-notes-2-zh/\"\u003eGPU 进阶笔记（二）：华为昇腾 910B GPU 相关（2023）\u003c/a\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"/blog/gpu-advanced-notes-3-zh/\"\u003eGPU 进阶笔记（三）：华为 NPU (GPU) 演进（2024）\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003chr/\u003e\n\n\u003cul id=\"markdown-toc\"\u003e\n  \u003cli\u003e\u003ca href=\"#1-术语\" id=\"markdown-toc-1-术语\"\u003e1 术语\u003c/a\u003e    \u003cul\u003e\n      \u003cli\u003e\u003ca href=\"#11-cpu\" id=\"markdown-toc-11-cpu\"\u003e1.1 CPU\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#12-gpu\" id=\"markdown-toc-12-gpu\"\u003e1.2 GPU\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#13-npu--tpu\" id=\"markdown-toc-13-npu--tpu\"\u003e1.3 NPU / TPU\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#14-小结\" id=\"markdown-toc-14-小结\"\u003e1.4 小结\u003c/a\u003e\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#2-华为-davinci-架构一种方案覆盖所有算力场景\" id=\"markdown-toc-2-华为-davinci-架构一种方案覆盖所有算力场景\"\u003e2 华为 DaVinci 架构：一种方案覆盖所有算力场景\u003c/a\u003e    \u003cul\u003e\n      \u003cli\u003e\u003ca href=\"#21-场景算力需求和解决方案\" id=\"markdown-toc-21-场景算力需求和解决方案\"\u003e2.1 场景、算力需求和解决方案\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#22-ascend-npu-设计\" id=\"markdown-toc-22-ascend-npu-设计\"\u003e2.2 Ascend NPU 设计\u003c/a\u003e\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#3-路线一npu-用在手机芯片mobile-ap-soc\" id=\"markdown-toc-3-路线一npu-用在手机芯片mobile-ap-soc\"\u003e3 路线一：NPU 用在手机芯片（Mobile AP SoC）\u003c/a\u003e    \u003cul\u003e\n      \u003cli\u003e\u003ca href=\"#31-kirin-9702017-mate-10-系列手机\" id=\"markdown-toc-31-kirin-9702017-mate-10-系列手机\"\u003e3.1 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eKirin 970\u003c/code\u003e，\u003cmark\u003e2017\u003c/mark\u003e, Mate 10 系列手机\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#32-kirin-990-5g2019-mate-30-系列手机\" id=\"markdown-toc-32-kirin-990-5g2019-mate-30-系列手机\"\u003e3.2 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eKirin 990 5G\u003c/code\u003e，\u003cmark\u003e2019\u003c/mark\u003e, Mate 30 系列手机\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#33-kirin-9000-5g2020mate-40-系列手机\" id=\"markdown-toc-33-kirin-9000-5g2020mate-40-系列手机\"\u003e3.3 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eKirin 9000 5G\u003c/code\u003e，\u003cmark\u003e2020\u003c/mark\u003e，Mate 40 系列手机\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#34-kirin-9000s2023mate-60-系列手机\" id=\"markdown-toc-34-kirin-9000s2023mate-60-系列手机\"\u003e3.4 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eKirin 9000s\u003c/code\u003e，\u003cmark\u003e2023\u003c/mark\u003e，Mate 60 系列手机\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#35-小结\" id=\"markdown-toc-35-小结\"\u003e3.5 小结\u003c/a\u003e\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#4-路线二npu-用作推理训练芯片ascend-ai-processor\" id=\"markdown-toc-4-路线二npu-用作推理训练芯片ascend-ai-processor\"\u003e4 路线二：NPU 用作推理/训练芯片（Ascend AI Processor）\u003c/a\u003e    \u003cul\u003e\n      \u003cli\u003e\u003ca href=\"#41-产品加速卡-atlas-系列\" id=\"markdown-toc-41-产品加速卡-atlas-系列\"\u003e4.1 产品：加速卡 Atlas 系列\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#42-ascend-3102019推理\" id=\"markdown-toc-42-ascend-3102019推理\"\u003e4.2 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eAscend 310\u003c/code\u003e，\u003cmark\u003e2019\u003c/mark\u003e，推理\u003c/a\u003e        \u003cul\u003e\n          \u003cli\u003e\u003ca href=\"#spec\" id=\"markdown-toc-spec\"\u003eSpec\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n      \u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#43-ascend-910-2019训练\" id=\"markdown-toc-43-ascend-910-2019训练\"\u003e4.3 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eAscend 910\u003c/code\u003e, \u003cmark\u003e2019\u003c/mark\u003e，训练\u003c/a\u003e        \u003cul\u003e\n          \u003cli\u003e\u003ca href=\"#431-spec--performance-vs-google-tpu\" id=\"markdown-toc-431-spec--performance-vs-google-tpu\"\u003e4.3.1 Spec \u0026amp; Performance, vs. Google TPU\u003c/a\u003e\u003c/li\u003e\n          \u003cli\u003e\u003ca href=\"#432-计算集群\" id=\"markdown-toc-432-计算集群\"\u003e4.3.2 计算集群\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n      \u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#44-ascend-910b-2023\" id=\"markdown-toc-44-ascend-910b-2023\"\u003e4.4 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eAscend 910B\u003c/code\u003e, \u003cmark\u003e2023\u003c/mark\u003e\u003c/a\u003e\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#参考资料\" id=\"markdown-toc-参考资料\"\u003e参考资料\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003chr/\u003e\n\n\u003cp\u003e本文内容都来自公开资料，仅供个人了解参考。\nAI 相关的东西现在迭代非常快，所以部分内容可能已经过时，请注意甄别。\u003c/p\u003e\n\n\u003ch1 id=\"1-术语\"\u003e1 术语\u003c/h1\u003e\n\n\u003cp\u003eCPU/GPU/NPU 等等都是硬件芯片，简单来说，晶体管既可以用来实现\u003cstrong\u003e\u003cmark\u003e逻辑控制\u003c/mark\u003e\u003c/strong\u003e单元，\n也可以用来实现\u003cstrong\u003e\u003cmark\u003e运算\u003c/mark\u003e\u003c/strong\u003e单元（算力）。\n在芯片总面积一定的情况下，就看控制和算力怎么分。\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eCPU：通用目的处理器，重逻辑控制；\u003c/li\u003e\n  \u003cli\u003eGPU：通用目的\u003cstrong\u003e\u003cmark\u003e并行处理器\u003c/mark\u003e\u003c/strong\u003e（GPGPU），图形处理器；\u003c/li\u003e\n  \u003cli\u003eNPU：\u003cstrong\u003e\u003cmark\u003e专用处理器\u003c/mark\u003e\u003c/strong\u003e，相比 CPU/GPU，擅长执行更具体的计算任务。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"11-cpu\"\u003e1.1 CPU\u003c/h2\u003e\n\n\u003cp\u003e大部分芯片面积都用在了逻辑单元，因此逻辑控制能力强，算力弱（相对）。\u003c/p\u003e\n\n\u003ch2 id=\"12-gpu\"\u003e1.2 GPU\u003c/h2\u003e\n\n\u003cp\u003e大部分芯片面积用在了计算单元，因此并行计算能力强，但逻辑控制弱。\n适合图像渲染、矩阵计算之类的并行计算场景。作为\u003cstrong\u003e\u003cmark\u003e协处理器\u003c/mark\u003e\u003c/strong\u003e，\n需要在 CPU 的指挥下工作，\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/huawei-npu-to-gpu/gpu-workflow.webp\" width=\"45%\" height=\"45%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eImage Source [8]\u003c/p\u003e\n\n\u003ch2 id=\"13-npu--tpu\"\u003e1.3 NPU / TPU\u003c/h2\u003e\n\n\u003cp\u003e也是协处理器。在 wikipedia 中没有专门的 NPU (Neural Processing Unit) 页面，而是归到\n\u003ca href=\"https://en.wikipedia.org/wiki/AI_accelerator\"\u003e\u003cmark\u003eAI Processors\u003c/mark\u003e\u003c/a\u003e 大类里面，\n指的是一类\u003cstrong\u003e\u003cmark\u003e特殊目的硬件加速器\u003c/mark\u003e\u003c/strong\u003e，更接近 ASIC，硬件实现神经网络运算，\n比如张量运算、卷积、点积、激活函数、多维矩阵运算等等[7]。\u003c/p\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003e如果还不清楚什么是神经网络，可以看看\n\u003ca href=\"/blog/cnn-intuitive-explanation-zh/\"\u003e\u003cmark\u003e以图像识别为例，关于卷积神经网络（CNN）的直观解释\u003c/mark\u003e（2016）\u003c/a\u003e。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e在这些特殊任务上，比 CPU/GPU 这种通用处理器\u003cstrong\u003e\u003cmark\u003e效率更高，功耗更小，响应更快\u003c/mark\u003e\u003c/strong\u003e\n（比如一个时钟周期内可以完成几十万个乘法运算），\n因此适合用在手机、边缘计算、物联网等等场景。\u003c/p\u003e\n\n\u003cp\u003eTPU：这里特制 Google 的 Tensor Processing Unit，目的跟 NPU 差不多。\n[11] 对 TPU 和 GPU 的使用场景区别有一个\u003cstrong\u003e\u003cmark\u003e非常形象的比喻\u003c/mark\u003e\u003c/strong\u003e：\u003c/p\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003e如果外面下雨了，你其实并不需要知道\u003cstrong\u003e\u003cmark\u003e每秒到底有多少滴雨\u003c/mark\u003e\u003c/strong\u003e，\n而只要知道\u003cstrong\u003e\u003cmark\u003e雨是大还是小\u003c/mark\u003e\u003c/strong\u003e。\n与此类似，神经网络通常不需要 16/32bit 浮点数做精确计算，可能 8bit 整型预测的精度就足以满足需求了。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/huawei-npu-to-gpu/floor-plan-of-tpu-die.png\" width=\"50%\" height=\"50%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eFloor Plan of Google TPU die(yellow = compute, blue = data, green = I/O, red = control) [11]\u003c/p\u003e\n\n\u003ch2 id=\"14-小结\"\u003e1.4 小结\u003c/h2\u003e\n\n\u003cp\u003eGPU 已经从最初的图像渲染和通用并行计算，逐步引入越来越多的神经网络功能\n（比如 Tensor Cores、Transformer）；\n另一方面，NPU 也在神经网络的基础上，开始引入越来越强大的通用计算功能，\n所以这俩有双向奔赴的趋势。\u003c/p\u003e\n\n\u003ch1 id=\"2-华为-davinci-架构一种方案覆盖所有算力场景\"\u003e2 华为 DaVinci 架构：一种方案覆盖所有算力场景\u003c/h1\u003e\n\n\u003ch2 id=\"21-场景算力需求和解决方案\"\u003e2.1 场景、算力需求和解决方案\u003c/h2\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/huawei-npu-to-gpu/ai-chip-ranges.png\" width=\"70%\" height=\"70%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003e不同\u003cmark\u003e算力场景\u003c/mark\u003e下，算力需求（TFLOPS）和内存大小（GB）的对应关系 [1]\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/huawei-npu-to-gpu/huawei-chip-ranges.png\" width=\"70%\" height=\"70%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003e华为的解决方案：\u003cmark\u003e一种架构（DaVinci），覆盖所有场景\u003c/mark\u003e [1]\u003c/p\u003e\n\n\u003cp\u003e用在几个不同产品方向上，\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003e手机处理器，自动驾驶芯片等等\u003c/li\u003e\n  \u003cli\u003e专门的 AI 处理器，使用场景类似于 GPU\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2 id=\"22-ascend-npu-设计\"\u003e2.2 Ascend NPU 设计\u003c/h2\u003e\n\n\u003cp\u003e2017 年发布了自己的 NPU 架构，[2] 详细介绍了 DaVinci 架构的设计。\n除了支持传统标量运算、矢量运行，还引入了 3D Cube 来加速矩阵运算，\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/huawei-npu-to-gpu/different-dimension-computation.png\" width=\"60%\" height=\"60%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eImage Source [2]\u003c/p\u003e\n\n\u003cp\u003e单位芯片面积或者单位功耗下，性能比 CPU/GPU 大幅提升：\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/huawei-npu-to-gpu/paper-table3.png\" width=\"50%\" height=\"50%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eImage Source [2]\u003c/p\u003e\n\n\u003cp\u003e下面看看实际使用场景和产品系列。\u003c/p\u003e\n\n\u003ch1 id=\"3-路线一npu-用在手机芯片mobile-ap-soc\"\u003e3 路线一：NPU 用在手机芯片（Mobile AP SoC）\u003c/h1\u003e\n\n\u003cp\u003e现代手机芯片不再是单功能处理器，而是集成了多种芯片的一个\n片上系统（\u003cstrong\u003e\u003cmark\u003e\u003ccode\u003eSoC\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e），\n华为 NPU 芯片就\u003cstrong\u003e\u003cmark\u003e集成到麒麟手机芯片内部\u003c/mark\u003e\u003c/strong\u003e，随着华为 Mate 系列高端手机迭代。\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/huawei-npu-to-gpu/soc.jpg\" width=\"30%\" height=\"30%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eImage Source [7]\u003c/p\u003e\n\n\u003cp\u003e比如，一些典型的功能划分 [7]：\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eCPU 主处理器，运行 app；\u003c/li\u003e\n  \u003cli\u003eGPU 渲染、游戏等；\u003c/li\u003e\n  \u003cli\u003eNPU 图像识别、AI 应用加速。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eMate 系列手机基本上是跟 Kirin 系列芯片一起成长的，早期的手机不是叫 “Mate XX”，\n而是 “Ascend Mate XX”，从中也可以看出跟昇腾（Ascend）的渊源。\u003c/p\u003e\n\n\u003ch2 id=\"31-kirin-9702017-mate-10-系列手机\"\u003e3.1 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eKirin 970\u003c/code\u003e，\u003cmark\u003e2017\u003c/mark\u003e, Mate 10 系列手机\u003c/h2\u003e\n\n\u003cp\u003e据称是第一个手机内置的 AI 处理器（NPU）[3]。\n在 AI 任务上（比如手机上输入文字搜图片，涉及大批量图片识别）比 CPU 快 25~50 倍。\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003e\u003cstrong\u003e\u003cmark\u003e\u003ccode\u003e10nm\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e，台积电代工\u003c/li\u003e\n  \u003cli\u003eCPU 8-core with a clockspeed of uP to 2.4GHz i.e. 4 x Cortex A73 at 2.4GHz + 4 x Cortex 53 at 1.8GHz\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003e\u003cmark\u003e\u003ccode\u003eGPU\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e 12-core Mali G72MP12 ARM GPU\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003e\u003cmark\u003e\u003ccode\u003eNPU\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e \u003cstrong\u003e\u003cmark\u003e\u003ccode\u003e1.92 TFLOPs FP16\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"32-kirin-990-5g2019-mate-30-系列手机\"\u003e3.2 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eKirin 990 5G\u003c/code\u003e，\u003cmark\u003e2019\u003c/mark\u003e, Mate 30 系列手机\u003c/h2\u003e\n\n\u003cp\u003eKirin 990 包含了 D-lite 版本的 NPU [1]：\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eWorld’s st 5G SoC Poweed by 7nm+ EUV\u003c/li\u003e\n  \u003cli\u003eWorld’s 1st 5G NSA \u0026amp; SA Flagship SoC\u003c/li\u003e\n  \u003cli\u003eWolrd’s 1st 16-Core Mali-G76 \u003cstrong\u003e\u003cmark\u003e\u003ccode\u003eGPU\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e\u003c/li\u003e\n  \u003cli\u003eWorld’s 1st Big-Tiny Core Architechture \u003cstrong\u003e\u003cmark\u003e\u003ccode\u003eNPU\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/huawei-npu-to-gpu/kirin-990-5g-chip-logical-layout.png\" width=\"80%\" height=\"80%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003e麒麟 990 5G 芯片逻辑拓扑 [1]\u003c/p\u003e\n\n\u003cp\u003e一些硬件参数 [1,4]：\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003e台积电 \u003cstrong\u003e\u003cmark\u003e\u003ccode\u003e7nm+\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e 工艺\u003c/li\u003e\n  \u003cli\u003eCPU 8-Core\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003e\u003cmark\u003e\u003ccode\u003eNPU\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e 2+1 Core\u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003e\u003cstrong\u003e\u003cmark\u003e\u003ccode\u003eGPU\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e 16-core Mali-G76（ARM GPU）\u003c/p\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003e\u003cmark\u003e\u003ccode\u003eGPU\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e 16-core Mali-G76 (ARM GPU)\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003e\u003cmark\u003e\u003ccode\u003eNPU\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e\n    \u003cul\u003e\n      \u003cli\u003eHUAWEI Da Vinci Architecture,\u003c/li\u003e\n      \u003cli\u003e2x Ascend Lite + 1x Ascend Tiny\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e2G/3G/4G/5G Modem\u003c/li\u003e\n  \u003cli\u003eLPDDR 4X\u003c/li\u003e\n  \u003cli\u003e4K HDR Video\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"33-kirin-9000-5g2020mate-40-系列手机\"\u003e3.3 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eKirin 9000 5G\u003c/code\u003e，\u003cmark\u003e2020\u003c/mark\u003e，Mate 40 系列手机\u003c/h2\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/huawei-npu-to-gpu/Kirin-9000-and-9000E.png\" width=\"80%\" height=\"80%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003e\u003ca href=\"https://www.phonearena.com/news/huawei-kirin-9000-5nm-5g-soc_id128007\"\u003eImage Source\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003e台积电 \u003cstrong\u003e\u003cmark\u003e\u003ccode\u003e5nm\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e 工艺\u003c/li\u003e\n  \u003cli\u003eGPU 24-core Mali-G78, Kirin Gaming+ 3.0\u003c/li\u003e\n  \u003cli\u003e\u003cstrong\u003e\u003cmark\u003e\u003ccode\u003eNPU\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e\n    \u003cul\u003e\n      \u003cli\u003eHUAWEI \u003cstrong\u003e\u003cmark\u003eDa Vinci Architecture 2.0\u003c/mark\u003e\u003c/strong\u003e 第二代架构\u003c/li\u003e\n      \u003cli\u003e2x Ascend Lite + 1x Ascend Tiny\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e这个是台积电 \u003cstrong\u003e\u003cmark\u003e\u003ccode\u003e5nm\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e 工艺 [5]，然后就被美国卡脖子了。\n所以 Mate 50 系列用的高通处理器，Mate 60 系列重新回归麒麟处理器。\u003c/p\u003e\n\n\u003ch2 id=\"34-kirin-9000s2023mate-60-系列手机\"\u003e3.4 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eKirin 9000s\u003c/code\u003e，\u003cmark\u003e2023\u003c/mark\u003e，Mate 60 系列手机\u003c/h2\u003e\n\n\u003cp\u003e王者低调回归，官网没有资料。\u003c/p\u003e\n\n\u003cp\u003e据各路媒体分析，是中芯国际 \u003cstrong\u003e\u003cmark\u003e\u003ccode\u003e7+nm\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e 工艺，比上一代 9000 落后一些，\n毕竟制程有差距，看看国外媒体的副标题 [6]：\u003c/p\u003e\n\n\u003cblockquote\u003e\n  \u003cp\u003e\u003cstrong\u003e\u003cmark\u003e\u003ccode\u003eIt\u0026#39;s tough to beat a 5nm processor with a 7nm chip\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e.\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eWikipedia 提供的参数 [10]：\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003eSMIC 7nm FinFET\u003c/li\u003e\n  \u003cli\u003eCPU HiSilicon Taishan microarchitecture Cortex-A510\u003c/li\u003e\n  \u003cli\u003eGPU Maleoon 910 MP4\u003c/li\u003e\n  \u003cli\u003eNPU 有，但是没提\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"35-小结\"\u003e3.5 小结\u003c/h2\u003e\n\n\u003cp\u003e手机芯片系列先到这里，接下来看看作为独立卡使用的 NPU 系列。\u003c/p\u003e\n\n\u003ch1 id=\"4-路线二npu-用作推理训练芯片ascend-ai-processor\"\u003e4 路线二：NPU 用作推理/训练芯片（Ascend AI Processor）\u003c/h1\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/huawei-npu-to-gpu/ascend-310-910.png\" width=\"65%\" height=\"65%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003e两个产品：301 低功耗；910 高算力。\u003c/p\u003e\n\n\u003cp\u003e设计见 paper [2]。\u003c/p\u003e\n\n\u003ch2 id=\"41-产品加速卡-atlas-系列\"\u003e4.1 产品：加速卡 Atlas 系列\u003c/h2\u003e\n\n\u003cp\u003e型号 Atlas 200/300/500/…，包括了 NPU 在内的 SoC，用于 AI 推理和训练。\u003c/p\u003e\n\n\u003ch2 id=\"42-ascend-3102019推理\"\u003e4.2 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eAscend 310\u003c/code\u003e，\u003cmark\u003e2019\u003c/mark\u003e，推理\u003c/h2\u003e\n\n\u003ch3 id=\"spec\"\u003eSpec\u003c/h3\u003e\n\n\u003cp\u003e用的是 D-mini version：\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/huawei-npu-to-gpu/ascend-310-spec.png\" width=\"90%\" height=\"90%\"/\u003e\u003c/p\u003e\n\n\u003cp\u003e纸面算力基本对标 NVIDIA \u003cstrong\u003e\u003cmark\u003e\u003ccode\u003eT4\u003c/code\u003e\u003c/mark\u003e\u003c/strong\u003e [9]。\u003c/p\u003e\n\n\u003ch2 id=\"43-ascend-910-2019训练\"\u003e4.3 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eAscend 910\u003c/code\u003e, \u003cmark\u003e2019\u003c/mark\u003e，训练\u003c/h2\u003e\n\n\u003ch3 id=\"431-spec--performance-vs-google-tpu\"\u003e4.3.1 Spec \u0026amp; Performance, vs. Google TPU\u003c/h3\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/huawei-npu-to-gpu/ascend-910-logical-topo.png\" width=\"100%\" height=\"100%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eImage Source [1]\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/huawei-npu-to-gpu/ascend-910-spec-performance.png\" width=\"80%\" height=\"80%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eImage Source [1]\u003c/p\u003e\n\n\u003ch3 id=\"432-计算集群\"\u003e4.3.2 计算集群\u003c/h3\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/huawei-npu-to-gpu/ascend-910-server.png\" width=\"50%\" height=\"50%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eImage Source [1]\u003c/p\u003e\n\n\u003cp align=\"center\"\u003e\u003cimg src=\"/assets/img/huawei-npu-to-gpu/ascend-910-cluster.png\" width=\"80%\" height=\"80%\"/\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003eImage Source [1]\u003c/p\u003e\n\n\u003ch2 id=\"44-ascend-910b-2023\"\u003e4.4 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eAscend 910B\u003c/code\u003e, \u003cmark\u003e2023\u003c/mark\u003e\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"/blog/gpu-advanced-notes-2-zh/\"\u003eGPU 进阶笔记（二）：华为 Ascend 910B GPU 相关（2023）\u003c/a\u003e。\u003c/p\u003e\n\n\u003ch1 id=\"参考资料\"\u003e参考资料\u003c/h1\u003e\n\n\u003col\u003e\n  \u003cli\u003e\u003ca href=\"https://www.cmc.ca/wp-content/uploads/2020/03/Zhan-Xu-Huawei.pdf\"\u003eDaVinci: A Scalable Architecture for Neural Network Computing\u003c/a\u003e，huawei, 2020\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://ieeexplore.ieee.org/abstract/document/9407221\"\u003eAscend: a Scalable and Unified Architecture for Ubiquitous Deep Neural Network Computing\u003c/a\u003e, HPCA, 2021\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://www.gizmochina.com/2017/09/02/huawei-unveils-kirin-970-worlds-first-processor-dedicated-npu/\"\u003eHuawei Unveils The Kirin 970, The World’s First Processor With A Dedicated NPU\u003c/a\u003e, 2017\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://www.hisilicon.com/en/products/Kirin/Kirin-flagship-chips/Kirin-990-5G\"\u003eKirin 990 5G Data Sheet\u003c/a\u003e, hisilicon.com\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://www.hisilicon.com/en/products/Kirin/Kirin-flagship-chips/Kirin-9000\"\u003eKirin 9000 Data Sheet\u003c/a\u003e, hisilicon.com\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://www.tomshardware.com/pc-components/chipsets/huaweis-sanctions-evading-kirin-9000s-tested-significantly-behind-kirin-9000-with-tsmc-tech\"\u003eHuawei’s sanctions-evading Kirin 9000S processor tested: significantly behind its Kirin 9000 predecessor that used TSMC tech\u003c/a\u003e，2023\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://www.utmel.com/blog/categories/integrated%20circuit/neural-processing-unit-npu-explained\"\u003eNeural Processing Unit (NPU) Explained\u003c/a\u003e, 2021\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://www.backblaze.com/blog/ai-101-gpu-vs-tpu-vs-npu/\"\u003eAI 101: GPU vs. TPU vs. NPU\u003c/a\u003e, 2023\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"/blog/gpu-data-sheets/\"\u003eGPU Performance (Data Sheets) Quick Reference (2023)\u003c/a\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://en.wikipedia.org/wiki/HiSilicon\"\u003eWikipedia: HiSilicon\u003c/a\u003e, wikipedia.com\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://cloud.google.com/blog/products/ai-machine-learning/an-in-depth-look-at-googles-first-tensor-processing-unit-tpu\"\u003eAn in-depth look at Google’s first Tensor Processing Unit (TPU)\u003c/a\u003e, Google Cloud Blog, 2017\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003chr/\u003e\n\n\u003cp\u003e\u003ca href=\"https://notbyai.fyi\"\u003e\u003cimg src=\"/assets/img/Written-By-Human-Not-By-AI-Badge-white.svg\" alt=\"Written by Human, Not by AI\"/\u003e\u003c/a\u003e\n\u003ca href=\"https://notbyai.fyi\"\u003e\u003cimg src=\"/assets/img/Written-By-Human-Not-By-AI-Badge-black.svg\" alt=\"Written by Human, Not by AI\"/\u003e\u003c/a\u003e\u003c/p\u003e\n\n\n  \u003c!-- POST NAVIGATION --\u003e\n  \u003cdiv class=\"postNav clearfix\"\u003e\n     \n      \u003ca class=\"prev\" href=\"/blog/linux-container-and-runtime-zh/\"\u003e\u003cspan\u003e« Linux 容器底层工作机制：从 500 行 C 代码到生产级容器运行时（2023）\u003c/span\u003e\n      \n    \u003c/a\u003e\n      \n      \n      \u003ca class=\"next\" href=\"/blog/rise-of-diffusion-based-models-zh/\"\u003e\u003cspan\u003e[译] 文生图（text-to-image）简史：扩散模型（diffusion models）的崛起与发展（2022） »\u003c/span\u003e\n       \n      \u003c/a\u003e\n     \n  \u003c/div\u003e\n\u003c/div\u003e",
  "Date": "2024-01-01T00:00:00Z",
  "Author": "Arthur Chiao"
}