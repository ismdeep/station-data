{
  "Source": "arthurchiao.art",
  "Title": "Vim Pickups 001",
  "Link": "https://arthurchiao.art/blog/vim-pickups-001-zh/",
  "Content": "\u003cdiv class=\"post\"\u003e\n  \n  \u003ch1 class=\"postTitle\"\u003eVim Pickups 001\u003c/h1\u003e\n  \u003cp class=\"meta\"\u003ePublished at 2017-08-28 | Last Update 2021-01-11\u003c/p\u003e\n  \n  \u003cp\u003e今日有闲，整理点 vim 小技巧。本文所列命令都是 VIM 内置的，无需额外插件。\u003c/p\u003e\n\n\u003cul id=\"markdown-toc\"\u003e\n  \u003cli\u003e\u003ca href=\"#1-vim-别名\" id=\"markdown-toc-1-vim-别名\"\u003e1. VIM 别名\u003c/a\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#2-vim-打开文件高级功能\" id=\"markdown-toc-2-vim-打开文件高级功能\"\u003e2. VIM 打开文件：高级功能\u003c/a\u003e    \u003cul\u003e\n      \u003cli\u003e\u003ca href=\"#21-以二进制模式打开文件\" id=\"markdown-toc-21-以二进制模式打开文件\"\u003e2.1 以二进制模式打开文件\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#22--指定额外命令\" id=\"markdown-toc-22--指定额外命令\"\u003e2.2 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e+\u003c/code\u003e 指定额外命令\u003c/a\u003e        \u003cul\u003e\n          \u003cli\u003e\u003ca href=\"#打开文件后跳转到第-n-行\" id=\"markdown-toc-打开文件后跳转到第-n-行\"\u003e打开文件后，跳转到第 N 行\u003c/a\u003e\u003c/li\u003e\n          \u003cli\u003e\u003ca href=\"#打开文件后跳转到-pattern-第一次出现的位置\" id=\"markdown-toc-打开文件后跳转到-pattern-第一次出现的位置\"\u003e打开文件后，跳转到 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e{pattern}\u003c/code\u003e 第一次出现的位置\u003c/a\u003e\u003c/li\u003e\n          \u003cli\u003e\u003ca href=\"#其他命令\" id=\"markdown-toc-其他命令\"\u003e其他命令\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n      \u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#23-以-diff-模式打开多个文件\" id=\"markdown-toc-23-以-diff-模式打开多个文件\"\u003e2.3 以 diff 模式打开多个文件\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#24-一次打开多个文件\" id=\"markdown-toc-24-一次打开多个文件\"\u003e2.4 一次打开多个文件\u003c/a\u003e\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#3-匹配然后删除match-then-delete\" id=\"markdown-toc-3-匹配然后删除match-then-delete\"\u003e3 匹配然后删除（match then delete）\u003c/a\u003e    \u003cul\u003e\n      \u003cli\u003e\u003ca href=\"#31-基础匹配删除操作\" id=\"markdown-toc-31-基础匹配删除操作\"\u003e3.1 基础匹配删除操作\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#32-删除匹配行前后-nm-行\" id=\"markdown-toc-32-删除匹配行前后-nm-行\"\u003e3.2 删除匹配行前后 n/m 行\u003c/a\u003e\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#4-替换substitution\" id=\"markdown-toc-4-替换substitution\"\u003e4 替换（substitution）\u003c/a\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#references\" id=\"markdown-toc-references\"\u003eReferences\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1 id=\"1-vim-别名\"\u003e1. VIM 别名\u003c/h1\u003e\n\n\u003cp\u003e一些编辑器看似独立，其实后台都是调用的 VIM，只是启动参数不同：\u003c/p\u003e\n\n\u003cul\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003evim\u003c/code\u003e - 正常启动 VIM\u003c/li\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003eex\u003c/code\u003e - 以 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eEx\u003c/code\u003e 模式启动 VIM\u003c/li\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003eview\u003c/code\u003e - 以只读模式启动 VIM，和 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003evim -R\u003c/code\u003e 效果一样\u003c/li\u003e\n  \u003cli\u003e其他：\u003ccode class=\"language-plaintext highlighter-rouge\"\u003egvim\u003c/code\u003e, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003egview\u003c/code\u003e, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003erview\u003c/code\u003e 等等\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e用 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003efile\u003c/code\u003e 命令看一下：\u003c/p\u003e\n\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003efile /usr/bin/ex\n/usr/bin/ex: symbolic \u003cspan class=\"nb\"\u003elink \u003c/span\u003eto \u003cspan class=\"s1\"\u003e\u0026#39;/etc/alternatives/ex\u0026#39;\u003c/span\u003e\n\n\u003cspan class=\"nv\"\u003e$ \u003c/span\u003efile /etc/alternatives/ex\n/etc/alternatives/ex: symbolic \u003cspan class=\"nb\"\u003elink \u003c/span\u003eto \u003cspan class=\"s1\"\u003e\u0026#39;/usr/bin/vim.gtk\u0026#39;\u003c/span\u003e\n\n\u003cspan class=\"nv\"\u003e$ \u003c/span\u003efile /usr/bin/vim.gtk\n/usr/bin/vim.gtk: ELF 64-bit LSB  executable, x86-64, version 1 \u003cspan class=\"o\"\u003e(\u003c/span\u003eSYSV\u003cspan class=\"o\"\u003e)\u003c/span\u003e, dynamically linked \u003cspan class=\"o\"\u003e(\u003c/span\u003euses shared libs\u003cspan class=\"o\"\u003e)\u003c/span\u003e, \u003cspan class=\"k\"\u003efor \u003c/span\u003eGNU/Linux 2.6.24, BuildID[sha1]\u003cspan class=\"o\"\u003e=\u003c/span\u003e3544bf336449c36023788f68ed25a6d75e575a08, stripped\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch1 id=\"2-vim-打开文件高级功能\"\u003e2. VIM 打开文件：高级功能\u003c/h1\u003e\n\n\u003cp\u003e启动 VIM 时可以加额外参数，完成很多神奇炫酷的功能。\u003c/p\u003e\n\n\u003ch2 id=\"21-以二进制模式打开文件\"\u003e2.1 以二进制模式打开文件\u003c/h2\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e$ vim -b \u0026lt;file\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2 id=\"22--指定额外命令\"\u003e2.2 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e+\u003c/code\u003e 指定额外命令\u003c/h2\u003e\n\n\u003ch3 id=\"打开文件后跳转到第-n-行\"\u003e打开文件后，跳转到第 N 行\u003c/h3\u003e\n\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003evim +5 test.txt\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3 id=\"打开文件后跳转到-pattern-第一次出现的位置\"\u003e打开文件后，跳转到 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e{pattern}\u003c/code\u003e 第一次出现的位置\u003c/h3\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e$ vim +/{pattern} \u0026lt;file\u0026gt;\n\n# 跳转到 \u0026#39;vim\u0026#39; 字符串第一次出现的位置\n$ vim +/vim test.txt\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3 id=\"其他命令\"\u003e其他命令\u003c/h3\u003e\n\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003evim \u003cspan class=\"s2\"\u003e\u0026#34;+{command}\u0026#34;\u003c/span\u003e \u0026lt;file\u0026gt;\n\u003cspan class=\"nv\"\u003e$ \u003c/span\u003evim \u003cspan class=\"nt\"\u003e-c\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\u003cspan class=\"nb\"\u003ecommand\u003c/span\u003e\u003cspan class=\"o\"\u003e}\u003c/span\u003e \u0026lt;file\u0026gt;\n\n\u003cspan class=\"c\"\u003e# example: turn off showing number on opening index.html\u003c/span\u003e\n\u003cspan class=\"nv\"\u003e$ \u003c/span\u003evim \u003cspan class=\"s2\"\u003e\u0026#34;+set nonu\u0026#34;\u003c/span\u003e index.html\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2 id=\"23-以-diff-模式打开多个文件\"\u003e2.3 以 diff 模式打开多个文件\u003c/h2\u003e\n\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003evim \u003cspan class=\"nt\"\u003e-d\u003c/span\u003e \u0026lt;file1\u0026gt; \u0026lt;file2\u0026gt; ... \u0026lt;fileN\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e效果和 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003evimdiff\u003c/code\u003e 一样。\u003c/p\u003e\n\n\u003ch2 id=\"24-一次打开多个文件\"\u003e2.4 一次打开多个文件\u003c/h2\u003e\n\n\u003cp\u003e分别显示在不同的窗口。\u003c/p\u003e\n\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003e# 窗口上下排列， N 可省略\n$ vim -o[N] \u0026lt;file1\u0026gt; \u0026lt;file2\u0026gt; ... \u0026lt;fileN\u0026gt;\n\n# 窗口左右排列， N 可省略\n$ vim -O[N] \u0026lt;file1\u0026gt; \u0026lt;file2\u0026gt; ... \u0026lt;fileN\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch1 id=\"3-匹配然后删除match-then-delete\"\u003e3 匹配然后删除（match then delete）\u003c/h1\u003e\n\n\u003ch2 id=\"31-基础匹配删除操作\"\u003e3.1 基础匹配删除操作\u003c/h2\u003e\n\n\u003col\u003e\n  \u003cli\u003e\n    \u003cp\u003e删除匹配的字符串：\u003ccode class=\"language-plaintext highlighter-rouge\"\u003e%s/\u0026lt;pattern\u0026gt;//g\u003c/code\u003e\u003c/p\u003e\n\n    \u003cp\u003e本质上是\u003cstrong\u003e替换\u003c/strong\u003e（substitute），用空字符替换了 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e\u0026lt;pattern\u0026gt;\u003c/code\u003e。\u003c/p\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003e删除匹配行：\u003ccode class=\"language-plaintext highlighter-rouge\"\u003e:%g/\u0026lt;pattern\u0026gt;/d\u003c/code\u003e\u003c/p\u003e\n\n    \u003cp\u003e例如 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e:%g/cloud/d\u003c/code\u003e，表示删除当前文件内包含 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003ecloud\u003c/code\u003e 的行。\u003c/p\u003e\n  \u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2 id=\"32-删除匹配行前后-nm-行\"\u003e3.2 删除匹配行前后 n/m 行\u003c/h2\u003e\n\n\u003cp\u003e来自 \u003ca href=\"https://vi.stackexchange.com/questions/3411/deleting-a-range-of-n-lines-before-and-after-a-matched-line\"\u003eDeleting a range of n lines before and after a matched\nline?\u003c/a\u003e：\u003c/p\u003e\n\n\u003col\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003e:%g/\u0026lt;pattern\u0026gt;/-10,+28d\u003c/code\u003e：找到包含 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e\u0026lt;pattern\u0026gt;\u003c/code\u003e 的行，然后从该行前面 10 行一直\n删除到该行后面 28 行。[2]\u003c/li\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003e:%g/\u0026lt;pattern\u0026gt;/-10,.d\u003c/code\u003e：删除从匹配行 \u003ccode class=\"language-plaintext highlighter-rouge\"\u003e-10\u003c/code\u003e 行直到当前行，小数点表示当前行。\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch1 id=\"4-替换substitution\"\u003e4 替换（substitution）\u003c/h1\u003e\n\n\u003cul\u003e\n  \u003cli\u003e\u003ca href=\"https://vim.fandom.com/wiki/Remove_unwanted_empty_lines\"\u003e将多个连续空行合并为一行\u003c/a\u003e：\u003ccode class=\"language-plaintext highlighter-rouge\"\u003e:%s/\\n\\{3,}/\\r\\r/e\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1 id=\"references\"\u003eReferences\u003c/h1\u003e\n\n\u003col\u003e\n  \u003cli\u003eVIM Man Manual (\u003ccode class=\"language-plaintext highlighter-rouge\"\u003eman 1 vim\u003c/code\u003e)\u003c/li\u003e\n\u003c/ol\u003e\n\n\n  \u003c!-- POST NAVIGATION --\u003e\n  \u003cdiv class=\"postNav clearfix\"\u003e\n     \n      \u003ca class=\"prev\" href=\"/blog/x86-asm-guide-zh/\"\u003e\u003cspan\u003e« [译] 简明 x86 汇编指南（2017）\u003c/span\u003e\n      \n    \u003c/a\u003e\n      \n      \n      \u003ca class=\"next\" href=\"/blog/monitoring-ceph-obj-storage/\"\u003e\u003cspan\u003eMonitoring Ceph Object Storage »\u003c/span\u003e\n       \n      \u003c/a\u003e\n     \n  \u003c/div\u003e\n\u003c/div\u003e",
  "Date": "2017-08-28T00:00:00Z",
  "Author": "Arthur Chiao"
}