{
  "Source": "blog.zzbd.org",
  "Title": "新VPS配置非Root工作环境",
  "Link": "https://blog.zzbd.org/2020/03/20/new-debian/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003cp\u003e简单记录下在腾讯云ECS上简单布置Debian系统的过程\u003c/p\u003e\u003cspan id=\"more\"\u003e\u003c/span\u003e\u003ch3 id=\"安装nginx及git\"\u003e\u003ca href=\"#安装nginx及git\" class=\"headerlink\" title=\"安装nginx及git\"\u003e\u003c/a\u003e安装nginx及git\u003c/h3\u003e\u003col\u003e\u003cli\u003e\u003cp\u003e首先生成加密算法\u003ccode\u003ecd /etc/ssl/certs \u0026amp;\u0026amp; openssl dhparam -out dhparam.pem 4096\u003c/code\u003e\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003e编辑nginx配置文件，打开gzip，指定证书文件路径，重启服务测试之后修改nginx的话还是需要切换到root身份。\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003eGit安装后配置代理\u003c/p\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003egit config --global http.proxy \u0026#39;socks5h://127.0.0.1:1080\u0026#39;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003evim ~/.ssh/config\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e#\u003c/span\u003e\u003cspan class=\"bash\"\u003e\u003cspan class=\"comment\"\u003e# ~/.ssh/config begin\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eHost github.com\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eProxyCommand nc -X 5 -x 127.0.0.1:1080 %h %p\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e#\u003c/span\u003e\u003cspan class=\"bash\"\u003e\u003cspan class=\"comment\"\u003e# ~/.ssh/config end\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\u003c/li\u003e\u003c/ol\u003e\u003ch3 id=\"配置用户\"\u003e\u003ca href=\"#配置用户\" class=\"headerlink\" title=\"配置用户\"\u003e\u003c/a\u003e配置用户\u003c/h3\u003e\u003col\u003e\u003cli\u003e\u003cp\u003e输入\u003ccode\u003eapt update \u0026amp;\u0026amp; apt install zsh\u003c/code\u003e 安装zsh替代bash\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003e新建用户并指定默认shell\u003ccode\u003euseradd -m -s /bin/zsh newfish\u003c/code\u003e，以newfish为例\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003e给予新用户sudo权限\u003c/p\u003e\u003c/li\u003e\u003c/ol\u003e\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# patch /etc/sudoers with /etc/sudoers.d/\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003etee /etc/sudoers.d/newfish \u0026lt;\u0026lt;\u0026lt; \u003cspan class=\"string\"\u003e\u0026#39;newfish ALL=(ALL) ALL\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# grant permission\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003echmod 440 /etc/sudoers.d/newfish\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\u003cp\u003e重新用newfish登录服务器，配置zsh的行为，这里建议默认为主，能打开的特性都打开。单独装好zsh是没有高亮显示的，所以使用\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/ohmyzsh/ohmyzsh\"\u003e官方脚本\u003c/a\u003e安装oh-my-zsh，默认主题用着就挺好。\u003c/p\u003e\u003ch3 id=\"安装node\"\u003e\u003ca href=\"#安装node\" class=\"headerlink\" title=\"安装node\"\u003e\u003c/a\u003e安装node\u003c/h3\u003e\u003cp\u003e由于是非root方式，所以首先安装nvm，运行\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/nvm-sh/nvm\"\u003e官方脚本\u003c/a\u003e，这里由于zsh的缘故还不能立刻使用，在\u003ccode\u003e.zshrc\u003c/code\u003e文件末尾追加上一步安装过程输出的环境变量代码。然后\u003ccode\u003envm ls-remote\u003c/code\u003e查看最新的版本号，\u003ccode\u003envm install xx.xx.x\u003c/code\u003e。尽量不全局安装，运行本地包用\u003ccode\u003enpx [包名称]\u003c/code\u003e。\u003c/p\u003e\u003cp\u003e更换国内的CDN源\u003c/p\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003enpm config set registry https://registry.npm.taobao.org --global\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003enpm config set disturl https://npm.taobao.org/dist --global\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e#\u003c/span\u003e\u003cspan class=\"bash\"\u003e check configuration\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003enpm config get registry\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\u003ch3 id=\"参考链接\"\u003e\u003ca href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"\u003e\u003c/a\u003e参考链接\u003c/h3\u003e\u003cp\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://p3terx.com/archives/add-normal-users-with-adduser-and-useradd.html\"\u003eLinux 使用 adduser 与 useradd 添加普通用户的正确姿势\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://zhuanlan.zhihu.com/p/83767376\"\u003eZsh 入门 - 知乎\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://gist.github.com/laispace/666dd7b27e9116faece6\"\u003egit 设置和取消代理\u003c/a\u003e\u003c/p\u003e\u003c/div\u003e",
  "Date": "2020-03-20T07:47:21Z",
  "Author": "J. F"
}