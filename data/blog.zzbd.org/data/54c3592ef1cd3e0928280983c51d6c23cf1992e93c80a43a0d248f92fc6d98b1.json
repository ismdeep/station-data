{
  "Source": "blog.zzbd.org",
  "Title": "mediaWiki和CirrusSearch的中场故事",
  "Link": "https://blog.zzbd.org/2021/08/17/mediawiki3/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003cp\u003e\u003cimg data-src=\"https://dict.zzbd.org/images/image-20210817174558053.png\" alt=\"image-20210817174558053\"/\u003e\u003c/p\u003e\u003cspan id=\"more\"\u003e\u003c/span\u003e\u003cp\u003e最近把mediawiki装到了小VPS上，先用IP访问着还算正常，偶尔会抽风无法访问（丢包太狠啊，我也想上搬瓦工啊），后续想办法弄到备案的子域名就可以用CDN加速了。看到有高级搜索功能，犹豫半天还是没忍住开始折腾。\u003c/p\u003e\u003cp\u003e根据网友提供的经验，1c1g的菜服貌似也可以拉得动elasticsearch。顺利装好两个插件，然后是elasticsearch。准备仔细看网友是如何解决内存不足问题的时候，恍然发现自己已经掉坑里了：\u003c/p\u003e\u003cp\u003e最新的7.14版本是可以跑在1g内存上了，然而当前的CirrusSearch并不兼容\u003c/p\u003e\u003cp\u003e如果要降级到6.x要考虑残留不说，内存也可能会爆，或者被迫忍受长时间的无响应\u003c/p\u003e\u003cp\u003e简直就是顺着作者描述的坑在踩一遍。这个事情告诉我们：踩坑需谨慎，看完帖子再动手。\u003c/p\u003e\u003cp\u003e然而并不想就此放弃。很惊喜的在CirrusSearch代码仓库发现这样一条commit message：\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003e[WIP] Upgrade to elasticsearch 6.8.18 \u003cstrong\u003eTo prepare for elastic 7 we need to get everything up to the latest release of 6\u003c/strong\u003e, which produces all the necessary deprecation messages. Mostly untested, it only passes the test suite.\u003c/p\u003e\u003c/blockquote\u003e\u003cp\u003e看到画粗线的地方没有？维护人员一直在努力适配新版！这条信息发布日期是8月11号，所以还是可以期待一下的。开源社区YYDS，奥力给~~\u003c/p\u003e\u003cp\u003e那么就放到这里，等兼容之后再继续折腾吧。\u003c/p\u003e\u003ch3 id=\"参考\"\u003e\u003ca href=\"#参考\" class=\"headerlink\" title=\"参考\"\u003e\u003c/a\u003e参考\u003c/h3\u003e\u003cp\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.chenguanghe.com/mediawiki-elasticsearch/\"\u003eMediawiki + Elasticsearch | 书脊 (chenguanghe.com)\u003c/a\u003e\u003c/p\u003e\u003cp\u003e[\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://gerrit.wikimedia.org/r/c/search/extra/+/711226\"\u003eWIP] Upgrade to elasticsearch 6.8.18 (I2432c2f4) · Gerrit Code Review (wikimedia.org)\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://zhuanlan.zhihu.com/p/159595952\"\u003e为MediaWiki安装高级搜索（AdvancedSearch）插件 - 知乎 (zhihu.com)\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/deb.html\"\u003eInstall Elasticsearch with Debian Package | Elasticsearch Guide 7.14 | Elastic\u003c/a\u003e\u003c/p\u003e\u003c/div\u003e",
  "Date": "2021-08-17T07:46:50Z",
  "Author": "J. F"
}