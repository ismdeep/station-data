{
  "Source": "blog.zzbd.org",
  "Title": "[转载]gitignore语法参考",
  "Link": "https://blog.zzbd.org/2017/07/04/gitignore-tips/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003cp\u003e全面解析.gitignore文件中的模式匹配。\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://ybin.cc/git/gitignore-syntax/\"\u003e原文\u003c/a\u003e\u003c/p\u003e\u003cp\u003e.gitignore文件里的模式匹配有时真的让人很无语，看似非常简单，实则到处是坑， 本文我们来个彻底解析。本文来自git文档加上自己的理解，以及总结了一些常用实例，git文档可以参考文末的链接。\u003c/p\u003e\u003ch3 id=\"语法-pattern-format\"\u003e\u003ca href=\"#语法-pattern-format\" class=\"headerlink\" title=\"语法(pattern format)\"\u003e\u003c/a\u003e语法(pattern format)\u003c/h3\u003e\u003ch4 id=\"第一部分语法规则\"\u003e\u003ca href=\"#第一部分语法规则\" class=\"headerlink\" title=\"第一部分语法规则\"\u003e\u003c/a\u003e第一部分语法规则\u003c/h4\u003e\u003col\u003e\u003cli\u003e 空行被忽略\u003c/li\u003e\u003cli\u003e 以\u003ccode\u003e#\u003c/code\u003e开头的行视为注释，需要\u003ccode\u003e#\u003c/code\u003e的地方要进行转意\u003c/li\u003e\u003cli\u003e 其余每行表示一个pattern\u003c/li\u003e\u003cli\u003e \u003cstrong\u003e行尾\u003c/strong\u003e 的空格被忽略，需要行尾空格的地方要进行转意\u003c/li\u003e\u003cli\u003e \u003ccode\u003e!\u003c/code\u003e意味着\u003ccode\u003e取反\u003c/code\u003e，即原本被匹配上的文件被忽略，加上\u003ccode\u003e!\u003c/code\u003e后，这些文件则被包含进来，需要\u003ccode\u003e!\u003c/code\u003e的地方要要进行转意。但是\u003cstrong\u003e如果一个文件的parent directory被忽略，则该文件不会被包含进来\u003c/strong\u003e。\u003c/li\u003e\u003cli\u003e 以\u003ccode\u003e/\u003c/code\u003e结尾的pattern，\u003ccode\u003e/\u003c/code\u003e将会被移除，然后按照\u003cstrong\u003e下面\u003c/strong\u003e的规则进行匹配，但是\u003cstrong\u003e只匹配目录\u003c/strong\u003e\u003c/li\u003e\u003cli\u003e 如果pattern中没有\u003ccode\u003e/\u003c/code\u003e，则git把该pattern当作一个shell glob去匹配文件路径\u003c/li\u003e\u003cli\u003e 如果pattern中包含\u003ccode\u003e/\u003c/code\u003e，则git把该pattern当作一个\u003cstrong\u003e受限\u003c/strong\u003e的shell glob去匹配文件路径：此时wildcards(\u003ccode\u003e*\u003c/code\u003e)\u003cstrong\u003e不能\u003c/strong\u003e匹配\u003ccode\u003e/\u003c/code\u003e符号\u003c/li\u003e\u003cli\u003e 以\u003ccode\u003e/\u003c/code\u003e开头的pattern，\u003ccode\u003e/\u003c/code\u003e匹配文件路径的开始，如\u003ccode\u003e/*.c\u003c/code\u003e匹配\u003ccode\u003ecat.c\u003c/code\u003e而不匹配\u003ccode\u003emozilla/cat.c\u003c/code\u003e\u003c/li\u003e\u003c/ol\u003e\u003cspan id=\"more\"\u003e\u003c/span\u003e 语法一大堆，但是真正值得注意的地方是：\u003col\u003e\u003cli\u003e \u003ccode\u003e/\u003c/code\u003e和\u003ccode\u003e*\u003c/code\u003e，即pattern中有\u003ccode\u003e/\u003c/code\u003e的时候\u003ccode\u003e*\u003c/code\u003e不匹配\u003ccode\u003e/\u003c/code\u003e，pattern中没有\u003ccode\u003e/\u003c/code\u003e的时候\u003ccode\u003e*\u003c/code\u003e可以匹配\u003ccode\u003e/\u003c/code\u003e\u003c/li\u003e\u003cli\u003e 以\u003ccode\u003e/\u003c/code\u003e结尾的pattern会去掉\u003ccode\u003e/\u003c/code\u003e进行匹配，但是只匹配目录，如\u003ccode\u003e*/\u003c/code\u003e会匹配所有的目录，这一点常常结合\u003ccode\u003e!\u003c/code\u003e不能把父目录被忽略的文件重新包含进来这条规则来用\u003c/li\u003e\u003c/ol\u003e\u003cp\u003epattern format定义好了，而pattern要跟谁进行匹配呢，答案是跟文件路径，文件路径指的是从git repository开始的相对文件路径。git会遍历所有的文件，用这里定义的pattern来进行匹配，匹配的结果就是要么包含进版本库，要么忽略它。\u003c/p\u003e\u003ch4 id=\"第二部分，双星号语法规则\"\u003e\u003ca href=\"#第二部分，双星号语法规则\" class=\"headerlink\" title=\"第二部分，双星号语法规则\"\u003e\u003c/a\u003e第二部分，双星号语法规则\u003c/h4\u003e\u003cp\u003e\u003ccode\u003e**\u003c/code\u003e匹配完整路径，它不管什么斜杠不斜杠的，所有字符通吃。\u003c/p\u003e\u003col\u003e\u003cli\u003e 以\u003ccode\u003e**/\u003c/code\u003e开始的pattern匹配所有路径。如\u003ccode\u003e**/foo\u003c/code\u003e匹配所有路径下的\u003ccode\u003efoo\u003c/code\u003e文件或者文件夹，等同于\u003ccode\u003efoo\u003c/code\u003e pattern\u003c/li\u003e\u003cli\u003e 以\u003ccode\u003e/**\u003c/code\u003e结尾的pattern匹配everything inside。如\u003ccode\u003eabc/**\u003c/code\u003e匹配\u003ccode\u003eabc\u003c/code\u003e目录下的所有文件或文件夹\u003c/li\u003e\u003cli\u003e 中间包含\u003ccode\u003e/**/\u003c/code\u003e的pattern匹配零个或任意多个目录。如\u003ccode\u003ea/**/b\u003c/code\u003e匹配\u003ccode\u003ea/b\u003c/code\u003e、\u003ccode\u003ea/x/b\u003c/code\u003e、\u003ccode\u003ea/x/y/b\u003c/code\u003e等等\u003c/li\u003e\u003cli\u003e 上述三种pattern的组合pattern\u003c/li\u003e\u003c/ol\u003e\u003cp\u003e这里的\u003ccode\u003e**\u003c/code\u003e类似于正则表达式里的\u003ccode\u003e*\u003c/code\u003e。\u003c/p\u003e\u003ch3 id=\"常用实例\"\u003e\u003ca href=\"#常用实例\" class=\"headerlink\" title=\"常用实例\"\u003e\u003c/a\u003e常用实例\u003c/h3\u003e\u003cp\u003e下面列出一些常用实例，日常使用足够了。\u003c/p\u003e\u003ch4 id=\"忽略某个文件夹\"\u003e\u003ca href=\"#忽略某个文件夹\" class=\"headerlink\" title=\"忽略某个文件夹\"\u003e\u003c/a\u003e忽略某个文件夹\u003c/h4\u003e\u003cfigure class=\"highlight vala\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 忽略build目录\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 如何做到的呢？ 看第6条规则\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ebuild/\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 忽略build目录中的所有内容，但是不忽略build目录本身，\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 该条pattern中包含斜杠，所以wildcards不能匹配斜杠，\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 于是这个pattern的作用就是把build/里面的文件、文件夹\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 全都忽略了，但是由于\u0026#34;parent dir\u0026#34;被忽略的文件不能被\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 包含进来，所以build目录的子目录中的所有文件、文件夹\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 也都被一并忽略了\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ebuild\u003cspan class=\"comment\"\u003e/*\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\u003ch4 id=\"忽略某类文件\"\u003e\u003ca href=\"#忽略某类文件\" class=\"headerlink\" title=\"忽略某类文件\"\u003e\u003c/a\u003e忽略某类文件\u003c/h4\u003e\u003cfigure class=\"highlight vala\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 忽略所有的.exe文件\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 由于pattern中没有斜杠(/)，所以这个pattern被当作shell glob\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 来进行匹配，它可以匹配斜杠(/)，所以诸如\u0026#34;build/outputs/aaa.exe\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 这样的.exe文件均被忽略了，从而达到忽略所有.exe文件目的\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e*.exe\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\u003ch4 id=\"忽略某个文件夹，但是保留某些特殊文件\"\u003e\u003ca href=\"#忽略某个文件夹，但是保留某些特殊文件\" class=\"headerlink\" title=\"忽略某个文件夹，但是保留某些特殊文件\"\u003e\u003c/a\u003e忽略某个文件夹，但是保留某些特殊文件\u003c/h4\u003e\u003cfigure class=\"highlight vala\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 忽略build目录，但是保留build/config.xml文件\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# build/ 是不行的，为什么呢？找找上面的规则，与parent dir相关哦\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ebuild\u003cspan class=\"comment\"\u003e/*\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e!build/config.xml\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\u003ch4 id=\"建立白名单，只保留某些文件夹或者目录\"\u003e\u003ca href=\"#建立白名单，只保留某些文件夹或者目录\" class=\"headerlink\" title=\"建立白名单，只保留某些文件夹或者目录\"\u003e\u003c/a\u003e建立白名单，只保留某些文件夹或者目录\u003c/h4\u003e\u003cp\u003e所谓的白名单就是先忽略所有的文件、文件夹，然后把需要的再重新包含进来，\u003cbr/\u003e但是注意：parent dir被忽略的文件是不能被重新包含进来的。\u003c/p\u003e\u003cfigure class=\"highlight vala\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 忽略一切\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e*\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 把所有的文件夹重新包含进来\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 这是怎么做到的呢？ 看第6条规则\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e!*/\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 把想要的文件或文件夹重新包含进来\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 这里为啥不能用： !src/* 呢，因为有斜杠时星号不能匹配斜杠，\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 导致src/里的子目录被忽略了，只包含进src/下的文件了\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# 这里为啥不能用： !src/ 呢，因为以斜杠(/)结尾只能匹配目录\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e!src\u003cspan class=\"comment\"\u003e/**\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e!AndroidManifest.xml\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 如果不把所有文件夹包含进来，则需要先把res/目录包含进来才行\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e!res/drawable/**\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\u003cp\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://git-scm.com/docs/gitignore\"\u003e参考文献\u003c/a\u003e\u003c/p\u003e\u003c/div\u003e",
  "Date": "2017-07-04T07:58:19Z",
  "Author": "J. F"
}