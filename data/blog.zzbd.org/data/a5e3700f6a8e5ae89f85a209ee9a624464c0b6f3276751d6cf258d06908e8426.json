{
  "Source": "blog.zzbd.org",
  "Title": "用github的ssh协议部署hexo",
  "Link": "https://blog.zzbd.org/2015/06/25/ssh-deploy-hexo/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003cp\u003e前天gitcafe遭受了DDOS攻击，pages服务无法访问，多久恢复官方也没有给个准信。所以准备重回『章鱼猫』的怀抱。\u003c/p\u003e\u003cp\u003e之前抛弃github pages除了因为访问速度慢，最重要的原因是push的速度太慢，还经常失败。搭配shadowsocks倒是解决了上传慢的问题，可惜百分百都会异常中断。出错信息类似这样：\u003c/p\u003e\u003cfigure class=\"highlight dos\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"function\"\u003eerror: \u003cspan class=\"title\"\u003eRPC\u003c/span\u003e \u003cspan class=\"title\"\u003efailed\u003c/span\u003e; \u003cspan class=\"title\"\u003eresult\u003c/span\u003e=18, \u003cspan class=\"title\"\u003eHTTP\u003c/span\u003e \u003cspan class=\"title\"\u003ecode\u003c/span\u003e = 200\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"function\"\u003e\u003cspan class=\"title\"\u003efatal\u003c/span\u003e: \u003cspan class=\"title\"\u003eThe\u003c/span\u003e \u003cspan class=\"title\"\u003eremote\u003c/span\u003e \u003cspan class=\"title\"\u003eend\u003c/span\u003e \u003cspan class=\"title\"\u003ehung\u003c/span\u003e \u003cspan class=\"title\"\u003eup\u003c/span\u003e \u003cspan class=\"title\"\u003eunexpectedly\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\u003cspan id=\"more\"\u003e\u003c/span\u003e\u003cp\u003eresult后面18 55 56都出现过，网上的解决办法几乎都是改变缓冲区的大小，可惜这一次postBuffer设任何值结果也是一样。最郁闷的是，不用proxy上传最后还是会报错！屏息凝神盯着几十kb每秒的速度，过半天还是报错，心情简直跌落到谷底啊有木有！\u003c/p\u003e\u003cp\u003e既然决定重返github，这个问题自然是要解决的了。首先简单google了下，基本确定我的这种情况是个例，那么很有可能是校园网不稳定或者网络服务商对上传做了限制。之前用\u003ccode\u003eGIT_CURL_VERBOSE=1\u003c/code\u003e知道上传包大概是二十多M。考虑过换成其他网再传，想想还是算了，总不至于为了这点儿事跑网吧去吧！orz。继续搜搜搜，。。。…似乎这些错误都与curl的协议相关。既然之前安装hexo已经配置了SSH密钥，何不改用SSH方式上传呢？于是乎删掉了deploy文件夹，\u003ccode\u003e_config.yml\u003c/code\u003e里相关设置改成：\u003c/p\u003e\u003cfigure class=\"highlight yml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003erepository:\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003egithub:\u003c/span\u003e \u003cspan class=\"string\"\u003egit@github.com:flashlab/flashlab.github.io.git,master\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\u003cp\u003e终于顺利完成上传！意外惊喜是，上传速度比https方式快得多，一箭双雕啊哈哈。另外顺手多修改了两个地方：\u003c/p\u003e\u003ch5 id=\"消除控制台多余输出\"\u003e\u003ca href=\"#消除控制台多余输出\" class=\"headerlink\" title=\"消除控制台多余输出\"\u003e\u003c/a\u003e消除控制台多余输出\u003c/h5\u003e\u003cp\u003e\u003cstrong\u003ehexo d\u003c/strong\u003e 次数多了，最终还是扛不住被\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003ewarning: LF will be replaced by CRLF\u003c/p\u003e\u003c/blockquote\u003e\u003cp\u003e刷屏。执行\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003egit config –global core.autocrlf false\u003c/p\u003e\u003c/blockquote\u003e\u003cp\u003e世界总算清静了。\u003c/p\u003e\u003ch5 id=\"删除多余的主题文件\"\u003e\u003ca href=\"#删除多余的主题文件\" class=\"headerlink\" title=\"删除多余的主题文件\"\u003e\u003c/a\u003e删除多余的主题文件\u003c/h5\u003e\u003cp\u003e在fancybox文件夹下只保留source文件夹，减轻上传压力呀有木有。\u003c/p\u003e\u003c/div\u003e",
  "Date": "2015-06-25T10:14:36Z",
  "Author": "J. F"
}