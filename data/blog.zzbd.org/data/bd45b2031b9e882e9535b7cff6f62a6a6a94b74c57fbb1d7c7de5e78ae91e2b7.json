{
  "Source": "blog.zzbd.org",
  "Title": "在WSL2部署mediaWiki（二）",
  "Link": "https://blog.zzbd.org/2021/05/22/wsl-mediawiki2/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003ch3 id=\"第一次使用模板\"\u003e\u003ca href=\"#第一次使用模板\" class=\"headerlink\" title=\"第一次使用模板\"\u003e\u003c/a\u003e第一次使用模板\u003c/h3\u003e\u003cp\u003e限制TOC（每个页面最前面自动生成的的目录）的显示层数，避免太长。使用模板可以轻松实现。模板名为\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://en.wikipedia.org/wiki/Template:TOC_limit\"\u003eTemplate:TOC limit - Wikipedia\u003c/a\u003e，使用方法如下：\u003c/p\u003e\u003cspan id=\"more\"\u003e\u003c/span\u003e\u003col\u003e\u003cli\u003e\u003cp\u003e进入\u003ccode\u003ehttp://localhost/wiki/MediaWiki:Common.css\u003c/code\u003e,增加以下CSS代码：\u003c/p\u003e\u003cfigure class=\"highlight css\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e/* Allow limiting of which header levels are shown in a TOC;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e   \u0026lt;div class=\u0026#34;toclimit-3\u0026#34;\u0026gt;, for instance, will limit to\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e   showing ==headings== and ===headings=== but no further\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e   (as long as there are no =headings= on the page, which\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e   there shouldn\u0026#39;t be according to the MoS).\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e */\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"selector-class\"\u003e.toclimit-2\u003c/span\u003e \u003cspan class=\"selector-class\"\u003e.toclevel-1\u003c/span\u003e \u003cspan class=\"selector-tag\"\u003eul\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"selector-class\"\u003e.toclimit-3\u003c/span\u003e \u003cspan class=\"selector-class\"\u003e.toclevel-2\u003c/span\u003e \u003cspan class=\"selector-tag\"\u003eul\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"selector-class\"\u003e.toclimit-4\u003c/span\u003e \u003cspan class=\"selector-class\"\u003e.toclevel-3\u003c/span\u003e \u003cspan class=\"selector-tag\"\u003eul\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"selector-class\"\u003e.toclimit-5\u003c/span\u003e \u003cspan class=\"selector-class\"\u003e.toclevel-4\u003c/span\u003e \u003cspan class=\"selector-tag\"\u003eul\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"selector-class\"\u003e.toclimit-6\u003c/span\u003e \u003cspan class=\"selector-class\"\u003e.toclevel-5\u003c/span\u003e \u003cspan class=\"selector-tag\"\u003eul\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"selector-class\"\u003e.toclimit-7\u003c/span\u003e \u003cspan class=\"selector-class\"\u003e.toclevel-6\u003c/span\u003e \u003cspan class=\"selector-tag\"\u003eul\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attribute\"\u003edisplay\u003c/span\u003e: none;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003e进入\u003ccode\u003ehttp://localhost/wiki/index.php?title=Template:TOClimit\u003c/code\u003e，编辑代码如下：\u003c/p\u003e\u003cfigure class=\"highlight html\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003ediv\u003c/span\u003e \u003cspan class=\"attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;toclimit-{{{1|{{{limit|3}}}}}}\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e__TOC__\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003e在需要限制TOC的页面最上方增加源码\u003ccode\u003e{{TOClimit|2}}\u003c/code\u003e，\u003ccode\u003e2\u003c/code\u003e代表第二层及以下的标题全部隐藏，默认从第三层开始隐藏。保存后看效果。完成。\u003c/p\u003e\u003c/li\u003e\u003c/ol\u003e\u003ch3 id=\"修改图片上传大小限制\"\u003e\u003ca href=\"#修改图片上传大小限制\" class=\"headerlink\" title=\"修改图片上传大小限制\"\u003e\u003c/a\u003e修改图片上传大小限制\u003c/h3\u003e\u003cp\u003e按照官网的说明修改相应配置即可。需要注意的是php配置文件的位置，如果用nginx，是在\u003ccode\u003e/etc/php/7.4/fpm/php.ini\u003c/code\u003e，如果用apache，需要修改的文件在\u003ccode\u003e/etc/php/7.4/apache2/php.ini\u003c/code\u003e发现区别了吗？这是个大坑。\u003c/p\u003e\u003cp\u003e另外我发现，用nginx的话，wiki页面的url最后是\u003ccode\u003eindex.php?file=xxx\u003c/code\u003e这种，引起的问题是，visual editor用不了。如果是apache2，就是正常的\u003ccode\u003eindex.php/xxx\u003c/code\u003e，怀疑是配置的问题，因为apache2用着也挺好，就懒得去刨根问底了。\u003c/p\u003e\u003cp\u003e（待更新）\u003c/p\u003e\u003c/div\u003e",
  "Date": "2021-05-22T07:46:50Z",
  "Author": "J. F"
}