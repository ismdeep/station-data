{
  "Source": "coolshell.cn",
  "Title": "软件真的好难做啊",
  "Link": "https://coolshell.cn/articles/4811.html",
  "Content": "\u003cdiv class=\"entry-content\"\u003e\n\u003cp\u003e\u003cscript async=\"\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3415450859608158\" crossorigin=\"anonymous\" type=\"9d28179e7057907433c49754-text/javascript\"\u003e\u003c/script\u003e还记得以前本站的那一篇“\u003ca title=\"编程真难啊\" href=\"https://coolshell.cn/articles/1391.html\" target=\"_blank\"\u003e编程好难啊\u003c/a\u003e”吗，那是一篇众程序员调侃程序新手的文章，有恶搞的成分在里面。今天要和大家说的这个事没有一些恶搞和调侃的意思，是比较严肃的话题，你一定可以从中收获一些东西。这个话题来自StackOverflow上的一个问题——\u003ca title=\"Cycle in family tree software\" href=\"http://stackoverflow.com/questions/6163683/cycles-in-family-tree-software\" target=\"_blank\"\u003eCycle in Family Tree Software\u003c/a\u003e，这个程序员问了下面这个问题：\u003c/p\u003e\n\u003cblockquote\u003e\u003cp\u003e我是一个写家族族谱软件的程序员（我用的是C++和Qt），这个软件基本上没有什么问题，直到有一天有个用户报告了一个bug。这个问题是这样的——\u003cstrong\u003e我这个用户和他女儿生了两个孩子\u003c/strong\u003e。\u003c/p\u003e\n\u003cp\u003e于是，我程序员的一些断言和硬性条件导致程序报错，因为我的程序在处理这个关系的时候，其发现X即是Y的爸爸，又是Y的爷爷，所以只能报错。\u003c/p\u003e\n\u003cp\u003e请问，\u003cstrong\u003e在不需要移除我的断言和数据验证的情况下，\u003c/strong\u003e\u003cstrong\u003e我怎么才能解决这个问题\u003c/strong\u003e？\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003e看到这里，请重点阅读一下下面的两点：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e如果你看到这里开始兴奋了，请你为你阴暗的心理去面壁反省10分钟，因为这是一个很技术的问题。\u003c/li\u003e\n\u003cli\u003e如果你开始陷入了深深的思考如何解决这个问题，那么你绝对是一个合格的程序员，因为你已陷入技术已经很深了，有点呆了。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e我在前面说过，“\u003cstrong\u003e这个是一个严肃的话题，你可以从中收获一些东西\u003c/strong\u003e”，当然，我并不希望你来收获乱伦的知识和心得，酷壳是一个技术博客，应该是收获技术方面的东西。\u003c/p\u003e\n\u003cp\u003e\u003cspan id=\"more-4811\"\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e从技术的角度上来说，这是我们经常在设计软件时犯的错误——\u003c/p\u003e\n\u003ch4\u003e\u003cstrong\u003e1）作了错误的假设\u003c/strong\u003e（Assumption）\u003c/h4\u003e\n\u003cp\u003eAssumption是软件设计的重大天敌，Assumption的动词Assume意为Ass u me – Ass you and me 。你的假设做得越多，你的设计就越不靠谱。这里的假设是——我们以为family tree是一个tree，其实并不是tree。\u003cstrong\u003eAssumption是魔鬼\u003c/strong\u003e。\u003c/p\u003e\n\u003cp\u003e还有一些经典的Assumption如下所示\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e最著名的就是那个y2k臭虫。\u003c/li\u003e\n\u003cli\u003e不要以为没有2月30日，在瑞典1712年有2月30日\u003c/li\u003e\n\u003cli\u003e一分钟有60秒？闰秒呢？\u003c/li\u003e\n\u003cli\u003e双胞胎的生日是同一天吗？\u003c/li\u003e\n\u003cli\u003e双胞胎的父亲是同一个？\u003c/li\u003e\n\u003cli\u003e性别只有男和女？\u003c/li\u003e\n\u003cli\u003e婚姻只能是异性？ 关于这一点，推荐一篇强文——\u003ca href=\"http://qntm.org/gay\" target=\"_blank\"\u003eGay marriage: the database engineering perspective\u003c/a\u003e (同性婚姻：数据库工程)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4\u003e\u003cstrong\u003e2）没有认真分析用户案例\u003c/strong\u003e（Use Case）\u003c/h4\u003e\n\u003cp\u003e在设计软件时，我们需要考虑各种各样的用户案例，比如如下的东西：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e私生子的问题\u003c/li\u003e\n\u003cli\u003e一夫多妻或一妻多夫，同父异母，同母异父\u003c/li\u003e\n\u003cli\u003e就算一夫多妻制违反法律，也会有离异再婚的情况\u003c/li\u003e\n\u003cli\u003e同性恋的问题，虽然不能繁衍，但可以领养。\u003c/li\u003e\n\u003cli\u003e换妻活动\u003c/li\u003e\n\u003cli\u003e各种乱伦关系——这种东西那个民族都不少，尤其是古时候，比如：\n\u003cul\u003e\n\u003cli\u003e先后嫁了两个人其是父子关系（昭君）\u003c/li\u003e\n\u003cli\u003e达尔文同学和他的表妹，爱因斯坦的二婚是和他的表姐，埃及艳后嫁了她的弟弟，……\u003c/li\u003e\n\u003cli\u003e顺治同学娶了四个老婆，这四个人还是一家人：姑姑，侄女，妹妹，女儿。（\u003ca href=\"http://blog.sina.com.cn/s/blog_5e62ac110100onwa.html\" target=\"_blank\"\u003e参看这里\u003c/a\u003e）\u003c/li\u003e\n\u003cli\u003e刘邦同学的母后干出来的事，相当变态（\u003ca href=\"http://bbs.tiexue.net/post2_5114346_1.html\" target=\"_blank\"\u003e参看这里\u003c/a\u003e）\u003c/li\u003e\n\u003cli\u003e中国古代的“扒灰老” （类似于楼主那个问题的Use Case）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003e不想再列下去了，人类真TMD恶心，有点要吐了\u003c/strong\u003e。\u003c/p\u003e\n\u003cp style=\"text-align: center;\"\u003e——————————为了缓解一下恶心的气氛，请允许我插入一个搞笑短文——————————\u003c/p\u003e\n\u003cblockquote\u003e\u003cp\u003e一位自杀者在他的遗书里讲述了他自杀的原因，听起来实在让人头痛。遗书这样写道：“我和一个寡妇结了婚，她有一个已成年的女儿，我父亲跟我妻子带过来的女儿结了婚。所以我父亲就成了我的女婿，女儿就成了我的后母，我管父亲叫爸爸，而我父亲也管我叫爸爸；我女儿管我叫爸爸，但我却管她叫妈妈；我还得管我妻子叫姥姥，因为她是我后母的母亲。不久我女儿，也就是我后母生了一个儿子，他是我同父异母的弟弟，他也得管我叫姥爷，因为他也是我的外孙。后来我妻子，也就是我姥姥生了一个儿子，他是我后母的弟弟，我是他的外甥，所以儿子管我叫爸爸，我管儿子叫舅舅。另外我是我妻子，也就是我姥姥的外孙，同时也是我姥姥的丈夫，所已我也是我的外祖父。又因为我妻子是我的外祖母，我的儿子，也就是我的舅舅是我的弟弟和我女儿的弟弟，所以我……我的天哪，这么复杂的关系实在让我伤透了脑筋，我只有一死才能得以解脱……”\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp style=\"text-align: center;\"\u003e————————————————————————插入完毕————————————————————\u003c/p\u003e\n\u003cp style=\"text-align: left;\"\u003e看完上面这个短文，不知道你是否和我一样，觉得这么一个简单的程序将是如此难做啊。\u003cstrong\u003e另外，我决定在下一次的面试中让应聘者来设计Family Tree的程序\u003c/strong\u003e。\u003c/p\u003e\n\u003cp style=\"text-align: left;\"\u003e我又说多了，现在还是让我们回到技术上来。除了上面那几个观点，我在回复中还看到了如入一些有意思的回复：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e“我的软件没有bug，是你的生活有bug”——让我想到了\u003ca title=\"程序员惯用的解释(Top 25)\" href=\"https://coolshell.cn/articles/1174.html\" target=\"_blank\"\u003e程序员惯用的借口\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e“算法中不应该加太多的限制，限制多了反而让算法不灵活。”\u003c/li\u003e\n\u003cli\u003e“移除断言，并不代表就不出错，对于这种rare case，我们最好给一个Warning提醒用户，让用户确认确实是这样的。”\u003c/li\u003e\n\u003cli\u003e“关于解决这个问题，移除那个断言，如果显示上会有问题的话，那就复制一下有不同关系的人就可以了”\u003c/li\u003e\n\u003cli\u003e“你真的应该想想你的软件的价值是什么？市场在哪里？你真的要照顾这样的用户吗？”\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e挺好的，相信你对软件开发又学到了一些东西。\u003c/p\u003e\n\u003cp\u003e\u003cspan style=\"color: #cc0000;\"\u003e\u003cstrong\u003e（转载时请勿用于商业目的，并请注明作者和出处）\u003c/strong\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cdiv style=\"margin-top: 15px; font-size: 16px;color: #cc0000;\"\u003e\n\u003cp align=\"center\"\u003e\u003cstrong\u003e（转载本站文章请注明作者和出处 \u003ca href=\"https://coolshell.cn/\"\u003e酷 壳 – CoolShell\u003c/a\u003e ，请勿用于任何商业用途）\u003c/strong\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"wp_rp_wrap  wp_rp_vertical_m\" id=\"wp_rp_first\"\u003e\u003cdiv class=\"wp_rp_content\"\u003e\u003ch3 class=\"related_post_title\"\u003e相关文章\u003c/h3\u003e\u003cul class=\"related_post wp_rp\"\u003e\u003cli\u003e\u003ca href=\"https://coolshell.cn/articles/18024.html\" class=\"wp_rp_thumbnail\"\u003e\u003cimg src=\"https://coolshell.cn/wp-content/uploads/2017/07/api-design-300x278-2-150x150.jpg\" alt=\"API设计原则 – Qt官网的设计实践总结\" width=\"150\" height=\"150\"/\u003e\u003c/a\u003e\u003ca href=\"https://coolshell.cn/articles/18024.html\" class=\"wp_rp_title\"\u003eAPI设计原则 – Qt官网的设计实践总结\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://coolshell.cn/articles/17680.html\" class=\"wp_rp_thumbnail\"\u003e\u003cimg src=\"https://coolshell.cn/wp-content/uploads/2017/02/gitlab-600-150x150.jpg\" alt=\"从Gitlab误删除数据库想到的\" width=\"150\" height=\"150\"/\u003e\u003c/a\u003e\u003ca href=\"https://coolshell.cn/articles/17680.html\" class=\"wp_rp_title\"\u003e从Gitlab误删除数据库想到的\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://coolshell.cn/articles/17459.html\" class=\"wp_rp_thumbnail\"\u003e\u003cimg src=\"https://coolshell.cn/wp-content/uploads/2016/08/HighAvailability-BK-150x150.png\" alt=\"关于高可用的系统\" width=\"150\" height=\"150\"/\u003e\u003c/a\u003e\u003ca href=\"https://coolshell.cn/articles/17459.html\" class=\"wp_rp_title\"\u003e关于高可用的系统\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://coolshell.cn/articles/9949.html\" class=\"wp_rp_thumbnail\"\u003e\u003cimg src=\"https://coolshell.cn/wp-content/uploads/2013/07/inverted-bookshelf_thumb-150x150.jpg\" alt=\"IoC/DIP其实是一种管理思想\" width=\"150\" height=\"150\"/\u003e\u003c/a\u003e\u003ca href=\"https://coolshell.cn/articles/9949.html\" class=\"wp_rp_title\"\u003eIoC/DIP其实是一种管理思想\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://coolshell.cn/articles/6775.html\" class=\"wp_rp_thumbnail\"\u003e\u003cimg src=\"https://coolshell.cn/wp-content/plugins/wordpress-23-related-posts-plugin/static/thumbs/24.jpg\" alt=\"Bret Victor – Inventing on Principle\" width=\"150\" height=\"150\"/\u003e\u003c/a\u003e\u003ca href=\"https://coolshell.cn/articles/6775.html\" class=\"wp_rp_title\"\u003eBret Victor – Inventing on Principle\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://coolshell.cn/articles/5686.html\" class=\"wp_rp_thumbnail\"\u003e\u003cimg src=\"https://coolshell.cn/wp-content/plugins/wordpress-23-related-posts-plugin/static/thumbs/15.jpg\" alt=\"多些时间能少写些代码\" width=\"150\" height=\"150\"/\u003e\u003c/a\u003e\u003ca href=\"https://coolshell.cn/articles/5686.html\" class=\"wp_rp_title\"\u003e多些时间能少写些代码\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv id=\"post-ratings-4811\" class=\"post-ratings\" itemscope=\"\" itemtype=\"https://schema.org/Article\" data-nonce=\"ccdcb1cc53\"\u003e\u003cimg id=\"rating_4811_1\" src=\"https://coolshell.cn/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif\" alt=\"好烂啊\" title=\"好烂啊\" onmouseover=\"if (!window.__cfRLUnblockHandlers) return false; current_rating(4811, 1, \u0026#39;好烂啊\u0026#39;);\" onmouseout=\"if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.3, 5, 0);\" onclick=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" onkeypress=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" style=\"cursor: pointer; border: 0px;\" data-cf-modified-9d28179e7057907433c49754-=\"\"/\u003e\u003cimg id=\"rating_4811_2\" src=\"https://coolshell.cn/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif\" alt=\"有点差\" title=\"有点差\" onmouseover=\"if (!window.__cfRLUnblockHandlers) return false; current_rating(4811, 2, \u0026#39;有点差\u0026#39;);\" onmouseout=\"if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.3, 5, 0);\" onclick=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" onkeypress=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" style=\"cursor: pointer; border: 0px;\" data-cf-modified-9d28179e7057907433c49754-=\"\"/\u003e\u003cimg id=\"rating_4811_3\" src=\"https://coolshell.cn/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif\" alt=\"凑合看看\" title=\"凑合看看\" onmouseover=\"if (!window.__cfRLUnblockHandlers) return false; current_rating(4811, 3, \u0026#39;凑合看看\u0026#39;);\" onmouseout=\"if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.3, 5, 0);\" onclick=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" onkeypress=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" style=\"cursor: pointer; border: 0px;\" data-cf-modified-9d28179e7057907433c49754-=\"\"/\u003e\u003cimg id=\"rating_4811_4\" src=\"https://coolshell.cn/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif\" alt=\"还不错\" title=\"还不错\" onmouseover=\"if (!window.__cfRLUnblockHandlers) return false; current_rating(4811, 4, \u0026#39;还不错\u0026#39;);\" onmouseout=\"if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.3, 5, 0);\" onclick=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" onkeypress=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" style=\"cursor: pointer; border: 0px;\" data-cf-modified-9d28179e7057907433c49754-=\"\"/\u003e\u003cimg id=\"rating_4811_5\" src=\"https://coolshell.cn/wp-content/plugins/wp-postratings/images/stars_crystal/rating_half.gif\" alt=\"很精彩\" title=\"很精彩\" onmouseover=\"if (!window.__cfRLUnblockHandlers) return false; current_rating(4811, 5, \u0026#39;很精彩\u0026#39;);\" onmouseout=\"if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.3, 5, 0);\" onclick=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" onkeypress=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" style=\"cursor: pointer; border: 0px;\" data-cf-modified-9d28179e7057907433c49754-=\"\"/\u003e (\u003cstrong\u003e30\u003c/strong\u003e 人打了分，平均分： \u003cstrong\u003e4.27\u003c/strong\u003e )\u003cbr/\u003e\u003cspan class=\"post-ratings-text\" id=\"ratings_4811_text\"\u003e\u003c/span\u003e\u003cmeta itemprop=\"name\" content=\"软件真的好难做啊\"/\u003e\u003cmeta itemprop=\"headline\" content=\"软件真的好难做啊\"/\u003e\u003cmeta itemprop=\"description\" content=\"还记得以前本站的那一篇“编程好难啊”吗，那是一篇众程序员调侃程序新手的文章，有恶搞的成分在里面。今天要和大家说的这个事没有一些恶搞和调侃的意思，是比较严肃的话题，你一定可以从中收获一些东西。这个话题来自StackOverflow上的一个问题——Cycle in Family Tree Software，这个程序员问了下面这个问题：\n我是一个写家族族谱软件的程序员（我用的是C++和Qt），这个软件...\"/\u003e\u003cmeta itemprop=\"datePublished\" content=\"2011-06-10T08:45:17+08:00\"/\u003e\u003cmeta itemprop=\"dateModified\" content=\"2011-11-01T14:21:50+08:00\"/\u003e\u003cmeta itemprop=\"url\" content=\"https://coolshell.cn/articles/4811.html\"/\u003e\u003cmeta itemprop=\"author\" content=\"陈皓\"/\u003e\u003cmeta itemprop=\"mainEntityOfPage\" content=\"https://coolshell.cn/articles/4811.html\"/\u003e\u003cdiv style=\"display: none;\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"https://schema.org/Organization\"\u003e\u003cmeta itemprop=\"name\" content=\"酷 壳 - CoolShell\"/\u003e\u003cmeta itemprop=\"url\" content=\"https://coolshell.cn\"/\u003e\u003cdiv itemprop=\"logo\" itemscope=\"\" itemtype=\"https://schema.org/ImageObject\"\u003e\u003cmeta itemprop=\"url\" content=\"\"/\u003e\u003c/div\u003e\u003c/div\u003e\u003cdiv style=\"display: none;\" itemprop=\"aggregateRating\" itemscope=\"\" itemtype=\"https://schema.org/AggregateRating\"\u003e\u003cmeta itemprop=\"bestRating\" content=\"5\"/\u003e\u003cmeta itemprop=\"worstRating\" content=\"1\"/\u003e\u003cmeta itemprop=\"ratingValue\" content=\"4.27\"/\u003e\u003cmeta itemprop=\"ratingCount\" content=\"30\"/\u003e\u003c/div\u003e\u003c/div\u003e\u003cdiv id=\"post-ratings-4811-loading\" class=\"post-ratings-loading\"\u003e\u003cimg src=\"https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif\" width=\"16\" height=\"16\" class=\"post-ratings-image\"/\u003eLoading...\u003c/div\u003e\n\u003c/div\u003e",
  "Date": "2011-06-10T08:45:17+08:00",
  "Author": "陈皓"
}