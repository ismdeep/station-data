{
  "Source": "coolshell.cn",
  "Title": "最为奇怪的程序语言的特性",
  "Link": "https://coolshell.cn/articles/2053.html",
  "Content": "\u003cdiv class=\"entry-content\"\u003e\n\u003cp\u003e\u003cscript async=\"\" src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3415450859608158\" crossorigin=\"anonymous\" type=\"58817c86ea4fae9dc7ad30c7-text/javascript\"\u003e\u003c/script\u003e这些最为奇怪的程序语言的特性，来自stackoverflow.com，原贴在\u003ca href=\"http://stackoverflow.com/questions/1995113?sort=votes\u0026amp;page=1\" target=\"_blank\"\u003e这里\u003c/a\u003e。我摘选了一些例子，的确是比较怪异，让我们一个一个来看看。 \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e1、C语言中的数组\u003c/strong\u003e \u003c/p\u003e\n\u003cp style=\"padding-left: 30px;\"\u003e在C/C++中，a[10] 可以写成 10[a] \u003c/p\u003e\n\u003cp style=\"padding-left: 30px;\"\u003e“Hello World”[i] 也可以写成 i[“Hello World”] \u003c/p\u003e\n\u003cp\u003e这样的特性是不是很怪异？如果你想知道为什么的话，你可以看看本站的这篇文章——《\u003ca href=\"https://coolshell.cn/articles/945.html\" target=\"_blank\"\u003eC语言的谜题\u003c/a\u003e》中的第12题。 \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e2、在Javascript中\u003c/strong\u003e \u003c/p\u003e\n\u003cp\u003e ‘5’ + 3 的结果是：’53’\u003cbr/\u003e\n ‘5’ – 3 的结果是：2 \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e3、C/C++中的Trigraphs\u003c/strong\u003e \u003c/p\u003e\n\u003cpre data-enlighter-language=\"c\" class=\"EnlighterJSRAW\"\u003eint main() {\n   cout \u0026lt;\u0026lt; \u0026#34;LOL??!\u0026#34;;\n}\u003c/pre\u003e\n\u003cp\u003e上面的这段程序会输出： “LOL|”，这是因为 ??! 被转成了 | ，关于Trigraphs，下面有个表格： \u003c/p\u003e\n\u003cp\u003e\u003cspan id=\"more-2053\"\u003e\u003c/span\u003e\u003c/p\u003e\n\u003ctable style=\"width: 237px; height: 184px;\"\u003e\n\u003ctbody\u003e\n\u003ctr valign=\"top\"\u003e\n\u003ctd\u003e??=\u003c/td\u003e\n\u003ctd\u003e#\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr valign=\"top\"\u003e\n\u003ctd\u003e??(\u003c/td\u003e\n\u003ctd\u003e[\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr valign=\"top\"\u003e\n\u003ctd\u003e??/\u003c/td\u003e\n\u003ctd\u003e\\\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr valign=\"top\"\u003e\n\u003ctd\u003e??)\u003c/td\u003e\n\u003ctd\u003e]\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr valign=\"top\"\u003e\n\u003ctd\u003e??’\u003c/td\u003e\n\u003ctd\u003e^\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr valign=\"top\"\u003e\n\u003ctd\u003e??\u0026lt;\u003c/td\u003e\n\u003ctd\u003e{\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr valign=\"top\"\u003e\n\u003ctd\u003e??!\u003c/td\u003e\n\u003ctd\u003e|\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr valign=\"top\"\u003e\n\u003ctd\u003e??\u0026gt;\u003c/td\u003e\n\u003ctd\u003e}\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr valign=\"top\"\u003e\n\u003ctd\u003e??-\u003c/td\u003e\n\u003ctd\u003e~\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e  \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e4、JavaScript 的条件表\u003c/strong\u003e \u003c/p\u003e\n\u003cp\u003e看到下面这个表，不难理解为什么Javascript程序员为什么痛苦了——《\u003ca rel=\"bookmark\" href=\"https://coolshell.cn/articles/1850.html\"\u003eJavascript程序员嘴最脏??\u003c/a\u003e》 \u003c/p\u003e\n\u003cp\u003e[javascript]”        ==   ‘0’           //false\u003cbr/\u003e\n0         ==   ”            //true\u003cbr/\u003e\n0         ==   ‘0’           //true\u003cbr/\u003e\nfalse     ==   ‘false’       //false\u003cbr/\u003e\nfalse     ==   ‘0’           //true\u003cbr/\u003e\nfalse     ==   undefined     //false\u003cbr/\u003e\nfalse     ==   null          //false\u003cbr/\u003e\nnull      ==   undefined     //true\u003cbr/\u003e\n\u0026#34; \\t\\r\\n\u0026#34; ==   0             //true[/javascript] \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e5、Java的Integer cache\u003c/strong\u003e \u003c/p\u003e\n\u003cpre data-enlighter-language=\"java\" class=\"EnlighterJSRAW\"\u003eInteger foo = 1000;\nInteger bar = 1000;\n \nfoo \u0026lt;= bar; // true\nfoo \u0026gt;= bar; // true\nfoo == bar; // false\n \n//然后，如果你的 foo 和 bar 的值在 127 和 -128 之间（包括）\n//那么，其行为则改变了：\n \nInteger foo = 42;\nInteger bar = 42;\n \nfoo \u0026lt;= bar; // true\nfoo \u0026gt;= bar; // true\nfoo == bar; // true\u003c/pre\u003e\n\u003cp\u003e为什么会这样呢？你需要了解一下Java Interger Cache，下面是相关的程序，注意其中的注释\u003c/p\u003e\n\u003cpre data-enlighter-language=\"java\" class=\"EnlighterJSRAW\"\u003e/**\n     * Returns a \u0026lt;tt\u0026gt;Integer\u0026lt;/tt\u0026gt; instance representing the specified\n     * \u0026lt;tt\u0026gt;int\u0026lt;/tt\u0026gt; value.\n     * If a new \u0026lt;tt\u0026gt;Integer\u0026lt;/tt\u0026gt; instance is not required, this method\n     * should generally be used in preference to the constructor\n     * \u0026lt;a href=\u0026#34;mailto:{@link\u0026#34;\u0026gt;{@link\u0026lt;/a\u0026gt; #Integer(int)}, as this method is likely to yield\n     * significantly better space and time performance by caching\n     * frequently requested values.\n     *\n     * @param  i an \u0026lt;code\u0026gt;int\u0026lt;/code\u0026gt; value.\n     * @return a \u0026lt;tt\u0026gt;Integer\u0026lt;/tt\u0026gt; instance representing \u0026lt;tt\u0026gt;i\u0026lt;/tt\u0026gt;.\n     * @since  1.5\n     */\n    public static Integer valueOf(int i) {\n        if(i \u0026gt;= -128 \u0026amp;\u0026amp; i \u0026lt;= IntegerCache.high)\n            return IntegerCache.cache[i + 128];\n        else\n            return new Integer(i);\n    }\n\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e5、Perl的那些奇怪的变量\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e[perl]$.\u003cbr/\u003e\n$_\u003cbr/\u003e\n$_#\u003cbr/\u003e\n$$\u003cbr/\u003e\n$[\u003cbr/\u003e\n@_[/perl]\u003c/p\u003e\n\u003cp\u003e其所有的这些怪异的变量请参看：\u003ca href=\"http://www.kichwa.com/quik_ref/spec_variables.html\"\u003ehttp://www.kichwa.com/quik_ref/spec_variables.html\u003c/a\u003e \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e6、Java的异常返回\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e请看下面这段程序，你觉得其返回true还是false？\u003c/p\u003e\n\u003cpre data-enlighter-language=\"java\" class=\"EnlighterJSRAW\"\u003etry {\n    return true;\n} finally {\n    return false;\n}\u003c/pre\u003e\n\u003cp\u003e在 javascript 和python下，其行为和Java的是一样的。 \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e7、C语言中的Duff device\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e下面的这段程序你能看得懂吗？这就是所谓的Duff Device，相当的怪异。\u003c/p\u003e\n\u003cpre data-enlighter-language=\"c\" class=\"EnlighterJSRAW\"\u003evoid duff_memcpy( char* to, char* from, size_t count ) {\n    size_t n = (count+7)/8;\n    switch( count%8 ) {\n    case 0: do{ *to++ = *from++;\n    case 7:     *to++ = *from++;\n    case 6:     *to++ = *from++;\n    case 5:     *to++ = *from++;\n    case 4:     *to++ = *from++;\n    case 3:     *to++ = *from++;\n    case 2:     *to++ = *from++;\n    case 1:     *to++ = *from++;\n            }while(--n\u0026gt;0);\n    }\n} \u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e8、PHP中的字符串当函数用\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003ePHP中的某些用法也是很怪异的\u003c/p\u003e\n\u003cpre data-enlighter-language=\"php\" class=\"EnlighterJSRAW\"\u003e$x = \u0026#34;foo\u0026#34;;\nfunction foo(){ echo \u0026#34;wtf\u0026#34;; }\n$x();\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003e9、在C++中，你可以使用空指针调用静态函数\u003c/strong\u003e\u003c/p\u003e\n\u003cpre data-enlighter-language=\"c\" class=\"EnlighterJSRAW\"\u003eclass Foo {\n  public:\n    static void bar() {\n      std::cout \u0026lt;\u0026lt; \u0026#34;bar()\u0026#34; \u0026lt;\u0026lt; std::endl;\n    }\n};\n \nint main(void) {\n  Foo * foo = NULL;\n  foo-\u0026gt;bar(); //=\u0026gt; WTF!?\n  return 0; // Ok!\n}\u003c/pre\u003e\n\u003cp\u003e呵呵。的确是挺怪异的。\u003c/p\u003e\n\u003cdiv style=\"margin-top: 15px; font-size: 16px;color: #cc0000;\"\u003e\n\u003cp align=\"center\"\u003e\u003cstrong\u003e（转载本站文章请注明作者和出处 \u003ca href=\"https://coolshell.cn/\"\u003e酷 壳 – CoolShell\u003c/a\u003e ，请勿用于任何商业用途）\u003c/strong\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"wp_rp_wrap  wp_rp_vertical_m\" id=\"wp_rp_first\"\u003e\u003cdiv class=\"wp_rp_content\"\u003e\u003ch3 class=\"related_post_title\"\u003e相关文章\u003c/h3\u003e\u003cul class=\"related_post wp_rp\"\u003e\u003cli\u003e\u003ca href=\"https://coolshell.cn/articles/1850.html\" class=\"wp_rp_thumbnail\"\u003e\u003cimg src=\"https://coolshell.cn/wp-content/uploads/2009/11/programming_language-150x150.jpg\" alt=\"Javascript程序员嘴最脏??\" width=\"150\" height=\"150\"/\u003e\u003c/a\u003e\u003ca href=\"https://coolshell.cn/articles/1850.html\" class=\"wp_rp_title\"\u003eJavascript程序员嘴最脏??\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://coolshell.cn/articles/18360.html\" class=\"wp_rp_thumbnail\"\u003e\u003cimg src=\"https://coolshell.cn/wp-content/uploads/2018/05/300x262-150x150.jpg\" alt=\"程序员练级攻略（2018)  与我的专栏\" width=\"150\" height=\"150\"/\u003e\u003c/a\u003e\u003ca href=\"https://coolshell.cn/articles/18360.html\" class=\"wp_rp_title\"\u003e程序员练级攻略（2018) 与我的专栏\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://coolshell.cn/articles/1992.html\" class=\"wp_rp_thumbnail\"\u003e\u003cimg src=\"https://coolshell.cn/wp-content/uploads/2009/12/language-fanboys-150x150.jpg\" alt=\"程序员眼中的编程语言\" width=\"150\" height=\"150\"/\u003e\u003c/a\u003e\u003ca href=\"https://coolshell.cn/articles/1992.html\" class=\"wp_rp_title\"\u003e程序员眼中的编程语言\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://coolshell.cn/articles/1839.html\" class=\"wp_rp_thumbnail\"\u003e\u003cimg src=\"https://coolshell.cn/wp-content/uploads/2009/11/oscar-meyer-wienermobile-150x150.jpg\" alt=\"编程语言汽车\" width=\"150\" height=\"150\"/\u003e\u003c/a\u003e\u003ca href=\"https://coolshell.cn/articles/1839.html\" class=\"wp_rp_title\"\u003e编程语言汽车\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://coolshell.cn/articles/1532.html\" class=\"wp_rp_thumbnail\"\u003e\u003cimg src=\"https://coolshell.cn/wp-content/plugins/wordpress-23-related-posts-plugin/static/thumbs/24.jpg\" alt=\"到处都是Unix的胎记\" width=\"150\" height=\"150\"/\u003e\u003c/a\u003e\u003ca href=\"https://coolshell.cn/articles/1532.html\" class=\"wp_rp_title\"\u003e到处都是Unix的胎记\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://coolshell.cn/articles/20845.html\" class=\"wp_rp_thumbnail\"\u003e\u003cimg src=\"https://coolshell.cn/wp-content/uploads/2020/03/rust-social-wide-150x150.jpg\" alt=\"Rust语言的编程范式\" width=\"150\" height=\"150\"/\u003e\u003c/a\u003e\u003ca href=\"https://coolshell.cn/articles/20845.html\" class=\"wp_rp_title\"\u003eRust语言的编程范式\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv id=\"post-ratings-2053\" class=\"post-ratings\" itemscope=\"\" itemtype=\"https://schema.org/Article\" data-nonce=\"b213e813ba\"\u003e\u003cimg id=\"rating_2053_1\" src=\"https://coolshell.cn/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif\" alt=\"好烂啊\" title=\"好烂啊\" onmouseover=\"if (!window.__cfRLUnblockHandlers) return false; current_rating(2053, 1, \u0026#39;好烂啊\u0026#39;);\" onmouseout=\"if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.3, 5, 0);\" onclick=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" onkeypress=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" style=\"cursor: pointer; border: 0px;\" data-cf-modified-58817c86ea4fae9dc7ad30c7-=\"\"/\u003e\u003cimg id=\"rating_2053_2\" src=\"https://coolshell.cn/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif\" alt=\"有点差\" title=\"有点差\" onmouseover=\"if (!window.__cfRLUnblockHandlers) return false; current_rating(2053, 2, \u0026#39;有点差\u0026#39;);\" onmouseout=\"if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.3, 5, 0);\" onclick=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" onkeypress=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" style=\"cursor: pointer; border: 0px;\" data-cf-modified-58817c86ea4fae9dc7ad30c7-=\"\"/\u003e\u003cimg id=\"rating_2053_3\" src=\"https://coolshell.cn/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif\" alt=\"凑合看看\" title=\"凑合看看\" onmouseover=\"if (!window.__cfRLUnblockHandlers) return false; current_rating(2053, 3, \u0026#39;凑合看看\u0026#39;);\" onmouseout=\"if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.3, 5, 0);\" onclick=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" onkeypress=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" style=\"cursor: pointer; border: 0px;\" data-cf-modified-58817c86ea4fae9dc7ad30c7-=\"\"/\u003e\u003cimg id=\"rating_2053_4\" src=\"https://coolshell.cn/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif\" alt=\"还不错\" title=\"还不错\" onmouseover=\"if (!window.__cfRLUnblockHandlers) return false; current_rating(2053, 4, \u0026#39;还不错\u0026#39;);\" onmouseout=\"if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.3, 5, 0);\" onclick=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" onkeypress=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" style=\"cursor: pointer; border: 0px;\" data-cf-modified-58817c86ea4fae9dc7ad30c7-=\"\"/\u003e\u003cimg id=\"rating_2053_5\" src=\"https://coolshell.cn/wp-content/plugins/wp-postratings/images/stars_crystal/rating_half.gif\" alt=\"很精彩\" title=\"很精彩\" onmouseover=\"if (!window.__cfRLUnblockHandlers) return false; current_rating(2053, 5, \u0026#39;很精彩\u0026#39;);\" onmouseout=\"if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.3, 5, 0);\" onclick=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" onkeypress=\"if (!window.__cfRLUnblockHandlers) return false; rate_post();\" style=\"cursor: pointer; border: 0px;\" data-cf-modified-58817c86ea4fae9dc7ad30c7-=\"\"/\u003e (\u003cstrong\u003e26\u003c/strong\u003e 人打了分，平均分： \u003cstrong\u003e4.27\u003c/strong\u003e )\u003cbr/\u003e\u003cspan class=\"post-ratings-text\" id=\"ratings_2053_text\"\u003e\u003c/span\u003e\u003cmeta itemprop=\"name\" content=\"最为奇怪的程序语言的特性\"/\u003e\u003cmeta itemprop=\"headline\" content=\"最为奇怪的程序语言的特性\"/\u003e\u003cmeta itemprop=\"description\" content=\"这些最为奇怪的程序语言的特性，来自stackoverflow.com，原贴在这里。我摘选了一些例子，的确是比较怪异，让我们一个一个来看看。 \n\n1、C语言中的数组 \n在C/C++中，a[10] 可以写成 10[a] \n\u0026#34;Hello World\u0026#34;[i] 也可以写成 i[\u0026#34;Hello World\u0026#34;] \n这样的特性是不是很怪异？如果你想知道为什么的话，你可以看看本站的这篇文章——《C语言的谜题...\"/\u003e\u003cmeta itemprop=\"datePublished\" content=\"2010-01-21T08:16:18+08:00\"/\u003e\u003cmeta itemprop=\"dateModified\" content=\"2010-01-21T09:58:46+08:00\"/\u003e\u003cmeta itemprop=\"url\" content=\"https://coolshell.cn/articles/2053.html\"/\u003e\u003cmeta itemprop=\"author\" content=\"陈皓\"/\u003e\u003cmeta itemprop=\"mainEntityOfPage\" content=\"https://coolshell.cn/articles/2053.html\"/\u003e\u003cdiv style=\"display: none;\" itemprop=\"publisher\" itemscope=\"\" itemtype=\"https://schema.org/Organization\"\u003e\u003cmeta itemprop=\"name\" content=\"酷 壳 - CoolShell\"/\u003e\u003cmeta itemprop=\"url\" content=\"https://coolshell.cn\"/\u003e\u003cdiv itemprop=\"logo\" itemscope=\"\" itemtype=\"https://schema.org/ImageObject\"\u003e\u003cmeta itemprop=\"url\" content=\"\"/\u003e\u003c/div\u003e\u003c/div\u003e\u003cdiv style=\"display: none;\" itemprop=\"aggregateRating\" itemscope=\"\" itemtype=\"https://schema.org/AggregateRating\"\u003e\u003cmeta itemprop=\"bestRating\" content=\"5\"/\u003e\u003cmeta itemprop=\"worstRating\" content=\"1\"/\u003e\u003cmeta itemprop=\"ratingValue\" content=\"4.27\"/\u003e\u003cmeta itemprop=\"ratingCount\" content=\"26\"/\u003e\u003c/div\u003e\u003c/div\u003e\u003cdiv id=\"post-ratings-2053-loading\" class=\"post-ratings-loading\"\u003e\u003cimg src=\"https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif\" width=\"16\" height=\"16\" class=\"post-ratings-image\"/\u003eLoading...\u003c/div\u003e\n\u003c/div\u003e",
  "Date": "2010-01-21T08:16:18+08:00",
  "Author": "陈皓"
}