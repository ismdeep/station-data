{
  "Source": "donaldfeury.xyz",
  "Title": "Use the filter positional operator in MongoDB to update specific array elements",
  "Link": "https://donaldfeury.xyz/use-the-filter-positional-operator-in-mongodb-to-update-specific-array-elements/",
  "Content": "\u003csection class=\"gh-content gh-canvas\"\u003e\n        \u003cp\u003eFor a full overview of MongoDB and all my posts on it, check out my \u003ca href=\"https://donaldfeury.xyz/introduction-to-mongodb/\"\u003eoverview\u003c/a\u003e.\u003c/p\u003e\u003chr/\u003e\u003cp\u003eMongoDB provides a filter positional operator \u003ccode\u003e$[\u0026lt;name_of_filter\u0026gt;]\u003c/code\u003e to only update some elements in an array. If you want to update all the elements in the array, \u003ca href=\"https://donaldfeury.xyz/use-the-all-positional-operator-in-mongodb-to-update-all-elements-in-an-array/\"\u003euse the all positional operator in MongoDB to update all elements in an array\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eYou must define the filters to use in a property called \u003ccode\u003earrayFilters\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eWith the following data inserted into a collection called \u003ccode\u003egames\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003edb.games.insertMany(\n\t{\n\t\tname: \u0026#34;Genshin Impact\u0026#34;,\n\t\treviewScores: [8, 6, 9, 5]\n\t},\n\t{\n\t\tname: \u0026#34;Factorio\u0026#34;,\n\t\treviewScores: [7, 7, 10, 8]\n\t},\n\t{\n\t\tname: \u0026#34;Bloodborne\u0026#34;,\n\t\treviewScores: [9, 8, 9, 9]\n\t}\n)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eFor the game \u003ccode\u003eGenshin Impact\u003c/code\u003e, increase all the reviews by 1 that are less than 9.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003edb.games.updateMany(\n\t{ name: \u0026#34;Genshin Impact\u0026#34; },\n\t{ $inc: { \u0026#34;reviewScores.$[reviews]\u0026#34;: 1 } },\n\t{ arrayFilters: [\n\t\t{ \u0026#34;reviews\u0026#34;: { $lt: 9 } }\n\t]}\n)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNotice in the \u003ccode\u003e$inc\u003c/code\u003e \u003ca href=\"https://donaldfeury.xyz/how-to-update-a-single-document-into-a-mongodb-collection-2/\"\u003eupdate operator\u003c/a\u003e, we reference the array filter defined called \u003ccode\u003ereviews\u003c/code\u003e to tell MongoDB which elements to update.\u003c/p\u003e\u003cp\u003e\u003ca href=\"https://donaldfeury.xyz/get-all-the-documents-out-of-a-collection-in-mongodb/\"\u003eUse the find method to read data back out of MongoDB\u003c/a\u003e to view the results:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n\tname: \u0026#34;Genshin Impact\u0026#34;,\n\treviewScores: [9, 7, 9, 6]\n},\n{\n\tname: \u0026#34;Factorio\u0026#34;,\n\treviewScores: [7, 7, 10, 8]\n},\n{\n\tname: \u0026#34;Bloodborne\u0026#34;,\n\treviewScores: [9, 8, 9, 9]\n}\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"related\"\u003eRelated\u003c/h3\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://donaldfeury.xyz/tag/mongodb\"\u003eMy other posts on MongoDB\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://donaldfeury.xyz/use-the-all-positional-operator-in-mongodb-to-update-all-elements-in-an-array/\"\u003eAll Positional Array Operator\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003chr/\u003e\u003cp\u003eDid you find this information useful? If so, consider heading over to my \u003ca href=\"https://donaldfeury.xyz/donate/\"\u003edonation\u003c/a\u003e page and drop me some support.\u003c/p\u003e\u003cp\u003eWant to ask a question or just chat? Contact me \u003ca href=\"https://donaldfeury.xyz/contact\"\u003ehere\u003c/a\u003e\u003c/p\u003e\n    \u003c/section\u003e",
  "Date": "2021-10-20T16:00:00Z",
  "Author": "Donald Feury"
}