{
  "Source": "dunwu",
  "Title": "Java é¢è¯•æ€»ç»“",
  "Link": "https://dunwu.github.io/blog/pages/5f886e/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003ch1 id=\"Java-é¢è¯•æ€»ç»“\"\u003e\u003ca href=\"#Java-é¢è¯•æ€»ç»“\" class=\"headerlink\" title=\"Java é¢è¯•æ€»ç»“\"\u003e\u003c/a\u003eJava é¢è¯•æ€»ç»“\u003c/h1\u003e\u003ch2 id=\"åŸºç¡€\"\u003e\u003ca href=\"#åŸºç¡€\" class=\"headerlink\" title=\"åŸºç¡€\"\u003e\u003c/a\u003eåŸºç¡€\u003c/h2\u003e\u003ch3 id=\"å·¥å…·ç±»\"\u003e\u003ca href=\"#å·¥å…·ç±»\" class=\"headerlink\" title=\"å·¥å…·ç±»\"\u003e\u003c/a\u003eå·¥å…·ç±»\u003c/h3\u003e\u003ch4 id=\"String\"\u003e\u003ca href=\"#String\" class=\"headerlink\" title=\"String\"\u003e\u003c/a\u003eString\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eString ç±»èƒ½è¢«ç»§æ‰¿å—ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eStringï¼ŒStringBufferï¼ŒStringBuilder çš„åŒºåˆ«ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eString ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚å› ä¸ºå…¶è¢« final ä¿®é¥°ï¼Œæ‰€ä»¥æ— æ³•è¢«ç»§æ‰¿ã€‚\u003c/p\u003e\n\u003cp\u003eStringBufferï¼ŒStringBuilder æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ append æ¯” String æ•ˆç‡é«˜ã€‚å› ä¸º String ä¼šéšå¼ new String å¯¹è±¡ã€‚\u003c/p\u003e\n\u003cp\u003eStringBuffer ä¸»è¦æ–¹æ³•éƒ½ç”¨ synchronized ä¿®é¥°ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼›è€Œ StringBuilder ä¸æ˜¯ã€‚\u003c/p\u003e\n\u003ch3 id=\"é¢å‘å¯¹è±¡\"\u003e\u003ca href=\"#é¢å‘å¯¹è±¡\" class=\"headerlink\" title=\"é¢å‘å¯¹è±¡\"\u003e\u003c/a\u003eé¢å‘å¯¹è±¡\u003c/h3\u003e\u003cblockquote\u003e\n\u003cp\u003eæŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eç±»å¯ä»¥ç»§æ‰¿å¤šä¸ªç±»ä¹ˆï¼Ÿæ¥å£å¯ä»¥ç»§æ‰¿å¤šä¸ªæ¥å£ä¹ˆï¼Ÿç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ä¹ˆï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚æ¥å£å¯ä»¥ç»§æ‰¿å¤šä¸ªæ¥å£ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eç»§æ‰¿å’Œèšåˆçš„åŒºåˆ«åœ¨å“ªï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eä¸€èˆ¬ï¼Œèƒ½ç”¨èšåˆå°±åˆ«ç”¨ç»§æ‰¿ã€‚\u003c/p\u003e\n\u003ch3 id=\"åå°„\"\u003e\u003ca href=\"#åå°„\" class=\"headerlink\" title=\"åå°„\"\u003e\u003c/a\u003eåå°„\u003c/h3\u003e\u003ch4 id=\"â­-åˆ›å»ºå®ä¾‹\"\u003e\u003ca href=\"#â­-åˆ›å»ºå®ä¾‹\" class=\"headerlink\" title=\"â­ åˆ›å»ºå®ä¾‹\"\u003e\u003c/a\u003eâ­ åˆ›å»ºå®ä¾‹\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eåå°„åˆ›å»ºå®ä¾‹æœ‰å‡ ç§æ–¹å¼ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eé€šè¿‡åå°„æ¥åˆ›å»ºå®ä¾‹å¯¹è±¡ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eç”¨ \u003ccode\u003eClass\u003c/code\u003e å¯¹è±¡çš„ \u003ccode\u003enewInstance\u003c/code\u003e æ–¹æ³•ã€‚\u003c/li\u003e\n\u003cli\u003eç”¨ \u003ccode\u003eConstructor\u003c/code\u003e å¯¹è±¡çš„ \u003ccode\u003enewInstance\u003c/code\u003e æ–¹æ³•ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"â­-åŠ è½½å®ä¾‹\"\u003e\u003ca href=\"#â­-åŠ è½½å®ä¾‹\" class=\"headerlink\" title=\"â­ åŠ è½½å®ä¾‹\"\u003e\u003c/a\u003eâ­ åŠ è½½å®ä¾‹\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eåŠ è½½å®ä¾‹æœ‰å‡ ç§æ–¹å¼ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eClass.forName(â€œclassNameâ€) å’Œ ClassLoader.laodClass(â€œclassNameâ€) æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eClass.forName(\u0026#34;className\u0026#34;)\u003c/code\u003e åŠ è½½çš„æ˜¯å·²ç»åˆå§‹åŒ–åˆ° JVM ä¸­çš„ç±»ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eClassLoader.loadClass(\u0026#34;className\u0026#34;)\u003c/code\u003e è£…è½½çš„æ˜¯è¿˜æ²¡æœ‰åˆå§‹åŒ–åˆ° JVM ä¸­çš„ç±»ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"â­â­-åŠ¨æ€ä»£ç†\"\u003e\u003ca href=\"#â­â­-åŠ¨æ€ä»£ç†\" class=\"headerlink\" title=\"â­â­ åŠ¨æ€ä»£ç†\"\u003e\u003c/a\u003eâ­â­ åŠ¨æ€ä»£ç†\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eåŠ¨æ€ä»£ç†æœ‰å‡ ç§å®ç°æ–¹å¼ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eJDK åŠ¨æ€ä»£ç†å’Œ CGLIB åŠ¨æ€ä»£ç†æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eï¼ˆ1ï¼‰JDK æ–¹å¼\u003c/p\u003e\n\u003cp\u003eä»£ç†ç±»ä¸å§”æ‰˜ç±»å®ç°åŒä¸€æ¥å£ï¼Œä¸»è¦æ˜¯é€šè¿‡ä»£ç†ç±»å®ç° \u003ccode\u003eInvocationHandler\u003c/code\u003e å¹¶é‡å†™ \u003ccode\u003einvoke\u003c/code\u003e æ–¹æ³•æ¥è¿›è¡ŒåŠ¨æ€ä»£ç†çš„ï¼Œåœ¨ \u003ccode\u003einvoke\u003c/code\u003e æ–¹æ³•ä¸­å°†å¯¹æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚\u003c/p\u003e\n\u003cp\u003eJDK åŠ¨æ€ä»£ç†ç‰¹ç‚¹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä¼˜ç‚¹ï¼šç›¸å¯¹äºé™æ€ä»£ç†æ¨¡å¼ï¼Œä¸éœ€è¦ç¡¬ç¼–ç æ¥å£ï¼Œä»£ç å¤ç”¨ç‡é«˜ã€‚\u003c/li\u003e\n\u003cli\u003eç¼ºç‚¹ï¼šå¼ºåˆ¶è¦æ±‚ä»£ç†ç±»å®ç° \u003ccode\u003eInvocationHandler\u003c/code\u003e æ¥å£ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eï¼ˆ2ï¼‰CGLIB\u003c/p\u003e\n\u003cp\u003eCGLIB åº•å±‚ï¼Œå…¶å®æ˜¯å€ŸåŠ©äº† ASM è¿™ä¸ªå¼ºå¤§çš„ Java å­—èŠ‚ç æ¡†æ¶å»è¿›è¡Œå­—èŠ‚ç å¢å¼ºæ“ä½œã€‚\u003c/p\u003e\n\u003cp\u003eCGLIB åŠ¨æ€ä»£ç†ç‰¹ç‚¹ï¼š\u003c/p\u003e\n\u003cp\u003eä¼˜ç‚¹ï¼šä½¿ç”¨å­—èŠ‚ç å¢å¼ºï¼Œæ¯” JDK åŠ¨æ€ä»£ç†æ–¹å¼æ€§èƒ½é«˜ã€‚å¯ä»¥åœ¨è¿è¡Œæ—¶å¯¹ç±»æˆ–è€…æ˜¯æ¥å£è¿›è¡Œå¢å¼ºæ“ä½œï¼Œä¸”å§”æ‰˜ç±»æ— éœ€å®ç°æ¥å£ã€‚\u003c/p\u003e\n\u003cp\u003eç¼ºç‚¹ï¼šä¸èƒ½å¯¹ \u003ccode\u003efinal\u003c/code\u003e ç±»ä»¥åŠ \u003ccode\u003efinal\u003c/code\u003e æ–¹æ³•è¿›è¡Œä»£ç†ã€‚\u003c/p\u003e\n\u003ch3 id=\"JDK8\"\u003e\u003ca href=\"#JDK8\" class=\"headerlink\" title=\"JDK8\"\u003e\u003c/a\u003eJDK8\u003c/h3\u003e\u003ch3 id=\"å…¶ä»–\"\u003e\u003ca href=\"#å…¶ä»–\" class=\"headerlink\" title=\"å…¶ä»–\"\u003e\u003c/a\u003eå…¶ä»–\u003c/h3\u003e\u003ch4 id=\"â­-hashcode\"\u003e\u003ca href=\"#â­-hashcode\" class=\"headerlink\" title=\"â­ hashcode\"\u003e\u003c/a\u003eâ­ hashcode\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eæœ‰\u003ccode\u003e==\u003c/code\u003eè¿ç®—ç¬¦äº†ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦ equals å•Šï¼Ÿ\u003c/p\u003e\n\u003cp\u003eè¯´ä¸€è¯´ä½ å¯¹ java.lang.Object å¯¹è±¡ä¸­ hashCode å’Œ equals æ–¹æ³•çš„ç†è§£ã€‚åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹éœ€\u003cbr/\u003eè¦é‡æ–°å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚\u003c/p\u003e\n\u003cp\u003eæœ‰æ²¡æœ‰å¯èƒ½ 2 ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡æœ‰ç›¸åŒçš„ hashcode\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eï¼ˆ1ï¼‰æœ‰\u003ccode\u003e==\u003c/code\u003eè¿ç®—ç¬¦äº†ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦ equals å•Šï¼Ÿ\u003c/p\u003e\n\u003cp\u003eequals ç­‰ä»·äº\u003ccode\u003e==\u003c/code\u003e,è€Œ\u003ccode\u003e==\u003c/code\u003eè¿ç®—ç¬¦æ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå³ä»–ä»¬çš„\u003cstrong\u003eåœ°å€æ˜¯å¦ç›¸ç­‰\u003c/strong\u003eã€‚è€Œè¦†å†™ equals æ›´å¤šçš„æ˜¯è¿½æ±‚ä¸¤ä¸ªå¯¹è±¡åœ¨\u003cstrong\u003eé€»è¾‘ä¸Šçš„ç›¸ç­‰\u003c/strong\u003eï¼Œä½ å¯ä»¥è¯´æ˜¯\u003cstrong\u003eå€¼ç›¸ç­‰\u003c/strong\u003eï¼Œä¹Ÿå¯è¯´æ˜¯\u003cstrong\u003eå†…å®¹ç›¸ç­‰\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eï¼ˆ2ï¼‰è¯´ä¸€è¯´ä½ å¯¹ java.lang.Object å¯¹è±¡ä¸­ hashCode å’Œ equals æ–¹æ³•çš„ç†è§£ã€‚åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹éœ€\u003cbr/\u003eè¦é‡æ–°å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚\u003c/p\u003e\n\u003cp\u003eåœ¨é›†åˆæŸ¥æ‰¾æ—¶ï¼Œhashcode èƒ½å¤§å¤§é™ä½å¯¹è±¡æ¯”è¾ƒæ¬¡æ•°ï¼Œæé«˜æŸ¥æ‰¾æ•ˆç‡ï¼\u003c/p\u003e\n\u003cp\u003eï¼ˆ3ï¼‰æœ‰æ²¡æœ‰å¯èƒ½ 2 ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡æœ‰ç›¸åŒçš„ hashcode\u003c/p\u003e\n\u003cp\u003eæœ‰å¯èƒ½ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå¦‚æœä¸¤ä¸ªå¯¹è±¡ equalsï¼ŒJava è¿è¡Œæ—¶ç¯å¢ƒä¼šè®¤ä¸ºä»–ä»¬çš„ hashcode ä¸€å®šç›¸ç­‰ã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœä¸¤ä¸ªå¯¹è±¡ä¸ equalsï¼Œä»–ä»¬çš„ hashcode æœ‰å¯èƒ½ç›¸ç­‰ã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœä¸¤ä¸ªå¯¹è±¡ hashcode ç›¸ç­‰ï¼Œä»–ä»¬ä¸ä¸€å®š equalsã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœä¸¤ä¸ªå¯¹è±¡ hashcode ä¸ç›¸ç­‰ï¼Œä»–ä»¬ä¸€å®šä¸ equalsã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"IO\"\u003e\u003ca href=\"#IO\" class=\"headerlink\" title=\"IO\"\u003e\u003c/a\u003eIO\u003c/h2\u003e\u003ch3 id=\"NIO\"\u003e\u003ca href=\"#NIO\" class=\"headerlink\" title=\"NIO\"\u003e\u003c/a\u003eNIO\u003c/h3\u003e\u003cblockquote\u003e\n\u003cp\u003eä»€ä¹ˆæ˜¯ NIOï¼Ÿ\u003c/p\u003e\n\u003cp\u003eNIO å’Œ BIOã€AIO æœ‰ä½•å·®åˆ«ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"åºåˆ—åŒ–\"\u003e\u003ca href=\"#åºåˆ—åŒ–\" class=\"headerlink\" title=\"åºåˆ—åŒ–\"\u003e\u003c/a\u003eåºåˆ—åŒ–\u003c/h3\u003e\u003ch4 id=\"â­-åºåˆ—åŒ–é—®é¢˜\"\u003e\u003ca href=\"#â­-åºåˆ—åŒ–é—®é¢˜\" class=\"headerlink\" title=\"â­ åºåˆ—åŒ–é—®é¢˜\"\u003e\u003c/a\u003eâ­ åºåˆ—åŒ–é—®é¢˜\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eåºåˆ—åŒ–ã€ååºåˆ—åŒ–æœ‰å“ªäº›é—®é¢˜ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eJava çš„åºåˆ—åŒ–èƒ½ä¿è¯å¯¹è±¡çŠ¶æ€çš„æŒä¹…ä¿å­˜ï¼Œä½†æ˜¯é‡åˆ°ä¸€äº›å¯¹è±¡ç»“æ„å¤æ‚çš„æƒ…å†µè¿˜æ˜¯éš¾ä»¥å¤„ç†ï¼Œè¿™é‡Œå½’çº³ä¸€ä¸‹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå½“çˆ¶ç±»ç»§æ‰¿ \u003ccode\u003eSerializable\u003c/code\u003e æ¥å£æ—¶ï¼Œæ‰€æœ‰å­ç±»éƒ½å¯ä»¥è¢«åºåˆ—åŒ–ã€‚\u003c/li\u003e\n\u003cli\u003eå­ç±»å®ç°äº† \u003ccode\u003eSerializable\u003c/code\u003e æ¥å£ï¼Œçˆ¶ç±»æ²¡æœ‰ï¼Œåˆ™çˆ¶ç±»çš„å±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–ï¼ˆä¸æŠ¥é”™ï¼Œæ•°æ®ä¸¢å¤±ï¼‰ï¼Œå­ç±»çš„å±æ€§ä»å¯ä»¥æ­£ç¡®åºåˆ—åŒ–ã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœåºåˆ—åŒ–çš„å±æ€§æ˜¯å¯¹è±¡ï¼Œåˆ™è¿™ä¸ªå¯¹è±¡ä¹Ÿå¿…é¡»å®ç° \u003ccode\u003eSerializable\u003c/code\u003e æ¥å£ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚\u003c/li\u003e\n\u003cli\u003eåœ¨ååºåˆ—åŒ–æ—¶ï¼Œå¦‚æœå¯¹è±¡çš„å±æ€§æœ‰ä¿®æ”¹æˆ–åˆ å‡ï¼Œåˆ™ä¿®æ”¹çš„éƒ¨åˆ†å±æ€§ä¼šä¸¢å¤±ï¼Œä½†ä¸ä¼šæŠ¥é”™ã€‚\u003c/li\u003e\n\u003cli\u003eåœ¨ååºåˆ—åŒ–æ—¶ï¼Œå¦‚æœ \u003ccode\u003eserialVersionUID\u003c/code\u003e è¢«ä¿®æ”¹ï¼Œåˆ™ååºåˆ—åŒ–æ—¶ä¼šå¤±è´¥ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å®¹å™¨\"\u003e\u003ca href=\"#å®¹å™¨\" class=\"headerlink\" title=\"å®¹å™¨\"\u003e\u003c/a\u003eå®¹å™¨\u003c/h2\u003e\u003ch3 id=\"List\"\u003e\u003ca href=\"#List\" class=\"headerlink\" title=\"List\"\u003e\u003c/a\u003eList\u003c/h3\u003e\u003ch4 id=\"ArrayList-å’Œ-LinkedList-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"\u003e\u003ca href=\"#ArrayList-å’Œ-LinkedList-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"ArrayList å’Œ LinkedList æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"\u003e\u003c/a\u003eArrayList å’Œ LinkedList æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\u003c/h4\u003e\u003cp\u003eArrayList æ˜¯æ•°ç»„é“¾è¡¨ï¼Œè®¿é—®æ•ˆç‡æ›´é«˜ã€‚\u003c/p\u003e\n\u003cp\u003eLinkedList æ˜¯åŒé“¾è¡¨ï¼Œæ•°æ®æœ‰åºå­˜å‚¨ã€‚\u003c/p\u003e\n\u003ch3 id=\"Map\"\u003e\u003ca href=\"#Map\" class=\"headerlink\" title=\"Map\"\u003e\u003c/a\u003eMap\u003c/h3\u003e\u003cp\u003eè¯·æè¿° HashMap çš„å®ç°åŸç†ï¼Ÿ\u003c/p\u003e\n\u003ch2 id=\"å¹¶å‘\"\u003e\u003ca href=\"#å¹¶å‘\" class=\"headerlink\" title=\"å¹¶å‘\"\u003e\u003c/a\u003eå¹¶å‘\u003c/h2\u003e\u003ch3 id=\"å¹¶å‘ç®€ä»‹\"\u003e\u003ca href=\"#å¹¶å‘ç®€ä»‹\" class=\"headerlink\" title=\"å¹¶å‘ç®€ä»‹\"\u003e\u003c/a\u003eå¹¶å‘ç®€ä»‹\u003c/h3\u003e\u003ch4 id=\"ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿè¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ï¼Ÿ\"\u003e\u003ca href=\"#ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿè¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿè¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ï¼Ÿ\"\u003e\u003c/a\u003eä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿè¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ï¼Ÿ\u003c/h4\u003e\u003cul\u003e\n\u003cli\u003eä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿ\u003cul\u003e\n\u003cli\u003eç®€è¨€ä¹‹ï¼Œè¿›ç¨‹å¯è§†ä¸ºä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºã€‚\u003c/li\u003e\n\u003cli\u003eè¿›ç¨‹æ˜¯å…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºå…³äºæŸä¸ªæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨ã€‚è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿ\u003cul\u003e\n\u003cli\u003eçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œè°ƒåº¦çš„åŸºæœ¬å•ä½ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eè¿›ç¨‹ vs. çº¿ç¨‹\u003cul\u003e\n\u003cli\u003eä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚\u003c/li\u003e\n\u003cli\u003eçº¿ç¨‹æ¯”è¿›ç¨‹åˆ’åˆ†æ›´ç»†ï¼Œæ‰€ä»¥æ‰§è¡Œå¼€é”€æ›´å°ï¼Œå¹¶å‘æ€§æ›´é«˜ã€‚\u003c/li\u003e\n\u003cli\u003eè¿›ç¨‹æ˜¯ä¸€ä¸ªå®ä½“ï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„èµ„æºï¼›è€ŒåŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹çš„èµ„æºã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"å¹¶å‘ï¼ˆå¤šçº¿ç¨‹ï¼‰ç¼–ç¨‹çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ\"\u003e\u003ca href=\"#å¹¶å‘ï¼ˆå¤šçº¿ç¨‹ï¼‰ç¼–ç¨‹çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"å¹¶å‘ï¼ˆå¤šçº¿ç¨‹ï¼‰ç¼–ç¨‹çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ\"\u003e\u003c/a\u003eå¹¶å‘ï¼ˆå¤šçº¿ç¨‹ï¼‰ç¼–ç¨‹çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ\u003c/h4\u003e\u003cul\u003e\n\u003cli\u003eæ›´æœ‰æ•ˆç‡çš„åˆ©ç”¨å¤šå¤„ç†å™¨æ ¸å¿ƒ\u003c/li\u003e\n\u003cli\u003eæ›´å¿«çš„å“åº”æ—¶é—´\u003c/li\u003e\n\u003cli\u003eæ›´å¥½çš„ç¼–ç¨‹æ¨¡å‹\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"å¹¶å‘ä¸€å®šæ¯”ä¸²è¡Œæ›´å¿«å—ï¼Ÿ\"\u003e\u003ca href=\"#å¹¶å‘ä¸€å®šæ¯”ä¸²è¡Œæ›´å¿«å—ï¼Ÿ\" class=\"headerlink\" title=\"å¹¶å‘ä¸€å®šæ¯”ä¸²è¡Œæ›´å¿«å—ï¼Ÿ\"\u003e\u003c/a\u003eå¹¶å‘ä¸€å®šæ¯”ä¸²è¡Œæ›´å¿«å—ï¼Ÿ\u003c/h4\u003e\u003cp\u003eç­”ï¼šå¦ã€‚\u003c/p\u003e\n\u003cp\u003eè¦ç‚¹ï¼š\u003cstrong\u003eåˆ›å»ºçº¿ç¨‹å’Œçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æœ‰ä¸€å®šå¼€é”€\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eè¯´æ˜ï¼šå³ä½¿æ˜¯å•æ ¸å¤„ç†å™¨ä¹Ÿæ”¯æŒå¤šçº¿ç¨‹ã€‚CPU é€šè¿‡ç»™æ¯ä¸ªçº¿ç¨‹åˆ†é…æ—¶é—´åˆ‡ç‰‡çš„ç®—æ³•æ¥å¾ªç¯æ‰§è¡Œä»»åŠ¡ï¼Œå½“å‰ä»»åŠ¡æ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡åä¼šåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚ä½†æ˜¯ï¼Œåœ¨åˆ‡æ¢å‰ä¼šä¿æŒä¸Šä¸€ä¸ªä»»åŠ¡çš„çŠ¶æ€ï¼Œä»¥ä¾¿ä¸‹æ¬¡åˆ‡æ¢å›è¿™ä¸ªä»»åŠ¡æ—¶ï¼Œå¯ä»¥å†åŠ è½½è¿™ä¸ªä»»åŠ¡çš„çŠ¶æ€ã€‚æ‰€ä»¥\u003cstrong\u003eä»»åŠ¡ä»ä¿å­˜åˆ°å†åŠ è½½çš„è¿‡ç¨‹å°±æ˜¯ä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eå¼•ç”³\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå¦‚ä½•å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ\u003cul\u003e\n\u003cli\u003eå°½é‡å°‘ç”¨é”\u003c/li\u003e\n\u003cli\u003eCAS ç®—æ³•\u003c/li\u003e\n\u003cli\u003eçº¿ç¨‹æ•°è¦åˆç†\u003c/li\u003e\n\u003cli\u003eåç¨‹ï¼šåœ¨å•çº¿ç¨‹ä¸­å®ç°å¤šä»»åŠ¡è°ƒåº¦ï¼Œå¹¶åœ¨å•çº¿ç¨‹ä¸­ç»´æŒå¤šä¸ªä»»åŠ¡çš„åˆ‡æ¢\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"å¦‚ä½•è®©æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æš‚åœä¸€æ®µæ—¶é—´ï¼Ÿ\"\u003e\u003ca href=\"#å¦‚ä½•è®©æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æš‚åœä¸€æ®µæ—¶é—´ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•è®©æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æš‚åœä¸€æ®µæ—¶é—´ï¼Ÿ\"\u003e\u003c/a\u003eå¦‚ä½•è®©æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æš‚åœä¸€æ®µæ—¶é—´ï¼Ÿ\u003c/h4\u003e\u003cp\u003eæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ \u003ccode\u003eThread\u003c/code\u003e ç±»çš„ Sleep() æ–¹æ³•è®©çº¿ç¨‹æš‚åœä¸€æ®µæ—¶é—´ã€‚\u003c/p\u003e\n\u003cp\u003eéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™å¹¶ä¸ä¼šè®©çº¿ç¨‹ç»ˆæ­¢ï¼Œä¸€æ—¦ä»ä¼‘çœ ä¸­å”¤é†’çº¿ç¨‹ï¼Œçº¿ç¨‹çš„çŠ¶æ€å°†ä¼šè¢«æ”¹å˜ä¸º Runnableï¼Œå¹¶ä¸”æ ¹æ®çº¿ç¨‹è°ƒåº¦ï¼Œå®ƒå°†å¾—åˆ°æ‰§è¡Œã€‚\u003c/p\u003e\n\u003ch4 id=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹è°ƒåº¦å™¨-Thread-Scheduler-å’Œæ—¶é—´åˆ†ç‰‡-Time-Slicing-ï¼Ÿ\"\u003e\u003ca href=\"#ä»€ä¹ˆæ˜¯çº¿ç¨‹è°ƒåº¦å™¨-Thread-Scheduler-å’Œæ—¶é—´åˆ†ç‰‡-Time-Slicing-ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹è°ƒåº¦å™¨(Thread Scheduler)å’Œæ—¶é—´åˆ†ç‰‡(Time Slicing)ï¼Ÿ\"\u003e\u003c/a\u003eä»€ä¹ˆæ˜¯çº¿ç¨‹è°ƒåº¦å™¨(Thread Scheduler)å’Œæ—¶é—´åˆ†ç‰‡(Time Slicing)ï¼Ÿ\u003c/h4\u003e\u003cp\u003eçº¿ç¨‹è°ƒåº¦å™¨æ˜¯ä¸€ä¸ªæ“ä½œç³»ç»ŸæœåŠ¡ï¼Œå®ƒè´Ÿè´£ä¸º \u003ccode\u003eRunnable\u003c/code\u003e çŠ¶æ€çš„çº¿ç¨‹åˆ†é… CPU æ—¶é—´ã€‚ä¸€æ—¦æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¹¶å¯åŠ¨å®ƒï¼Œå®ƒçš„æ‰§è¡Œä¾¿ä¾èµ–äºçº¿ç¨‹è°ƒåº¦å™¨çš„å®ç°ã€‚\u003c/p\u003e\n\u003cp\u003eæ—¶é—´åˆ†ç‰‡æ˜¯æŒ‡å°†å¯ç”¨çš„ CPU æ—¶é—´åˆ†é…ç»™å¯ç”¨çš„ \u003ccode\u003eRunnable\u003c/code\u003e çº¿ç¨‹çš„è¿‡ç¨‹ã€‚\u003c/p\u003e\n\u003cp\u003eåˆ†é… CPU æ—¶é—´å¯ä»¥åŸºäºçº¿ç¨‹ä¼˜å…ˆçº§æˆ–è€…çº¿ç¨‹ç­‰å¾…çš„æ—¶é—´ã€‚çº¿ç¨‹è°ƒåº¦å¹¶ä¸å—åˆ° Java è™šæ‹Ÿæœºæ§åˆ¶ï¼Œæ‰€ä»¥ç”±åº”ç”¨ç¨‹åºæ¥æ§åˆ¶å®ƒæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼ˆä¹Ÿå°±æ˜¯è¯´ä¸è¦è®©ä½ çš„ç¨‹åºä¾èµ–äºçº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼‰ã€‚\u003c/p\u003e\n\u003ch4 id=\"åœ¨å¤šçº¿ç¨‹ä¸­ï¼Œä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢-context-switching-ï¼Ÿ\"\u003e\u003ca href=\"#åœ¨å¤šçº¿ç¨‹ä¸­ï¼Œä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢-context-switching-ï¼Ÿ\" class=\"headerlink\" title=\"åœ¨å¤šçº¿ç¨‹ä¸­ï¼Œä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢(context-switching)ï¼Ÿ\"\u003e\u003c/a\u003eåœ¨å¤šçº¿ç¨‹ä¸­ï¼Œä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢(context-switching)ï¼Ÿ\u003c/h4\u003e\u003cp\u003eä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯å­˜å‚¨å’Œæ¢å¤ CPU çŠ¶æ€çš„è¿‡ç¨‹ï¼Œå®ƒä½¿å¾—çº¿ç¨‹æ‰§è¡Œèƒ½å¤Ÿä»ä¸­æ–­ç‚¹æ¢å¤æ‰§è¡Œã€‚ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿå’Œå¤šçº¿ç¨‹ç¯å¢ƒçš„åŸºæœ¬ç‰¹å¾ã€‚\u003c/p\u003e\n\u003ch4 id=\"å¦‚ä½•ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Ÿ\"\u003e\u003ca href=\"#å¦‚ä½•ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Ÿ\"\u003e\u003c/a\u003eå¦‚ä½•ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Ÿ\u003c/h4\u003e\u003cul\u003e\n\u003cli\u003eåŸå­ç±»(atomic concurrent classes)\u003c/li\u003e\n\u003cli\u003eé”\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003evolatile\u003c/code\u003e å…³é”®å­—\u003c/li\u003e\n\u003cli\u003eä¸å˜ç±»å’Œçº¿ç¨‹å®‰å…¨ç±»\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"ä»€ä¹ˆæ˜¯æ­»é”-Deadlock-ï¼Ÿå¦‚ä½•åˆ†æå’Œé¿å…æ­»é”ï¼Ÿ\"\u003e\u003ca href=\"#ä»€ä¹ˆæ˜¯æ­»é”-Deadlock-ï¼Ÿå¦‚ä½•åˆ†æå’Œé¿å…æ­»é”ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯æ­»é”(Deadlock)ï¼Ÿå¦‚ä½•åˆ†æå’Œé¿å…æ­»é”ï¼Ÿ\"\u003e\u003c/a\u003eä»€ä¹ˆæ˜¯æ­»é”(Deadlock)ï¼Ÿå¦‚ä½•åˆ†æå’Œé¿å…æ­»é”ï¼Ÿ\u003c/h4\u003e\u003cp\u003eæ­»é”æ˜¯æŒ‡ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹æ°¸è¿œç›¸äº’é˜»å¡çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µäº§ç”Ÿè‡³å°‘éœ€è¦ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹å’Œä¸¤ä¸ªä»¥ä¸Šçš„èµ„æºã€‚\u003c/p\u003e\n\u003cp\u003eåˆ†ææ­»é”ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹ Java åº”ç”¨ç¨‹åºçš„çº¿ç¨‹è½¬å‚¨ã€‚æˆ‘ä»¬éœ€è¦æ‰¾å‡ºé‚£äº›çŠ¶æ€ä¸º BLOCKED çš„çº¿ç¨‹å’Œä»–ä»¬ç­‰å¾…çš„èµ„æºã€‚æ¯ä¸ªèµ„æºéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ idï¼Œç”¨è¿™ä¸ª id æˆ‘ä»¬å¯ä»¥æ‰¾å‡ºå“ªäº›çº¿ç¨‹å·²ç»æ‹¥æœ‰äº†å®ƒçš„å¯¹è±¡é”ã€‚\u003c/p\u003e\n\u003cp\u003eé¿å…åµŒå¥—é”ï¼Œåªåœ¨éœ€è¦çš„åœ°æ–¹ä½¿ç”¨é”å’Œé¿å…æ— é™æœŸç­‰å¾…æ˜¯é¿å…æ­»é”çš„é€šå¸¸åŠæ³•ã€‚\u003c/p\u003e\n\u003ch3 id=\"çº¿ç¨‹åŸºç¡€\"\u003e\u003ca href=\"#çº¿ç¨‹åŸºç¡€\" class=\"headerlink\" title=\"çº¿ç¨‹åŸºç¡€\"\u003e\u003c/a\u003eçº¿ç¨‹åŸºç¡€\u003c/h3\u003e\u003ch4 id=\"Java-çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸä¸­æœ‰å“ªäº›çŠ¶æ€ï¼Ÿå„çŠ¶æ€ä¹‹é—´å¦‚ä½•åˆ‡æ¢ï¼Ÿ\"\u003e\u003ca href=\"#Java-çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸä¸­æœ‰å“ªäº›çŠ¶æ€ï¼Ÿå„çŠ¶æ€ä¹‹é—´å¦‚ä½•åˆ‡æ¢ï¼Ÿ\" class=\"headerlink\" title=\"Java çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸä¸­æœ‰å“ªäº›çŠ¶æ€ï¼Ÿå„çŠ¶æ€ä¹‹é—´å¦‚ä½•åˆ‡æ¢ï¼Ÿ\"\u003e\u003c/a\u003eJava çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸä¸­æœ‰å“ªäº›çŠ¶æ€ï¼Ÿå„çŠ¶æ€ä¹‹é—´å¦‚ä½•åˆ‡æ¢ï¼Ÿ\u003c/h4\u003e\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/cs/java/javacore/concurrent/java-thread_1.png\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ejava.lang.Thread.State\u003c/code\u003e ä¸­å®šä¹‰äº† \u003cstrong\u003e6\u003c/strong\u003e ç§ä¸åŒçš„çº¿ç¨‹çŠ¶æ€ï¼Œåœ¨ç»™å®šçš„ä¸€ä¸ªæ—¶åˆ»ï¼Œçº¿ç¨‹åªèƒ½å¤„äºå…¶ä¸­çš„ä¸€ä¸ªçŠ¶æ€ã€‚\u003c/p\u003e\n\u003cp\u003eä»¥ä¸‹æ˜¯å„çŠ¶æ€çš„è¯´æ˜ï¼Œä»¥åŠçŠ¶æ€é—´çš„è”ç³»ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eå¼€å§‹ï¼ˆNewï¼‰\u003c/strong\u003e - è¿˜æ²¡æœ‰è°ƒç”¨ \u003ccode\u003estart()\u003c/code\u003e æ–¹æ³•çš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå¯è¿è¡Œï¼ˆRunnableï¼‰\u003c/strong\u003e - å·²ç»è°ƒç”¨äº† \u003ccode\u003estart()\u003c/code\u003e æ–¹æ³•çš„çº¿ç¨‹çŠ¶æ€ã€‚æ­¤çŠ¶æ€æ„å‘³ç€ï¼Œçº¿ç¨‹å·²ç»å‡†å¤‡å¥½äº†ï¼Œä¸€æ—¦è¢«çº¿ç¨‹è°ƒåº¦å™¨åˆ†é…äº† CPU æ—¶é—´ç‰‡ï¼Œå°±å¯ä»¥è¿è¡Œçº¿ç¨‹ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eé˜»å¡ï¼ˆBlockedï¼‰\u003c/strong\u003e - é˜»å¡çŠ¶æ€ã€‚çº¿ç¨‹é˜»å¡çš„çº¿ç¨‹çŠ¶æ€ç­‰å¾…ç›‘è§†å™¨é”å®šã€‚å¤„äºé˜»å¡çŠ¶æ€çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…ç›‘è§†å™¨é”å®šï¼Œä»¥ä¾¿åœ¨è°ƒç”¨ \u003ccode\u003eObject.wait()\u003c/code\u003e ä¹‹åè¾“å…¥åŒæ­¥å—/æ–¹æ³•æˆ–é‡æ–°è¾“å…¥åŒæ­¥å—/æ–¹æ³•ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç­‰å¾…ï¼ˆWaitingï¼‰\u003c/strong\u003e - ç­‰å¾…çŠ¶æ€ã€‚ä¸€ä¸ªçº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œæ˜¯ç”±äºæ‰§è¡Œäº† 3 ä¸ªæ–¹æ³•ä¸­çš„ä»»æ„æ–¹æ³•ï¼š\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eObject.wait()\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eThread.join()\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eLockSupport.park()\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå®šæ—¶ç­‰å¾…ï¼ˆTimed waitingï¼‰\u003c/strong\u003e - ç­‰å¾…æŒ‡å®šæ—¶é—´çš„çŠ¶æ€ã€‚ä¸€ä¸ªçº¿ç¨‹å¤„äºå®šæ—¶ç­‰å¾…çŠ¶æ€ï¼Œæ˜¯ç”±äºæ‰§è¡Œäº†ä»¥ä¸‹æ–¹æ³•ä¸­çš„ä»»æ„æ–¹æ³•ï¼š\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eThread.sleep(sleeptime)\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eObject.wait(timeout)\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eThread.join(timeout)\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eLockSupport.parkNanos(timeout)\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eLockSupport.parkUntil(timeout)\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç»ˆæ­¢(Terminated)\u003c/strong\u003e - çº¿ç¨‹ \u003ccode\u003erun()\u003c/code\u003e æ–¹æ³•æ‰§è¡Œç»“æŸï¼Œæˆ–è€…å› å¼‚å¸¸é€€å‡ºäº† \u003ccode\u003erun()\u003c/code\u003e æ–¹æ³•ï¼Œåˆ™è¯¥çº¿ç¨‹ç»“æŸç”Ÿå‘½å‘¨æœŸã€‚æ­»äº¡çš„çº¿ç¨‹ä¸å¯å†æ¬¡å¤ç”Ÿã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ å‚è€ƒé˜…è¯»ï¼š\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.w3resource.com/java-tutorial/java-threadclass-methods-and-threadstates.php\"\u003eJava\u003ccode\u003eThread\u003c/code\u003e Methods and \u003ccode\u003eThread\u003c/code\u003e States\u003c/a\u003e\u003cbr/\u003eğŸ‘‰ å‚è€ƒé˜…è¯»ï¼š\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://blog.csdn.net/pange1991/article/details/53860651\"\u003eJava çº¿ç¨‹çš„ 5 ç§çŠ¶æ€åŠåˆ‡æ¢(é€å½»è®²è§£)\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"åˆ›å»ºçº¿ç¨‹æœ‰å“ªäº›æ–¹å¼ï¼Ÿè¿™äº›æ–¹æ³•å„è‡ªåˆ©å¼Šæ˜¯ä»€ä¹ˆï¼Ÿ\"\u003e\u003ca href=\"#åˆ›å»ºçº¿ç¨‹æœ‰å“ªäº›æ–¹å¼ï¼Ÿè¿™äº›æ–¹æ³•å„è‡ªåˆ©å¼Šæ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"åˆ›å»ºçº¿ç¨‹æœ‰å“ªäº›æ–¹å¼ï¼Ÿè¿™äº›æ–¹æ³•å„è‡ªåˆ©å¼Šæ˜¯ä»€ä¹ˆï¼Ÿ\"\u003e\u003c/a\u003eåˆ›å»ºçº¿ç¨‹æœ‰å“ªäº›æ–¹å¼ï¼Ÿè¿™äº›æ–¹æ³•å„è‡ªåˆ©å¼Šæ˜¯ä»€ä¹ˆï¼Ÿ\u003c/h4\u003e\u003cp\u003eåˆ›å»ºçº¿ç¨‹ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼ï¼š\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e1. ç»§æ‰¿ \u003ccode\u003eThread\u003c/code\u003e ç±»\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå®šä¹‰ \u003ccode\u003eThread\u003c/code\u003e ç±»çš„å­ç±»ï¼Œå¹¶é‡å†™è¯¥ç±»çš„ \u003ccode\u003erun()\u003c/code\u003e æ–¹æ³•ï¼Œè¯¥ \u003ccode\u003erun()\u003c/code\u003e æ–¹æ³•çš„æ–¹æ³•ä½“å°±ä»£è¡¨äº†çº¿ç¨‹è¦å®Œæˆçš„ä»»åŠ¡ã€‚å› æ­¤æŠŠ \u003ccode\u003erun()\u003c/code\u003e æ–¹æ³•ç§°ä¸ºæ‰§è¡Œä½“ã€‚\u003c/li\u003e\n\u003cli\u003eåˆ›å»º \u003ccode\u003eThread\u003c/code\u003e å­ç±»çš„å®ä¾‹ï¼Œå³åˆ›å»ºäº†çº¿ç¨‹å¯¹è±¡ã€‚\u003c/li\u003e\n\u003cli\u003eè°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„ \u003ccode\u003estart()\u003c/code\u003e æ–¹æ³•æ¥å¯åŠ¨è¯¥çº¿ç¨‹ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003e2. å®ç° \u003ccode\u003eRunnable\u003c/code\u003e æ¥å£\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå®šä¹‰ \u003ccode\u003eRunnable\u003c/code\u003e æ¥å£çš„å®ç°ç±»ï¼Œå¹¶é‡å†™è¯¥æ¥å£çš„ \u003ccode\u003erun()\u003c/code\u003e æ–¹æ³•ï¼Œè¯¥ \u003ccode\u003erun()\u003c/code\u003e æ–¹æ³•çš„æ–¹æ³•ä½“åŒæ ·æ˜¯è¯¥çº¿ç¨‹çš„çº¿ç¨‹æ‰§è¡Œä½“ã€‚\u003c/li\u003e\n\u003cli\u003eåˆ›å»º \u003ccode\u003eRunnable\u003c/code\u003e å®ç°ç±»çš„å®ä¾‹ï¼Œå¹¶ä»¥æ­¤å®ä¾‹ä½œä¸º \u003ccode\u003eThread\u003c/code\u003e å¯¹è±¡ï¼Œè¯¥ \u003ccode\u003eThread\u003c/code\u003e å¯¹è±¡æ‰æ˜¯çœŸæ­£çš„çº¿ç¨‹å¯¹è±¡ã€‚\u003c/li\u003e\n\u003cli\u003eè°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„ start() æ–¹æ³•æ¥å¯åŠ¨è¯¥çº¿ç¨‹ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003e3. é€šè¿‡ \u003ccode\u003eCallable\u003c/code\u003e æ¥å£å’Œ \u003ccode\u003eFuture\u003c/code\u003e æ¥å£\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåˆ›å»º \u003ccode\u003eCallable\u003c/code\u003e æ¥å£çš„å®ç°ç±»ï¼Œå¹¶å®ç° \u003ccode\u003ecall()\u003c/code\u003e æ–¹æ³•ï¼Œè¯¥ \u003ccode\u003ecall()\u003c/code\u003e æ–¹æ³•å°†ä½œä¸ºçº¿ç¨‹æ‰§è¡Œä½“ï¼Œå¹¶ä¸”æœ‰è¿”å›å€¼ã€‚\u003c/li\u003e\n\u003cli\u003eåˆ›å»º \u003ccode\u003eCallable\u003c/code\u003e å®ç°ç±»çš„å®ä¾‹ï¼Œä½¿ç”¨ \u003ccode\u003eFutureTask\u003c/code\u003e ç±»æ¥åŒ…è£… \u003ccode\u003eCallable\u003c/code\u003e å¯¹è±¡ï¼Œè¯¥ \u003ccode\u003eFutureTask\u003c/code\u003e å¯¹è±¡å°è£…äº†è¯¥ \u003ccode\u003eCallable\u003c/code\u003e å¯¹è±¡çš„ \u003ccode\u003ecall()\u003c/code\u003e æ–¹æ³•çš„è¿”å›å€¼ã€‚\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨ \u003ccode\u003eFutureTask\u003c/code\u003e å¯¹è±¡ä½œä¸º \u003ccode\u003eThread\u003c/code\u003e å¯¹è±¡çš„ target åˆ›å»ºå¹¶å¯åŠ¨æ–°çº¿ç¨‹ã€‚\u003c/li\u003e\n\u003cli\u003eè°ƒç”¨ \u003ccode\u003eFutureTask\u003c/code\u003e å¯¹è±¡çš„ \u003ccode\u003eget()\u003c/code\u003e æ–¹æ³•æ¥è·å¾—å­çº¿ç¨‹æ‰§è¡Œç»“æŸåçš„è¿”å›å€¼\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä¸‰ç§åˆ›å»ºçº¿ç¨‹æ–¹å¼å¯¹æ¯”\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå®ç° \u003ccode\u003eRunnable\u003c/code\u003e æ¥å£ä¼˜äºç»§æ‰¿ \u003ccode\u003eThread\u003c/code\u003e ç±»ï¼Œå› ä¸ºæ ¹æ®å¼€æ”¾å°é—­åŸåˆ™â€”â€”å®ç°æ¥å£æ›´ä¾¿äºæ‰©å±•ï¼›\u003c/li\u003e\n\u003cli\u003eå®ç° \u003ccode\u003eRunnable\u003c/code\u003e æ¥å£çš„çº¿ç¨‹æ²¡æœ‰è¿”å›å€¼ï¼›è€Œä½¿ç”¨ \u003ccode\u003eCallable\u003c/code\u003e / \u003ccode\u003eFuture\u003c/code\u003e æ–¹å¼å¯ä»¥è®©çº¿ç¨‹æœ‰è¿”å›å€¼ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ å‚è€ƒé˜…è¯»ï¼š\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://blog.csdn.net/longshengguoji/article/details/41126119\"\u003eJava åˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼åŠå…¶å¯¹æ¯”\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"ä»€ä¹ˆæ˜¯-Callable-å’Œ-Futureï¼Ÿä»€ä¹ˆæ˜¯-FutureTaskï¼Ÿ\"\u003e\u003ca href=\"#ä»€ä¹ˆæ˜¯-Callable-å’Œ-Futureï¼Ÿä»€ä¹ˆæ˜¯-FutureTaskï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ Callable å’Œ Futureï¼Ÿä»€ä¹ˆæ˜¯ FutureTaskï¼Ÿ\"\u003e\u003c/a\u003eä»€ä¹ˆæ˜¯ \u003ccode\u003eCallable\u003c/code\u003e å’Œ \u003ccode\u003eFuture\u003c/code\u003eï¼Ÿä»€ä¹ˆæ˜¯ \u003ccode\u003eFutureTask\u003c/code\u003eï¼Ÿ\u003c/h4\u003e\u003cp\u003e\u003cstrong\u003eä»€ä¹ˆæ˜¯ \u003ccode\u003eCallable\u003c/code\u003e å’Œ \u003ccode\u003eFuture\u003c/code\u003eï¼Ÿ\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eJava 5 åœ¨ concurrency åŒ…ä¸­å¼•å…¥äº† \u003ccode\u003eCallable\u003c/code\u003e æ¥å£ï¼Œå®ƒå’Œ \u003ccode\u003eRunnable\u003c/code\u003e æ¥å£å¾ˆç›¸ä¼¼ï¼Œä½†å®ƒå¯ä»¥è¿”å›ä¸€ä¸ªå¯¹è±¡æˆ–è€…æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eCallable\u003c/code\u003e æ¥å£ä½¿ç”¨æ³›å‹å»å®šä¹‰å®ƒçš„è¿”å›ç±»å‹ã€‚\u003ccode\u003eExecutors\u003c/code\u003e ç±»æä¾›äº†ä¸€äº›æœ‰ç”¨çš„æ–¹æ³•å»åœ¨çº¿ç¨‹æ± ä¸­æ‰§è¡Œ \u003ccode\u003eCallable\u003c/code\u003e å†…çš„ä»»åŠ¡ã€‚ç”±äº \u003ccode\u003eCallable\u003c/code\u003e ä»»åŠ¡æ˜¯å¹¶è¡Œçš„ï¼Œæˆ‘ä»¬å¿…é¡»ç­‰å¾…å®ƒè¿”å›çš„ç»“æœã€‚\u003ccode\u003eFuture\u003c/code\u003e å¯¹è±¡ä¸ºæˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚åœ¨çº¿ç¨‹æ± æäº¤ \u003ccode\u003eCallable\u003c/code\u003e ä»»åŠ¡åè¿”å›äº†ä¸€ä¸ª \u003ccode\u003eFuture\u003c/code\u003e å¯¹è±¡ï¼Œä½¿ç”¨å®ƒæˆ‘ä»¬å¯ä»¥çŸ¥é“ \u003ccode\u003eCallable\u003c/code\u003e ä»»åŠ¡çš„çŠ¶æ€å’Œå¾—åˆ° \u003ccode\u003eCallable\u003c/code\u003e è¿”å›çš„æ‰§è¡Œç»“æœã€‚\u003ccode\u003eFuture\u003c/code\u003e æä¾›äº† \u003ccode\u003eget()\u003c/code\u003e æ–¹æ³•è®©æˆ‘ä»¬å¯ä»¥ç­‰å¾… \u003ccode\u003eCallable\u003c/code\u003e ç»“æŸå¹¶è·å–å®ƒçš„æ‰§è¡Œç»“æœã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eä»€ä¹ˆæ˜¯ \u003ccode\u003eFutureTask\u003c/code\u003eï¼Ÿ\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eFutureTask\u003c/code\u003e æ˜¯ \u003ccode\u003eFuture\u003c/code\u003e çš„ä¸€ä¸ªåŸºç¡€å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒåŒ \u003ccode\u003eExecutors\u003c/code\u003e ä½¿ç”¨å¤„ç†å¼‚æ­¥ä»»åŠ¡ã€‚é€šå¸¸æˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨ \u003ccode\u003eFutureTask\u003c/code\u003e ç±»ï¼Œå•å½“æˆ‘ä»¬æ‰“ç®—é‡å†™ \u003ccode\u003eFuture\u003c/code\u003e æ¥å£çš„ä¸€äº›æ–¹æ³•å¹¶ä¿æŒåŸæ¥åŸºç¡€çš„å®ç°æ˜¯ï¼Œå®ƒå°±å˜å¾—éå¸¸æœ‰ç”¨ã€‚æˆ‘ä»¬å¯ä»¥ä»…ä»…ç»§æ‰¿äºå®ƒå¹¶é‡å†™æˆ‘ä»¬éœ€è¦çš„æ–¹æ³•ã€‚é˜…è¯» Java \u003ccode\u003eFutureTask\u003c/code\u003e ä¾‹å­ï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨å®ƒã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ å‚è€ƒé˜…è¯»ï¼š\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.cnblogs.com/dolphin0520/p/3949310.html\"\u003eJava å¹¶å‘ç¼–ç¨‹ï¼šCallableã€Future å’Œ FutureTask\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"start-å’Œ-run-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¯ä»¥ç›´æ¥è°ƒç”¨-Thread-ç±»çš„-run-æ–¹æ³•ä¹ˆï¼Ÿ\"\u003e\u003ca href=\"#start-å’Œ-run-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¯ä»¥ç›´æ¥è°ƒç”¨-Thread-ç±»çš„-run-æ–¹æ³•ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"start() å’Œ run() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¯ä»¥ç›´æ¥è°ƒç”¨ Thread ç±»çš„ run() æ–¹æ³•ä¹ˆï¼Ÿ\"\u003e\u003c/a\u003e\u003ccode\u003estart()\u003c/code\u003e å’Œ \u003ccode\u003erun()\u003c/code\u003e æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¯ä»¥ç›´æ¥è°ƒç”¨ \u003ccode\u003eThread\u003c/code\u003e ç±»çš„ \u003ccode\u003erun()\u003c/code\u003e æ–¹æ³•ä¹ˆï¼Ÿ\u003c/h4\u003e\u003cul\u003e\n\u003cli\u003e\u003ccode\u003erun()\u003c/code\u003e æ–¹æ³•æ˜¯çº¿ç¨‹çš„æ‰§è¡Œä½“ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003estart()\u003c/code\u003e æ–¹æ³•è´Ÿè´£å¯åŠ¨çº¿ç¨‹ï¼Œç„¶å JVM ä¼šè®©è¿™ä¸ªçº¿ç¨‹å»æ‰§è¡Œ \u003ccode\u003erun()\u003c/code\u003e æ–¹æ³•ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eå¯ä»¥ç›´æ¥è°ƒç”¨ \u003ccode\u003eThread\u003c/code\u003e ç±»çš„ \u003ccode\u003erun()\u003c/code\u003e æ–¹æ³•ä¹ˆï¼Ÿ\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå¯ä»¥ã€‚ä½†æ˜¯å¦‚æœç›´æ¥è°ƒç”¨ \u003ccode\u003eThread\u003c/code\u003e çš„ \u003ccode\u003erun()\u003c/code\u003e æ–¹æ³•ï¼Œå®ƒçš„è¡Œä¸ºå°±ä¼šå’Œæ™®é€šçš„æ–¹æ³•ä¸€æ ·ã€‚\u003c/li\u003e\n\u003cli\u003eä¸ºäº†åœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œæˆ‘ä»¬çš„ä»£ç ï¼Œå¿…é¡»ä½¿ç”¨ \u003ccode\u003estart()\u003c/code\u003e æ–¹æ³•ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"sleep-ã€yield-ã€join-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸ºä»€ä¹ˆ-sleep-å’Œ-yield-æ–¹æ³•æ˜¯é™æ€ï¼ˆstaticï¼‰çš„ï¼Ÿ\"\u003e\u003ca href=\"#sleep-ã€yield-ã€join-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸ºä»€ä¹ˆ-sleep-å’Œ-yield-æ–¹æ³•æ˜¯é™æ€ï¼ˆstaticï¼‰çš„ï¼Ÿ\" class=\"headerlink\" title=\"sleep()ã€yield()ã€join() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸ºä»€ä¹ˆ sleep() å’Œ yield() æ–¹æ³•æ˜¯é™æ€ï¼ˆstaticï¼‰çš„ï¼Ÿ\"\u003e\u003c/a\u003e\u003ccode\u003esleep()\u003c/code\u003eã€\u003ccode\u003eyield()\u003c/code\u003eã€\u003ccode\u003ejoin()\u003c/code\u003e æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸ºä»€ä¹ˆ \u003ccode\u003esleep()\u003c/code\u003e å’Œ \u003ccode\u003eyield()\u003c/code\u003e æ–¹æ³•æ˜¯é™æ€ï¼ˆstaticï¼‰çš„ï¼Ÿ\u003c/h4\u003e\u003cp\u003e\u003cstrong\u003e\u003ccode\u003eyield()\u003c/code\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eyield()\u003c/code\u003e æ–¹æ³•å¯ä»¥è®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹æš‚åœï¼Œä½†å®ƒä¸ä¼šé˜»å¡è¯¥çº¿ç¨‹ï¼Œå®ƒåªæ˜¯å°†è¯¥çº¿ç¨‹ä» \u003cstrong\u003eRunning\u003c/strong\u003e çŠ¶æ€è½¬å…¥ \u003ccode\u003eRunnable\u003c/code\u003e çŠ¶æ€ã€‚\u003c/li\u003e\n\u003cli\u003eå½“æŸä¸ªçº¿ç¨‹è°ƒç”¨äº† \u003ccode\u003eyield()\u003c/code\u003e æ–¹æ³•æš‚åœä¹‹åï¼Œåªæœ‰ä¼˜å…ˆçº§ä¸å½“å‰çº¿ç¨‹ç›¸åŒï¼Œæˆ–è€…ä¼˜å…ˆçº§æ¯”å½“å‰çº¿ç¨‹æ›´é«˜çš„å¤„äºå°±ç»ªçŠ¶æ€çš„çº¿ç¨‹æ‰ä¼šè·å¾—æ‰§è¡Œçš„æœºä¼šã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003esleep()\u003c/code\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003esleep()\u003c/code\u003e æ–¹æ³•éœ€è¦æŒ‡å®šç­‰å¾…çš„æ—¶é—´ï¼Œå®ƒå¯ä»¥è®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹åœ¨æŒ‡å®šçš„æ—¶é—´å†…æš‚åœæ‰§è¡Œï¼Œè¿›å…¥ \u003cstrong\u003eBlocked\u003c/strong\u003e çŠ¶æ€ã€‚\u003c/li\u003e\n\u003cli\u003eè¯¥æ–¹æ³•æ—¢å¯ä»¥è®©å…¶ä»–åŒä¼˜å…ˆçº§æˆ–è€…é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹å¾—åˆ°æ‰§è¡Œçš„æœºä¼šï¼Œä¹Ÿå¯ä»¥è®©ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹å¾—åˆ°æ‰§è¡Œæœºä¼šã€‚\u003c/li\u003e\n\u003cli\u003eä½†æ˜¯ï¼Œ\u003ccode\u003esleep()\u003c/code\u003e æ–¹æ³•ä¸ä¼šé‡Šæ”¾â€œé”æ ‡å¿—â€ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæœ‰ \u003ccode\u003esynchronized\u003c/code\u003e åŒæ­¥å—ï¼Œå…¶ä»–çº¿ç¨‹ä»ç„¶ä¸èƒ½è®¿é—®å…±äº«æ•°æ®ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003ejoin()\u003c/code\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ejoin()\u003c/code\u003e æ–¹æ³•ä¼šä½¿å½“å‰çº¿ç¨‹è½¬å…¥ \u003cstrong\u003eBlocked\u003c/strong\u003e çŠ¶æ€ï¼Œç­‰å¾…è°ƒç”¨ \u003ccode\u003ejoin()\u003c/code\u003e æ–¹æ³•çš„çº¿ç¨‹ç»“æŸåæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eä¸ºä»€ä¹ˆ \u003ccode\u003esleep()\u003c/code\u003e å’Œ \u003ccode\u003eyield()\u003c/code\u003e æ–¹æ³•æ˜¯é™æ€ï¼ˆstaticï¼‰çš„ï¼Ÿ\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eThread\u003c/code\u003e ç±»çš„ \u003ccode\u003esleep()\u003c/code\u003e å’Œ \u003ccode\u003eyield()\u003c/code\u003e æ–¹æ³•å°†å¤„ç† \u003cstrong\u003eRunning\u003c/strong\u003e çŠ¶æ€çš„çº¿ç¨‹ã€‚æ‰€ä»¥åœ¨å…¶ä»–å¤„äºé \u003cstrong\u003eRunning\u003c/strong\u003e çŠ¶æ€çš„çº¿ç¨‹ä¸Šæ‰§è¡Œè¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™äº›æ–¹æ³•æ˜¯é™æ€çš„ã€‚å®ƒä»¬å¯ä»¥åœ¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¸­å·¥ä½œï¼Œå¹¶é¿å…ç¨‹åºå‘˜é”™è¯¯çš„è®¤ä¸ºå¯ä»¥åœ¨å…¶ä»–éè¿è¡Œçº¿ç¨‹è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ å‚è€ƒé˜…è¯»ï¼š\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.importnew.com/14958.html\"\u003eJava çº¿ç¨‹ä¸­ yield ä¸ join æ–¹æ³•çš„åŒºåˆ«\u003c/a\u003e\u003cbr/\u003eğŸ‘‰ å‚è€ƒé˜…è¯»ï¼š\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://blog.csdn.net/xiangwanpeng/article/details/54972952\"\u003esleep()ï¼Œwait()ï¼Œyield()å’Œ join()æ–¹æ³•çš„åŒºåˆ«\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"Java-çš„çº¿ç¨‹ä¼˜å…ˆçº§å¦‚ä½•æ§åˆ¶ï¼Ÿé«˜ä¼˜å…ˆçº§çš„-Java-çº¿ç¨‹ä¸€å®šå…ˆæ‰§è¡Œå—ï¼Ÿ\"\u003e\u003ca href=\"#Java-çš„çº¿ç¨‹ä¼˜å…ˆçº§å¦‚ä½•æ§åˆ¶ï¼Ÿé«˜ä¼˜å…ˆçº§çš„-Java-çº¿ç¨‹ä¸€å®šå…ˆæ‰§è¡Œå—ï¼Ÿ\" class=\"headerlink\" title=\"Java çš„çº¿ç¨‹ä¼˜å…ˆçº§å¦‚ä½•æ§åˆ¶ï¼Ÿé«˜ä¼˜å…ˆçº§çš„ Java çº¿ç¨‹ä¸€å®šå…ˆæ‰§è¡Œå—ï¼Ÿ\"\u003e\u003c/a\u003eJava çš„çº¿ç¨‹ä¼˜å…ˆçº§å¦‚ä½•æ§åˆ¶ï¼Ÿé«˜ä¼˜å…ˆçº§çš„ Java çº¿ç¨‹ä¸€å®šå…ˆæ‰§è¡Œå—ï¼Ÿ\u003c/h4\u003e\u003cp\u003e\u003cstrong\u003eJava ä¸­çš„çº¿ç¨‹ä¼˜å…ˆçº§å¦‚ä½•æ§åˆ¶\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eJava ä¸­çš„çº¿ç¨‹ä¼˜å…ˆçº§çš„èŒƒå›´æ˜¯ \u003ccode\u003e[1,10]\u003c/code\u003eï¼Œä¸€èˆ¬æ¥è¯´ï¼Œé«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹åœ¨è¿è¡Œæ—¶ä¼šå…·æœ‰ä¼˜å…ˆæƒã€‚å¯ä»¥é€šè¿‡ \u003ccode\u003ethread.setPriority(Thread.MAX_PRIORITY)\u003c/code\u003e çš„æ–¹å¼è®¾ç½®ï¼Œé»˜è®¤ä¼˜å…ˆçº§ä¸º \u003ccode\u003e5\u003c/code\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eé«˜ä¼˜å…ˆçº§çš„ Java çº¿ç¨‹ä¸€å®šå…ˆæ‰§è¡Œå—\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå³ä½¿è®¾ç½®äº†çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œä¹Ÿ\u003cstrong\u003eæ— æ³•ä¿è¯é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹ä¸€å®šå…ˆæ‰§è¡Œ\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003eåŸå› ï¼šè¿™æ˜¯å› ä¸º \u003cstrong\u003eJava çº¿ç¨‹ä¼˜å…ˆçº§ä¾èµ–äºæ“ä½œç³»ç»Ÿçš„æ”¯æŒ\u003c/strong\u003eï¼Œç„¶è€Œï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿæ”¯æŒçš„çº¿ç¨‹ä¼˜å…ˆçº§å¹¶ä¸ç›¸åŒï¼Œä¸èƒ½å¾ˆå¥½çš„å’Œ Java ä¸­çº¿ç¨‹ä¼˜å…ˆçº§ä¸€ä¸€å¯¹åº”ã€‚\u003c/li\u003e\n\u003cli\u003eç»“è®ºï¼šJava çº¿ç¨‹ä¼˜å…ˆçº§æ§åˆ¶å¹¶ä¸å¯é ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"ä»€ä¹ˆæ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨å®ˆæŠ¤çº¿ç¨‹ï¼Ÿå¦‚ä½•åˆ›å»ºå®ˆæŠ¤çº¿ç¨‹ï¼Ÿ\"\u003e\u003ca href=\"#ä»€ä¹ˆæ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨å®ˆæŠ¤çº¿ç¨‹ï¼Ÿå¦‚ä½•åˆ›å»ºå®ˆæŠ¤çº¿ç¨‹ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨å®ˆæŠ¤çº¿ç¨‹ï¼Ÿå¦‚ä½•åˆ›å»ºå®ˆæŠ¤çº¿ç¨‹ï¼Ÿ\"\u003e\u003c/a\u003eä»€ä¹ˆæ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨å®ˆæŠ¤çº¿ç¨‹ï¼Ÿå¦‚ä½•åˆ›å»ºå®ˆæŠ¤çº¿ç¨‹ï¼Ÿ\u003c/h4\u003e\u003cp\u003e\u003cstrong\u003eä»€ä¹ˆæ˜¯å®ˆæŠ¤çº¿ç¨‹\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå®ˆæŠ¤çº¿ç¨‹ï¼ˆDaemon Threadï¼‰æ˜¯åœ¨åå°æ‰§è¡Œå¹¶ä¸”ä¸ä¼šé˜»æ­¢ JVM ç»ˆæ­¢çš„çº¿ç¨‹ã€‚\u003c/li\u003e\n\u003cli\u003eä¸å®ˆæŠ¤çº¿ç¨‹ï¼ˆDaemon Threadï¼‰ç›¸åçš„ï¼Œå«ç”¨æˆ·çº¿ç¨‹ï¼ˆUser Threadï¼‰ï¼Œä¹Ÿå°±æ˜¯éå®ˆæŠ¤çº¿ç¨‹ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eä¸ºä»€ä¹ˆè¦ç”¨å®ˆæŠ¤çº¿ç¨‹\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå®ˆæŠ¤çº¿ç¨‹çš„ä¼˜å…ˆçº§æ¯”è¾ƒä½ï¼Œç”¨äºä¸ºç³»ç»Ÿä¸­çš„å…¶å®ƒå¯¹è±¡å’Œçº¿ç¨‹æä¾›æœåŠ¡ã€‚å…¸å‹çš„åº”ç”¨å°±æ˜¯åƒåœ¾å›æ”¶å™¨ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eå¦‚ä½•åˆ›å»ºå®ˆæŠ¤çº¿ç¨‹\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä½¿ç”¨ \u003ccode\u003ethread.setDaemon(true)\u003c/code\u003e å¯ä»¥è®¾ç½® thread çº¿ç¨‹ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚\u003c/li\u003e\n\u003cli\u003eæ³¨æ„ç‚¹ï¼š\u003cul\u003e\n\u003cli\u003eæ­£åœ¨è¿è¡Œçš„ç”¨æˆ·çº¿ç¨‹æ— æ³•è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼Œæ‰€ä»¥ \u003ccode\u003ethread.setDaemon(true)\u003c/code\u003e å¿…é¡»åœ¨ \u003ccode\u003ethread.start()\u003c/code\u003e ä¹‹å‰è®¾ç½®ï¼Œå¦åˆ™ä¼šæŠ›å‡º \u003ccode\u003ellegalThreadStateException\u003c/code\u003e å¼‚å¸¸ï¼›\u003c/li\u003e\n\u003cli\u003eä¸€ä¸ªå®ˆæŠ¤çº¿ç¨‹åˆ›å»ºçš„å­çº¿ç¨‹ä¾ç„¶æ˜¯å®ˆæŠ¤çº¿ç¨‹ã€‚\u003c/li\u003e\n\u003cli\u003eä¸è¦è®¤ä¸ºæ‰€æœ‰çš„åº”ç”¨éƒ½å¯ä»¥åˆ†é…ç»™å®ˆæŠ¤çº¿ç¨‹æ¥è¿›è¡ŒæœåŠ¡ï¼Œæ¯”å¦‚è¯»å†™æ“ä½œæˆ–è€…è®¡ç®—é€»è¾‘ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ å‚è€ƒé˜…è¯»ï¼š\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://blog.csdn.net/shimiso/article/details/8964414\"\u003eJava ä¸­å®ˆæŠ¤çº¿ç¨‹çš„æ€»ç»“\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"çº¿ç¨‹é—´æ˜¯å¦‚ä½•é€šä¿¡çš„ï¼Ÿ\"\u003e\u003ca href=\"#çº¿ç¨‹é—´æ˜¯å¦‚ä½•é€šä¿¡çš„ï¼Ÿ\" class=\"headerlink\" title=\"çº¿ç¨‹é—´æ˜¯å¦‚ä½•é€šä¿¡çš„ï¼Ÿ\"\u003e\u003c/a\u003eçº¿ç¨‹é—´æ˜¯å¦‚ä½•é€šä¿¡çš„ï¼Ÿ\u003c/h4\u003e\u003cp\u003eå½“çº¿ç¨‹é—´æ˜¯å¯ä»¥å…±äº«èµ„æºæ—¶ï¼Œçº¿ç¨‹é—´é€šä¿¡æ˜¯åè°ƒå®ƒä»¬çš„é‡è¦çš„æ‰‹æ®µã€‚\u003ccode\u003eObject\u003c/code\u003e ç±»ä¸­ \u003ccode\u003ewait()\u003c/code\u003e, \u003ccode\u003enotify()\u003c/code\u003e å’Œ \u003ccode\u003enotifyAll()\u003c/code\u003e æ–¹æ³•å¯ä»¥ç”¨äºçº¿ç¨‹é—´é€šä¿¡å…³äºèµ„æºçš„é”çš„çŠ¶æ€ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ å‚è€ƒé˜…è¯»ï¼š\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.cnblogs.com/dolphin0520/p/3920385.html\"\u003eJava å¹¶å‘ç¼–ç¨‹ï¼šçº¿ç¨‹é—´åä½œçš„ä¸¤ç§æ–¹å¼ï¼šwaitã€notifyã€notifyAll å’Œ Condition\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³•-wait-notify-å’Œ-notifyAll-è¢«å®šä¹‰åœ¨-Object-ç±»é‡Œï¼Ÿ\"\u003e\u003ca href=\"#ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³•-wait-notify-å’Œ-notifyAll-è¢«å®šä¹‰åœ¨-Object-ç±»é‡Œï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³• wait(), notify() å’Œ notifyAll() è¢«å®šä¹‰åœ¨ Object ç±»é‡Œï¼Ÿ\"\u003e\u003c/a\u003eä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³• \u003ccode\u003ewait()\u003c/code\u003e, \u003ccode\u003enotify()\u003c/code\u003e å’Œ \u003ccode\u003enotifyAll()\u003c/code\u003e è¢«å®šä¹‰åœ¨ Object ç±»é‡Œï¼Ÿ\u003c/h4\u003e\u003cp\u003eJava çš„æ¯ä¸ªå¯¹è±¡ä¸­éƒ½æœ‰ä¸€ä¸ªé”(monitorï¼Œä¹Ÿå¯ä»¥æˆä¸ºç›‘è§†å™¨) å¹¶ä¸” \u003ccode\u003ewait()\u003c/code\u003eã€\u003ccode\u003enotify()\u003c/code\u003e ç­‰æ–¹æ³•ç”¨äºç­‰å¾…å¯¹è±¡çš„é”æˆ–è€…é€šçŸ¥å…¶ä»–çº¿ç¨‹å¯¹è±¡çš„ç›‘è§†å™¨å¯ç”¨ã€‚åœ¨ Java çš„çº¿ç¨‹ä¸­å¹¶æ²¡æœ‰å¯ä¾›ä»»ä½•å¯¹è±¡ä½¿ç”¨çš„é”å’ŒåŒæ­¥å™¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™äº›æ–¹æ³•æ˜¯ Object ç±»çš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ · Java çš„æ¯ä¸€ä¸ªç±»éƒ½æœ‰ç”¨äºçº¿ç¨‹é—´é€šä¿¡çš„åŸºæœ¬æ–¹æ³•\u003c/p\u003e\n\u003ch4 id=\"ä¸ºä»€ä¹ˆ-wait-notify-å’Œ-notifyAll-å¿…é¡»åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ï¼Ÿ\"\u003e\u003ca href=\"#ä¸ºä»€ä¹ˆ-wait-notify-å’Œ-notifyAll-å¿…é¡»åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆ wait(), notify() å’Œ notifyAll() å¿…é¡»åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ï¼Ÿ\"\u003e\u003c/a\u003eä¸ºä»€ä¹ˆ \u003ccode\u003ewait()\u003c/code\u003e, \u003ccode\u003enotify()\u003c/code\u003e å’Œ \u003ccode\u003enotifyAll()\u003c/code\u003e å¿…é¡»åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ï¼Ÿ\u003c/h4\u003e\u003cp\u003eå½“ä¸€ä¸ªçº¿ç¨‹éœ€è¦è°ƒç”¨å¯¹è±¡çš„ \u003ccode\u003ewait()\u003c/code\u003e æ–¹æ³•çš„æ—¶å€™ï¼Œè¿™ä¸ªçº¿ç¨‹å¿…é¡»æ‹¥æœ‰è¯¥å¯¹è±¡çš„é”ï¼Œæ¥ç€å®ƒå°±ä¼šé‡Šæ”¾è¿™ä¸ªå¯¹è±¡é”å¹¶è¿›å…¥ç­‰å¾…çŠ¶æ€ç›´åˆ°å…¶ä»–çº¿ç¨‹è°ƒç”¨è¿™ä¸ªå¯¹è±¡ä¸Šçš„ \u003ccode\u003enotify()\u003c/code\u003e æ–¹æ³•ã€‚åŒæ ·çš„ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹éœ€è¦è°ƒç”¨å¯¹è±¡çš„ \u003ccode\u003enotify()\u003c/code\u003e æ–¹æ³•æ—¶ï¼Œå®ƒä¼šé‡Šæ”¾è¿™ä¸ªå¯¹è±¡çš„é”ï¼Œä»¥ä¾¿å…¶ä»–åœ¨ç­‰å¾…çš„çº¿ç¨‹å°±å¯ä»¥å¾—åˆ°è¿™ä¸ªå¯¹è±¡é”ã€‚\u003c/p\u003e\n\u003cp\u003eç”±äºæ‰€æœ‰çš„è¿™äº›æ–¹æ³•éƒ½éœ€è¦çº¿ç¨‹æŒæœ‰å¯¹è±¡çš„é”ï¼Œè¿™æ ·å°±åªèƒ½é€šè¿‡åŒæ­¥æ¥å®ç°ï¼Œæ‰€ä»¥ä»–ä»¬åªèƒ½åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ã€‚\u003c/p\u003e\n\u003ch3 id=\"å¹¶å‘æœºåˆ¶çš„åº•å±‚å®ç°\"\u003e\u003ca href=\"#å¹¶å‘æœºåˆ¶çš„åº•å±‚å®ç°\" class=\"headerlink\" title=\"å¹¶å‘æœºåˆ¶çš„åº•å±‚å®ç°\"\u003e\u003c/a\u003eå¹¶å‘æœºåˆ¶çš„åº•å±‚å®ç°\u003c/h3\u003e\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ å‚è€ƒé˜…è¯»ï¼š\u003ca href=\"https://dunwu.github.io/waterdrop/pages/2c6488/\"\u003eJava å¹¶å‘æ ¸å¿ƒæœºåˆ¶\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"â­â­â­-synchronized\"\u003e\u003ca href=\"#â­â­â­-synchronized\" class=\"headerlink\" title=\"â­â­â­ synchronized\"\u003e\u003c/a\u003eâ­â­â­ \u003ccode\u003esynchronized\u003c/code\u003e\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003esynchronized\u003c/code\u003e æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esynchronized\u003c/code\u003e çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\u003c/p\u003e\n\u003cp\u003eåŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—ï¼Œå“ªä¸ªæ›´å¥½ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eJDK1.6 å¯¹\u003ccode\u003esynchronized\u003c/code\u003e åšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eä½¿ç”¨ \u003ccode\u003esynchronized\u003c/code\u003e ä¿®é¥°é™æ€æ–¹æ³•å’Œéé™æ€æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eä½œç”¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003esynchronized\u003c/code\u003e å¯ä»¥ä¿è¯åœ¨åŒä¸€ä¸ªæ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡ŒæŸä¸ªæ–¹æ³•æˆ–è€…æŸä¸ªä»£ç å—\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esynchronized\u003c/code\u003e æœ‰ 3 ç§åº”ç”¨æ–¹å¼ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eåŒæ­¥å®ä¾‹æ–¹æ³•\u003c/strong\u003e - å¯¹äºæ™®é€šåŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰å®ä¾‹å¯¹è±¡\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eåŒæ­¥é™æ€æ–¹æ³•\u003c/strong\u003e - å¯¹äºé™æ€åŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰ç±»çš„ \u003ccode\u003eClass\u003c/code\u003e å¯¹è±¡\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eåŒæ­¥ä»£ç å—\u003c/strong\u003e - å¯¹äºåŒæ­¥æ–¹æ³•å—ï¼Œé”æ˜¯ \u003ccode\u003esynchonized\u003c/code\u003e æ‹¬å·é‡Œé…ç½®çš„å¯¹è±¡\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eåŸç†\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esynchronized\u003c/code\u003e ç»è¿‡ç¼–è¯‘åï¼Œä¼šåœ¨åŒæ­¥å—çš„å‰ååˆ†åˆ«å½¢æˆ \u003ccode\u003emonitorenter\u003c/code\u003e å’Œ \u003ccode\u003emonitorexit\u003c/code\u003e è¿™ä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ï¼Œè¿™ä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤éƒ½éœ€è¦ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å‚æ•°æ¥æŒ‡æ˜è¦é”å®šå’Œè§£é”çš„å¯¹è±¡ã€‚å¦‚æœ \u003ccode\u003esynchronized\u003c/code\u003e æ˜ç¡®åˆ¶å®šäº†å¯¹è±¡å‚æ•°ï¼Œé‚£å°±æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼›å¦‚æœæ²¡æœ‰æ˜ç¡®æŒ‡å®šï¼Œé‚£å°±æ ¹æ® \u003ccode\u003esynchronized\u003c/code\u003e ä¿®é¥°çš„æ˜¯å®ä¾‹æ–¹æ³•è¿˜æ˜¯é™æ€æ–¹æ³•ï¼Œå»å¯¹å¯¹åº”çš„å¯¹è±¡å®ä¾‹æˆ– \u003ccode\u003eClass\u003c/code\u003e å¯¹è±¡æ¥ä½œä¸ºé”å¯¹è±¡ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esynchronized\u003c/code\u003e åŒæ­¥å—å¯¹åŒä¸€çº¿ç¨‹æ¥è¯´æ˜¯å¯é‡å…¥çš„ï¼Œä¸ä¼šå‡ºç°é”æ­»é—®é¢˜ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esynchronized\u003c/code\u003e åŒæ­¥å—æ˜¯äº’æ–¥çš„ï¼Œå³å·²è¿›å…¥çš„çº¿ç¨‹æ‰§è¡Œå®Œæˆå‰ï¼Œä¼šé˜»å¡å…¶ä»–è¯•å›¾è¿›å…¥çš„çº¿ç¨‹ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eä¼˜åŒ–\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eJava 1.6 ä»¥åï¼Œ\u003ccode\u003esynchronized\u003c/code\u003e åšäº†å¤§é‡çš„ä¼˜åŒ–ï¼Œå…¶æ€§èƒ½å·²ç»ä¸ \u003ccode\u003eLock\u003c/code\u003e ã€\u003ccode\u003eReadWriteLock\u003c/code\u003e åŸºæœ¬ä¸ŠæŒå¹³ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esynchronized\u003c/code\u003e çš„ä¼˜åŒ–æ˜¯å°†é”ç²’åº¦åˆ†ä¸ºä¸åŒçº§åˆ«ï¼Œ\u003ccode\u003esynchronized\u003c/code\u003e ä¼šæ ¹æ®è¿è¡ŒçŠ¶æ€åŠ¨æ€çš„ç”±ä½åˆ°é«˜è°ƒæ•´é”çº§åˆ«ï¼ˆ\u003cstrong\u003eåå‘é”\u003c/strong\u003e -\u0026gt; \u003cstrong\u003eè½»é‡çº§é”\u003c/strong\u003e -\u0026gt; \u003cstrong\u003eé‡é‡çº§é”\u003c/strong\u003eï¼‰ï¼Œä»¥å‡å°‘é˜»å¡ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eåŒæ­¥æ–¹æ³• or åŒæ­¥å—ï¼Ÿ\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåŒæ­¥å—æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚\u003c/li\u003e\n\u003cli\u003eå› ä¸ºå®ƒä¸ä¼šé”ä½æ•´ä¸ªå¯¹è±¡ï¼ˆå½“ç„¶ä½ ä¹Ÿå¯ä»¥è®©å®ƒé”ä½æ•´ä¸ªå¯¹è±¡ï¼‰ã€‚åŒæ­¥æ–¹æ³•ä¼šé”ä½æ•´ä¸ªå¯¹è±¡ï¼Œå“ªæ€•è¿™ä¸ªç±»ä¸­æœ‰å¤šä¸ªä¸ç›¸å…³è”çš„åŒæ­¥å—ï¼Œè¿™é€šå¸¸ä¼šå¯¼è‡´ä»–ä»¬åœæ­¢æ‰§è¡Œå¹¶éœ€è¦ç­‰å¾…è·å¾—è¿™ä¸ªå¯¹è±¡ä¸Šçš„é”ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"â­-volatile\"\u003e\u003ca href=\"#â­-volatile\" class=\"headerlink\" title=\"â­ volatile\"\u003e\u003c/a\u003eâ­ \u003ccode\u003evolatile\u003c/code\u003e\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003evolatile\u003c/code\u003e æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003evolatile\u003c/code\u003e çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003evolatile\u003c/code\u003e èƒ½ä»£æ›¿é”å—ï¼Ÿ\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003evolatile\u003c/code\u003e å’Œ \u003ccode\u003esynchronized\u003c/code\u003e çš„åŒºåˆ«ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003evolatile\u003c/code\u003e æ— æ³•æ›¿ä»£ \u003ccode\u003esynchronized\u003c/code\u003e ï¼Œå› ä¸º \u003ccode\u003evolatile\u003c/code\u003e æ— æ³•ä¿è¯æ“ä½œçš„åŸå­æ€§\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eä½œç”¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eè¢« \u003ccode\u003evolatile\u003c/code\u003e å…³é”®å­—ä¿®é¥°çš„å˜é‡æœ‰ä¸¤å±‚å«ä¹‰ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eä¿è¯äº†ä¸åŒçº¿ç¨‹å¯¹è¿™ä¸ªå˜é‡è¿›è¡Œæ“ä½œæ—¶çš„å¯è§æ€§\u003c/strong\u003eï¼Œå³ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸä¸ªå˜é‡çš„å€¼ï¼Œè¿™æ–°å€¼å¯¹å…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ç«‹å³å¯è§çš„ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç¦æ­¢æŒ‡ä»¤é‡æ’åº\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eåŸç†\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eè§‚å¯ŸåŠ å…¥ volatile å…³é”®å­—å’Œæ²¡æœ‰åŠ å…¥ volatile å…³é”®å­—æ—¶æ‰€ç”Ÿæˆçš„æ±‡ç¼–ä»£ç å‘ç°ï¼Œ\u003cstrong\u003eåŠ å…¥ \u003ccode\u003evolatile\u003c/code\u003e å…³é”®å­—æ—¶ï¼Œä¼šå¤šå‡ºä¸€ä¸ª \u003ccode\u003elock\u003c/code\u003e å‰ç¼€æŒ‡ä»¤\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003elock\u003c/code\u003e å‰ç¼€æŒ‡ä»¤å®é™…ä¸Šç›¸å½“äºä¸€ä¸ªå†…å­˜å±éšœ\u003c/strong\u003eï¼ˆä¹Ÿæˆå†…å­˜æ …æ ï¼‰ï¼Œå†…å­˜å±éšœä¼šæä¾› 3 ä¸ªåŠŸèƒ½ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå®ƒç¡®ä¿æŒ‡ä»¤é‡æ’åºæ—¶ä¸ä¼šæŠŠå…¶åé¢çš„æŒ‡ä»¤æ’åˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ï¼Œä¹Ÿä¸ä¼šæŠŠå‰é¢çš„æŒ‡ä»¤æ’åˆ°å†…å­˜å±éšœçš„åé¢ï¼›å³åœ¨æ‰§è¡Œåˆ°å†…å­˜å±éšœè¿™å¥æŒ‡ä»¤æ—¶ï¼Œåœ¨å®ƒå‰é¢çš„æ“ä½œå·²ç»å…¨éƒ¨å®Œæˆï¼›\u003c/li\u003e\n\u003cli\u003eå®ƒä¼šå¼ºåˆ¶å°†å¯¹ç¼“å­˜çš„ä¿®æ”¹æ“ä½œç«‹å³å†™å…¥ä¸»å­˜ï¼›\u003c/li\u003e\n\u003cli\u003eå¦‚æœæ˜¯å†™æ“ä½œï¼Œå®ƒä¼šå¯¼è‡´å…¶ä»– CPU ä¸­å¯¹åº”çš„ç¼“å­˜è¡Œæ— æ•ˆã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003evolatile\u003c/code\u003e å’Œ \u003ccode\u003esynchronized\u003c/code\u003e çš„åŒºåˆ«ï¼Ÿ\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003evolatile\u003c/code\u003e æœ¬è´¨æ˜¯åœ¨å‘Šè¯‰ jvm å½“å‰å˜é‡åœ¨å¯„å­˜å™¨ï¼ˆå·¥ä½œå†…å­˜ï¼‰ä¸­çš„å€¼æ˜¯ä¸ç¡®å®šçš„ï¼Œéœ€è¦ä»ä¸»å­˜ä¸­è¯»å–ï¼› \u003ccode\u003esynchronized\u003c/code\u003e åˆ™æ˜¯é”å®šå½“å‰å˜é‡ï¼Œåªæœ‰å½“å‰çº¿ç¨‹å¯ä»¥è®¿é—®è¯¥å˜é‡ï¼Œå…¶ä»–çº¿ç¨‹è¢«é˜»å¡ä½ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003evolatile\u003c/code\u003e ä»…èƒ½ä½¿ç”¨åœ¨å˜é‡çº§åˆ«ï¼›synchronized åˆ™å¯ä»¥ä½¿ç”¨åœ¨å˜é‡ã€æ–¹æ³•ã€å’Œç±»çº§åˆ«çš„ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003evolatile\u003c/code\u003e ä»…èƒ½å®ç°å˜é‡çš„ä¿®æ”¹å¯è§æ€§ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§ï¼›è€Œ \u003ccode\u003esynchronized\u003c/code\u003e åˆ™å¯ä»¥ä¿è¯å˜é‡çš„ä¿®æ”¹å¯è§æ€§å’ŒåŸå­æ€§\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003evolatile\u003c/code\u003e ä¸ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ï¼›synchronized å¯èƒ½ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003evolatile\u003c/code\u003e æ ‡è®°çš„å˜é‡ä¸ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–ï¼›synchronized æ ‡è®°çš„å˜é‡å¯ä»¥è¢«ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"â­â­-CAS\"\u003e\u003ca href=\"#â­â­-CAS\" class=\"headerlink\" title=\"â­â­ CAS\"\u003e\u003c/a\u003eâ­â­ CAS\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eä»€ä¹ˆæ˜¯ CASï¼Ÿ\u003c/p\u003e\n\u003cp\u003eCAS æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eCAS çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\u003c/p\u003e\n\u003cp\u003eCAS çš„ä¸‰å¤§é—®é¢˜ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eä½œç”¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eCASï¼ˆCompare and Swapï¼‰\u003c/strong\u003eï¼Œå­—é¢æ„æ€ä¸º\u003cstrong\u003eæ¯”è¾ƒå¹¶äº¤æ¢\u003c/strong\u003eã€‚CAS æœ‰ 3 ä¸ªæ“ä½œæ•°ï¼Œåˆ†åˆ«æ˜¯ï¼šå†…å­˜å€¼ Vï¼Œæ—§çš„é¢„æœŸå€¼ Aï¼Œè¦ä¿®æ”¹çš„æ–°å€¼ Bã€‚å½“ä¸”ä»…å½“é¢„æœŸå€¼ A å’Œå†…å­˜å€¼ V ç›¸åŒæ—¶ï¼Œå°†å†…å­˜å€¼ V ä¿®æ”¹ä¸º Bï¼Œå¦åˆ™ä»€ä¹ˆéƒ½ä¸åšã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eåŸç†\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eJava ä¸»è¦åˆ©ç”¨ \u003ccode\u003eUnsafe\u003c/code\u003e è¿™ä¸ªç±»æä¾›çš„ CAS æ“ä½œã€‚\u003ccode\u003eUnsafe\u003c/code\u003e çš„ CAS ä¾èµ–çš„æ˜¯ JV M é’ˆå¯¹ä¸åŒçš„æ“ä½œç³»ç»Ÿå®ç°çš„ \u003ccode\u003eAtomic::cmpxchg\u003c/code\u003e æŒ‡ä»¤ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eä¸‰å¤§é—®é¢˜\u003c/strong\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eABA é—®é¢˜\u003c/strong\u003eï¼šå› ä¸º CAS éœ€è¦åœ¨æ“ä½œå€¼çš„æ—¶å€™æ£€æŸ¥ä¸‹å€¼æœ‰æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œå¦‚æœæ²¡æœ‰å‘ç”Ÿå˜åŒ–åˆ™æ›´æ–°ï¼Œä½†æ˜¯å¦‚æœä¸€ä¸ªå€¼åŸæ¥æ˜¯ Aï¼Œå˜æˆäº† Bï¼Œåˆå˜æˆäº† Aï¼Œé‚£ä¹ˆä½¿ç”¨ CAS è¿›è¡Œæ£€æŸ¥æ—¶ä¼šå‘ç°å®ƒçš„å€¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä½†æ˜¯å®é™…ä¸Šå´å˜åŒ–äº†ã€‚ABA é—®é¢˜çš„è§£å†³æ€è·¯å°±æ˜¯ä½¿ç”¨ç‰ˆæœ¬å·ã€‚åœ¨å˜é‡å‰é¢è¿½åŠ ä¸Šç‰ˆæœ¬å·ï¼Œæ¯æ¬¡å˜é‡æ›´æ–°çš„æ—¶å€™æŠŠç‰ˆæœ¬å·åŠ ä¸€ï¼Œé‚£ä¹ˆ Aï¼Bï¼A å°±ä¼šå˜æˆ 1A-2Bï¼3Aã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå¾ªç¯æ—¶é—´é•¿å¼€é”€å¤§\u003c/strong\u003eã€‚è‡ªæ—‹ CAS å¦‚æœé•¿æ—¶é—´ä¸æˆåŠŸï¼Œä¼šç»™ CPU å¸¦æ¥éå¸¸å¤§çš„æ‰§è¡Œå¼€é”€ã€‚å¦‚æœ JVM èƒ½æ”¯æŒå¤„ç†å™¨æä¾›çš„ pause æŒ‡ä»¤é‚£ä¹ˆæ•ˆç‡ä¼šæœ‰ä¸€å®šçš„æå‡ï¼Œpause æŒ‡ä»¤æœ‰ä¸¤ä¸ªä½œç”¨ï¼Œç¬¬ä¸€å®ƒå¯ä»¥å»¶è¿Ÿæµæ°´çº¿æ‰§è¡ŒæŒ‡ä»¤ï¼ˆde-pipelineï¼‰,ä½¿ CPU ä¸ä¼šæ¶ˆè€—è¿‡å¤šçš„æ‰§è¡Œèµ„æºï¼Œå»¶è¿Ÿçš„æ—¶é—´å–å†³äºå…·ä½“å®ç°çš„ç‰ˆæœ¬ï¼Œåœ¨ä¸€äº›å¤„ç†å™¨ä¸Šå»¶è¿Ÿæ—¶é—´æ˜¯é›¶ã€‚ç¬¬äºŒå®ƒå¯ä»¥é¿å…åœ¨é€€å‡ºå¾ªç¯çš„æ—¶å€™å› å†…å­˜é¡ºåºå†²çªï¼ˆmemory order violationï¼‰è€Œå¼•èµ· CPU æµæ°´çº¿è¢«æ¸…ç©ºï¼ˆCPU pipeline flushï¼‰ï¼Œä»è€Œæé«˜ CPU çš„æ‰§è¡Œæ•ˆç‡ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eåªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ“ä½œ\u003c/strong\u003eã€‚å½“å¯¹ä¸€ä¸ªå…±äº«å˜é‡æ‰§è¡Œæ“ä½œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¾ªç¯ CAS çš„æ–¹å¼æ¥ä¿è¯åŸå­æ“ä½œï¼Œä½†æ˜¯å¯¹å¤šä¸ªå…±äº«å˜é‡æ“ä½œæ—¶ï¼Œå¾ªç¯ CAS å°±æ— æ³•ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç”¨é”ï¼Œæˆ–è€…æœ‰ä¸€ä¸ªå–å·§çš„åŠæ³•ï¼Œå°±æ˜¯æŠŠå¤šä¸ªå…±äº«å˜é‡åˆå¹¶æˆä¸€ä¸ªå…±äº«å˜é‡æ¥æ“ä½œã€‚æ¯”å¦‚æœ‰ä¸¤ä¸ªå…±äº«å˜é‡ i ï¼ 2,j=aï¼Œåˆå¹¶ä¸€ä¸‹ ij=2aï¼Œç„¶åç”¨ CAS æ¥æ“ä½œ ijã€‚ä» Java1.5 å¼€å§‹ JDK æä¾›äº† AtomicReference ç±»æ¥ä¿è¯å¼•ç”¨å¯¹è±¡ä¹‹é—´çš„åŸå­æ€§ï¼Œä½ å¯ä»¥æŠŠå¤šä¸ªå˜é‡æ”¾åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œæ¥è¿›è¡Œ CAS æ“ä½œã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch4 id=\"â­-ThreadLocal\"\u003e\u003ca href=\"#â­-ThreadLocal\" class=\"headerlink\" title=\"â­ ThreadLocal\"\u003e\u003c/a\u003eâ­ \u003ccode\u003eThreadLocal\u003c/code\u003e\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003eThreadLocal\u003c/code\u003e æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eThreadLocal\u003c/code\u003e çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\u003c/p\u003e\n\u003cp\u003eå¦‚ä½•è§£å†³ \u003ccode\u003eThreadLocal\u003c/code\u003e å†…å­˜æ³„æ¼é—®é¢˜ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eä½œç”¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003eThreadLocal\u003c/code\u003e æ˜¯ä¸€ä¸ªå­˜å‚¨çº¿ç¨‹æœ¬åœ°å‰¯æœ¬çš„å·¥å…·ç±»\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eåŸç†\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eThread\u003c/code\u003e ç±»ä¸­ç»´æŠ¤ç€ä¸€ä¸ª \u003ccode\u003eThreadLocal.ThreadLocalMap\u003c/code\u003e ç±»å‹çš„æˆå‘˜ \u003ccode\u003ethreadLocals\u003c/code\u003eã€‚è¿™ä¸ªæˆå‘˜å°±æ˜¯ç”¨æ¥å­˜å‚¨å½“å‰çº¿ç¨‹ç‹¬å çš„å˜é‡å‰¯æœ¬ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eThreadLocalMap\u003c/code\u003e æ˜¯ \u003ccode\u003eThreadLocal\u003c/code\u003e çš„å†…éƒ¨ç±»ï¼Œå®ƒç»´æŠ¤ç€ä¸€ä¸ª \u003ccode\u003eEntry\u003c/code\u003e æ•°ç»„ï¼Œ \u003ccode\u003eEntry\u003c/code\u003e ç”¨äºä¿å­˜é”®å€¼å¯¹ï¼Œå…¶ key æ˜¯ \u003ccode\u003eThreadLocal\u003c/code\u003e å¯¹è±¡ï¼Œvalue æ˜¯ä¼ é€’è¿›æ¥çš„å¯¹è±¡ï¼ˆå˜é‡å‰¯æœ¬ï¼‰ã€‚ \u003ccode\u003eEntry\u003c/code\u003e ç»§æ‰¿äº† \u003ccode\u003eWeakReference\u003c/code\u003e ï¼Œæ‰€ä»¥æ˜¯å¼±å¼•ç”¨ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eå†…å­˜æ³„æ¼é—®é¢˜\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eThreadLocalMap çš„ \u003ccode\u003eEntry\u003c/code\u003e ç»§æ‰¿äº† \u003ccode\u003eWeakReference\u003c/code\u003eï¼Œæ‰€ä»¥å®ƒçš„ key ï¼ˆ\u003ccode\u003eThreadLocal\u003c/code\u003e å¯¹è±¡ï¼‰æ˜¯å¼±å¼•ç”¨ï¼Œè€Œ value ï¼ˆå˜é‡å‰¯æœ¬ï¼‰æ˜¯å¼ºå¼•ç”¨ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå¦‚æœ \u003ccode\u003eThreadLocal\u003c/code\u003e å¯¹è±¡æ²¡æœ‰å¤–éƒ¨å¼ºå¼•ç”¨æ¥å¼•ç”¨å®ƒï¼Œé‚£ä¹ˆ \u003ccode\u003eThreadLocal\u003c/code\u003e å¯¹è±¡ä¼šåœ¨ä¸‹æ¬¡ GC æ—¶è¢«å›æ”¶ã€‚\u003c/li\u003e\n\u003cli\u003eæ­¤æ—¶ï¼Œ\u003ccode\u003eEntry\u003c/code\u003e ä¸­çš„ key å·²ç»è¢«å›æ”¶ï¼Œä½†æ˜¯ value ç”±äºæ˜¯å¼ºå¼•ç”¨ä¸ä¼šè¢«åƒåœ¾æ”¶é›†å™¨å›æ”¶ã€‚å¦‚æœåˆ›å»º \u003ccode\u003eThreadLocal\u003c/code\u003e çš„çº¿ç¨‹ä¸€ç›´æŒç»­è¿è¡Œï¼Œé‚£ä¹ˆ value å°±ä¼šä¸€ç›´å¾—ä¸åˆ°å›æ”¶ï¼Œäº§ç”Ÿå†…å­˜æ³„éœ²ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eé‚£ä¹ˆå¦‚ä½•é¿å…å†…å­˜æ³„æ¼å‘¢ï¼Ÿæ–¹æ³•å°±æ˜¯ï¼š\u003cstrong\u003eä½¿ç”¨ \u003ccode\u003eThreadLocal\u003c/code\u003e çš„ \u003ccode\u003eset\u003c/code\u003e æ–¹æ³•åï¼Œæ˜¾ç¤ºçš„è°ƒç”¨ \u003ccode\u003eremove\u003c/code\u003e æ–¹æ³•\u003c/strong\u003e ã€‚\u003c/p\u003e\n\u003ch3 id=\"å†…å­˜æ¨¡å‹\"\u003e\u003ca href=\"#å†…å­˜æ¨¡å‹\" class=\"headerlink\" title=\"å†…å­˜æ¨¡å‹\"\u003e\u003c/a\u003eå†…å­˜æ¨¡å‹\u003c/h3\u003e\u003ch4 id=\"ä»€ä¹ˆæ˜¯-Java-å†…å­˜æ¨¡å‹\"\u003e\u003ca href=\"#ä»€ä¹ˆæ˜¯-Java-å†…å­˜æ¨¡å‹\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ Java å†…å­˜æ¨¡å‹\"\u003e\u003c/a\u003eä»€ä¹ˆæ˜¯ Java å†…å­˜æ¨¡å‹\u003c/h4\u003e\u003cul\u003e\n\u003cli\u003eJava å†…å­˜æ¨¡å‹å³ Java Memory Modelï¼Œç®€ç§° JMMã€‚JMM å®šä¹‰äº† JVM åœ¨è®¡ç®—æœºå†…å­˜(RAM)ä¸­çš„å·¥ä½œæ–¹å¼ã€‚JMM æ˜¯éš¶å±äº JVM çš„ã€‚\u003c/li\u003e\n\u003cli\u003eå¹¶å‘ç¼–ç¨‹é¢†åŸŸä¸¤ä¸ªå…³é”®é—®é¢˜ï¼šçº¿ç¨‹é—´é€šä¿¡å’Œçº¿ç¨‹é—´åŒæ­¥\u003c/li\u003e\n\u003cli\u003eçº¿ç¨‹é—´é€šä¿¡æœºåˆ¶\u003cul\u003e\n\u003cli\u003eå…±äº«å†…å­˜ - çº¿ç¨‹é—´é€šè¿‡å†™-è¯»å†…å­˜ä¸­çš„å…¬å…±çŠ¶æ€æ¥éšå¼è¿›è¡Œé€šä¿¡ã€‚\u003c/li\u003e\n\u003cli\u003eæ¶ˆæ¯ä¼ é€’ - java ä¸­å…¸å‹çš„æ¶ˆæ¯ä¼ é€’æ–¹å¼å°±æ˜¯ wait()å’Œ notify()ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eçº¿ç¨‹é—´åŒæ­¥æœºåˆ¶\u003cul\u003e\n\u003cli\u003eåœ¨å…±äº«å†…å­˜æ¨¡å‹ä¸­ï¼Œå¿…é¡»æ˜¾ç¤ºæŒ‡å®šæŸä¸ªæ–¹æ³•æˆ–æŸæ®µä»£ç åœ¨çº¿ç¨‹é—´äº’æ–¥åœ°æ‰§è¡Œã€‚\u003c/li\u003e\n\u003cli\u003eåœ¨æ¶ˆæ¯ä¼ é€’æ¨¡å‹ä¸­ï¼Œç”±äºå‘é€æ¶ˆæ¯å¿…é¡»åœ¨æ¥æ”¶æ¶ˆæ¯ä¹‹å‰ï¼Œå› æ­¤åŒæ­¥æ˜¯éšå¼è¿›è¡Œçš„ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eJava çš„å¹¶å‘é‡‡ç”¨çš„æ˜¯å…±äº«å†…å­˜æ¨¡å‹\u003c/li\u003e\n\u003cli\u003eJMM å†³å®šä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„å†™å…¥ä½•æ—¶å¯¹å¦ä¸€ä¸ªçº¿ç¨‹å¯è§ã€‚\u003c/li\u003e\n\u003cli\u003eçº¿ç¨‹ä¹‹é—´çš„å…±äº«å˜é‡å­˜å‚¨åœ¨ä¸»å†…å­˜ï¼ˆmain memoryï¼‰ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç§æœ‰çš„æœ¬åœ°å†…å­˜ï¼ˆlocal memoryï¼‰ï¼Œæœ¬åœ°å†…å­˜ä¸­å­˜å‚¨äº†è¯¥çº¿ç¨‹ä»¥è¯»/å†™å…±äº«å˜é‡çš„å‰¯æœ¬ã€‚\u003c/li\u003e\n\u003cli\u003eJMM æŠŠå†…å­˜åˆ†æˆäº†ä¸¤éƒ¨åˆ†ï¼šçº¿ç¨‹æ ˆåŒºå’Œå †åŒº\u003cul\u003e\n\u003cli\u003eçº¿ç¨‹æ ˆ\u003cul\u003e\n\u003cli\u003eJVM ä¸­è¿è¡Œçš„æ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±çš„çº¿ç¨‹æ ˆï¼Œçº¿ç¨‹æ ˆåŒ…å«äº†å½“å‰çº¿ç¨‹æ‰§è¡Œçš„æ–¹æ³•è°ƒç”¨ç›¸å…³ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¹ŸæŠŠå®ƒç§°ä½œè°ƒç”¨æ ˆã€‚éšç€ä»£ç çš„ä¸æ–­æ‰§è¡Œï¼Œè°ƒç”¨æ ˆä¼šä¸æ–­å˜åŒ–ã€‚\u003c/li\u003e\n\u003cli\u003eçº¿ç¨‹æ ˆè¿˜åŒ…å«äº†å½“å‰æ–¹æ³•çš„æ‰€æœ‰æœ¬åœ°å˜é‡ä¿¡æ¯ã€‚çº¿ç¨‹ä¸­çš„æœ¬åœ°å˜é‡å¯¹å…¶å®ƒçº¿ç¨‹æ˜¯ä¸å¯è§çš„ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eå †åŒº\u003cul\u003e\n\u003cli\u003eå †åŒºåŒ…å«äº† Java åº”ç”¨åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡ä¿¡æ¯ï¼Œä¸ç®¡å¯¹è±¡æ˜¯å“ªä¸ªçº¿ç¨‹åˆ›å»ºçš„ï¼Œå…¶ä¸­çš„å¯¹è±¡åŒ…æ‹¬åŸå§‹ç±»å‹çš„å°è£…ç±»ï¼ˆå¦‚ Byteã€Integerã€Long ç­‰ç­‰ï¼‰ã€‚ä¸ç®¡å¯¹è±¡æ˜¯å±äºä¸€ä¸ªæˆå‘˜å˜é‡è¿˜æ˜¯æ–¹æ³•ä¸­çš„æœ¬åœ°å˜é‡ï¼Œå®ƒéƒ½ä¼šè¢«å­˜å‚¨åœ¨å †åŒºã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eä¸€ä¸ªæœ¬åœ°å˜é‡å¦‚æœæ˜¯åŸå§‹ç±»å‹ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«å®Œå…¨å­˜å‚¨åˆ°æ ˆåŒºã€‚\u003c/li\u003e\n\u003cli\u003eä¸€ä¸ªæœ¬åœ°å˜é‡ä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæœ¬åœ°å¼•ç”¨ä¼šè¢«å­˜å‚¨åˆ°æ ˆä¸­ï¼Œä½†æ˜¯å¯¹è±¡æœ¬èº«ä»ç„¶å­˜å‚¨åœ¨å †åŒºã€‚\u003c/li\u003e\n\u003cli\u003eå¯¹äºä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ä¸­åŒ…å«æœ¬åœ°å˜é‡ï¼Œä»éœ€è¦å­˜å‚¨åœ¨æ ˆåŒºï¼Œå³ä½¿å®ƒä»¬æ‰€å±çš„å¯¹è±¡åœ¨å †åŒºã€‚\u003c/li\u003e\n\u003cli\u003eå¯¹äºä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡ï¼Œä¸ç®¡å®ƒæ˜¯åŸå§‹ç±»å‹è¿˜æ˜¯åŒ…è£…ç±»å‹ï¼Œéƒ½ä¼šè¢«å­˜å‚¨åˆ°å †åŒºã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/cs/java/javacore/concurrent/java-memory-model_3.png\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ å‚è€ƒé˜…è¯»ï¼š\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://blog.csdn.net/suifeng3051/article/details/52611310\"\u003eå…¨é¢ç†è§£ Java å†…å­˜æ¨¡å‹\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"åŒæ­¥å®¹å™¨å’Œå¹¶å‘å®¹å™¨\"\u003e\u003ca href=\"#åŒæ­¥å®¹å™¨å’Œå¹¶å‘å®¹å™¨\" class=\"headerlink\" title=\"åŒæ­¥å®¹å™¨å’Œå¹¶å‘å®¹å™¨\"\u003e\u003c/a\u003eåŒæ­¥å®¹å™¨å’Œå¹¶å‘å®¹å™¨\u003c/h3\u003e\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ å‚è€ƒé˜…è¯»ï¼š\u003ca href=\"https://dunwu.github.io/waterdrop/pages/b067d6/\"\u003eJava å¹¶å‘å®¹å™¨\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"â­-åŒæ­¥å®¹å™¨\"\u003e\u003ca href=\"#â­-åŒæ­¥å®¹å™¨\" class=\"headerlink\" title=\"â­ åŒæ­¥å®¹å™¨\"\u003e\u003c/a\u003eâ­ åŒæ­¥å®¹å™¨\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eä»€ä¹ˆæ˜¯åŒæ­¥å®¹å™¨ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eæœ‰å“ªäº›å¸¸è§åŒæ­¥å®¹å™¨ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eå®ƒä»¬æ˜¯å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eåŒæ­¥å®¹å™¨çœŸçš„çº¿ç¨‹å®‰å…¨å—ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eç±»å‹\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eVector\u003c/code\u003eã€\u003ccode\u003eStack\u003c/code\u003eã€\u003ccode\u003eHashtable\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eä½œç”¨/åŸç†\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eåŒæ­¥å®¹å™¨çš„åŒæ­¥åŸç†å°±æ˜¯åœ¨æ–¹æ³•ä¸Šç”¨ \u003ccode\u003esynchronized\u003c/code\u003e ä¿®é¥°ã€‚ \u003cstrong\u003e\u003ccode\u003esynchronized\u003c/code\u003e å¯ä»¥ä¿è¯åœ¨åŒä¸€ä¸ªæ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡ŒæŸä¸ªæ–¹æ³•æˆ–è€…æŸä¸ªä»£ç å—\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esynchronized\u003c/code\u003e çš„äº’æ–¥åŒæ­¥ä¼šäº§ç”Ÿé˜»å¡å’Œå”¤é†’çº¿ç¨‹çš„å¼€é”€ã€‚æ˜¾ç„¶ï¼Œè¿™ç§æ–¹å¼æ¯”æ²¡æœ‰ä½¿ç”¨ \u003ccode\u003esynchronized\u003c/code\u003e çš„å®¹å™¨æ€§èƒ½è¦å·®ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eçº¿ç¨‹å®‰å…¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eåŒæ­¥å®¹å™¨çœŸçš„ç»å¯¹å®‰å…¨å—ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eå…¶å®ä¹Ÿæœªå¿…ã€‚åœ¨åšå¤åˆæ“ä½œï¼ˆéåŸå­æ“ä½œï¼‰æ—¶ï¼Œä»ç„¶éœ€è¦åŠ é”æ¥ä¿æŠ¤ã€‚å¸¸è§å¤åˆæ“ä½œå¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè¿­ä»£\u003c/strong\u003eï¼šåå¤è®¿é—®å…ƒç´ ï¼Œç›´åˆ°éå†å®Œå…¨éƒ¨å…ƒç´ ï¼›\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eè·³è½¬\u003c/strong\u003eï¼šæ ¹æ®æŒ‡å®šé¡ºåºå¯»æ‰¾å½“å‰å…ƒç´ çš„ä¸‹ä¸€ä¸ªï¼ˆä¸‹ n ä¸ªï¼‰å…ƒç´ ï¼›\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ¡ä»¶è¿ç®—\u003c/strong\u003eï¼šä¾‹å¦‚è‹¥æ²¡æœ‰åˆ™æ·»åŠ ç­‰ï¼›\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"â­â­â­-ConcurrentHashMap\"\u003e\u003ca href=\"#â­â­â­-ConcurrentHashMap\" class=\"headerlink\" title=\"â­â­â­ ConcurrentHashMap\"\u003e\u003c/a\u003eâ­â­â­ ConcurrentHashMap\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eè¯·æè¿° ConcurrentHashMap çš„å®ç°åŸç†ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eConcurrentHashMap ä¸ºä»€ä¹ˆæ”¾å¼ƒäº†åˆ†æ®µé”ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eåŸºç¡€æ•°æ®ç»“æ„åŸç†å’Œ \u003ccode\u003eHashMap\u003c/code\u003e ä¸€æ ·ï¼ŒJDK 1.7 é‡‡ç”¨ æ•°ç»„ï¼‹å•é“¾è¡¨ï¼›JDK 1.8 é‡‡ç”¨æ•°ç»„ï¼‹å•é“¾è¡¨ï¼‹çº¢é»‘æ ‘ã€‚\u003c/p\u003e\n\u003cp\u003eå¹¶å‘å®‰å…¨ç‰¹æ€§çš„å®ç°ï¼š\u003c/p\u003e\n\u003cp\u003eJDK 1.7ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä½¿ç”¨åˆ†æ®µé”ï¼Œè®¾è®¡æ€è·¯æ˜¯ç¼©å°é”ç²’åº¦ï¼Œæé«˜å¹¶å‘ååã€‚\u003c/li\u003e\n\u003cli\u003eå†™æ•°æ®æ—¶ï¼Œä¼šä½¿ç”¨å¯é‡å…¥é”å»é”ä½åˆ†æ®µï¼ˆsegmentï¼‰ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eJDK 1.8ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå–æ¶ˆåˆ†æ®µé”ï¼Œç›´æ¥é‡‡ç”¨ \u003ccode\u003etransient volatile HashEntry\u0026lt;K,V\u0026gt;[] table\u003c/code\u003e ä¿å­˜æ•°æ®ï¼Œé‡‡ç”¨ table æ•°ç»„å…ƒç´ ä½œä¸ºé”ï¼Œä»è€Œå®ç°äº†å¯¹æ¯ä¸€è¡Œæ•°æ®è¿›è¡ŒåŠ é”ï¼Œè¿›ä¸€æ­¥å‡å°‘å¹¶å‘å†²çªçš„æ¦‚ç‡ã€‚\u003c/li\u003e\n\u003cli\u003eå†™æ•°æ®æ—¶ï¼Œä½¿ç”¨æ˜¯ CAS + \u003ccode\u003esynchronized\u003c/code\u003eã€‚\u003cul\u003e\n\u003cli\u003eæ ¹æ® key è®¡ç®—å‡º hashcode ã€‚\u003c/li\u003e\n\u003cli\u003eåˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œåˆå§‹åŒ–ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ef\u003c/code\u003e å³ä¸ºå½“å‰ key å®šä½å‡ºçš„ Nodeï¼Œå¦‚æœä¸ºç©ºè¡¨ç¤ºå½“å‰ä½ç½®å¯ä»¥å†™å…¥æ•°æ®ï¼Œåˆ©ç”¨ CAS å°è¯•å†™å…¥ï¼Œå¤±è´¥åˆ™è‡ªæ—‹ä¿è¯æˆåŠŸã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœå½“å‰ä½ç½®çš„ \u003ccode\u003ehashcode == MOVED == -1\u003c/code\u003e,åˆ™éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœéƒ½ä¸æ»¡è¶³ï¼Œåˆ™åˆ©ç”¨ synchronized é”å†™å…¥æ•°æ®ã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœæ•°é‡å¤§äº \u003ccode\u003eTREEIFY_THRESHOLD\u003c/code\u003e åˆ™è¦è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"â­â­-CopyOnWriteArrayList\"\u003e\u003ca href=\"#â­â­-CopyOnWriteArrayList\" class=\"headerlink\" title=\"â­â­ CopyOnWriteArrayList\"\u003e\u003c/a\u003eâ­â­ CopyOnWriteArrayList\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eCopyOnWriteArrayList çš„ä½œç”¨ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eCopyOnWriteArrayList çš„åŸç†ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eä½œç”¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eCopyOnWrite å­—é¢æ„æ€ä¸ºå†™å…¥æ—¶å¤åˆ¶ã€‚CopyOnWriteArrayList æ˜¯çº¿ç¨‹å®‰å…¨çš„ ArrayListã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eåŸç†\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåœ¨ \u003ccode\u003eCopyOnWriteAarrayList\u003c/code\u003e ä¸­ï¼Œè¯»æ“ä½œä¸åŒæ­¥ï¼Œå› ä¸ºå®ƒä»¬åœ¨å†…éƒ¨æ•°ç»„çš„å¿«ç…§ä¸Šå·¥ä½œï¼Œæ‰€ä»¥å¤šä¸ªè¿­ä»£å™¨å¯ä»¥åŒæ—¶éå†è€Œä¸ä¼šç›¸äº’é˜»å¡ï¼ˆ1,2,4ï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003eæ‰€æœ‰çš„å†™æ“ä½œéƒ½æ˜¯åŒæ­¥çš„ã€‚ä»–ä»¬åœ¨å¤‡ä»½æ•°ç»„ï¼ˆ3ï¼‰çš„å‰¯æœ¬ä¸Šå·¥ä½œã€‚å†™æ“ä½œå®Œæˆåï¼Œåå¤‡é˜µåˆ—å°†è¢«æ›¿æ¢ä¸ºå¤åˆ¶çš„é˜µåˆ—ï¼Œå¹¶é‡Šæ”¾é”å®šã€‚æ”¯æŒæ•°ç»„å˜å¾—æ˜“å˜ï¼Œæ‰€ä»¥æ›¿æ¢æ•°ç»„çš„è°ƒç”¨æ˜¯åŸå­ï¼ˆ5ï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003eå†™æ“ä½œååˆ›å»ºçš„è¿­ä»£å™¨å°†èƒ½å¤Ÿçœ‹åˆ°ä¿®æ”¹çš„ç»“æ„ï¼ˆ6,7ï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003eå†™æ—¶å¤åˆ¶é›†åˆè¿”å›çš„è¿­ä»£å™¨ä¸ä¼šæŠ›å‡º ConcurrentModificationExceptionï¼Œå› ä¸ºå®ƒä»¬åœ¨æ•°ç»„çš„å¿«ç…§ä¸Šå·¥ä½œï¼Œå¹¶ä¸”æ— è®ºåç»­çš„ä¿®æ”¹ï¼ˆ2,4ï¼‰å¦‚ä½•ï¼Œéƒ½ä¼šåƒè¿­ä»£å™¨åˆ›å»ºæ—¶é‚£æ ·å®Œå…¨è¿”å›å…ƒç´ ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/cs/java/javacore/container/CopyOnWriteArrayList.png\"/\u003e\n\u003c/p\u003e\n\n\u003ch3 id=\"å¹¶å‘é”\"\u003e\u003ca href=\"#å¹¶å‘é”\" class=\"headerlink\" title=\"å¹¶å‘é”\"\u003e\u003c/a\u003eå¹¶å‘é”\u003c/h3\u003e\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ å‚è€ƒé˜…è¯»ï¼š\u003ca href=\"https://dunwu.github.io/waterdrop/pages/e2e047/\"\u003eJava å¹¶å‘é”\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"â­â­-é”ç±»å‹\"\u003e\u003ca href=\"#â­â­-é”ç±»å‹\" class=\"headerlink\" title=\"â­â­ é”ç±»å‹\"\u003e\u003c/a\u003eâ­â­ é”ç±»å‹\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eJava ä¸­æœ‰å“ªäº›é”ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eè¿™äº›é”æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eå¯é‡å…¥é”\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003eReentrantLock\u003c/code\u003e ã€\u003ccode\u003eReentrantReadWriteLock\u003c/code\u003e æ˜¯å¯é‡å…¥é”\u003c/strong\u003eã€‚è¿™ç‚¹ï¼Œä»å…¶å‘½åä¹Ÿä¸éš¾çœ‹å‡ºã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003esynchronized\u003c/code\u003e ä¹Ÿæ˜¯ä¸€ä¸ªå¯é‡å…¥é”\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eå…¬å¹³é”ä¸éå…¬å¹³é”\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003esynchronized\u003c/code\u003e åªæ”¯æŒéå…¬å¹³é”\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003eReentrantLock\u003c/code\u003e ã€\u003ccode\u003eReentrantReadWriteLock\u003c/code\u003eï¼Œé»˜è®¤æ˜¯éå…¬å¹³é”ï¼Œä½†æ”¯æŒå…¬å¹³é”\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eç‹¬äº«é”ä¸å…±äº«é”\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003esynchronized\u003c/code\u003e ã€\u003ccode\u003eReentrantLock\u003c/code\u003e åªæ”¯æŒç‹¬äº«é”\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003eReentrantReadWriteLock\u003c/code\u003e å…¶å†™é”æ˜¯ç‹¬äº«é”ï¼Œå…¶è¯»é”æ˜¯å…±äº«é”\u003c/strong\u003eã€‚è¯»é”æ˜¯å…±äº«é”ä½¿å¾—å¹¶å‘è¯»æ˜¯éå¸¸é«˜æ•ˆçš„ï¼Œè¯»å†™ï¼Œå†™è¯» ï¼Œå†™å†™çš„è¿‡ç¨‹æ˜¯äº’æ–¥çš„ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eæ‚²è§‚é”ä¸ä¹è§‚é”\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eæ‚²è§‚é”åœ¨ Java ä¸­çš„åº”ç”¨å°±æ˜¯é€šè¿‡ä½¿ç”¨ \u003ccode\u003esynchronized\u003c/code\u003e å’Œ \u003ccode\u003eLock\u003c/code\u003e æ˜¾ç¤ºåŠ é”æ¥è¿›è¡Œäº’æ–¥åŒæ­¥ï¼Œè¿™æ˜¯ä¸€ç§é˜»å¡åŒæ­¥ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eä¹è§‚é”åœ¨ Java ä¸­çš„åº”ç”¨å°±æ˜¯é‡‡ç”¨ CAS æœºåˆ¶ï¼ˆCAS æ“ä½œé€šè¿‡ \u003ccode\u003eUnsafe\u003c/code\u003e ç±»æä¾›ï¼Œä½†è¿™ä¸ªç±»ä¸ç›´æ¥æš´éœ²ä¸º APIï¼Œæ‰€ä»¥éƒ½æ˜¯é—´æ¥ä½¿ç”¨ï¼Œå¦‚å„ç§åŸå­ç±»ï¼‰ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eåå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eJava 1.6 ä»¥å‰ï¼Œé‡é‡çº§é”ä¸€èˆ¬æŒ‡çš„æ˜¯ \u003ccode\u003esynchronized\u003c/code\u003e ï¼Œè€Œè½»é‡çº§é”æŒ‡çš„æ˜¯ \u003ccode\u003evolatile\u003c/code\u003eã€‚\u003c/p\u003e\n\u003cp\u003eJava 1.6 ä»¥åï¼Œé’ˆå¯¹ \u003ccode\u003esynchronized\u003c/code\u003e åšäº†å¤§é‡ä¼˜åŒ–ï¼Œå¼•å…¥ 4 ç§é”çŠ¶æ€ï¼š æ— é”çŠ¶æ€ã€åå‘é”ã€è½»é‡çº§é”å’Œé‡é‡çº§é”ã€‚é”å¯ä»¥å•å‘çš„ä»åå‘é”å‡çº§åˆ°è½»é‡çº§é”ï¼Œå†ä»è½»é‡çº§é”å‡çº§åˆ°é‡é‡çº§é” ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eåˆ†æ®µé”\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eåˆ†æ®µé”å…¶å®æ˜¯ä¸€ç§é”çš„è®¾è®¡ï¼Œå¹¶ä¸æ˜¯å…·ä½“çš„ä¸€ç§é”ã€‚å…¸å‹ï¼šJDK1.7 ä¹‹å‰çš„ \u003ccode\u003eConcurrentHashMap\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eæ˜¾ç¤ºé”å’Œå†…ç½®é”\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå†…ç½®é”ï¼š\u003ccode\u003esynchronized\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eæ˜¾ç¤ºé”ï¼š\u003ccode\u003eReentrantLock\u003c/code\u003eã€\u003ccode\u003eReentrantReadWriteLock\u003c/code\u003e ç­‰ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"â­â­-AQS\"\u003e\u003ca href=\"#â­â­-AQS\" class=\"headerlink\" title=\"â­â­ AQS\"\u003e\u003c/a\u003eâ­â­ AQS\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eä»€ä¹ˆæ˜¯ AQSï¼Ÿ\u003c/p\u003e\n\u003cp\u003eAQS çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ\u003c/p\u003e\n\u003cp\u003eAQS çš„åŸç†ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eä½œç”¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eAbstractQueuedSynchronizer\u003c/code\u003eï¼ˆç®€ç§° \u003cstrong\u003eAQS\u003c/strong\u003eï¼‰æ˜¯\u003cstrong\u003eé˜Ÿåˆ—åŒæ­¥å™¨\u003c/strong\u003eï¼Œé¡¾åæ€ä¹‰ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯å¤„ç†åŒæ­¥ã€‚å®ƒæ˜¯å¹¶å‘é”å’Œå¾ˆå¤šåŒæ­¥å·¥å…·ç±»çš„å®ç°åŸºçŸ³ï¼ˆå¦‚ \u003ccode\u003eReentrantLock\u003c/code\u003eã€\u003ccode\u003eReentrantReadWriteLock\u003c/code\u003eã€\u003ccode\u003eSemaphore\u003c/code\u003e ç­‰ï¼‰ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eAQS æä¾›äº†å¯¹ç‹¬äº«é”ä¸å…±äº«é”çš„æ”¯æŒ\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eåŸç†\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eï¼ˆ1ï¼‰æ•°æ®ç»“æ„\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003estate\u003c/code\u003e - AQS ä½¿ç”¨ä¸€ä¸ªæ•´å‹çš„ \u003ccode\u003evolatile\u003c/code\u003e å˜é‡æ¥ \u003cstrong\u003eç»´æŠ¤åŒæ­¥çŠ¶æ€\u003c/strong\u003eã€‚\u003cul\u003e\n\u003cli\u003eè¿™ä¸ªæ•´æ•°çŠ¶æ€çš„æ„ä¹‰ç”±å­ç±»æ¥èµ‹äºˆï¼Œå¦‚\u003ccode\u003eReentrantLock\u003c/code\u003e ä¸­è¯¥çŠ¶æ€å€¼è¡¨ç¤ºæ‰€æœ‰è€…çº¿ç¨‹å·²ç»é‡å¤è·å–è¯¥é”çš„æ¬¡æ•°ï¼Œ\u003ccode\u003eSemaphore\u003c/code\u003e ä¸­è¯¥çŠ¶æ€å€¼è¡¨ç¤ºå‰©ä½™çš„è®¸å¯æ•°é‡ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ehead\u003c/code\u003e å’Œ \u003ccode\u003etail\u003c/code\u003e - AQS \u003cstrong\u003eç»´æŠ¤äº†ä¸€ä¸ª \u003ccode\u003eNode\u003c/code\u003e ç±»å‹ï¼ˆAQS çš„å†…éƒ¨ç±»ï¼‰çš„åŒé“¾è¡¨æ¥å®ŒæˆåŒæ­¥çŠ¶æ€çš„ç®¡ç†\u003c/strong\u003eã€‚è¿™ä¸ªåŒé“¾è¡¨æ˜¯ä¸€ä¸ªåŒå‘çš„ FIFO é˜Ÿåˆ—ï¼Œé€šè¿‡ \u003ccode\u003ehead\u003c/code\u003e å’Œ \u003ccode\u003etail\u003c/code\u003e æŒ‡é’ˆè¿›è¡Œè®¿é—®ã€‚å½“ \u003cstrong\u003eæœ‰çº¿ç¨‹è·å–é”å¤±è´¥åï¼Œå°±è¢«æ·»åŠ åˆ°é˜Ÿåˆ—æœ«å°¾\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eï¼ˆ2ï¼‰è·å–ç‹¬å é”\u003c/p\u003e\n\u003cp\u003eAQS ä¸­ä½¿ç”¨ \u003ccode\u003eacquire(int arg)\u003c/code\u003e æ–¹æ³•è·å–ç‹¬å é”ï¼Œå…¶å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eå…ˆå°è¯•è·å–åŒæ­¥çŠ¶æ€ï¼Œå¦‚æœè·å–åŒæ­¥çŠ¶æ€æˆåŠŸï¼Œåˆ™ç»“æŸæ–¹æ³•ï¼Œç›´æ¥è¿”å›ã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœè·å–åŒæ­¥çŠ¶æ€ä¸æˆåŠŸï¼ŒAQS ä¼šä¸æ–­å°è¯•åˆ©ç”¨ CAS æ“ä½œå°†å½“å‰çº¿ç¨‹æ’å…¥ç­‰å¾…åŒæ­¥é˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ã€‚\u003c/li\u003e\n\u003cli\u003eæ¥ç€ï¼Œä¸æ–­å°è¯•ä¸ºç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹èŠ‚ç‚¹è·å–ç‹¬å é”ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eï¼ˆ3ï¼‰é‡Šæ”¾ç‹¬å é”\u003c/p\u003e\n\u003cp\u003eAQS ä¸­ä½¿ç”¨ \u003ccode\u003erelease(int arg)\u003c/code\u003e æ–¹æ³•é‡Šæ”¾ç‹¬å é”ï¼Œå…¶å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eå…ˆå°è¯•è·å–è§£é”çº¿ç¨‹çš„åŒæ­¥çŠ¶æ€ï¼Œå¦‚æœè·å–åŒæ­¥çŠ¶æ€ä¸æˆåŠŸï¼Œåˆ™ç»“æŸæ–¹æ³•ï¼Œç›´æ¥è¿”å›ã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœè·å–åŒæ­¥çŠ¶æ€æˆåŠŸï¼ŒAQS ä¼šå°è¯•å”¤é†’å½“å‰çº¿ç¨‹èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eï¼ˆ4ï¼‰è·å–å…±äº«é”\u003c/p\u003e\n\u003cp\u003eAQS ä¸­ä½¿ç”¨ \u003ccode\u003eacquireShared(int arg)\u003c/code\u003e æ–¹æ³•è·å–å…±äº«é”ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eacquireShared\u003c/code\u003e æ–¹æ³•å’Œ \u003ccode\u003eacquire\u003c/code\u003e æ–¹æ³•çš„é€»è¾‘å¾ˆç›¸ä¼¼ï¼ŒåŒºåˆ«ä»…åœ¨äºè‡ªæ—‹çš„æ¡ä»¶ä»¥åŠèŠ‚ç‚¹å‡ºé˜Ÿçš„æ“ä½œæœ‰æ‰€ä¸åŒã€‚\u003c/p\u003e\n\u003cp\u003eæˆåŠŸè·å¾—å…±äº«é”çš„æ¡ä»¶å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003etryAcquireShared(arg)\u003c/code\u003e è¿”å›å€¼å¤§äºç­‰äº 0 ï¼ˆè¿™æ„å‘³ç€å…±äº«é”çš„ permit è¿˜æ²¡æœ‰ç”¨å®Œï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003eå½“å‰èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹æ˜¯å¤´ç»“ç‚¹ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eï¼ˆ5ï¼‰é‡Šæ”¾å…±äº«é”\u003c/p\u003e\n\u003cp\u003eAQS ä¸­ä½¿ç”¨ \u003ccode\u003ereleaseShared(int arg)\u003c/code\u003e æ–¹æ³•é‡Šæ”¾å…±äº«é”ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ereleaseShared\u003c/code\u003e é¦–å…ˆä¼šå°è¯•é‡Šæ”¾åŒæ­¥çŠ¶æ€ï¼Œå¦‚æœæˆåŠŸï¼Œåˆ™è§£é”ä¸€ä¸ªæˆ–å¤šä¸ªåç»§çº¿ç¨‹èŠ‚ç‚¹ã€‚é‡Šæ”¾å…±äº«é”å’Œé‡Šæ”¾ç‹¬äº«é”æµç¨‹å¤§ä½“ç›¸ä¼¼ï¼ŒåŒºåˆ«åœ¨äºï¼š\u003c/p\u003e\n\u003cp\u003eå¯¹äºç‹¬äº«æ¨¡å¼ï¼Œå¦‚æœéœ€è¦ SIGNALï¼Œé‡Šæ”¾ä»…ç›¸å½“äºè°ƒç”¨å¤´èŠ‚ç‚¹çš„ \u003ccode\u003eunparkSuccessor\u003c/code\u003eã€‚\u003c/p\u003e\n\u003ch4 id=\"â­â­-ReentrantLock\"\u003e\u003ca href=\"#â­â­-ReentrantLock\" class=\"headerlink\" title=\"â­â­ ReentrantLock\"\u003e\u003c/a\u003eâ­â­ ReentrantLock\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eä»€ä¹ˆæ˜¯ ReentrantLockï¼Ÿ\u003c/p\u003e\n\u003cp\u003eä»€ä¹ˆæ˜¯å¯é‡å…¥é”ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eReentrantLock æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eReentrantLock åŸç†ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eä½œç”¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003eReentrantLock\u003c/code\u003e æä¾›äº†ä¸€ç»„æ— æ¡ä»¶çš„ã€å¯è½®è¯¢çš„ã€å®šæ—¶çš„ä»¥åŠå¯ä¸­æ–­çš„é”æ“ä½œ\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eReentrantLock\u003c/code\u003e çš„ç‰¹æ€§å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003eReentrantLock\u003c/code\u003e æä¾›äº†ä¸ \u003ccode\u003esynchronized\u003c/code\u003e ç›¸åŒçš„äº’æ–¥æ€§ã€å†…å­˜å¯è§æ€§å’Œå¯é‡å…¥æ€§\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eReentrantLock\u003c/code\u003e æ”¯æŒå…¬å¹³é”å’Œéå…¬å¹³é”ï¼ˆé»˜è®¤ï¼‰ä¸¤ç§æ¨¡å¼ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eReentrantLock\u003c/code\u003e å®ç°äº† \u003ccode\u003eLock\u003c/code\u003e æ¥å£ï¼Œæ”¯æŒäº† \u003ccode\u003esynchronized\u003c/code\u003e æ‰€ä¸å…·å¤‡çš„\u003cstrong\u003eçµæ´»æ€§\u003c/strong\u003eã€‚\u003cul\u003e\n\u003cli\u003e\u003ccode\u003esynchronized\u003c/code\u003e æ— æ³•ä¸­æ–­ä¸€ä¸ªæ­£åœ¨ç­‰å¾…è·å–é”çš„çº¿ç¨‹\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003esynchronized\u003c/code\u003e æ— æ³•åœ¨è¯·æ±‚è·å–ä¸€ä¸ªé”æ—¶æ— ä¼‘æ­¢åœ°ç­‰å¾…\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eåŸç†\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eReentrantLock\u003c/code\u003e åŸºäºå…¶å†…éƒ¨ç±» \u003ccode\u003eReentrantLock.Sync\u003c/code\u003e å®ç°ï¼Œ\u003ccode\u003eSync\u003c/code\u003e ç»§æ‰¿è‡ª AQSã€‚å®ƒæœ‰ä¸¤ä¸ªå­ç±»ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eReentrantLock.FairSync\u003c/code\u003e - å…¬å¹³é”ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eReentrantLock.NonfairSync\u003c/code\u003e - éå…¬å¹³é”ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæœ¬è´¨ä¸Šï¼Œå°±æ˜¯åŸºäº AQS å®ç°ã€‚\u003c/p\u003e\n\u003ch4 id=\"â­-ReentrantReadWriteLock\"\u003e\u003ca href=\"#â­-ReentrantReadWriteLock\" class=\"headerlink\" title=\"â­ ReentrantReadWriteLock\"\u003e\u003c/a\u003eâ­ ReentrantReadWriteLock\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eReentrantReadWriteLock æ˜¯ä»€ä¹ˆï¼Ÿ\u003c/p\u003e\n\u003cp\u003eReentrantReadWriteLock çš„ä½œç”¨ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eReentrantReadWriteLock çš„åŸç†ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eä½œç”¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eReentrantReadWriteLock\u003c/code\u003e æ˜¯ä¸€ä¸ª\u003cstrong\u003eå¯é‡å…¥çš„è¯»å†™é”\u003c/strong\u003eã€‚**\u003ccode\u003eReentrantReadWriteLock\u003c/code\u003e ç»´æŠ¤äº†ä¸€å¯¹è¯»å†™é”ï¼Œå°†è¯»å†™é”åˆ†å¼€ï¼Œæœ‰åˆ©äºæé«˜å¹¶å‘æ•ˆç‡**ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eåŸç†\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eReentrantReadWriteLock\u003c/code\u003e æœ¬è´¨ä¸Šä¹Ÿæ˜¯åŸºäº AQS å®ç°ã€‚æœ‰ä¸‰ä¸ªæ ¸å¿ƒå­—æ®µï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003esync\u003c/code\u003e - å†…éƒ¨ç±» \u003ccode\u003eReentrantReadWriteLock.Sync\u003c/code\u003e å¯¹è±¡ã€‚ä¸ \u003ccode\u003eReentrantLock\u003c/code\u003e ç±»ä¼¼ï¼Œå®ƒæœ‰ä¸¤ä¸ªå­ç±»ï¼š\u003ccode\u003eReentrantReadWriteLock.FairSync\u003c/code\u003e å’Œ \u003ccode\u003eReentrantReadWriteLock.NonfairSync\u003c/code\u003e ï¼Œåˆ†åˆ«è¡¨ç¤ºå…¬å¹³é”å’Œéå…¬å¹³é”çš„å®ç°ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ereaderLock\u003c/code\u003e - å†…éƒ¨ç±» \u003ccode\u003eReentrantReadWriteLock.ReadLock\u003c/code\u003e å¯¹è±¡ï¼Œè¿™æ˜¯ä¸€æŠŠè¯»é”ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ewriterLock\u003c/code\u003e - å†…éƒ¨ç±» \u003ccode\u003eReentrantReadWriteLock.WriteLock\u003c/code\u003e å¯¹è±¡ï¼Œè¿™æ˜¯ä¸€æŠŠå†™é”ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"â­-Condition\"\u003e\u003ca href=\"#â­-Condition\" class=\"headerlink\" title=\"â­ Condition\"\u003e\u003c/a\u003eâ­ Condition\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eCondition æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eä½¿ç”¨ Lock çš„çº¿ç¨‹ï¼Œå½¼æ­¤å¦‚ä½•é€šä¿¡ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eä½œç”¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eå¯ä»¥ç†è§£ä¸ºï¼Œä»€ä¹ˆæ ·çš„é”é…ä»€ä¹ˆæ ·çš„é’¥åŒ™ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eå†…ç½®é”ï¼ˆ\u003ccode\u003esynchronized\u003c/code\u003eï¼‰é…åˆå†…ç½®æ¡ä»¶é˜Ÿåˆ—ï¼ˆ\u003ccode\u003ewait\u003c/code\u003eã€\u003ccode\u003enotify\u003c/code\u003eã€\u003ccode\u003enotifyAll\u003c/code\u003e ï¼‰ï¼Œæ˜¾å¼é”ï¼ˆ\u003ccode\u003eLock\u003c/code\u003eï¼‰é…åˆæ˜¾å¼æ¡ä»¶é˜Ÿåˆ—ï¼ˆ\u003ccode\u003eCondition\u003c/code\u003e ï¼‰\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003ch4 id=\"â­â­-æ­»é”\"\u003e\u003ca href=\"#â­â­-æ­»é”\" class=\"headerlink\" title=\"â­â­ æ­»é”\"\u003e\u003c/a\u003eâ­â­ æ­»é”\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eå¦‚ä½•é¿å…æ­»é”ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003eé¿å…ä¸€ä¸ªçº¿ç¨‹åŒæ—¶è·å–å¤šä¸ªé”\u003c/li\u003e\n\u003cli\u003eé¿å…ä¸€ä¸ªçº¿ç¨‹åœ¨é”å†…åŒæ—¶å ç”¨å¤šä¸ªèµ„æºï¼Œå°½é‡ä¿è¯æ¯ä¸ªé”åªå ç”¨ä¸€ä¸ªèµ„æº\u003c/li\u003e\n\u003cli\u003eå°è¯•ä½¿ç”¨å®šæ—¶é” lock.tryLock(timeout)ï¼Œé¿å…é”ä¸€ç›´ä¸èƒ½é‡Šæ”¾\u003c/li\u003e\n\u003cli\u003eå¯¹äºæ•°æ®åº“é”ï¼ŒåŠ é”å’Œè§£é”å¿…é¡»åœ¨ä¸€ä¸ªæ•°æ®åº“è¿æ¥ä¸­é‡Œï¼Œå¦åˆ™ä¼šå‡ºç°è§£é”å¤±è´¥çš„æƒ…å†µã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"åŸå­å˜é‡ç±»\"\u003e\u003ca href=\"#åŸå­å˜é‡ç±»\" class=\"headerlink\" title=\"åŸå­å˜é‡ç±»\"\u003e\u003c/a\u003eåŸå­å˜é‡ç±»\u003c/h3\u003e\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ å‚è€ƒé˜…è¯»ï¼š\u003ca href=\"https://dunwu.github.io/waterdrop/pages/25f78a/\"\u003eJava åŸå­ç±»\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"â­-åŸå­ç±»ç®€ä»‹\"\u003e\u003ca href=\"#â­-åŸå­ç±»ç®€ä»‹\" class=\"headerlink\" title=\"â­ åŸå­ç±»ç®€ä»‹\"\u003e\u003c/a\u003eâ­ åŸå­ç±»ç®€ä»‹\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eä¸ºä»€ä¹ˆè¦ç”¨åŸå­ç±»ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eç”¨è¿‡å“ªäº›åŸå­ç±»ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eä½œç”¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eå¸¸è§„çš„é”ï¼ˆ\u003ccode\u003eLock\u003c/code\u003eã€\u003ccode\u003esychronized\u003c/code\u003eï¼‰ç”±äºæ˜¯é˜»å¡å¼çš„ï¼ŒåŠ¿å¿…å½±å“å¹¶å‘ååé‡ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003evolatile\u003c/code\u003e å·ç§°è½»é‡çº§çš„é”ï¼Œä½†ä¸èƒ½ä¿è¯åŸå­æ€§ã€‚\u003c/p\u003e\n\u003cp\u003eä¸ºäº†å…¼é¡¾åŸå­æ€§å’Œé”çš„æ€§èƒ½é—®é¢˜ï¼Œæ‰€ä»¥å¼•å…¥äº†åŸå­ç±»ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eç±»å‹\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eåŸå­å˜é‡ç±»å¯ä»¥åˆ†ä¸º 4 ç»„ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåŸºæœ¬ç±»å‹\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eAtomicBoolean\u003c/code\u003e - å¸ƒå°”ç±»å‹åŸå­ç±»\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eAtomicInteger\u003c/code\u003e - æ•´å‹åŸå­ç±»\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eAtomicLong\u003c/code\u003e - é•¿æ•´å‹åŸå­ç±»\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eå¼•ç”¨ç±»å‹\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eAtomicReference\u003c/code\u003e - å¼•ç”¨ç±»å‹åŸå­ç±»\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eAtomicMarkableReference\u003c/code\u003e - å¸¦æœ‰æ ‡è®°ä½çš„å¼•ç”¨ç±»å‹åŸå­ç±»\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eAtomicStampedReference\u003c/code\u003e - å¸¦æœ‰ç‰ˆæœ¬å·çš„å¼•ç”¨ç±»å‹åŸå­ç±»\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eæ•°ç»„ç±»å‹\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eAtomicIntegerArray\u003c/code\u003e - æ•´å½¢æ•°ç»„åŸå­ç±»\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eAtomicLongArray\u003c/code\u003e - é•¿æ•´å‹æ•°ç»„åŸå­ç±»\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eAtomicReferenceArray\u003c/code\u003e - å¼•ç”¨ç±»å‹æ•°ç»„åŸå­ç±»\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eå±æ€§æ›´æ–°å™¨ç±»å‹\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eAtomicIntegerFieldUpdater\u003c/code\u003e - æ•´å‹å­—æ®µçš„åŸå­æ›´æ–°å™¨ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eAtomicLongFieldUpdater\u003c/code\u003e - é•¿æ•´å‹å­—æ®µçš„åŸå­æ›´æ–°å™¨ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eAtomicReferenceFieldUpdater\u003c/code\u003e - åŸå­æ›´æ–°å¼•ç”¨ç±»å‹é‡Œçš„å­—æ®µã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"â­-åŸå­ç±»çš„åŸç†\"\u003e\u003ca href=\"#â­-åŸå­ç±»çš„åŸç†\" class=\"headerlink\" title=\"â­ åŸå­ç±»çš„åŸç†\"\u003e\u003c/a\u003eâ­ åŸå­ç±»çš„åŸç†\u003c/h4\u003e\u003col\u003e\n\u003cli\u003eå¤„ç†å™¨å®ç°åŸå­æ“ä½œï¼šä½¿ç”¨æ€»çº¿é”ä¿è¯åŸå­æ€§ï¼Œä½¿ç”¨ç¼“å­˜é”ä¿è¯åŸå­æ€§ï¼ˆä¿®æ”¹å†…å­˜åœ°å€ï¼Œç¼“å­˜ä¸€è‡´æ€§æœºåˆ¶ï¼šé˜»æ­¢åŒæ—¶ä¿®æ”¹ç”± 2 ä¸ªä»¥ä¸Šçš„å¤„ç†å™¨ç¼“å­˜çš„å†…å­˜åŒºåŸŸæ•°æ®ï¼‰\u003c/li\u003e\n\u003cli\u003eJAVA å®ç°åŸå­æ“ä½œï¼šå¾ªç¯ä½¿ç”¨ CAS ï¼ˆè‡ªæ—‹ CASï¼‰å®ç°åŸå­æ“ä½œ\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"å¹¶å‘å·¥å…·ç±»\"\u003e\u003ca href=\"#å¹¶å‘å·¥å…·ç±»\" class=\"headerlink\" title=\"å¹¶å‘å·¥å…·ç±»\"\u003e\u003c/a\u003eå¹¶å‘å·¥å…·ç±»\u003c/h3\u003e\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ å‚è€ƒé˜…è¯»ï¼š\u003ca href=\"https://dunwu.github.io/waterdrop/pages/02d274/\"\u003eJava å¹¶å‘å·¥å…·ç±»\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"â­-CountDownLatch\"\u003e\u003ca href=\"#â­-CountDownLatch\" class=\"headerlink\" title=\"â­ CountDownLatch\"\u003e\u003c/a\u003eâ­ CountDownLatch\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eCountDownLatch ä½œç”¨ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eCountDownLatch åŸç†ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eä½œç”¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eå­—é¢æ„æ€ä¸º \u003cstrong\u003eé€’å‡è®¡æ•°é”\u003c/strong\u003eã€‚ç”¨äºæ§åˆ¶ä¸€ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹ç­‰å¾…å¤šä¸ªçº¿ç¨‹ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eCountDownLatch\u003c/code\u003e ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ countï¼Œè¡¨ç¤ºéœ€è¦ç­‰å¾…çš„äº‹ä»¶æ•°é‡ã€‚\u003ccode\u003ecountDown\u003c/code\u003e æ–¹æ³•é€’å‡è®¡æ•°å™¨ï¼Œè¡¨ç¤ºæœ‰ä¸€ä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿã€‚è°ƒç”¨ \u003ccode\u003eawait\u003c/code\u003e æ–¹æ³•çš„çº¿ç¨‹ä¼šä¸€ç›´é˜»å¡ç›´åˆ°è®¡æ•°å™¨ä¸ºé›¶ï¼Œæˆ–è€…ç­‰å¾…ä¸­çš„çº¿ç¨‹ä¸­æ–­ï¼Œæˆ–è€…ç­‰å¾…è¶…æ—¶ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/cs/java/javacore/concurrent/CountDownLatch.png\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eåŸç†\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eCountDownLatch\u003c/code\u003e æ˜¯åŸºäº AQS(\u003ccode\u003eAbstractQueuedSynchronizer\u003c/code\u003e) å®ç°çš„ã€‚\u003c/p\u003e\n\u003ch4 id=\"â­-CyclicBarrier\"\u003e\u003ca href=\"#â­-CyclicBarrier\" class=\"headerlink\" title=\"â­ CyclicBarrier\"\u003e\u003c/a\u003eâ­ CyclicBarrier\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eCyclicBarrier æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eCyclicBarrier çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\u003c/p\u003e\n\u003cp\u003eCyclicBarrier å’Œ CountDownLatch æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eä½œç”¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eå­—é¢æ„æ€æ˜¯ \u003cstrong\u003eå¾ªç¯æ …æ \u003c/strong\u003eã€‚**\u003ccode\u003eCyclicBarrier\u003c/code\u003e å¯ä»¥è®©ä¸€ç»„çº¿ç¨‹ç­‰å¾…è‡³æŸä¸ªçŠ¶æ€ï¼ˆéµå¾ªå­—é¢æ„æ€ï¼Œä¸å¦¨ç§°è¿™ä¸ªçŠ¶æ€ä¸ºæ …æ ï¼‰ä¹‹åå†å…¨éƒ¨åŒæ—¶æ‰§è¡Œ**ã€‚ä¹‹æ‰€ä»¥å«å¾ªç¯æ …æ æ˜¯å› ä¸ºï¼šå½“æ‰€æœ‰ç­‰å¾…çº¿ç¨‹éƒ½è¢«é‡Šæ”¾ä»¥åï¼Œ\u003ccode\u003eCyclicBarrier\u003c/code\u003e å¯ä»¥è¢«é‡ç”¨ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eCyclicBarrier\u003c/code\u003e ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ countã€‚æ¯æ¬¡æ‰§è¡Œ \u003ccode\u003eawait\u003c/code\u003e æ–¹æ³•ä¹‹åï¼Œcount åŠ  1ï¼Œç›´åˆ°è®¡æ•°å™¨çš„å€¼å’Œè®¾ç½®çš„å€¼ç›¸ç­‰ï¼Œç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹æ‰ä¼šç»§ç»­æ‰§è¡Œã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/cs/java/javacore/concurrent/CyclicBarrier.png\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eåŸç†\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eCyclicBarrier\u003c/code\u003e æ˜¯åŸºäº \u003ccode\u003eReentrantLock\u003c/code\u003e å’Œ \u003ccode\u003eCondition\u003c/code\u003e å®ç°çš„ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eåŒºåˆ«\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eCyclicBarrier\u003c/code\u003e å’Œ \u003ccode\u003eCountDownLatch\u003c/code\u003e éƒ½å¯ä»¥ç”¨æ¥è®©ä¸€ç»„çº¿ç¨‹ç­‰å¾…å…¶å®ƒçº¿ç¨‹ã€‚ä¸ \u003ccode\u003eCyclicBarrier\u003c/code\u003e ä¸åŒçš„æ˜¯ï¼Œ\u003ccode\u003eCountdownLatch\u003c/code\u003e ä¸èƒ½é‡ç”¨ã€‚\u003c/p\u003e\n\u003ch4 id=\"â­-Semaphore\"\u003e\u003ca href=\"#â­-Semaphore\" class=\"headerlink\" title=\"â­ Semaphore\"\u003e\u003c/a\u003eâ­ Semaphore\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eSemaphore ä½œç”¨ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eä½œç”¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eå­—é¢æ„æ€ä¸º \u003cstrong\u003eä¿¡å·é‡\u003c/strong\u003eã€‚\u003ccode\u003eSemaphore\u003c/code\u003e ç”¨æ¥æ§åˆ¶åŒæ—¶è®¿é—®æŸä¸ªç‰¹å®šèµ„æºçš„æ“ä½œæ•°é‡ï¼Œæˆ–è€…åŒæ—¶æ‰§è¡ŒæŸä¸ªæŒ‡å®šæ“ä½œçš„æ•°é‡ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eSemaphore\u003c/code\u003e ç®¡ç†ç€ä¸€ç»„è™šæ‹Ÿçš„è®¸å¯ï¼ˆpermitï¼‰ï¼Œpermit çš„åˆå§‹æ•°é‡å¯é€šè¿‡æ„é€ æ–¹æ³•æ¥æŒ‡å®šã€‚æ¯æ¬¡æ‰§è¡Œ \u003ccode\u003eacquire\u003c/code\u003e æ–¹æ³•å¯ä»¥è·å–ä¸€ä¸ª permitï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ï¼›è€Œ \u003ccode\u003erelease\u003c/code\u003e æ–¹æ³•å¯ä»¥é‡Šæ”¾ä¸€ä¸ª permitã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eSemaphore\u003c/code\u003e å¯ä»¥ç”¨äºå®ç°èµ„æºæ± ï¼Œå¦‚æ•°æ®åº“è¿æ¥æ± ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSemaphore\u003c/code\u003e å¯ä»¥ç”¨äºå°†ä»»ä½•ä¸€ç§å®¹å™¨å˜æˆæœ‰ç•Œé˜»å¡å®¹å™¨ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/cs/java/javacore/concurrent/Semaphore.png\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003ch3 id=\"çº¿ç¨‹æ± \"\u003e\u003ca href=\"#çº¿ç¨‹æ± \" class=\"headerlink\" title=\"çº¿ç¨‹æ± \"\u003e\u003c/a\u003eçº¿ç¨‹æ± \u003c/h3\u003e\u003cblockquote\u003e\n\u003cp\u003eğŸ‘‰ å‚è€ƒé˜…è¯»ï¼š\u003ca href=\"https://dunwu.github.io/waterdrop/pages/ad9680/\"\u003eJava çº¿ç¨‹æ± \u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"â­â­-ThreadPoolExecutor\"\u003e\u003ca href=\"#â­â­-ThreadPoolExecutor\" class=\"headerlink\" title=\"â­â­ ThreadPoolExecutor\"\u003e\u003c/a\u003eâ­â­ ThreadPoolExecutor\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003eThreadPoolExecutor\u003c/code\u003e æœ‰å“ªäº›å‚æ•°ï¼Œå„è‡ªæœ‰ä»€ä¹ˆç”¨ï¼Ÿ\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eThreadPoolExecutor\u003c/code\u003e å·¥ä½œåŸç†ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eåŸç†\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/cs/java/javacore/concurrent/java-thread-pool_1.png\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eå‚æ•°\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ejava.uitl.concurrent.ThreadPoolExecutor\u003c/code\u003e ç±»æ˜¯ \u003ccode\u003eExecutor\u003c/code\u003e æ¡†æ¶ä¸­æœ€æ ¸å¿ƒçš„ä¸€ä¸ªç±»ã€‚\u003c/p\u003e\n\u003cp\u003eThreadPoolExecutor æœ‰å››ä¸ªæ„é€ æ–¹æ³•ï¼Œå‰ä¸‰ä¸ªéƒ½æ˜¯åŸºäºç¬¬å››ä¸ªå®ç°ã€‚ç¬¬å››ä¸ªæ„é€ æ–¹æ³•å®šä¹‰å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"title function_\"\u003eThreadPoolExecutor\u003c/span\u003e\u003cspan class=\"params\"\u003e(\u003cspan class=\"type\"\u003eint\u003c/span\u003e corePoolSize,\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"params\"\u003e                          \u003cspan class=\"type\"\u003eint\u003c/span\u003e maximumPoolSize,\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"params\"\u003e                          \u003cspan class=\"type\"\u003elong\u003c/span\u003e keepAliveTime,\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"params\"\u003e                          TimeUnit unit,\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"params\"\u003e                          BlockingQueue\u0026lt;Runnable\u0026gt; workQueue,\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"params\"\u003e                          ThreadFactory threadFactory,\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"params\"\u003e                          RejectedExecutionHandler handler)\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003eå‚æ•°è¯´æ˜ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ecorePoolSize\u003c/code\u003e - \u003cstrong\u003eæ ¸å¿ƒçº¿ç¨‹æ•°é‡\u003c/strong\u003eã€‚å½“æœ‰æ–°ä»»åŠ¡é€šè¿‡ \u003ccode\u003eexecute\u003c/code\u003e æ–¹æ³•æäº¤æ—¶ ï¼Œçº¿ç¨‹æ± ä¼šæ‰§è¡Œä»¥ä¸‹åˆ¤æ–­ï¼š\u003cul\u003e\n\u003cli\u003eå¦‚æœè¿è¡Œçš„çº¿ç¨‹æ•°å°‘äº \u003ccode\u003ecorePoolSize\u003c/code\u003eï¼Œåˆ™åˆ›å»ºæ–°çº¿ç¨‹æ¥å¤„ç†ä»»åŠ¡ï¼Œå³ä½¿çº¿ç¨‹æ± ä¸­çš„å…¶ä»–çº¿ç¨‹æ˜¯ç©ºé—²çš„ã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡å¤§äºç­‰äº \u003ccode\u003ecorePoolSize\u003c/code\u003e ä¸”å°äº \u003ccode\u003emaximumPoolSize\u003c/code\u003eï¼Œåˆ™åªæœ‰å½“ \u003ccode\u003eworkQueue\u003c/code\u003e æ»¡æ—¶æ‰åˆ›å»ºæ–°çš„çº¿ç¨‹å»å¤„ç†ä»»åŠ¡ï¼›\u003c/li\u003e\n\u003cli\u003eå¦‚æœè®¾ç½®çš„ \u003ccode\u003ecorePoolSize\u003c/code\u003e å’Œ \u003ccode\u003emaximumPoolSize\u003c/code\u003e ç›¸åŒï¼Œåˆ™åˆ›å»ºçš„çº¿ç¨‹æ± çš„å¤§å°æ˜¯å›ºå®šçš„ã€‚è¿™æ—¶å¦‚æœæœ‰æ–°ä»»åŠ¡æäº¤ï¼Œè‹¥ \u003ccode\u003eworkQueue\u003c/code\u003e æœªæ»¡ï¼Œåˆ™å°†è¯·æ±‚æ”¾å…¥ \u003ccode\u003eworkQueue\u003c/code\u003e ä¸­ï¼Œç­‰å¾…æœ‰ç©ºé—²çš„çº¿ç¨‹å»ä» \u003ccode\u003eworkQueue\u003c/code\u003e ä¸­å–ä»»åŠ¡å¹¶å¤„ç†ï¼›\u003c/li\u003e\n\u003cli\u003eå¦‚æœè¿è¡Œçš„çº¿ç¨‹æ•°é‡å¤§äºç­‰äº \u003ccode\u003emaximumPoolSize\u003c/code\u003eï¼Œè¿™æ—¶å¦‚æœ \u003ccode\u003eworkQueue\u003c/code\u003e å·²ç»æ»¡äº†ï¼Œåˆ™ä½¿ç”¨ \u003ccode\u003ehandler\u003c/code\u003e æ‰€æŒ‡å®šçš„ç­–ç•¥æ¥å¤„ç†ä»»åŠ¡ï¼›\u003c/li\u003e\n\u003cli\u003eæ‰€ä»¥ï¼Œä»»åŠ¡æäº¤æ—¶ï¼Œåˆ¤æ–­çš„é¡ºåºä¸º \u003ccode\u003ecorePoolSize\u003c/code\u003e =\u0026gt; \u003ccode\u003eworkQueue\u003c/code\u003e =\u0026gt; \u003ccode\u003emaximumPoolSize\u003c/code\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emaximumPoolSize\u003c/code\u003e - \u003cstrong\u003eæœ€å¤§çº¿ç¨‹æ•°é‡\u003c/strong\u003eã€‚\u003cul\u003e\n\u003cli\u003eå¦‚æœé˜Ÿåˆ—æ»¡äº†ï¼Œå¹¶ä¸”å·²åˆ›å»ºçš„çº¿ç¨‹æ•°å°äºæœ€å¤§çº¿ç¨‹æ•°ï¼Œåˆ™çº¿ç¨‹æ± ä¼šå†åˆ›å»ºæ–°çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ã€‚\u003c/li\u003e\n\u003cli\u003eå€¼å¾—æ³¨æ„çš„æ˜¯ï¼šå¦‚æœä½¿ç”¨äº†æ— ç•Œçš„ä»»åŠ¡é˜Ÿåˆ—è¿™ä¸ªå‚æ•°å°±æ²¡ä»€ä¹ˆæ•ˆæœã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ekeepAliveTime\u003c/code\u003eï¼š\u003cstrong\u003eçº¿ç¨‹ä¿æŒæ´»åŠ¨çš„æ—¶é—´\u003c/strong\u003eã€‚\u003cul\u003e\n\u003cli\u003eå½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡å¤§äº \u003ccode\u003ecorePoolSize\u003c/code\u003e çš„æ—¶å€™ï¼Œå¦‚æœè¿™æ—¶æ²¡æœ‰æ–°çš„ä»»åŠ¡æäº¤ï¼Œæ ¸å¿ƒçº¿ç¨‹å¤–çš„çº¿ç¨‹ä¸ä¼šç«‹å³é”€æ¯ï¼Œè€Œæ˜¯ä¼šç­‰å¾…ï¼Œç›´åˆ°ç­‰å¾…çš„æ—¶é—´è¶…è¿‡äº† \u003ccode\u003ekeepAliveTime\u003c/code\u003eã€‚\u003c/li\u003e\n\u003cli\u003eæ‰€ä»¥ï¼Œå¦‚æœä»»åŠ¡å¾ˆå¤šï¼Œå¹¶ä¸”æ¯ä¸ªä»»åŠ¡æ‰§è¡Œçš„æ—¶é—´æ¯”è¾ƒçŸ­ï¼Œå¯ä»¥è°ƒå¤§è¿™ä¸ªæ—¶é—´ï¼Œæé«˜çº¿ç¨‹çš„åˆ©ç”¨ç‡ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eunit\u003c/code\u003e - \u003cstrong\u003e\u003ccode\u003ekeepAliveTime\u003c/code\u003e çš„æ—¶é—´å•ä½\u003c/strong\u003eã€‚æœ‰ 7 ç§å–å€¼ã€‚å¯é€‰çš„å•ä½æœ‰å¤©ï¼ˆDAYSï¼‰ï¼Œå°æ—¶ï¼ˆHOURSï¼‰ï¼Œåˆ†é’Ÿï¼ˆMINUTESï¼‰ï¼Œæ¯«ç§’(MILLISECONDS)ï¼Œå¾®ç§’(MICROSECONDS, åƒåˆ†ä¹‹ä¸€æ¯«ç§’)å’Œæ¯«å¾®ç§’(NANOSECONDS, åƒåˆ†ä¹‹ä¸€å¾®ç§’)ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eworkQueue\u003c/code\u003e - \u003cstrong\u003eç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡é˜Ÿåˆ—\u003c/strong\u003eã€‚ç”¨äºä¿å­˜ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡çš„é˜»å¡é˜Ÿåˆ—ã€‚ å¯ä»¥é€‰æ‹©ä»¥ä¸‹å‡ ä¸ªé˜»å¡é˜Ÿåˆ—ã€‚\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eArrayBlockingQueue\u003c/code\u003e - \u003cstrong\u003eæœ‰ç•Œé˜»å¡é˜Ÿåˆ—\u003c/strong\u003eã€‚\u003cul\u003e\n\u003cli\u003eæ­¤é˜Ÿåˆ—æ˜¯\u003cstrong\u003eåŸºäºæ•°ç»„çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼ˆFIFOï¼‰\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003eæ­¤é˜Ÿåˆ—åˆ›å»ºæ—¶å¿…é¡»æŒ‡å®šå¤§å°ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eLinkedBlockingQueue\u003c/code\u003e - \u003cstrong\u003eæ— ç•Œé˜»å¡é˜Ÿåˆ—\u003c/strong\u003eã€‚\u003cul\u003e\n\u003cli\u003eæ­¤é˜Ÿåˆ—æ˜¯\u003cstrong\u003eåŸºäºé“¾è¡¨çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼ˆFIFOï¼‰\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœåˆ›å»ºæ—¶æ²¡æœ‰æŒ‡å®šæ­¤é˜Ÿåˆ—å¤§å°ï¼Œåˆ™é»˜è®¤ä¸º \u003ccode\u003eInteger.MAX_VALUE\u003c/code\u003eã€‚\u003c/li\u003e\n\u003cli\u003eååé‡é€šå¸¸è¦é«˜äº \u003ccode\u003eArrayBlockingQueue\u003c/code\u003eã€‚\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨ \u003ccode\u003eLinkedBlockingQueue\u003c/code\u003e æ„å‘³ç€ï¼š \u003ccode\u003emaximumPoolSize\u003c/code\u003e å°†ä¸èµ·ä½œç”¨ï¼Œçº¿ç¨‹æ± èƒ½åˆ›å»ºçš„æœ€å¤§çº¿ç¨‹æ•°ä¸º \u003ccode\u003ecorePoolSize\u003c/code\u003eï¼Œå› ä¸ºä»»åŠ¡ç­‰å¾…é˜Ÿåˆ—æ˜¯æ— ç•Œé˜Ÿåˆ—ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eExecutors.newFixedThreadPool\u003c/code\u003e ä½¿ç”¨äº†è¿™ä¸ªé˜Ÿåˆ—ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSynchronousQueue\u003c/code\u003e - \u003cstrong\u003eä¸ä¼šä¿å­˜æäº¤çš„ä»»åŠ¡ï¼Œè€Œæ˜¯å°†ç›´æ¥æ–°å»ºä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œæ–°æ¥çš„ä»»åŠ¡\u003c/strong\u003eã€‚\u003cul\u003e\n\u003cli\u003eæ¯ä¸ªæ’å…¥æ“ä½œå¿…é¡»ç­‰åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ç§»é™¤æ“ä½œï¼Œå¦åˆ™æ’å…¥æ“ä½œä¸€ç›´å¤„äºé˜»å¡çŠ¶æ€ã€‚\u003c/li\u003e\n\u003cli\u003eååé‡é€šå¸¸è¦é«˜äº \u003ccode\u003eLinkedBlockingQueue\u003c/code\u003eã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eExecutors.newCachedThreadPool\u003c/code\u003e ä½¿ç”¨äº†è¿™ä¸ªé˜Ÿåˆ—ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ePriorityBlockingQueue\u003c/code\u003e - \u003cstrong\u003eå…·æœ‰ä¼˜å…ˆçº§çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ethreadFactory\u003c/code\u003e - \u003cstrong\u003eçº¿ç¨‹å·¥å‚\u003c/strong\u003eã€‚å¯ä»¥é€šè¿‡çº¿ç¨‹å·¥å‚ç»™æ¯ä¸ªåˆ›å»ºå‡ºæ¥çš„çº¿ç¨‹è®¾ç½®æ›´æœ‰æ„ä¹‰çš„åå­—ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ehandler\u003c/code\u003e - \u003cstrong\u003eé¥±å’Œç­–ç•¥\u003c/strong\u003eã€‚å®ƒæ˜¯ \u003ccode\u003eRejectedExecutionHandler\u003c/code\u003e ç±»å‹çš„å˜é‡ã€‚å½“é˜Ÿåˆ—å’Œçº¿ç¨‹æ± éƒ½æ»¡äº†ï¼Œè¯´æ˜çº¿ç¨‹æ± å¤„äºé¥±å’ŒçŠ¶æ€ï¼Œé‚£ä¹ˆå¿…é¡»é‡‡å–ä¸€ç§ç­–ç•¥å¤„ç†æäº¤çš„æ–°ä»»åŠ¡ã€‚çº¿ç¨‹æ± æ”¯æŒä»¥ä¸‹ç­–ç•¥ï¼š\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eAbortPolicy\u003c/code\u003e - ä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚è¿™ä¹Ÿæ˜¯é»˜è®¤ç­–ç•¥ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eDiscardPolicy\u003c/code\u003e - ä¸¢å¼ƒä»»åŠ¡ï¼Œä½†ä¸æŠ›å‡ºå¼‚å¸¸ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eDiscardOldestPolicy\u003c/code\u003e - ä¸¢å¼ƒé˜Ÿåˆ—æœ€å‰é¢çš„ä»»åŠ¡ï¼Œç„¶åé‡æ–°å°è¯•æ‰§è¡Œä»»åŠ¡ï¼ˆé‡å¤æ­¤è¿‡ç¨‹ï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eCallerRunsPolicy\u003c/code\u003e - åªç”¨è°ƒç”¨è€…æ‰€åœ¨çš„çº¿ç¨‹æ¥è¿è¡Œä»»åŠ¡ã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœä»¥ä¸Šç­–ç•¥éƒ½ä¸èƒ½æ»¡è¶³éœ€è¦ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®ç° \u003ccode\u003eRejectedExecutionHandler\u003c/code\u003e æ¥å£æ¥å®šåˆ¶å¤„ç†ç­–ç•¥ã€‚å¦‚è®°å½•æ—¥å¿—æˆ–æŒä¹…åŒ–ä¸èƒ½å¤„ç†çš„ä»»åŠ¡ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"â­-Executors\"\u003e\u003ca href=\"#â­-Executors\" class=\"headerlink\" title=\"â­ Executors\"\u003e\u003c/a\u003eâ­ Executors\u003c/h4\u003e\u003cblockquote\u003e\n\u003cp\u003eExecutors æä¾›äº†å“ªäº›å†…ç½®çš„çº¿ç¨‹æ± ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eè¿™äº›çº¿ç¨‹æ± å„è‡ªæœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿé€‚åˆç”¨äºä»€ä¹ˆåœºæ™¯ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eExecutors ä¸º Executorï¼ŒExecutorServiceï¼ŒScheduledExecutorServiceï¼ŒThreadFactory å’Œ \u003ccode\u003eCallable\u003c/code\u003e ç±»æä¾›äº†ä¸€äº›å·¥å…·æ–¹æ³•ã€‚\u003c/p\u003e\n\u003cp\u003eï¼ˆ1ï¼‰newSingleThreadExecutor\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eåˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹çš„çº¿ç¨‹æ± \u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eåªä¼šåˆ›å»ºå”¯ä¸€çš„å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œä¿è¯æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§æŒ‡å®šé¡ºåº(FIFO, LIFO, ä¼˜å…ˆçº§)æ‰§è¡Œã€‚ \u003cstrong\u003eå¦‚æœè¿™ä¸ªå”¯ä¸€çš„çº¿ç¨‹å› ä¸ºå¼‚å¸¸ç»“æŸï¼Œé‚£ä¹ˆä¼šæœ‰ä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥æ›¿ä»£å®ƒ\u003c/strong\u003e ã€‚\u003c/p\u003e\n\u003cp\u003eå•å·¥ä½œçº¿ç¨‹æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ï¼š\u003cstrong\u003eå¯ä¿è¯é¡ºåºåœ°æ‰§è¡Œå„ä¸ªä»»åŠ¡\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eï¼ˆ2ï¼‰newFixedThreadPool\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eåˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± \u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eæ¯æ¬¡æäº¤ä¸€ä¸ªä»»åŠ¡å°±ä¼šæ–°åˆ›å»ºä¸€ä¸ªå·¥ä½œçº¿ç¨‹ï¼Œå¦‚æœå·¥ä½œçº¿ç¨‹æ•°é‡è¾¾åˆ°çº¿ç¨‹æ± æœ€å¤§çº¿ç¨‹æ•°ï¼Œåˆ™å°†æäº¤çš„ä»»åŠ¡å­˜å…¥åˆ°é˜»å¡é˜Ÿåˆ—ä¸­\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eFixedThreadPool\u003c/code\u003e æ˜¯ä¸€ä¸ªå…¸å‹ä¸”ä¼˜ç§€çš„çº¿ç¨‹æ± ï¼Œå®ƒå…·æœ‰çº¿ç¨‹æ± æé«˜ç¨‹åºæ•ˆç‡å’ŒèŠ‚çœåˆ›å»ºçº¿ç¨‹æ—¶æ‰€è€—çš„å¼€é”€çš„ä¼˜ç‚¹ã€‚ä½†æ˜¯ï¼Œåœ¨çº¿ç¨‹æ± ç©ºé—²æ—¶ï¼Œå³çº¿ç¨‹æ± ä¸­æ²¡æœ‰å¯è¿è¡Œä»»åŠ¡æ—¶ï¼Œå®ƒä¸ä¼šé‡Šæ”¾å·¥ä½œçº¿ç¨‹ï¼Œè¿˜ä¼šå ç”¨ä¸€å®šçš„ç³»ç»Ÿèµ„æºã€‚\u003c/p\u003e\n\u003cp\u003eï¼ˆ3ï¼‰newCachedThreadPool\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eåˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çš„çº¿ç¨‹æ± \u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå¦‚æœçº¿ç¨‹æ± å¤§å°è¶…è¿‡å¤„ç†ä»»åŠ¡æ‰€éœ€è¦çš„çº¿ç¨‹æ•°ï¼Œå°±ä¼šå›æ”¶éƒ¨åˆ†ç©ºé—²çš„çº¿ç¨‹ï¼›\u003c/li\u003e\n\u003cli\u003eå¦‚æœé•¿æ—¶é—´æ²¡æœ‰å¾€çº¿ç¨‹æ± ä¸­æäº¤ä»»åŠ¡ï¼Œå³å¦‚æœå·¥ä½œçº¿ç¨‹ç©ºé—²äº†æŒ‡å®šçš„æ—¶é—´ï¼ˆé»˜è®¤ä¸º 1 åˆ†é’Ÿï¼‰ï¼Œåˆ™è¯¥å·¥ä½œçº¿ç¨‹å°†è‡ªåŠ¨ç»ˆæ­¢ã€‚ç»ˆæ­¢åï¼Œå¦‚æœä½ åˆæäº¤äº†æ–°çš„ä»»åŠ¡ï¼Œåˆ™çº¿ç¨‹æ± é‡æ–°åˆ›å»ºä¸€ä¸ªå·¥ä½œçº¿ç¨‹ã€‚\u003c/li\u003e\n\u003cli\u003eæ­¤çº¿ç¨‹æ± ä¸ä¼šå¯¹çº¿ç¨‹æ± å¤§å°åšé™åˆ¶ï¼Œçº¿ç¨‹æ± å¤§å°å®Œå…¨ä¾èµ–äºæ“ä½œç³»ç»Ÿï¼ˆæˆ–è€…è¯´ JVMï¼‰èƒ½å¤Ÿåˆ›å»ºçš„æœ€å¤§çº¿ç¨‹å¤§å°ã€‚ å› æ­¤ï¼Œä½¿ç”¨ \u003ccode\u003eCachedThreadPool\u003c/code\u003e æ—¶ï¼Œä¸€å®šè¦æ³¨æ„æ§åˆ¶ä»»åŠ¡çš„æ•°é‡ï¼Œå¦åˆ™ï¼Œç”±äºå¤§é‡çº¿ç¨‹åŒæ—¶è¿è¡Œï¼Œå¾ˆæœ‰ä¼šé€ æˆç³»ç»Ÿç˜«ç—ªã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eï¼ˆ4ï¼‰newScheduleThreadPool\u003c/p\u003e\n\u003cp\u003eåˆ›å»ºä¸€ä¸ªå¤§å°æ— é™çš„çº¿ç¨‹æ± ã€‚æ­¤çº¿ç¨‹æ± æ”¯æŒå®šæ—¶ä»¥åŠå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡çš„éœ€æ±‚ã€‚\u003c/p\u003e\n\u003ch2 id=\"JVM\"\u003e\u003ca href=\"#JVM\" class=\"headerlink\" title=\"JVM\"\u003e\u003c/a\u003eJVM\u003c/h2\u003e\u003ch3 id=\"å†…å­˜ç®¡ç†\"\u003e\u003ca href=\"#å†…å­˜ç®¡ç†\" class=\"headerlink\" title=\"å†…å­˜ç®¡ç†\"\u003e\u003c/a\u003eå†…å­˜ç®¡ç†\u003c/h3\u003e\u003ch3 id=\"OOM\"\u003e\u003ca href=\"#OOM\" class=\"headerlink\" title=\"OOM\"\u003e\u003c/a\u003eOOM\u003c/h3\u003e\u003ch2 id=\"å‚è€ƒèµ„æ–™\"\u003e\u003ca href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"\u003e\u003c/a\u003eå‚è€ƒèµ„æ–™\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eä¹¦ç±\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://book.douban.com/subject/10484692/\"\u003eã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://book.douban.com/subject/26591326/\"\u003eã€ŠJava å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://book.douban.com/subject/34907497/\"\u003eã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ–‡ç« \u003c/strong\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.importnew.com/12773.html\"\u003eJava çº¿ç¨‹é¢è¯•é¢˜ Top 50\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://ifeve.com/java-multi-threading-concurrency-interview-questions-with-answers/\"\u003eJava å¤šçº¿ç¨‹å’Œå¹¶å‘åŸºç¡€é¢è¯•é—®ç­”\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://blog.csdn.net/yaosiming2011/article/details/44280797\"\u003eè¿›ç¨‹å’Œçº¿ç¨‹å…³ç³»åŠåŒºåˆ«\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.w3resource.com/java-tutorial/java-threadclass-methods-and-threadstates.php\"\u003eJavaThread Methods and Thread States\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://blog.csdn.net/pange1991/article/details/53860651\"\u003eJava çº¿ç¨‹çš„ 5 ç§çŠ¶æ€åŠåˆ‡æ¢(é€å½»è®²è§£)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://blog.csdn.net/shimiso/article/details/8964414\"\u003eJava ä¸­å®ˆæŠ¤çº¿ç¨‹çš„æ€»ç»“\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://blog.csdn.net/longshengguoji/article/details/41126119\"\u003eJava åˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼åŠå…¶å¯¹æ¯”\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://blog.csdn.net/pange1991/article/details/53860651\"\u003eJava çº¿ç¨‹çš„ 5 ç§çŠ¶æ€åŠåˆ‡æ¢(é€å½»è®²è§£)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.cnblogs.com/lcplcpjava/p/6896904.html\"\u003eJava çº¿ç¨‹æ–¹æ³• join çš„ç®€å•æ€»ç»“\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.cnblogs.com/dolphin0520/p/3920385.html\"\u003eJava å¹¶å‘ç¼–ç¨‹ï¼šçº¿ç¨‹é—´åä½œçš„ä¸¤ç§æ–¹å¼ï¼šwaitã€notifyã€notifyAll å’Œ Condition\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.cnblogs.com/dolphin0520/p/3920373.html\"\u003eJava å¹¶å‘ç¼–ç¨‹ï¼švolatile å…³é”®å­—è§£æ\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.cnblogs.com/dolphin0520/p/3949310.html\"\u003eJava å¹¶å‘ç¼–ç¨‹ï¼šCallableã€Future å’Œ FutureTask\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.cnblogs.com/dolphin0520/p/3932921.html\"\u003eJava å¹¶å‘ç¼–ç¨‹ï¼šçº¿ç¨‹æ± çš„ä½¿ç”¨\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.jianshu.com/p/0256c2995cec\"\u003eJava å¹¶å‘ç¼–ç¨‹\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n    \u003c/div\u003e",
  "Date": "2020-06-04T05:51:00Z",
  "Author": "é’æ‚Ÿ â—¾ Dunwu"
}