{
  "Source": "dunwu",
  "Title": "JavaWeb 之 Cookie 和 Session",
  "Link": "https://dunwu.github.io/blog/pages/c46bff/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003ch1 id=\"JavaWeb-之-Cookie-和-Session\"\u003e\u003ca href=\"#JavaWeb-之-Cookie-和-Session\" class=\"headerlink\" title=\"JavaWeb 之 Cookie 和 Session\"\u003e\u003c/a\u003eJavaWeb 之 Cookie 和 Session\u003c/h1\u003e\u003ch2 id=\"Cookie\"\u003e\u003ca href=\"#Cookie\" class=\"headerlink\" title=\"Cookie\"\u003e\u003c/a\u003eCookie\u003c/h2\u003e\u003cp\u003e由于 Http 是一种无状态的协议，服务器单从网络连接上无从知道客户身份。\u003c/p\u003e\n\u003cp\u003e会话跟踪是 Web 程序中常用的技术，用来跟踪用户的整个会话。常用会话跟踪技术是 Cookie 与 Session。\u003c/p\u003e\n\u003ch3 id=\"Cookie-是什么\"\u003e\u003ca href=\"#Cookie-是什么\" class=\"headerlink\" title=\"Cookie 是什么\"\u003e\u003c/a\u003eCookie 是什么\u003c/h3\u003e\u003cp\u003eCookie 实际上是存储在客户端上的文本信息，并保留了各种跟踪的信息。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eCookie 工作步骤：\u003c/strong\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e客户端请求服务器，如果服务器需要记录该用户的状态，就是用 response 向客户端浏览器颁发一个 Cookie。\u003c/li\u003e\n\u003cli\u003e客户端浏览器会把 Cookie 保存下来。\u003c/li\u003e\n\u003cli\u003e当浏览器再请求该网站时，浏览器把该请求的网址连同 Cookie 一同提交给服务器。服务器检查该 Cookie，以此来辨认用户状态。\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003e注：Cookie 功能需要浏览器的支持，如果浏览器不支持 Cookie 或者 Cookie 禁用了，Cookie 功能就会失效。\u003c/em\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eJava 中把 Cookie 封装成了\u003ccode\u003ejavax.servlet.http.Cookie\u003c/code\u003e类。\u003c/p\u003e\n\u003ch3 id=\"Cookie-剖析\"\u003e\u003ca href=\"#Cookie-剖析\" class=\"headerlink\" title=\"Cookie 剖析\"\u003e\u003c/a\u003eCookie 剖析\u003c/h3\u003e\u003cp\u003eCookies 通常设置在 HTTP 头信息中（虽然 JavaScript 也可以直接在浏览器上设置一个 Cookie）。\u003c/p\u003e\n\u003cp\u003e设置 Cookie 的 Servlet 会发送如下的头信息：\u003c/p\u003e\n\u003cfigure class=\"highlight http\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003eHTTP/1.1\u003c/span\u003e \u003cspan class=\"number\"\u003e200\u003c/span\u003e OK\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003eDate\u003c/span\u003e\u003cspan class=\"punctuation\"\u003e: \u003c/span\u003eFri, 04 Feb 2000 21:03:38 GMT\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003eServer\u003c/span\u003e\u003cspan class=\"punctuation\"\u003e: \u003c/span\u003eApache/1.3.9 (UNIX) PHP/4.0b3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003eSet-Cookie\u003c/span\u003e\u003cspan class=\"punctuation\"\u003e: \u003c/span\u003ename=xyz; expires=Friday, 04-Feb-07 22:03:38 GMT;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                 path=/; domain=w3cschool.cc\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003eConnection\u003c/span\u003e\u003cspan class=\"punctuation\"\u003e: \u003c/span\u003eclose\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003eContent-Type\u003c/span\u003e\u003cspan class=\"punctuation\"\u003e: \u003c/span\u003etext/html\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e正如您所看到的，\u003ccode\u003eSet-Cookie\u003c/code\u003e 头包含了一个名称值对、一个 GMT 日期、一个路径和一个域。名称和值会被 URL 编码。expires 字段是一个指令，告诉浏览器在给定的时间和日期之后”忘记”该 Cookie。\u003c/p\u003e\n\u003cp\u003e如果浏览器被配置为存储 Cookies，它将会保留此信息直到到期日期。如果用户的浏览器指向任何匹配该 Cookie 的路径和域的页面，它会重新发送 Cookie 到服务器。浏览器的头信息可能如下所示：\u003c/p\u003e\n\u003cfigure class=\"highlight http\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eGET\u003c/span\u003e \u003cspan class=\"string\"\u003e/\u003c/span\u003e \u003cspan class=\"meta\"\u003eHTTP/1.0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003eConnection\u003c/span\u003e\u003cspan class=\"punctuation\"\u003e: \u003c/span\u003eKeep-Alive\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003eUser-Agent\u003c/span\u003e\u003cspan class=\"punctuation\"\u003e: \u003c/span\u003eMozilla/4.6 (X11; I; Linux 2.2.6-15apmac ppc)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003eHost\u003c/span\u003e\u003cspan class=\"punctuation\"\u003e: \u003c/span\u003ezink.demon.co.uk:1126\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003eAccept\u003c/span\u003e\u003cspan class=\"punctuation\"\u003e: \u003c/span\u003eimage/gif, */*\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003eAccept-Encoding\u003c/span\u003e\u003cspan class=\"punctuation\"\u003e: \u003c/span\u003egzip\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003eAccept-Language\u003c/span\u003e\u003cspan class=\"punctuation\"\u003e: \u003c/span\u003een\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003eAccept-Charset\u003c/span\u003e\u003cspan class=\"punctuation\"\u003e: \u003c/span\u003eiso-8859-1,*,utf-8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003eCookie\u003c/span\u003e\u003cspan class=\"punctuation\"\u003e: \u003c/span\u003ename=xyz\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"Cookie-类中的方法\"\u003e\u003ca href=\"#Cookie-类中的方法\" class=\"headerlink\" title=\"Cookie 类中的方法\"\u003e\u003c/a\u003eCookie 类中的方法\u003c/h3\u003e\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e方法\u003c/th\u003e\n\u003cth\u003e功能\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003epublic void setDomain(String pattern)\u003c/td\u003e\n\u003ctd\u003e该方法设置 cookie 适用的域。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic String getDomain()\u003c/td\u003e\n\u003ctd\u003e该方法获取 cookie 适用的域。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic void setMaxAge(int expiry)\u003c/td\u003e\n\u003ctd\u003e该方法设置 cookie 过期的时间（以秒为单位）。如果不这样设置，cookie 只会在当前 session 会话中持续有效。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic int getMaxAge()\u003c/td\u003e\n\u003ctd\u003e该方法返回 cookie 的最大生存周期（以秒为单位），默认情况下，-1 表示 cookie 将持续下去，直到浏览器关闭。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic String getName()\u003c/td\u003e\n\u003ctd\u003e该方法返回 cookie 的名称。名称在创建后不能改变。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic void setValue(String newValue)\u003c/td\u003e\n\u003ctd\u003e该方法设置与 cookie 关联的值。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic String getValue()\u003c/td\u003e\n\u003ctd\u003e该方法获取与 cookie 关联的值。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic void setPath(String uri)\u003c/td\u003e\n\u003ctd\u003e该方法设置 cookie 适用的路径。如果您不指定路径，与当前页面相同目录下的（包括子目录下的）所有 URL 都会返回 cookie。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic String getPath()\u003c/td\u003e\n\u003ctd\u003e该方法获取 cookie 适用的路径。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic void setSecure(boolean flag)\u003c/td\u003e\n\u003ctd\u003e该方法设置布尔值，向浏览器指示，只会在 HTTPS 和 SSL 等安全协议中传输此类 Cookie。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic void setComment(String purpose)\u003c/td\u003e\n\u003ctd\u003e该方法规定了描述 cookie 目的的注释。该注释在浏览器向用户呈现 cookie 时非常有用。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic String getComment()\u003c/td\u003e\n\u003ctd\u003e该方法返回了描述 cookie 目的的注释，如果 cookie 没有注释则返回 null。\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003ch3 id=\"Cookie-的有效期\"\u003e\u003ca href=\"#Cookie-的有效期\" class=\"headerlink\" title=\"Cookie 的有效期\"\u003e\u003c/a\u003eCookie 的有效期\u003c/h3\u003e\u003cp\u003e\u003ccode\u003eCookie\u003c/code\u003e的\u003ccode\u003emaxAge\u003c/code\u003e决定着 Cookie 的有效期，单位为秒。\u003c/p\u003e\n\u003cp\u003e如果 maxAge 为 0，则表示删除该 Cookie；\u003c/p\u003e\n\u003cp\u003e如果为负数，表示该 Cookie 仅在本浏览器中以及本窗口打开的子窗口内有效，关闭窗口后该 Cookie 即失效。\u003c/p\u003e\n\u003cp\u003eCookie 中提供\u003ccode\u003egetMaxAge()\u003c/code\u003e\u003cstrong\u003e和\u003c/strong\u003e\u003ccode\u003esetMaxAge(int expiry)\u003c/code\u003e方法来读写\u003ccode\u003emaxAge\u003c/code\u003e属性。\u003c/p\u003e\n\u003ch3 id=\"Cookie-的域名\"\u003e\u003ca href=\"#Cookie-的域名\" class=\"headerlink\" title=\"Cookie 的域名\"\u003e\u003c/a\u003eCookie 的域名\u003c/h3\u003e\u003cp\u003eCookie 是不可以跨域名的。域名 \u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.google.com/\"\u003ewww.google.com\u003c/a\u003e 颁发的 Cookie 不会被提交到域名 \u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.baidu.com/\"\u003ewww.baidu.com\u003c/a\u003e 去。这是由 Cookie 的隐私安全机制决定的。隐私安全机制能够禁止网站非法获取其他网站的 Cookie。\u003c/p\u003e\n\u003cp\u003e正常情况下，同一个一级域名的两个二级域名之间也不能互相使用 Cookie。如果想让某域名下的子域名也可以使用该 Cookie，需要设置 Cookie 的 domain 参数。\u003c/p\u003e\n\u003cp\u003eJava 中使用\u003ccode\u003esetDomain(Stringdomain)\u003c/code\u003e和\u003ccode\u003egetDomain()\u003c/code\u003e方法来设置、获取 domain。\u003c/p\u003e\n\u003ch3 id=\"Cookie-的路径\"\u003e\u003ca href=\"#Cookie-的路径\" class=\"headerlink\" title=\"Cookie 的路径\"\u003e\u003c/a\u003eCookie 的路径\u003c/h3\u003e\u003cp\u003ePath 属性决定允许访问 Cookie 的路径。\u003c/p\u003e\n\u003cp\u003eJava 中使用\u003ccode\u003esetPath(Stringuri)\u003c/code\u003e和\u003ccode\u003egetPath()\u003c/code\u003e方法来设置、获取 path。\u003c/p\u003e\n\u003ch3 id=\"Cookie-的安全属性\"\u003e\u003ca href=\"#Cookie-的安全属性\" class=\"headerlink\" title=\"Cookie 的安全属性\"\u003e\u003c/a\u003eCookie 的安全属性\u003c/h3\u003e\u003cp\u003eHTTP 协议不仅是无状态的，而且是不安全的。\u003c/p\u003e\n\u003cp\u003e使用 HTTP 协议的数据不经过任何加密就直接在网络上传播，有被截获的可能。如果不希望 Cookie 在 HTTP 等非安全协议中传输，可以设置 Cookie 的 secure 属性为 true。浏览器只会在 HTTPS 和 SSL 等安全协议中传输此类 Cookie。\u003c/p\u003e\n\u003cp\u003eJava 中使用\u003ccode\u003esetSecure(booleanflag)\u003c/code\u003e和\u003ccode\u003egetSecure ()\u003c/code\u003e方法来设置、获取 Secure。\u003c/p\u003e\n\u003ch3 id=\"Cookie-实例\"\u003e\u003ca href=\"#Cookie-实例\" class=\"headerlink\" title=\"Cookie 实例\"\u003e\u003c/a\u003eCookie 实例\u003c/h3\u003e\u003ch4 id=\"添加-Cookie\"\u003e\u003ca href=\"#添加-Cookie\" class=\"headerlink\" title=\"添加 Cookie\"\u003e\u003c/a\u003e添加 Cookie\u003c/h4\u003e\u003cp\u003e通过 Servlet 添加 Cookies 包括三个步骤：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cp\u003e创建一个 Cookie 对象：您可以调用带有 cookie 名称和 cookie 值的 Cookie 构造函数，cookie 名称和 cookie 值都是字符串。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e设置最大生存周期：您可以使用 \u003ccode\u003esetMaxAge\u003c/code\u003e 方法来指定 cookie 能够保持有效的时间（以秒为单位）。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e发送 Cookie 到 HTTP 响应头：您可以使用 \u003ccode\u003eresponse.addCookie\u003c/code\u003e 来添加 HTTP 响应头中的 Cookies。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eAddCookies.java\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e35\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e36\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e37\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e38\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e39\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e40\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e41\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e42\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e43\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e44\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e45\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e46\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e47\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e48\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e49\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e50\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e51\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e52\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e53\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e54\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e55\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e56\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e57\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e58\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e59\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e60\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e61\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.io.IOException;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.io.PrintWriter;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.net.URLEncoder;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.ServletException;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.annotation.WebServlet;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.Cookie;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.HttpServlet;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.HttpServletRequest;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.HttpServletResponse;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e@WebServlet(\u0026#34;/servlet/AddCookies\u0026#34;)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"title class_\"\u003eAddCookies\u003c/span\u003e \u003cspan class=\"keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"title class_\"\u003eHttpServlet\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"keyword\"\u003efinal\u003c/span\u003e \u003cspan class=\"type\"\u003elong\u003c/span\u003e \u003cspan class=\"variable\"\u003eserialVersionUID\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"number\"\u003e1L\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e/**\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     * \u003cspan class=\"doctag\"\u003e@see\u003c/span\u003e HttpServlet#HttpServlet()\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     */\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"title function_\"\u003eAddCookies\u003c/span\u003e\u003cspan class=\"params\"\u003e()\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"built_in\"\u003esuper\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e/**\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     * \u003cspan class=\"doctag\"\u003e@see\u003c/span\u003e HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     */\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003edoGet\u003c/span\u003e\u003cspan class=\"params\"\u003e(HttpServletRequest request, HttpServletResponse response)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e ServletException, IOException {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 为名字和姓氏创建 Cookie\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eCookie\u003c/span\u003e \u003cspan class=\"variable\"\u003ename\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eCookie\u003c/span\u003e(\u003cspan class=\"string\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e, URLEncoder.encode(request.getParameter(\u003cspan class=\"string\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e), \u003cspan class=\"string\"\u003e\u0026#34;UTF-8\u0026#34;\u003c/span\u003e)); \u003cspan class=\"comment\"\u003e// 中文转码\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eCookie\u003c/span\u003e \u003cspan class=\"variable\"\u003eurl\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eCookie\u003c/span\u003e(\u003cspan class=\"string\"\u003e\u0026#34;url\u0026#34;\u003c/span\u003e, request.getParameter(\u003cspan class=\"string\"\u003e\u0026#34;url\u0026#34;\u003c/span\u003e));\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 为两个 Cookie 设置过期日期为 24 小时后\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        name.setMaxAge(\u003cspan class=\"number\"\u003e60\u003c/span\u003e * \u003cspan class=\"number\"\u003e60\u003c/span\u003e * \u003cspan class=\"number\"\u003e24\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        url.setMaxAge(\u003cspan class=\"number\"\u003e60\u003c/span\u003e * \u003cspan class=\"number\"\u003e60\u003c/span\u003e * \u003cspan class=\"number\"\u003e24\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 在响应头中添加两个 Cookie\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        response.addCookie(name);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        response.addCookie(url);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 设置响应内容类型\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        response.setContentType(\u003cspan class=\"string\"\u003e\u0026#34;text/html;charset=UTF-8\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003ePrintWriter\u003c/span\u003e \u003cspan class=\"variable\"\u003eout\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e response.getWriter();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003etitle\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#34;设置 Cookie 实例\u0026#34;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003edocType\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;!DOCTYPE html\u0026gt;\\n\u0026#34;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        out.println(docType + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;html\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;head\u0026gt;\u0026lt;title\u0026gt;\u0026#34;\u003c/span\u003e + title + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;/title\u0026gt;\u0026lt;/head\u0026gt;\\n\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;body bgcolor=\\\u0026#34;#f0f0f0\\\u0026#34;\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;h1 align=\\\u0026#34;center\\\u0026#34;\u0026gt;\u0026#34;\u003c/span\u003e + title\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;/h1\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;ul\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;  \u0026lt;li\u0026gt;\u0026lt;b\u0026gt;站点名：\u0026lt;/b\u0026gt;：\u0026#34;\u003c/span\u003e + request.getParameter(\u003cspan class=\"string\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + \u003cspan class=\"string\"\u003e\u0026#34;\\n\u0026lt;/li\u0026gt;\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;  \u0026lt;li\u0026gt;\u0026lt;b\u0026gt;站点 URL：\u0026lt;/b\u0026gt;：\u0026#34;\u003c/span\u003e + request.getParameter(\u003cspan class=\"string\"\u003e\u0026#34;url\u0026#34;\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + \u003cspan class=\"string\"\u003e\u0026#34;\\n\u0026lt;/li\u0026gt;\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;/ul\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;/body\u0026gt;\u0026lt;/html\u0026gt;\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e/**\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     * \u003cspan class=\"doctag\"\u003e@see\u003c/span\u003e HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     */\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eprotected\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003edoPost\u003c/span\u003e\u003cspan class=\"params\"\u003e(HttpServletRequest request, HttpServletResponse response)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e ServletException, IOException {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        doGet(request, response);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003eaddCookies.jsp\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u0026lt;%@ page language=\u003cspan class=\"string\"\u003e\u0026#34;java\u0026#34;\u003c/span\u003e pageEncoding=\u003cspan class=\"string\"\u003e\u0026#34;UTF-8\u0026#34;\u003c/span\u003e %\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026lt;!DOCTYPE HTML PUBLIC \u003cspan class=\"string\"\u003e\u0026#34;-//W3C//DTD HTML 4.01 Transitional//EN\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026lt;html\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026lt;head\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u0026lt;meta charset=\u003cspan class=\"string\"\u003e\u0026#34;utf-8\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u0026lt;title\u0026gt;添加Cookie\u0026lt;/title\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026lt;/head\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026lt;body\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026lt;form action=/servlet/AddCookies method=\u003cspan class=\"string\"\u003e\u0026#34;GET\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  站点名 ：\u0026lt;input type=\u003cspan class=\"string\"\u003e\u0026#34;text\u0026#34;\u003c/span\u003e name=\u003cspan class=\"string\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u0026lt;br/\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  站点 URL：\u0026lt;input type=\u003cspan class=\"string\"\u003e\u0026#34;text\u0026#34;\u003c/span\u003e name=\u003cspan class=\"string\"\u003e\u0026#34;url\u0026#34;\u003c/span\u003e/\u0026gt;\u0026lt;br\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u0026lt;input type=\u003cspan class=\"string\"\u003e\u0026#34;submit\u0026#34;\u003c/span\u003e value=\u003cspan class=\"string\"\u003e\u0026#34;提交\u0026#34;\u003c/span\u003e/\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026lt;/form\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026lt;/body\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026lt;/html\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"显示-Cookie\"\u003e\u003ca href=\"#显示-Cookie\" class=\"headerlink\" title=\"显示 Cookie\"\u003e\u003c/a\u003e显示 Cookie\u003c/h4\u003e\u003cp\u003e要读取 Cookies，您需要通过调用 \u003ccode\u003eHttpServletRequest\u003c/code\u003e 的 \u003ccode\u003egetCookies()\u003c/code\u003e 方法创建一个 \u003ccode\u003ejavax.servlet.http.Cookie\u003c/code\u003e 对象的数组。然后循环遍历数组，并使用 \u003ccode\u003egetName()\u003c/code\u003e 和 \u003ccode\u003egetValue()\u003c/code\u003e 方法来访问每个 cookie 和关联的值。\u003c/p\u003e\n\u003cp\u003eReadCookies.java\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e35\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e36\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e37\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e38\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e39\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e40\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e41\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e42\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e43\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e44\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e45\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e46\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e47\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e48\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e49\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e50\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e51\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e52\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e53\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e54\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e55\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e56\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e57\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e58\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e59\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e60\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e61\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e62\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e63\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e64\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e65\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e66\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e67\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e68\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.io.IOException;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.io.PrintWriter;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.net.URLDecoder;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.ServletException;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.annotation.WebServlet;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.Cookie;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.HttpServlet;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.HttpServletRequest;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.HttpServletResponse;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e@WebServlet(\u0026#34;/servlet/ReadCookies\u0026#34;)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"title class_\"\u003eReadCookies\u003c/span\u003e \u003cspan class=\"keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"title class_\"\u003eHttpServlet\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"keyword\"\u003efinal\u003c/span\u003e \u003cspan class=\"type\"\u003elong\u003c/span\u003e \u003cspan class=\"variable\"\u003eserialVersionUID\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"number\"\u003e1L\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e/**\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     * \u003cspan class=\"doctag\"\u003e@see\u003c/span\u003e HttpServlet#HttpServlet()\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     */\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"title function_\"\u003eReadCookies\u003c/span\u003e\u003cspan class=\"params\"\u003e()\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"built_in\"\u003esuper\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e/**\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     * \u003cspan class=\"doctag\"\u003e@see\u003c/span\u003e HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     */\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003edoGet\u003c/span\u003e\u003cspan class=\"params\"\u003e(HttpServletRequest request, HttpServletResponse response)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e ServletException, IOException {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eCookie\u003c/span\u003e \u003cspan class=\"variable\"\u003ecookie\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"literal\"\u003enull\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        Cookie[] cookies = \u003cspan class=\"literal\"\u003enull\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 获取与该域相关的 Cookie 的数组\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        cookies = request.getCookies();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 设置响应内容类型\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        response.setContentType(\u003cspan class=\"string\"\u003e\u0026#34;text/html;charset=UTF-8\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003ePrintWriter\u003c/span\u003e \u003cspan class=\"variable\"\u003eout\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e response.getWriter();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003etitle\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#34;Delete Cookie Example\u0026#34;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003edocType\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;!DOCTYPE html\u0026gt;\\n\u0026#34;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        out.println(docType + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;html\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;head\u0026gt;\u0026lt;title\u0026gt;\u0026#34;\u003c/span\u003e + title + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;/title\u0026gt;\u0026lt;/head\u0026gt;\\n\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;body bgcolor=\\\u0026#34;#f0f0f0\\\u0026#34;\u0026gt;\\n\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e (cookies != \u003cspan class=\"literal\"\u003enull\u003c/span\u003e) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            out.println(\u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;h2\u0026gt;Cookie 名称和值\u0026lt;/h2\u0026gt;\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            \u003cspan class=\"keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"type\"\u003eint\u003c/span\u003e \u003cspan class=\"variable\"\u003ei\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"number\"\u003e0\u003c/span\u003e; i \u0026lt; cookies.length; i++) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                cookie = cookies[i];\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e ((cookie.getName()).compareTo(\u003cspan class=\"string\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e) == \u003cspan class=\"number\"\u003e0\u003c/span\u003e) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    cookie.setMaxAge(\u003cspan class=\"number\"\u003e0\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    response.addCookie(cookie);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    out.print(\u003cspan class=\"string\"\u003e\u0026#34;已删除的 cookie：\u0026#34;\u003c/span\u003e + cookie.getName() + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;br/\u0026gt;\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                out.print(\u003cspan class=\"string\"\u003e\u0026#34;名称：\u0026#34;\u003c/span\u003e + cookie.getName() + \u003cspan class=\"string\"\u003e\u0026#34;，\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                out.print(\u003cspan class=\"string\"\u003e\u0026#34;值：\u0026#34;\u003c/span\u003e + URLDecoder.decode(cookie.getValue(), \u003cspan class=\"string\"\u003e\u0026#34;utf-8\u0026#34;\u003c/span\u003e) + \u003cspan class=\"string\"\u003e\u0026#34; \u0026lt;br/\u0026gt;\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        } \u003cspan class=\"keyword\"\u003eelse\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            out.println(\u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;h2 class=\\\u0026#34;tutheader\\\u0026#34;\u0026gt;No Cookie founds\u0026lt;/h2\u0026gt;\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        out.println(\u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;/body\u0026gt;\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        out.println(\u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;/html\u0026gt;\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e/**\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     * \u003cspan class=\"doctag\"\u003e@see\u003c/span\u003e HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     */\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eprotected\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003edoPost\u003c/span\u003e\u003cspan class=\"params\"\u003e(HttpServletRequest request, HttpServletResponse response)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e ServletException, IOException {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        doGet(request, response);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"删除-Cookie\"\u003e\u003ca href=\"#删除-Cookie\" class=\"headerlink\" title=\"删除 Cookie\"\u003e\u003c/a\u003e删除 Cookie\u003c/h4\u003e\u003cp\u003eJava 中并没有提供直接删除 Cookie 的方法，如果想要删除一个 Cookie，直接将这个 Cookie 的有效期设为 0 就可以了。步骤如下：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cp\u003e读取一个现有的 cookie，并把它存储在 Cookie 对象中。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e使用 \u003ccode\u003esetMaxAge()\u003c/code\u003e 方法设置 cookie 的年龄为零，来删除现有的 cookie。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e把这个 cookie 添加到响应头。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eDeleteCookies.java\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e35\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e36\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e37\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e38\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e39\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e40\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e41\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e42\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e43\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e44\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e45\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e46\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e47\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e48\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e49\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e50\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e51\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e52\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e53\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e54\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e55\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e56\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e57\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e58\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e59\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e60\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e61\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e62\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e63\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e64\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e65\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e66\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e67\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.io.IOException;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.io.PrintWriter;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.ServletException;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.annotation.WebServlet;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.Cookie;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.HttpServlet;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.HttpServletRequest;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.HttpServletResponse;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e@WebServlet(\u0026#34;/servlet/DeleteCookies\u0026#34;)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"title class_\"\u003eDeleteCookies\u003c/span\u003e \u003cspan class=\"keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"title class_\"\u003eHttpServlet\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"keyword\"\u003efinal\u003c/span\u003e \u003cspan class=\"type\"\u003elong\u003c/span\u003e \u003cspan class=\"variable\"\u003eserialVersionUID\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"number\"\u003e1L\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e/**\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     * \u003cspan class=\"doctag\"\u003e@see\u003c/span\u003e HttpServlet#HttpServlet()\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     */\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"title function_\"\u003eDeleteCookies\u003c/span\u003e\u003cspan class=\"params\"\u003e()\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"built_in\"\u003esuper\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e/**\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     * \u003cspan class=\"doctag\"\u003e@see\u003c/span\u003e HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     */\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003edoGet\u003c/span\u003e\u003cspan class=\"params\"\u003e(HttpServletRequest request, HttpServletResponse response)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e ServletException, IOException {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eCookie\u003c/span\u003e \u003cspan class=\"variable\"\u003ecookie\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"literal\"\u003enull\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        Cookie[] cookies = \u003cspan class=\"literal\"\u003enull\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 获取与该域相关的 Cookie 的数组\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        cookies = request.getCookies();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 设置响应内容类型\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        response.setContentType(\u003cspan class=\"string\"\u003e\u0026#34;text/html;charset=UTF-8\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003ePrintWriter\u003c/span\u003e \u003cspan class=\"variable\"\u003eout\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e response.getWriter();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003etitle\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#34;删除 Cookie 实例\u0026#34;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003edocType\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;!DOCTYPE html\u0026gt;\\n\u0026#34;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        out.println(docType + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;html\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;head\u0026gt;\u0026lt;title\u0026gt;\u0026#34;\u003c/span\u003e + title + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;/title\u0026gt;\u0026lt;/head\u0026gt;\\n\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;body bgcolor=\\\u0026#34;#f0f0f0\\\u0026#34;\u0026gt;\\n\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e (cookies != \u003cspan class=\"literal\"\u003enull\u003c/span\u003e) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            out.println(\u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;h2\u0026gt;Cookie 名称和值\u0026lt;/h2\u0026gt;\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            \u003cspan class=\"keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"type\"\u003eint\u003c/span\u003e \u003cspan class=\"variable\"\u003ei\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"number\"\u003e0\u003c/span\u003e; i \u0026lt; cookies.length; i++) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                cookie = cookies[i];\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e ((cookie.getName()).compareTo(\u003cspan class=\"string\"\u003e\u0026#34;url\u0026#34;\u003c/span\u003e) == \u003cspan class=\"number\"\u003e0\u003c/span\u003e) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    cookie.setMaxAge(\u003cspan class=\"number\"\u003e0\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    response.addCookie(cookie);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    out.print(\u003cspan class=\"string\"\u003e\u0026#34;已删除的 cookie：\u0026#34;\u003c/span\u003e + cookie.getName() + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;br/\u0026gt;\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                out.print(\u003cspan class=\"string\"\u003e\u0026#34;名称：\u0026#34;\u003c/span\u003e + cookie.getName() + \u003cspan class=\"string\"\u003e\u0026#34;，\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                out.print(\u003cspan class=\"string\"\u003e\u0026#34;值：\u0026#34;\u003c/span\u003e + cookie.getValue() + \u003cspan class=\"string\"\u003e\u0026#34; \u0026lt;br/\u0026gt;\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        } \u003cspan class=\"keyword\"\u003eelse\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            out.println(\u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;h2 class=\\\u0026#34;tutheader\\\u0026#34;\u0026gt;No Cookie founds\u0026lt;/h2\u0026gt;\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        out.println(\u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;/body\u0026gt;\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        out.println(\u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;/html\u0026gt;\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e/**\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     * \u003cspan class=\"doctag\"\u003e@see\u003c/span\u003e HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e     */\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eprotected\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003edoPost\u003c/span\u003e\u003cspan class=\"params\"\u003e(HttpServletRequest request, HttpServletResponse response)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e ServletException, IOException {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        doGet(request, response);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"Session\"\u003e\u003ca href=\"#Session\" class=\"headerlink\" title=\"Session\"\u003e\u003c/a\u003eSession\u003c/h2\u003e\u003ch3 id=\"Session-是什么\"\u003e\u003ca href=\"#Session-是什么\" class=\"headerlink\" title=\"Session 是什么\"\u003e\u003c/a\u003eSession 是什么\u003c/h3\u003e\u003cp\u003e不同于 Cookie 保存在客户端浏览器中，Session 保存在服务器上。\u003c/p\u003e\n\u003cp\u003e如果说 Cookie 机制是通过检查客户身上的“通行证”来确定客户身份的话，那么 Session 机制就是通过检查服务器上的“客户明细表”来确认客户身份。\u003c/p\u003e\n\u003cp\u003eSession 对应的类为 \u003ccode\u003ejavax.servlet.http.HttpSession\u003c/code\u003e 类。Session 对象是在客户第一次请求服务器时创建的。\u003c/p\u003e\n\u003ch3 id=\"Session-类中的方法\"\u003e\u003ca href=\"#Session-类中的方法\" class=\"headerlink\" title=\"Session 类中的方法\"\u003e\u003c/a\u003eSession 类中的方法\u003c/h3\u003e\u003cp\u003e\u003ccode\u003ejavax.servlet.http.HttpSession\u003c/code\u003e 类中的方法：\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e\u003cstrong\u003e方法\u003c/strong\u003e\u003c/th\u003e\n\u003cth\u003e\u003cstrong\u003e功能\u003c/strong\u003e\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003epublic Object getAttribute(String name)\u003c/td\u003e\n\u003ctd\u003e该方法返回在该 session 会话中具有指定名称的对象，如果没有指定名称的对象，则返回 null。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic Enumeration getAttributeNames()\u003c/td\u003e\n\u003ctd\u003e该方法返回 String 对象的枚举，String 对象包含所有绑定到该 session 会话的对象的名称。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic long getCreationTime()\u003c/td\u003e\n\u003ctd\u003e该方法返回该 session 会话被创建的时间，自格林尼治标准时间 1970 年 1 月 1 日午夜算起，以毫秒为单位。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic String getId()\u003c/td\u003e\n\u003ctd\u003e该方法返回一个包含分配给该 session 会话的唯一标识符的字符串。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic long getLastAccessedTime()\u003c/td\u003e\n\u003ctd\u003e该方法返回客户端最后一次发送与该 session 会话相关的请求的时间自格林尼治标准时间 1970 年 1 月 1 日午夜算起，以毫秒为单位。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic int getMaxInactiveInterval()\u003c/td\u003e\n\u003ctd\u003e该方法返回 Servlet 容器在客户端访问时保持 session 会话打开的最大时间间隔，以秒为单位。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic void invalidate()\u003c/td\u003e\n\u003ctd\u003e该方法指示该 session 会话无效，并解除绑定到它上面的任何对象。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic boolean isNew()\u003c/td\u003e\n\u003ctd\u003e如果客户端还不知道该 session 会话，或者如果客户选择不参入该 session 会话，则该方法返回 true。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic void removeAttribute(String name)\u003c/td\u003e\n\u003ctd\u003e该方法将从该 session 会话移除指定名称的对象。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic void setAttribute(String name, Object value)\u003c/td\u003e\n\u003ctd\u003e该方法使用指定的名称绑定一个对象到该 session 会话。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epublic void setMaxInactiveInterval(int interval)\u003c/td\u003e\n\u003ctd\u003e该方法在 Servlet 容器指示该 session 会话无效之前，指定客户端请求之间的时间，以秒为单位。\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003ch3 id=\"Session-的有效期\"\u003e\u003ca href=\"#Session-的有效期\" class=\"headerlink\" title=\"Session 的有效期\"\u003e\u003c/a\u003eSession 的有效期\u003c/h3\u003e\u003cp\u003e由于会有越来越多的用户访问服务器，因此 Session 也会越来越多。为防止内存溢出，服务器会把长时间没有活跃的 Session 从内存中删除。\u003c/p\u003e\n\u003cp\u003eSession 的超时时间为\u003ccode\u003emaxInactiveInterval\u003c/code\u003e属性，可以通过\u003ccode\u003egetMaxInactiveInterval()\u003c/code\u003e、\u003ccode\u003esetMaxInactiveInterval(longinterval)\u003c/code\u003e来读写这个属性。\u003c/p\u003e\n\u003cp\u003eTomcat 中 Session 的默认超时时间为 20 分钟。可以修改 web.xml 改变 Session 的默认超时时间。\u003c/p\u003e\n\u003cp\u003e例：\u003c/p\u003e\n\u003cfigure class=\"highlight xml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003esession-config\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003esession-timeout\u003c/span\u003e\u0026gt;\u003c/span\u003e60\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003esession-timeout\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003esession-config\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"Session-对浏览器的要求\"\u003e\u003ca href=\"#Session-对浏览器的要求\" class=\"headerlink\" title=\"Session 对浏览器的要求\"\u003e\u003c/a\u003eSession 对浏览器的要求\u003c/h3\u003e\u003cp\u003eHTTP 协议是无状态的，Session 不能依据 HTTP 连接来判断是否为同一客户。因此服务器向客户端浏览器发送一个名为 JESSIONID 的 Cookie，他的值为该 Session 的 id（也就是 HttpSession.getId()的返回值）。Session 依据该 Cookie 来识别是否为同一用户。\u003c/p\u003e\n\u003cp\u003e该 Cookie 为服务器自动生成的，它的\u003ccode\u003emaxAge\u003c/code\u003e属性一般为-1，表示仅当前浏览器内有效，并且各浏览器窗口间不共享，关闭浏览器就会失效。\u003c/p\u003e\n\u003ch3 id=\"URL-地址重写\"\u003e\u003ca href=\"#URL-地址重写\" class=\"headerlink\" title=\"URL 地址重写\"\u003e\u003c/a\u003eURL 地址重写\u003c/h3\u003e\u003cp\u003eURL 地址重写的原理是将该用户 Session 的 id 信息重写到 URL 地址中。服务器能够解析重写后的 URL 获取 Session 的 id。这样即使客户端不支持 Cookie，也可以使用 Session 来记录用户状态。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eHttpServletResponse\u003c/code\u003e类提供了\u003ccode\u003eencodeURL(Stringurl)\u003c/code\u003e实现 URL 地址重写。\u003c/p\u003e\n\u003ch3 id=\"Session-中禁用-Cookie\"\u003e\u003ca href=\"#Session-中禁用-Cookie\" class=\"headerlink\" title=\"Session 中禁用 Cookie\"\u003e\u003c/a\u003eSession 中禁用 Cookie\u003c/h3\u003e\u003cp\u003e在\u003ccode\u003eMETA-INF/context.xml\u003c/code\u003e中编辑如下：\u003c/p\u003e\n\u003cfigure class=\"highlight xml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eContext\u003c/span\u003e \u003cspan class=\"attr\"\u003epath\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;/SessionNotes\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003ecookies\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eContext\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e部署后，TOMCAT 便不会自动生成名 JESSIONID 的 Cookie，Session 也不会以 Cookie 为识别标志，而仅仅以重写后的 URL 地址为识别标志了。\u003c/p\u003e\n\u003ch3 id=\"Session-实例\"\u003e\u003ca href=\"#Session-实例\" class=\"headerlink\" title=\"Session 实例\"\u003e\u003c/a\u003eSession 实例\u003c/h3\u003e\u003ch4 id=\"Session-跟踪\"\u003e\u003ca href=\"#Session-跟踪\" class=\"headerlink\" title=\"Session 跟踪\"\u003e\u003c/a\u003eSession 跟踪\u003c/h4\u003e\u003cp\u003eSessionTrackServlet.java\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e35\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e36\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e37\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e38\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e39\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e40\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e41\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e42\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e43\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e44\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e45\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e46\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e47\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e48\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e49\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e50\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e51\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e52\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e53\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e54\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e55\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e56\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e57\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e58\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e59\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e60\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e61\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e62\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.io.IOException;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.io.PrintWriter;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.text.SimpleDateFormat;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.util.Date;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.ServletException;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.annotation.WebServlet;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.HttpServlet;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.HttpServletRequest;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.HttpServletResponse;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e javax.servlet.http.HttpSession;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e@WebServlet(\u0026#34;/servlet/SessionTrackServlet\u0026#34;)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"title class_\"\u003eSessionTrackServlet\u003c/span\u003e \u003cspan class=\"keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"title class_\"\u003eHttpServlet\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"keyword\"\u003efinal\u003c/span\u003e \u003cspan class=\"type\"\u003elong\u003c/span\u003e \u003cspan class=\"variable\"\u003eserialVersionUID\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"number\"\u003e1L\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003edoGet\u003c/span\u003e\u003cspan class=\"params\"\u003e(HttpServletRequest request, HttpServletResponse response)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e ServletException, IOException {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 如果不存在 session 会话，则创建一个 session 对象\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eHttpSession\u003c/span\u003e \u003cspan class=\"variable\"\u003esession\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e request.getSession(\u003cspan class=\"literal\"\u003etrue\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 获取 session 创建时间\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eDate\u003c/span\u003e \u003cspan class=\"variable\"\u003ecreateTime\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eDate\u003c/span\u003e(session.getCreationTime());\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 获取该网页的最后一次访问时间\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eDate\u003c/span\u003e \u003cspan class=\"variable\"\u003elastAccessTime\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eDate\u003c/span\u003e(session.getLastAccessedTime());\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 设置日期输出的格式\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eSimpleDateFormat\u003c/span\u003e \u003cspan class=\"variable\"\u003edf\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eSimpleDateFormat\u003c/span\u003e(\u003cspan class=\"string\"\u003e\u0026#34;yyyy-MM-dd HH:mm:ss\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003etitle\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#34;Servlet Session 实例\u0026#34;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eInteger\u003c/span\u003e \u003cspan class=\"variable\"\u003evisitCount\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInteger\u003c/span\u003e(\u003cspan class=\"number\"\u003e0\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003evisitCountKey\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eString\u003c/span\u003e(\u003cspan class=\"string\"\u003e\u0026#34;visitCount\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003euserIDKey\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eString\u003c/span\u003e(\u003cspan class=\"string\"\u003e\u0026#34;userID\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003euserID\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eString\u003c/span\u003e(\u003cspan class=\"string\"\u003e\u0026#34;admin\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 检查网页上是否有新的访问者\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e (session.isNew()) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            session.setAttribute(userIDKey, userID);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        } \u003cspan class=\"keyword\"\u003eelse\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            visitCount = (Integer) session.getAttribute(visitCountKey);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            visitCount = visitCount + \u003cspan class=\"number\"\u003e1\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            userID = (String) session.getAttribute(userIDKey);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        session.setAttribute(visitCountKey, visitCount);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 设置响应内容类型\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        response.setContentType(\u003cspan class=\"string\"\u003e\u0026#34;text/html;charset=UTF-8\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003ePrintWriter\u003c/span\u003e \u003cspan class=\"variable\"\u003eout\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e response.getWriter();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003edocType\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;!DOCTYPE html\u0026gt;\\n\u0026#34;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        out.println(docType + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;html\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;head\u0026gt;\u0026lt;title\u0026gt;\u0026#34;\u003c/span\u003e + title + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;/title\u0026gt;\u0026lt;/head\u0026gt;\\n\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;body bgcolor=\\\u0026#34;#f0f0f0\\\u0026#34;\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;h1 align=\\\u0026#34;center\\\u0026#34;\u0026gt;\u0026#34;\u003c/span\u003e + title\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;/h1\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;h2 align=\\\u0026#34;center\\\u0026#34;\u0026gt;Session 信息\u0026lt;/h2\u0026gt;\\n\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;table border=\\\u0026#34;1\\\u0026#34; align=\\\u0026#34;center\\\u0026#34;\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;tr bgcolor=\\\u0026#34;#949494\\\u0026#34;\u0026gt;\\n\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + \u003cspan class=\"string\"\u003e\u0026#34;  \u0026lt;th\u0026gt;Session 信息\u0026lt;/th\u0026gt;\u0026lt;th\u0026gt;值\u0026lt;/th\u0026gt;\u0026lt;/tr\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;tr\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;  \u0026lt;td\u0026gt;id\u0026lt;/td\u0026gt;\\n\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + \u003cspan class=\"string\"\u003e\u0026#34;  \u0026lt;td\u0026gt;\u0026#34;\u003c/span\u003e + session.getId() + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;tr\u0026gt;\\n\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + \u003cspan class=\"string\"\u003e\u0026#34;  \u0026lt;td\u0026gt;创建时间\u0026lt;/td\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;  \u0026lt;td\u0026gt;\u0026#34;\u003c/span\u003e + df.format(createTime) + \u003cspan class=\"string\"\u003e\u0026#34;  \u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt;\\n\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;tr\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;  \u0026lt;td\u0026gt;最后访问时间\u0026lt;/td\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;  \u0026lt;td\u0026gt;\u0026#34;\u003c/span\u003e + df.format(lastAccessTime)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + \u003cspan class=\"string\"\u003e\u0026#34;  \u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;tr\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;  \u0026lt;td\u0026gt;用户 ID\u0026lt;/td\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;  \u0026lt;td\u0026gt;\u0026#34;\u003c/span\u003e + userID\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + \u003cspan class=\"string\"\u003e\u0026#34;  \u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;tr\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;  \u0026lt;td\u0026gt;访问统计：\u0026lt;/td\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;  \u0026lt;td\u0026gt;\u0026#34;\u003c/span\u003e + visitCount\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;/table\u0026gt;\\n\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;/body\u0026gt;\u0026lt;/html\u0026gt;\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003eweb.xml\u003c/p\u003e\n\u003cfigure class=\"highlight xml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eservlet\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eservlet-name\u003c/span\u003e\u0026gt;\u003c/span\u003eSessionTrackServlet\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eservlet-name\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eservlet-class\u003c/span\u003e\u0026gt;\u003c/span\u003eSessionTrackServlet\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eservlet-class\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eservlet\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eservlet-mapping\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eservlet-name\u003c/span\u003e\u0026gt;\u003c/span\u003eSessionTrackServlet\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eservlet-name\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eurl-pattern\u003c/span\u003e\u0026gt;\u003c/span\u003e/servlet/SessionTrackServlet\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eurl-pattern\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eservlet-mapping\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"删除-Session-会话数据\"\u003e\u003ca href=\"#删除-Session-会话数据\" class=\"headerlink\" title=\"删除 Session 会话数据\"\u003e\u003c/a\u003e删除 Session 会话数据\u003c/h4\u003e\u003cp\u003e当您完成了一个用户的 session 会话数据，您有以下几种选择：\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e移除一个特定的属性：\u003c/strong\u003e您可以调用 \u003ccode\u003eremoveAttribute(String name)\u003c/code\u003e 方法来删除与特定的键相关联的值。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e删除整个 session 会话：\u003c/strong\u003e您可以调用 \u003ccode\u003einvalidate()\u003c/code\u003e 方法来丢弃整个 session 会话。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e设置 session 会话过期时间：\u003c/strong\u003e您可以调用 \u003ccode\u003esetMaxInactiveInterval(int interval)\u003c/code\u003e 方法来单独设置 session 会话超时。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e注销用户：\u003c/strong\u003e如果使用的是支持 servlet 2.4 的服务器，您可以调用 \u003ccode\u003elogout\u003c/code\u003e 来注销 Web 服务器的客户端，并把属于所有用户的所有 session 会话设置为无效。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eweb.xml 配置：\u003c/strong\u003e如果您使用的是 Tomcat，除了上述方法，您还可以在 web.xml 文件中配置 session 会话超时，如下所示：\u003c/p\u003e\n\u003cfigure class=\"highlight xml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003esession-config\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003esession-timeout\u003c/span\u003e\u0026gt;\u003c/span\u003e15\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003esession-timeout\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003esession-config\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e上面实例中的超时时间是以分钟为单位，将覆盖 Tomcat 中默认的 30 分钟超时时间。\u003c/p\u003e\n\u003cp\u003e在一个 Servlet 中的 \u003ccode\u003egetMaxInactiveInterval()\u003c/code\u003e 方法会返回 session 会话的超时时间，以秒为单位。所以，如果在 web.xml 中配置 session 会话超时时间为 15 分钟，那么\u003ccode\u003egetMaxInactiveInterval()\u003c/code\u003e 会返回 900。\u003c/p\u003e\n\u003ch2 id=\"Cookie-vs-Session\"\u003e\u003ca href=\"#Cookie-vs-Session\" class=\"headerlink\" title=\"Cookie vs Session\"\u003e\u003c/a\u003eCookie vs Session\u003c/h2\u003e\u003ch3 id=\"存取方式\"\u003e\u003ca href=\"#存取方式\" class=\"headerlink\" title=\"存取方式\"\u003e\u003c/a\u003e存取方式\u003c/h3\u003e\u003cp\u003eCookie 只能保存\u003ccode\u003eASCII\u003c/code\u003e字符串，如果需要存取 Unicode 字符或二进制数据，需要进行\u003ccode\u003eUTF-8\u003c/code\u003e、\u003ccode\u003eGBK\u003c/code\u003e或\u003ccode\u003eBASE64\u003c/code\u003e等方式的编码。\u003c/p\u003e\n\u003cp\u003eSession 可以存取任何类型的数据，甚至是任何 Java 类。可以将 Session 看成是一个 Java 容器类。\u003c/p\u003e\n\u003ch3 id=\"隐私安全\"\u003e\u003ca href=\"#隐私安全\" class=\"headerlink\" title=\"隐私安全\"\u003e\u003c/a\u003e隐私安全\u003c/h3\u003e\u003cp\u003eCookie 存于客户端浏览器，一些客户端的程序可能会窥探、复制或修改 Cookie 内容。\u003c/p\u003e\n\u003cp\u003eSession 存于服务器，对客户端是透明的，不存在敏感信息泄露的危险。\u003c/p\u003e\n\u003ch3 id=\"有效期\"\u003e\u003ca href=\"#有效期\" class=\"headerlink\" title=\"有效期\"\u003e\u003c/a\u003e有效期\u003c/h3\u003e\u003cp\u003e使用 Cookie 可以保证长时间登录有效，只要设置 Cookie 的\u003ccode\u003emaxAge\u003c/code\u003e属性为一个很大的数字。\u003c/p\u003e\n\u003cp\u003e而 Session 虽然理论上也可以通过设置很大的数值来保持长时间登录有效，但是，由于 Session 依赖于名为\u003ccode\u003eJESSIONID\u003c/code\u003e的 Cookie，而 Cookie \u003ccode\u003eJESSIONID\u003c/code\u003e的\u003ccode\u003emaxAge\u003c/code\u003e默认为-1，只要关闭了浏览器该 Session 就会失效，因此，Session 不能实现信息永久有效的效果。使用 URL 地址重写也不能实现。\u003c/p\u003e\n\u003ch3 id=\"服务器的开销\"\u003e\u003ca href=\"#服务器的开销\" class=\"headerlink\" title=\"服务器的开销\"\u003e\u003c/a\u003e服务器的开销\u003c/h3\u003e\u003cp\u003e由于 Session 是保存在服务器的，每个用户都会产生一个 Session，如果并发访问的用户非常多，会产生很多的 Session，消耗大量的内存。\u003c/p\u003e\n\u003cp\u003e而 Cookie 由于保存在客户端浏览器上，所以不占用服务器资源。\u003c/p\u003e\n\u003ch3 id=\"浏览器的支持\"\u003e\u003ca href=\"#浏览器的支持\" class=\"headerlink\" title=\"浏览器的支持\"\u003e\u003c/a\u003e浏览器的支持\u003c/h3\u003e\u003cp\u003eCookie 需要浏览器支持才能使用。\u003c/p\u003e\n\u003cp\u003e如果浏览器不支持 Cookie，需要使用 Session 以及 URL 地址重写。\u003c/p\u003e\n\u003cp\u003e需要注意的事所有的用到 Session 程序的 URL 都要使用\u003ccode\u003eresponse.encodeURL(StringURL)\u003c/code\u003e 或\u003ccode\u003eresponse.encodeRediretURL(String URL)\u003c/code\u003e进行 URL 地址重写，否则导致 Session 会话跟踪失效。\u003c/p\u003e\n\u003ch3 id=\"跨域名\"\u003e\u003ca href=\"#跨域名\" class=\"headerlink\" title=\"跨域名\"\u003e\u003c/a\u003e跨域名\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003eCookie 支持跨域名。\u003c/li\u003e\n\u003cli\u003eSession 不支持跨域名。\u003c/li\u003e\n\u003c/ul\u003e\n\n    \u003c/div\u003e",
  "Date": "2020-08-24T11:41:46Z",
  "Author": "钝悟 ◾ Dunwu"
}