{
  "Source": "dunwu",
  "Title": "Mysql 运维",
  "Link": "https://dunwu.github.io/blog/pages/e33b92/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003ch1 id=\"Mysql-运维\"\u003e\u003ca href=\"#Mysql-运维\" class=\"headerlink\" title=\"Mysql 运维\"\u003e\u003c/a\u003eMysql 运维\u003c/h1\u003e\u003cblockquote\u003e\n\u003cp\u003e如果你的公司有 DBA，那么我恭喜你，你可以无视 Mysql 运维。如果你的公司没有 DBA，那你就好好学两手 Mysql 基本运维操作，行走江湖，防身必备。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"安装部署\"\u003e\u003ca href=\"#安装部署\" class=\"headerlink\" title=\"安装部署\"\u003e\u003c/a\u003e安装部署\u003c/h2\u003e\u003ch3 id=\"Windows-安装\"\u003e\u003ca href=\"#Windows-安装\" class=\"headerlink\" title=\"Windows 安装\"\u003e\u003c/a\u003eWindows 安装\u003c/h3\u003e\u003cp\u003e（1）下载 Mysql 5.7 免安装版\u003c/p\u003e\n\u003cp\u003e下载地址：\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://dev.mysql.com/downloads/mysql/5.7.html#downloads\"\u003ehttps://dev.mysql.com/downloads/mysql/5.7.html#downloads\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e（2）解压并创建 my.ini 在根目录\u003c/p\u003e\n\u003cp\u003emy.ini 文件示例：\u003c/p\u003e\n\u003cfigure class=\"highlight ini\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"section\"\u003e[mysqld]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e#设置3306端口\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eport\u003c/span\u003e = \u003cspan class=\"number\"\u003e3306\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 设置mysql的安装目录 这块换成自己解压的路径\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ebasedir\u003c/span\u003e=D:\\\\Tools\\\\DB\\\\mysql\\\\mysql-\u003cspan class=\"number\"\u003e5.7\u003c/span\u003e.\u003cspan class=\"number\"\u003e31\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 允许最大连接数\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003emax_connections\u003c/span\u003e=\u003cspan class=\"number\"\u003e200\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 服务端使用的字符集默认为8比特编码的latin1字符集\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003echaracter-set-server\u003c/span\u003e=utf8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 创建新表时将使用的默认存储引擎\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003edefault-storage-engine\u003c/span\u003e=INNODB\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"section\"\u003e[client]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 设置mysql客户端默认字符集\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003edefault-character-set\u003c/span\u003e=utf8\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e（3）执行安装命令\u003c/p\u003e\n\u003cp\u003e在控制台 CMD 中依次执行以下安装命令\u003c/p\u003e\n\u003cfigure class=\"highlight taggerscript\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ecd D:\u003cspan class=\"symbol\"\u003e\\\\\u003c/span\u003eTools\u003cspan class=\"symbol\"\u003e\\\\\u003c/span\u003eDB\u003cspan class=\"symbol\"\u003e\\\\\u003c/span\u003emysql\u003cspan class=\"symbol\"\u003e\\\\\u003c/span\u003emysql-5.7.31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysqld --initialize\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysqld -install\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e说明：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003emysqld --initialize\u003c/code\u003e 会自动初始化创建 data 文件夹并初始化 mysql。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emysqld -install\u003c/code\u003e 会安装 mysql 服务。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e（4）启动服务\u003c/p\u003e\n\u003cp\u003e在控制台执行 \u003ccode\u003enet start mysql\u003c/code\u003e 启动服务。\u003c/p\u003e\n\u003ch3 id=\"CentOS-安装\"\u003e\u003ca href=\"#CentOS-安装\" class=\"headerlink\" title=\"CentOS 安装\"\u003e\u003c/a\u003eCentOS 安装\u003c/h3\u003e\u003cblockquote\u003e\n\u003cp\u003e本文仅介绍 rpm 安装方式\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"安装-mysql-yum-源\"\u003e\u003ca href=\"#安装-mysql-yum-源\" class=\"headerlink\" title=\"安装 mysql yum 源\"\u003e\u003c/a\u003e安装 mysql yum 源\u003c/h4\u003e\u003cp\u003e官方下载地址：\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://dev.mysql.com/downloads/repo/yum/\"\u003ehttps://dev.mysql.com/downloads/repo/yum/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e（1）下载 yum 源\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ewget https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e（2）安装 yum repo 文件并更新 yum 缓存\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003erpm -ivh mysql80-community-release-el7-1.noarch.rpm\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e执行结果：\u003c/p\u003e\n\u003cp\u003e会在 /etc/yum.repos.d/ 目录下生成两个 repo 文件\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"built_in\"\u003els\u003c/span\u003e | grep mysql\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysql-community.repo\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysql-community-source.repo\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e更新 yum：\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eyum clean all\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eyum makecache\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e（3）查看 rpm 安装状态\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003eyum search mysql | grep server\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysql-community-common.i686 : MySQL database common files for server and client\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysql-community-common.x86_64 : MySQL database common files for server and\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysql-community-test.x86_64 : Test suite for the MySQL database server\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                       : administering MySQL servers\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysql-community-server.x86_64 : A very fast and reliable SQL database server\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e通过 yum 安装 mysql 有几个重要目录：\u003c/p\u003e\n\u003cfigure class=\"highlight awk\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e## 配置文件\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"regexp\"\u003e/etc/my\u003c/span\u003e.cnf\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e## 数据库目录\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"regexp\"\u003e/var/\u003c/span\u003elib\u003cspan class=\"regexp\"\u003e/mysql/\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e## 配置文件\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"regexp\"\u003e/usr/\u003c/span\u003eshare/mysql（mysql.server命令及配置文件）\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e## 相关命令\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"regexp\"\u003e/usr/\u003c/span\u003ebin（mysqladmin mysqldump等命令）\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e## 启动脚本\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"regexp\"\u003e/usr/\u003c/span\u003elib\u003cspan class=\"regexp\"\u003e/systemd/\u003c/span\u003esystem/mysqld.service （注册为 systemd 服务）\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e（4）安装 mysql 服务器\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eyum install mysql-community-server\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"mysql-服务管理\"\u003e\u003ca href=\"#mysql-服务管理\" class=\"headerlink\" title=\"mysql 服务管理\"\u003e\u003c/a\u003emysql 服务管理\u003c/h4\u003e\u003cp\u003e通过 yum 方式安装 mysql 后，本地会有一个名为 \u003ccode\u003emysqld\u003c/code\u003e 的 systemd 服务。\u003c/p\u003e\n\u003cp\u003e其服务管理十分简便：\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e#\u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"comment\"\u003e# 查看状态\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003esystemctl status mysqld\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e#\u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"comment\"\u003e# 启用服务\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003esystemctl enable mysqld\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e#\u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"comment\"\u003e# 禁用服务\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003esystemctl disable mysqld\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e#\u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"comment\"\u003e# 启动服务\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003esystemctl start mysqld\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e#\u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"comment\"\u003e# 重启服务\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003esystemctl restart mysqld\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e#\u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"comment\"\u003e# 停止服务\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003esystemctl stop mysqld\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"初始化数据库密码\"\u003e\u003ca href=\"#初始化数据库密码\" class=\"headerlink\" title=\"初始化数据库密码\"\u003e\u003c/a\u003e初始化数据库密码\u003c/h3\u003e\u003cp\u003e查看一下初始密码\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003egrep \u003cspan class=\"string\"\u003e\u0026#34;password\u0026#34;\u003c/span\u003e /var/log/mysqld.log\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2018-09-30T03:13:41.727736Z 5 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: %:lt+srWu4k1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e执行命令：\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql -uroot -p\u0026lt;临时密码\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e输入临时密码，进入 mysql，如果要修改密码，执行以下指令：\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eALTER user \u0026#39;root\u0026#39;@\u0026#39;localhost\u0026#39; IDENTIFIED BY \u0026#39;你的密码\u0026#39;;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e注：密码强度默认为中等，大小写字母、数字、特殊符号，只有修改成功后才能修改配置再设置更简单的密码\u003c/p\u003e\n\u003ch3 id=\"配置远程访问\"\u003e\u003ca href=\"#配置远程访问\" class=\"headerlink\" title=\"配置远程访问\"\u003e\u003c/a\u003e配置远程访问\u003c/h3\u003e\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eUSER\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;root\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e IDENTIFIED \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;你的密码\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eGRANT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eALL\u003c/span\u003e \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e \u003cspan class=\"operator\"\u003e*\u003c/span\u003e.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTO\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;root\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eALTER\u003c/span\u003e \u003cspan class=\"keyword\"\u003eUSER\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;root\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e IDENTIFIED \u003cspan class=\"keyword\"\u003eWITH\u003c/span\u003e mysql_native_password \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;你的密码\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eFLUSH PRIVILEGES;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"跳过登录认证\"\u003e\u003ca href=\"#跳过登录认证\" class=\"headerlink\" title=\"跳过登录认证\"\u003e\u003c/a\u003e跳过登录认证\u003c/h3\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003evim /etc/my.cnf\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e在 [mysqld] 下面加上 skip-grant-tables\u003c/p\u003e\n\u003cp\u003e作用是登录时跳过登录认证，换句话说就是 root 什么密码都可以登录进去。\u003c/p\u003e\n\u003cp\u003e执行 \u003ccode\u003esystemctl restart mysqld\u003c/code\u003e，重启 mysql\u003c/p\u003e\n\u003ch2 id=\"基本运维\"\u003e\u003ca href=\"#基本运维\" class=\"headerlink\" title=\"基本运维\"\u003e\u003c/a\u003e基本运维\u003c/h2\u003e\u003ch3 id=\"客户端连接\"\u003e\u003ca href=\"#客户端连接\" class=\"headerlink\" title=\"客户端连接\"\u003e\u003c/a\u003e客户端连接\u003c/h3\u003e\u003cp\u003e语法：\u003ccode\u003emysql -h\u0026lt;主机\u0026gt; -P\u0026lt;端口\u0026gt; -u\u0026lt;用户名\u0026gt; -p\u0026lt;密码\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e如果没有显式指定密码，会要求输入密码才能访问。\u003c/p\u003e\n\u003cp\u003e【示例】连接本地 Mysql\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003emysql -h 127.0.0.1 -P 3306 -u root -p\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eEnter password:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eWelcome to the MySQL monitor.  Commands end with ; or \\g.\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eYour MySQL connection id is 13501\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eServer version: 8.0.19 MySQL Community Server - GPL\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCopyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eOracle is a registered trademark of Oracle Corporation and/or its\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eaffiliates. Other names may be trademarks of their respective\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eowners.\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eType \u0026#39;help;\u0026#39; or \u0026#39;\\h\u0026#39; for help. Type \u0026#39;\\c\u0026#39; to clear the current input statement.\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003emysql\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"查看连接\"\u003e\u003ca href=\"#查看连接\" class=\"headerlink\" title=\"查看连接\"\u003e\u003c/a\u003e查看连接\u003c/h3\u003e\u003cp\u003e连接完成后，如果你没有后续的动作，这个连接就处于空闲状态，你可以在 \u003ccode\u003eshow processlist\u003c/code\u003e 命令中看到它。客户端如果太长时间没动静，连接器就会自动将它断开。这个时间是由参数 \u003ccode\u003ewait_timeout\u003c/code\u003e 控制的，默认值是 8 小时。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/20200714115031.png\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003ch3 id=\"创建用户\"\u003e\u003ca href=\"#创建用户\" class=\"headerlink\" title=\"创建用户\"\u003e\u003c/a\u003e创建用户\u003c/h3\u003e\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eUSER\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;username\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;host\u0026#39;\u003c/span\u003e IDENTIFIED \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;password\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e说明：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eusername：你将创建的用户名\u003c/li\u003e\n\u003cli\u003ehost：指定该用户在哪个主机上可以登陆，如果是本地用户可用 localhost，如果想让该用户可以\u003cstrong\u003e从任意远程主机登陆\u003c/strong\u003e，可以使用通配符\u003ccode\u003e%\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003epassword：该用户的登陆密码，密码可以为空，如果为空则该用户可以不需要密码登陆服务器\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e示例：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eUSER\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;dog\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;localhost\u0026#39;\u003c/span\u003e IDENTIFIED \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;123456\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eUSER\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;pig\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;192.168.1.101_\u0026#39;\u003c/span\u003e IDENDIFIED \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;123456\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eUSER\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;pig\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e IDENTIFIED \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;123456\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eUSER\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;pig\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e IDENTIFIED \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eUSER\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;pig\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e注意：在 Mysql 8 中，默认密码验证不再是 \u003ccode\u003epassword\u003c/code\u003e。所以在创建用户时，\u003ccode\u003ecreate user \u0026#39;username\u0026#39;@\u0026#39;%\u0026#39; identified by \u0026#39;password\u0026#39;;\u003c/code\u003e 客户端是无法连接服务的。\u003c/p\u003e\n\u003cp\u003e所以，需要加上 \u003ccode\u003eIDENTIFIED WITH mysql_native_password\u003c/code\u003e，例如：\u003ccode\u003eCREATE USER \u0026#39;slave\u0026#39;@\u0026#39;%\u0026#39; IDENTIFIED WITH mysql_native_password BY \u0026#39;123456\u0026#39;;\u003c/code\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"查看用户\"\u003e\u003ca href=\"#查看用户\" class=\"headerlink\" title=\"查看用户\"\u003e\u003c/a\u003e查看用户\u003c/h3\u003e\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 查看所有用户\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eDISTINCT\u003c/span\u003e CONCAT(\u003cspan class=\"string\"\u003e\u0026#39;User: \u0026#39;\u0026#39;\u0026#39;\u003c/span\u003e, \u003cspan class=\"keyword\"\u003euser\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;\u0026#39;\u0026#39;@\u0026#39;\u0026#39;\u0026#39;\u003c/span\u003e, host, \u003cspan class=\"string\"\u003e\u0026#39;\u0026#39;\u0026#39;;\u0026#39;\u003c/span\u003e) \u003cspan class=\"keyword\"\u003eAS\u003c/span\u003e query\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e mysql.user;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"授权\"\u003e\u003ca href=\"#授权\" class=\"headerlink\" title=\"授权\"\u003e\u003c/a\u003e授权\u003c/h3\u003e\u003cp\u003e命令：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eGRANT\u003c/span\u003e privileges \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e databasename.tablename \u003cspan class=\"keyword\"\u003eTO\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;username\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;host\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e说明：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eprivileges：用户的操作权限，如\u003ccode\u003eSELECT\u003c/code\u003e，\u003ccode\u003eINSERT\u003c/code\u003e，\u003ccode\u003eUPDATE\u003c/code\u003e等，如果要授予所的权限则使用\u003ccode\u003eALL\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003edatabasename：数据库名\u003c/li\u003e\n\u003cli\u003etablename：表名，如果要授予该用户对所有数据库和表的相应操作权限则可用\u003ccode\u003e*\u003c/code\u003e表示，如\u003ccode\u003e*.*\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e示例：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eGRANT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e, \u003cspan class=\"keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e test.user \u003cspan class=\"keyword\"\u003eTO\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;pig\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eGRANT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eALL\u003c/span\u003e \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e \u003cspan class=\"operator\"\u003e*\u003c/span\u003e.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTO\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;pig\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eGRANT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eALL\u003c/span\u003e \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e maindataplus.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTO\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;pig\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e注意：\u003c/p\u003e\n\u003cp\u003e用以上命令授权的用户不能给其它用户授权，如果想让该用户可以授权，用以下命令:\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 为指定用户配置指定权限\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eGRANT\u003c/span\u003e privileges \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e databasename.tablename \u003cspan class=\"keyword\"\u003eTO\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;username\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;host\u0026#39;\u003c/span\u003e \u003cspan class=\"keyword\"\u003eWITH\u003c/span\u003e \u003cspan class=\"keyword\"\u003eGRANT\u003c/span\u003e OPTION;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 为 root 用户分配所有权限\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eGRANT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eALL\u003c/span\u003e \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e \u003cspan class=\"operator\"\u003e*\u003c/span\u003e.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTO\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;root\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e IDENTIFIED \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;密码\u0026#39;\u003c/span\u003e \u003cspan class=\"keyword\"\u003eWITH\u003c/span\u003e \u003cspan class=\"keyword\"\u003eGRANT\u003c/span\u003e OPTION;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"撤销授权\"\u003e\u003ca href=\"#撤销授权\" class=\"headerlink\" title=\"撤销授权\"\u003e\u003c/a\u003e撤销授权\u003c/h3\u003e\u003cp\u003e命令:\u003c/p\u003e\n\u003cfigure class=\"highlight pgsql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eREVOKE\u003c/span\u003e privilege \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e databasename.tablename \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;username\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;host\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e说明:\u003c/p\u003e\n\u003cp\u003eprivilege, databasename, tablename：同授权部分\u003c/p\u003e\n\u003cp\u003e例子:\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eREVOKE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e \u003cspan class=\"operator\"\u003e*\u003c/span\u003e.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;pig\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e注意:\u003c/p\u003e\n\u003cp\u003e假如你在给用户\u003ccode\u003e\u0026#39;pig\u0026#39;@\u0026#39;%\u0026#39;\u003c/code\u003e授权的时候是这样的（或类似的）：\u003ccode\u003eGRANT SELECT ON test.user TO \u0026#39;pig\u0026#39;@\u0026#39;%\u0026#39;\u003c/code\u003e，则在使用\u003ccode\u003eREVOKE SELECT ON *.* FROM \u0026#39;pig\u0026#39;@\u0026#39;%\u0026#39;;\u003c/code\u003e命令并不能撤销该用户对 test 数据库中 user 表的\u003ccode\u003eSELECT\u003c/code\u003e 操作。相反，如果授权使用的是\u003ccode\u003eGRANT SELECT ON *.* TO \u0026#39;pig\u0026#39;@\u0026#39;%\u0026#39;;\u003c/code\u003e则\u003ccode\u003eREVOKE SELECT ON test.user FROM \u0026#39;pig\u0026#39;@\u0026#39;%\u0026#39;;\u003c/code\u003e命令也不能撤销该用户对 test 数据库中 user 表的\u003ccode\u003eSelect\u003c/code\u003e权限。\u003c/p\u003e\n\u003cp\u003e具体信息可以用命令\u003ccode\u003eSHOW GRANTS FOR \u0026#39;pig\u0026#39;@\u0026#39;%\u0026#39;;\u003c/code\u003e 查看。\u003c/p\u003e\n\u003ch3 id=\"查看授权\"\u003e\u003ca href=\"#查看授权\" class=\"headerlink\" title=\"查看授权\"\u003e\u003c/a\u003e查看授权\u003c/h3\u003e\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 查看用户权限\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSHOW\u003c/span\u003e GRANTS \u003cspan class=\"keyword\"\u003eFOR\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;root\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"更改用户密码\"\u003e\u003ca href=\"#更改用户密码\" class=\"headerlink\" title=\"更改用户密码\"\u003e\u003c/a\u003e更改用户密码\u003c/h3\u003e\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSET\u003c/span\u003e PASSWORD \u003cspan class=\"keyword\"\u003eFOR\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;username\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;host\u0026#39;\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e PASSWORD(\u003cspan class=\"string\"\u003e\u0026#39;newpassword\u0026#39;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e如果是当前登陆用户用:\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSET\u003c/span\u003e PASSWORD \u003cspan class=\"operator\"\u003e=\u003c/span\u003e PASSWORD(\u0026#34;newpassword\u0026#34;);\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e示例：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSET\u003c/span\u003e PASSWORD \u003cspan class=\"keyword\"\u003eFOR\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;pig\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e PASSWORD(\u0026#34;123456\u0026#34;);\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"备份与恢复\"\u003e\u003ca href=\"#备份与恢复\" class=\"headerlink\" title=\"备份与恢复\"\u003e\u003c/a\u003e备份与恢复\u003c/h3\u003e\u003cp\u003eMysql 备份数据使用 mysqldump 命令。\u003c/p\u003e\n\u003cp\u003emysqldump 将数据库中的数据备份成一个文本文件，表的结构和表中的数据将存储在生成的文本文件中。\u003c/p\u003e\n\u003cp\u003e备份：\u003c/p\u003e\n\u003ch4 id=\"备份一个数据库\"\u003e\u003ca href=\"#备份一个数据库\" class=\"headerlink\" title=\"备份一个数据库\"\u003e\u003c/a\u003e备份一个数据库\u003c/h4\u003e\u003cp\u003e语法：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysqldump \u003cspan class=\"operator\"\u003e-\u003c/span\u003eh \u003cspan class=\"operator\"\u003e\u0026lt;\u003c/span\u003ehost\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"operator\"\u003e-\u003c/span\u003eP\u003cspan class=\"operator\"\u003e\u0026lt;\u003c/span\u003eport\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"operator\"\u003e-\u003c/span\u003eu\u003cspan class=\"operator\"\u003e\u0026lt;\u003c/span\u003eusername\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"operator\"\u003e-\u003c/span\u003ep\u003cspan class=\"operator\"\u003e\u0026lt;\u003c/span\u003edatabase\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e [\u003cspan class=\"operator\"\u003e\u0026lt;\u003c/span\u003etable1\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"operator\"\u003e\u0026lt;\u003c/span\u003etable2\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e ...] \u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e backup.sql\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003ehost\u003c/code\u003e\u003c/strong\u003e - Mysql Server 的 host\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003eport\u003c/code\u003e\u003c/strong\u003e - Mysql Server 的端口\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003eusername\u003c/code\u003e\u003c/strong\u003e - 数据库用户\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003edbname\u003c/code\u003e\u003c/strong\u003e - 数据库名称\u003c/li\u003e\n\u003cli\u003etable1 和 table2 参数表示需要备份的表的名称，为空则整个数据库备份；\u003c/li\u003e\n\u003cli\u003eBackupName.sql 参数表设计备份文件的名称，文件名前面可以加上一个绝对路径。通常将数据库被分成一个后缀名为 sql 的文件\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"备份多个数据库\"\u003e\u003ca href=\"#备份多个数据库\" class=\"headerlink\" title=\"备份多个数据库\"\u003e\u003c/a\u003e备份多个数据库\u003c/h4\u003e\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysqldump \u003cspan class=\"operator\"\u003e-\u003c/span\u003eu \u003cspan class=\"operator\"\u003e\u0026lt;\u003c/span\u003eusername\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"operator\"\u003e-\u003c/span\u003ep \u003cspan class=\"comment\"\u003e--databases \u0026lt;database1\u0026gt; \u0026lt;database2\u0026gt; ... \u0026gt; backup.sql\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"备份所有数据库\"\u003e\u003ca href=\"#备份所有数据库\" class=\"headerlink\" title=\"备份所有数据库\"\u003e\u003c/a\u003e备份所有数据库\u003c/h4\u003e\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysqldump \u003cspan class=\"operator\"\u003e-\u003c/span\u003eu \u003cspan class=\"operator\"\u003e\u0026lt;\u003c/span\u003eusername\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"operator\"\u003e-\u003c/span\u003ep \u003cspan class=\"comment\"\u003e--all-databases \u0026gt; backup.sql\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"恢复一个数据库\"\u003e\u003ca href=\"#恢复一个数据库\" class=\"headerlink\" title=\"恢复一个数据库\"\u003e\u003c/a\u003e恢复一个数据库\u003c/h4\u003e\u003cp\u003eMysql 恢复数据使用 mysql 命令。\u003c/p\u003e\n\u003cp\u003e语法：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql \u003cspan class=\"operator\"\u003e-\u003c/span\u003eh \u003cspan class=\"operator\"\u003e\u0026lt;\u003c/span\u003ehost\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"operator\"\u003e-\u003c/span\u003eP\u003cspan class=\"operator\"\u003e\u0026lt;\u003c/span\u003eport\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"operator\"\u003e-\u003c/span\u003eu\u003cspan class=\"operator\"\u003e\u0026lt;\u003c/span\u003eusername\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"operator\"\u003e-\u003c/span\u003ep\u003cspan class=\"operator\"\u003e\u0026lt;\u003c/span\u003edatabase\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"operator\"\u003e\u0026lt;\u003c/span\u003e backup.sql\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"恢复所有数据库\"\u003e\u003ca href=\"#恢复所有数据库\" class=\"headerlink\" title=\"恢复所有数据库\"\u003e\u003c/a\u003e恢复所有数据库\u003c/h4\u003e\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql \u003cspan class=\"operator\"\u003e-\u003c/span\u003eu\u003cspan class=\"operator\"\u003e\u0026lt;\u003c/span\u003eusername\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"operator\"\u003e-\u003c/span\u003ep \u003cspan class=\"comment\"\u003e--all-databases \u0026lt; backup.sql\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"卸载\"\u003e\u003ca href=\"#卸载\" class=\"headerlink\" title=\"卸载\"\u003e\u003c/a\u003e卸载\u003c/h3\u003e\u003cp\u003e（1）查看已安装的 mysql\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003erpm -qa | grep -i mysql\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eperl-DBD-MySQL-4.023-6.el7.x86_64\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysql80-community-release-el7-1.noarch\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysql-community-common-8.0.12-1.el7.x86_64\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysql-community-client-8.0.12-1.el7.x86_64\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysql-community-libs-compat-8.0.12-1.el7.x86_64\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysql-community-libs-8.0.12-1.el7.x86_64\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e（2）卸载 mysql\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eyum remove mysql-community-server.x86_64\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"主从节点部署\"\u003e\u003ca href=\"#主从节点部署\" class=\"headerlink\" title=\"主从节点部署\"\u003e\u003c/a\u003e主从节点部署\u003c/h3\u003e\u003cp\u003e假设需要配置一个主从 Mysql 服务器环境\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003emaster 节点：192.168.8.10\u003c/li\u003e\n\u003cli\u003eslave 节点：192.168.8.11\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"主节点上的操作\"\u003e\u003ca href=\"#主节点上的操作\" class=\"headerlink\" title=\"主节点上的操作\"\u003e\u003c/a\u003e主节点上的操作\u003c/h4\u003e\u003cp\u003e（1）修改配置并重启\u003c/p\u003e\n\u003cp\u003e执行 \u003ccode\u003evi /etc/my.cnf\u003c/code\u003e ，添加如下配置：\u003c/p\u003e\n\u003cfigure class=\"highlight ini\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"section\"\u003e[mysqld]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eserver-id\u003c/span\u003e=\u003cspan class=\"number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003elog_bin\u003c/span\u003e=/var/lib/mysql/binlog\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eserver-id\u003c/code\u003e - 服务器 ID 号。在主从架构中，每台机器的 ID 必须唯一。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elog_bin\u003c/code\u003e - 同步的日志路径及文件名，一定注意这个目录要是 mysql 有权限写入的；\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e修改后，重启 mysql 使配置生效：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003esystemctl restart mysql\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e（2）创建用于同步的用户\u003c/p\u003e\n\u003cp\u003e进入 mysql 命令控制台：\u003c/p\u003e\n\u003cfigure class=\"highlight avrasm\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ mysql -u root -p\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"symbol\"\u003ePassword:\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e执行以下 SQL：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- a. 创建 slave 用户\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eUSER\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;slave\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e IDENTIFIED \u003cspan class=\"keyword\"\u003eWITH\u003c/span\u003e mysql_native_password \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;密码\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 为 slave 赋予 REPLICATION SLAVE 权限\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eGRANT\u003c/span\u003e REPLICATION SLAVE \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e \u003cspan class=\"operator\"\u003e*\u003c/span\u003e.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTO\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;slave\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- b. 或者，创建 slave 用户，并指定该用户能在任意主机上登录\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 如果有多个从节点，又想让所有从节点都使用统一的用户名、密码认证，可以考虑这种方式\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eUSER\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;slave\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e IDENTIFIED \u003cspan class=\"keyword\"\u003eWITH\u003c/span\u003e mysql_native_password \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;密码\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eGRANT\u003c/span\u003e REPLICATION SLAVE \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e \u003cspan class=\"operator\"\u003e*\u003c/span\u003e.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTO\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;slave\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 刷新授权表信息\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eFLUSH PRIVILEGES;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e注意：在 Mysql 8 中，默认密码验证不再是 \u003ccode\u003epassword\u003c/code\u003e。所以在创建用户时，\u003ccode\u003ecreate user \u0026#39;username\u0026#39;@\u0026#39;%\u0026#39; identified by \u0026#39;password\u0026#39;;\u003c/code\u003e 客户端是无法连接服务的。所以，需要加上 \u003ccode\u003eIDENTIFIED WITH mysql_native_password BY \u0026#39;password\u0026#39;\u003c/code\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e补充用户管理 SQL:\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 查看所有用户\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eDISTINCT\u003c/span\u003e CONCAT(\u003cspan class=\"string\"\u003e\u0026#39;User: \u0026#39;\u0026#39;\u0026#39;\u003c/span\u003e, \u003cspan class=\"keyword\"\u003euser\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;\u0026#39;\u0026#39;@\u0026#39;\u0026#39;\u0026#39;\u003c/span\u003e, host, \u003cspan class=\"string\"\u003e\u0026#39;\u0026#39;\u0026#39;;\u0026#39;\u003c/span\u003e) \u003cspan class=\"keyword\"\u003eAS\u003c/span\u003e query\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e mysql.user;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 查看用户权限\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSHOW\u003c/span\u003e GRANTS \u003cspan class=\"keyword\"\u003eFOR\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;root\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 创建用户\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- a. 创建 slave 用户，并指定该用户只能在主机 192.168.8.11 上登录\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eUSER\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;slave\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;192.168.8.11\u0026#39;\u003c/span\u003e IDENTIFIED \u003cspan class=\"keyword\"\u003eWITH\u003c/span\u003e mysql_native_password \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;密码\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 为 slave 赋予 REPLICATION SLAVE 权限\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eGRANT\u003c/span\u003e REPLICATION SLAVE \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e \u003cspan class=\"operator\"\u003e*\u003c/span\u003e.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTO\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;slave\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;192.168.8.11\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 删除用户\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eDROP\u003c/span\u003e \u003cspan class=\"keyword\"\u003eUSER\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;slave\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;192.168.8.11\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e（3）加读锁\u003c/p\u003e\n\u003cp\u003e为了主库与从库的数据保持一致，我们先为 mysql 加入读锁，使其变为只读。\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e FLUSH TABLES \u003cspan class=\"keyword\"\u003eWITH\u003c/span\u003e READ LOCK;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e（4）查看主节点状态\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"keyword\"\u003eshow\u003c/span\u003e master status;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e------------------+----------+--------------+---------------------------------------------+-------------------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e File             \u003cspan class=\"operator\"\u003e|\u003c/span\u003e Position \u003cspan class=\"operator\"\u003e|\u003c/span\u003e Binlog_Do_DB \u003cspan class=\"operator\"\u003e|\u003c/span\u003e Binlog_Ignore_DB                            \u003cspan class=\"operator\"\u003e|\u003c/span\u003e Executed_Gtid_Set \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e------------------+----------+--------------+---------------------------------------------+-------------------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e mysql\u003cspan class=\"operator\"\u003e-\u003c/span\u003ebin\u003cspan class=\"number\"\u003e.000001\u003c/span\u003e \u003cspan class=\"operator\"\u003e|\u003c/span\u003e     \u003cspan class=\"number\"\u003e4202\u003c/span\u003e \u003cspan class=\"operator\"\u003e|\u003c/span\u003e              \u003cspan class=\"operator\"\u003e|\u003c/span\u003e mysql,information_schema,performance_schema \u003cspan class=\"operator\"\u003e|\u003c/span\u003e                   \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e------------------+----------+--------------+---------------------------------------------+-------------------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"number\"\u003e1\u003c/span\u003e \u003cspan class=\"type\"\u003erow\u003c/span\u003e \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"keyword\"\u003eset\u003c/span\u003e (\u003cspan class=\"number\"\u003e0.00\u003c/span\u003e sec)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e注意：需要记录下 \u003ccode\u003eFile\u003c/code\u003e 和 \u003ccode\u003ePosition\u003c/code\u003e，后面会用到。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e（5）导出 sql\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysqldump -u root -p --all-databases --master-data \u0026gt; dbdump.sql\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e（6）解除读锁\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e UNLOCK TABLES;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e（7）将 sql 远程传送到从节点上\u003c/p\u003e\n\u003cfigure class=\"highlight elixir\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003escp dbdump.sql root\u003cspan class=\"variable\"\u003e@192\u003c/span\u003e.\u003cspan class=\"number\"\u003e168.8\u003c/span\u003e.\u003cspan class=\"number\"\u003e11\u003c/span\u003e\u003cspan class=\"symbol\"\u003e:/home\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"从节点上的操作\"\u003e\u003ca href=\"#从节点上的操作\" class=\"headerlink\" title=\"从节点上的操作\"\u003e\u003c/a\u003e从节点上的操作\u003c/h4\u003e\u003cp\u003e（1）修改配置并重启\u003c/p\u003e\n\u003cp\u003e执行 \u003ccode\u003evi /etc/my.cnf\u003c/code\u003e ，添加如下配置：\u003c/p\u003e\n\u003cfigure class=\"highlight ini\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"section\"\u003e[mysqld]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eserver-id\u003c/span\u003e=\u003cspan class=\"number\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003elog_bin\u003c/span\u003e=/var/lib/mysql/binlog\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eserver-id\u003c/code\u003e - 服务器 ID 号。在主从架构中，每台机器的 ID 必须唯一。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elog_bin\u003c/code\u003e - 同步的日志路径及文件名，一定注意这个目录要是 mysql 有权限写入的；\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e修改后，重启 mysql 使配置生效：\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003esystemctl restart mysql\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e（2）导入 sql\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql -u root -p \u0026lt; /home/dbdump.sql\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e（3）在从节点上建立与主节点的连接\u003c/p\u003e\n\u003cp\u003e进入 mysql 命令控制台：\u003c/p\u003e\n\u003cfigure class=\"highlight avrasm\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ mysql -u root -p\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"symbol\"\u003ePassword:\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e执行以下 SQL：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 停止从节点服务\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eSTOP SLAVE;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 注意：MASTER_USER 和\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCHANGE MASTER \u003cspan class=\"keyword\"\u003eTO\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eMASTER_HOST\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"string\"\u003e\u0026#39;192.168.8.10\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eMASTER_USER\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"string\"\u003e\u0026#39;slave\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eMASTER_PASSWORD\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"string\"\u003e\u0026#39;密码\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eMASTER_LOG_FILE\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"string\"\u003e\u0026#39;binlog.000001\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eMASTER_LOG_POS\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"number\"\u003e4202\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eMASTER_LOG_FILE\u003c/code\u003e 和 \u003ccode\u003eMASTER_LOG_POS\u003c/code\u003e 参数要分别与 \u003ccode\u003eshow master status\u003c/code\u003e 指令获得的 \u003ccode\u003eFile\u003c/code\u003e 和 \u003ccode\u003ePosition\u003c/code\u003e 属性值对应。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eMASTER_HOST\u003c/code\u003e 是主节点的 HOST。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eMASTER_USER\u003c/code\u003e 和 \u003ccode\u003eMASTER_PASSWORD\u003c/code\u003e 是在主节点上注册的用户及密码。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e（4）启动 slave 进程\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"keyword\"\u003estart\u003c/span\u003e slave;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e（5）查看主从同步状态\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"keyword\"\u003eshow\u003c/span\u003e slave status\\G;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e说明：如果以下两项参数均为 YES，说明配置正确。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eSlave_IO_Running\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSlave_SQL_Running\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e（6）将从节点设为只读\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"keyword\"\u003eset\u003c/span\u003e \u003cspan class=\"keyword\"\u003eglobal\u003c/span\u003e read_only\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"number\"\u003e1\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysql\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"keyword\"\u003eset\u003c/span\u003e \u003cspan class=\"keyword\"\u003eglobal\u003c/span\u003e super_read_only\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"number\"\u003e1\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysql\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"keyword\"\u003eshow\u003c/span\u003e \u003cspan class=\"keyword\"\u003eglobal\u003c/span\u003e variables \u003cspan class=\"keyword\"\u003elike\u003c/span\u003e \u0026#34;%read_only%\u0026#34;;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e-----------------------+-------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e Variable_name         \u003cspan class=\"operator\"\u003e|\u003c/span\u003e \u003cspan class=\"keyword\"\u003eValue\u003c/span\u003e \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e-----------------------+-------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e innodb_read_only      \u003cspan class=\"operator\"\u003e|\u003c/span\u003e OFF   \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e read_only             \u003cspan class=\"operator\"\u003e|\u003c/span\u003e \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e    \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e super_read_only       \u003cspan class=\"operator\"\u003e|\u003c/span\u003e \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e    \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e transaction_read_only \u003cspan class=\"operator\"\u003e|\u003c/span\u003e OFF   \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e-----------------------+-------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e注：设置 slave 服务器为只读，并不影响主从同步。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"慢查询\"\u003e\u003ca href=\"#慢查询\" class=\"headerlink\" title=\"慢查询\"\u003e\u003c/a\u003e慢查询\u003c/h3\u003e\u003cp\u003e查看慢查询是否开启\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eshow\u003c/span\u003e variables \u003cspan class=\"keyword\"\u003elike\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;%slow_query_log\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e可以通过 \u003ccode\u003eset global slow_query_log\u003c/code\u003e 命令设置慢查询是否开启：ON 表示开启；OFF 表示关闭。\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eset\u003c/span\u003e \u003cspan class=\"keyword\"\u003eglobal\u003c/span\u003e slow_query_log\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"string\"\u003e\u0026#39;ON\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e查看慢查询时间阈值\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eshow\u003c/span\u003e variables \u003cspan class=\"keyword\"\u003elike\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;%long_query_time%\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e设置慢查询阈值\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eset\u003c/span\u003e \u003cspan class=\"keyword\"\u003eglobal\u003c/span\u003e long_query_time \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"number\"\u003e3\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"隔离级别\"\u003e\u003ca href=\"#隔离级别\" class=\"headerlink\" title=\"隔离级别\"\u003e\u003c/a\u003e隔离级别\u003c/h3\u003e\u003cp\u003e查看隔离级别：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"keyword\"\u003eshow\u003c/span\u003e variables \u003cspan class=\"keyword\"\u003elike\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;transaction_isolation\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e-----------------------+----------------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e Variable_name \u003cspan class=\"operator\"\u003e|\u003c/span\u003e \u003cspan class=\"keyword\"\u003eValue\u003c/span\u003e \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e-----------------------+----------------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e transaction_isolation \u003cspan class=\"operator\"\u003e|\u003c/span\u003e READ\u003cspan class=\"operator\"\u003e-\u003c/span\u003eCOMMITTED \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e-----------------------+----------------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"服务器配置\"\u003e\u003ca href=\"#服务器配置\" class=\"headerlink\" title=\"服务器配置\"\u003e\u003c/a\u003e服务器配置\u003c/h2\u003e\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003e大部分情况下，默认的基本配置已经足够应付大多数场景，不要轻易修改 Mysql 服务器配置，除非你明确知道修改项是有益的。\u003c/em\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e尽量不要使用 Mysql 的缓存功能，因为其要求每次请求参数完全相同，才能命中缓存。这种方式实际上并不高效，还会增加额外开销，实际业务场景中一般使用 Redis 等 key-value 存储来解决缓存问题，性能远高于 Mysql 的查询缓存。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"配置文件路径\"\u003e\u003ca href=\"#配置文件路径\" class=\"headerlink\" title=\"配置文件路径\"\u003e\u003c/a\u003e配置文件路径\u003c/h3\u003e\u003cp\u003e配置 Mysql 首先要确定配置文件在哪儿。\u003c/p\u003e\n\u003cp\u003e不同 Linux 操作系统上，Mysql 配置文件路径可能不同。通常的路径为 /etc/my.cnf 或 /etc/mysql/my.cnf 。\u003c/p\u003e\n\u003cp\u003e如果不知道配置文件路径，可以尝试以下操作：\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"built_in\"\u003ewhich\u003c/span\u003e mysqld\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e/usr/sbin/mysqld\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e/usr/sbin/mysqld --verbose --\u003cspan class=\"built_in\"\u003ehelp\u003c/span\u003e | grep -A 1 \u003cspan class=\"string\"\u003e\u0026#39;Default options\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eDefault options are read from the following files in the given order:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e/etc/my.cnf /etc/mysql/my.cnf /usr/etc/my.cnf ~/.my.cnf\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"配置项语法\"\u003e\u003ca href=\"#配置项语法\" class=\"headerlink\" title=\"配置项语法\"\u003e\u003c/a\u003e配置项语法\u003c/h3\u003e\u003cp\u003e\u003cstrong\u003eMysql 配置项设置都使用小写，单词之间用下划线或横线隔开（二者是等价的）。\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e建议使用固定的风格，这样检索配置项时较为方便。\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e这两种格式等价\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e/usr/sbin/mysqld --auto-increment-offset=5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e/usr/sbin/mysqld --auto_increment_offset=5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"基本配置模板\"\u003e\u003ca href=\"#基本配置模板\" class=\"headerlink\" title=\"基本配置模板\"\u003e\u003c/a\u003e基本配置模板\u003c/h3\u003e\u003cp\u003e一个基本的 Mysql 配置模板大概如下：\u003c/p\u003e\n\u003cfigure class=\"highlight ini\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e35\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e36\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e37\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e38\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e39\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e40\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"section\"\u003e[mysqld]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# GENERAL\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# -------------------------------------------------------------------------------\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003edatadir\u003c/span\u003e = /var/lib/mysql\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003esocket\u003c/span\u003e  = /var/lib/mysql/mysql.sock\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003epid_file\u003c/span\u003e = /var/lib/mysql/mysql.pid\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003euser\u003c/span\u003e = mysql\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eport\u003c/span\u003e = \u003cspan class=\"number\"\u003e3306\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003edefault_storage_engine\u003c/span\u003e = InnoDB\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003edefault_time_zone\u003c/span\u003e = \u003cspan class=\"string\"\u003e\u0026#39;+8：00\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003echaracter_set_server\u003c/span\u003e = utf8mb4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ecollation_server\u003c/span\u003e = utf8mb\u003cspan class=\"number\"\u003e4_0900_\u003c/span\u003eai_ci\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# LOG\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# -------------------------------------------------------------------------------\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003elog_error\u003c/span\u003e = /var/log/mysql/mysql-error.log\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eslow_query_log\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eslow_query_log_file\u003c/span\u003e = /var/log/mysql/mysql-slow.log\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# InnoDB\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# -------------------------------------------------------------------------------\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_buffer_pool_size\u003c/span\u003e = \u0026lt;value\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_log_file_size\u003c/span\u003e = \u0026lt;value\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_file_per_table\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_flush_method\u003c/span\u003e = O_DIRECT\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# MyIsam\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# -------------------------------------------------------------------------------\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ekey_buffer_size\u003c/span\u003e = \u0026lt;value\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# OTHER\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# -------------------------------------------------------------------------------\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003etmp_table_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e32\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003emax_heap_table_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e32\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003emax_connections\u003c/span\u003e = \u0026lt;value\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eopen_files_limit\u003c/span\u003e = \u003cspan class=\"number\"\u003e65535\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"section\"\u003e[client]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003esocket\u003c/span\u003e  = /var/lib/mysql/mysql.sock\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eport\u003c/span\u003e = \u003cspan class=\"number\"\u003e3306\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"配置项说明\"\u003e\u003ca href=\"#配置项说明\" class=\"headerlink\" title=\"配置项说明\"\u003e\u003c/a\u003e配置项说明\u003c/h3\u003e\u003cp\u003e下面是一个较为详尽的 Mysql 配置文件，各配置项有注释说明：\u003c/p\u003e\n\u003cfigure class=\"highlight ini\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e35\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e36\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e37\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e38\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e39\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e40\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e41\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e42\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e43\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e44\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e45\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e46\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e47\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e48\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e49\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e50\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e51\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e52\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e53\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e54\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e55\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e56\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e57\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e58\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e59\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e60\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e61\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e62\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e63\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e64\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e65\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e66\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e67\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e68\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e69\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e70\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e71\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e72\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e73\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e74\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e75\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e76\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e77\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e78\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e79\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e80\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e81\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e82\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e83\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e84\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e85\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e86\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e87\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e88\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e89\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e90\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e91\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e92\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e93\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e94\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e95\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e96\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e97\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e98\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e99\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e100\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e101\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e102\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e103\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e104\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e105\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e106\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e107\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e108\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e109\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e110\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e111\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e112\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e113\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e114\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e115\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e116\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e117\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e118\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e119\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e120\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e121\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e122\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e123\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e124\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e125\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e126\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e127\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e128\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e129\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e130\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e131\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e132\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e133\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e134\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e135\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e136\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e137\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e138\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e139\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e140\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e141\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e142\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e143\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e144\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e145\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e146\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e147\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e148\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e149\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e150\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e151\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e152\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e153\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e154\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e155\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e156\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e157\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e158\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e159\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e160\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e161\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e162\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e163\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e164\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e165\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e166\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e167\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e168\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e169\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e170\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e171\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e172\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e173\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e174\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e175\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e176\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e177\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e178\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e179\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e180\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e181\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e182\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e183\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e184\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e185\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e186\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e187\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e188\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e189\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e190\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e191\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e192\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e193\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e194\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e195\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e196\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e197\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e198\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e199\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e200\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e201\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e202\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e203\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e204\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e205\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e206\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e207\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e208\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e209\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e210\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e211\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e212\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e213\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e214\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e215\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e216\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e217\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e218\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e219\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e220\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e221\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e222\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e223\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e224\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e225\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e226\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e227\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e228\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e229\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e230\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e231\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e232\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e233\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e234\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e235\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e236\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e237\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e238\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e239\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e240\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e241\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e242\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e243\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e244\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e245\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e246\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e247\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e248\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e249\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e250\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e251\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e252\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e253\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e254\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e255\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e256\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e257\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e258\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e259\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e260\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e261\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e262\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e263\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e264\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e265\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e266\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e267\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e268\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e269\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e270\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e271\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e272\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e273\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e274\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e275\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e276\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e277\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e278\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e279\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e280\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e281\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e282\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e283\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e284\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e285\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e286\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e287\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e288\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e289\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e290\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e291\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e292\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e293\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e294\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e295\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e296\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e297\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e298\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e299\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e300\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e301\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e302\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e303\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e304\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e305\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e306\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e307\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e308\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e309\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e310\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e311\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e312\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e313\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e314\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e315\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e316\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e317\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e318\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e319\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e320\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e321\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e322\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e323\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e324\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e325\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e326\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e327\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e328\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e329\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e330\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e331\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e332\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e333\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e334\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e335\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e336\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e337\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e338\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e339\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e340\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e341\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e342\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e343\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e344\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e345\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e346\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e347\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e348\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e349\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e350\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e351\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e352\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e353\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e354\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e355\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e356\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e357\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e358\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e359\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e360\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e361\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e362\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e363\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e364\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e365\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e366\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e367\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e368\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e369\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e370\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e371\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e372\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e373\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e374\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e375\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e376\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e377\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e378\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e379\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e380\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e381\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e382\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e383\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e384\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e385\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e386\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e387\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e388\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e389\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e390\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e391\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e392\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e393\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"section\"\u003e[mysqld]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# GENERAL\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# -------------------------------------------------------------------------------\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003edatadir\u003c/span\u003e = /var/lib/mysql\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# socket 文件\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003esocket\u003c/span\u003e  = /var/lib/mysql/mysql.sock\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# PID 文件\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003epid_file\u003c/span\u003e = /var/lib/mysql/mysql.pid\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 启动 mysql 服务进程的用户\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003euser\u003c/span\u003e = mysql\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 服务端口号，默认 3306\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eport\u003c/span\u003e = \u003cspan class=\"number\"\u003e3306\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003edefault_storage_engine\u003c/span\u003e = InnoDB\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认时区\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003edefault_time_zone\u003c/span\u003e = \u003cspan class=\"string\"\u003e\u0026#39;+8:00\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003echaracter_set_server\u003c/span\u003e = utf8mb4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ecollation_server\u003c/span\u003e = utf8mb\u003cspan class=\"number\"\u003e4_0900_\u003c/span\u003eai_ci\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# Mysql 服务 ID，单点服务时没必要设置\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eserver-id\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 事务隔离级别，默认为可重复读（REPEATABLE-READ）。（此级别下可能参数很多间隙锁，影响性能，但是修改又影响主从复制及灾难恢复，建议还是修改代码逻辑吧）\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 隔离级别可选项目：READ-UNCOMMITTED READ-COMMITTED REPEATABLE-READ SERIALIZABLE\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003etransaction_isolation\u003c/span\u003e = REPEATABLE-READ\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 目录配置\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# -------------------------------------------------------------------------------\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# mysql 安装根目录\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ebasedir\u003c/span\u003e = /usr/local/mysql-\u003cspan class=\"number\"\u003e5.7\u003c/span\u003e.\u003cspan class=\"number\"\u003e21\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# mysql 数据文件所在目录\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003edatadir\u003c/span\u003e = /var/lib/mysql\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 临时目录 比如 load data infile 会用到，一般都是使用/tmp\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003etmpdir\u003c/span\u003e = /tmp\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 数据库引擎配置\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# -------------------------------------------------------------------------------\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# mysql 5.1 之后，默认引擎是 InnoDB\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003edefault_storage_engine\u003c/span\u003e = InnoDB\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 内存临时表默认引擎，默认 InnoDB\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003edefault_tmp_storage_engine\u003c/span\u003e = InnoDB\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# mysql 5.7 新增特性，磁盘临时表默认引擎，默认 InnoDB\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einternal_tmp_disk_storage_engine\u003c/span\u003e = InnoDB\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 字符集配置\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# -------------------------------------------------------------------------------\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 数据库默认字符集，主流字符集支持一些特殊表情符号（特殊表情符占用 4 个字节）\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003echaracter_set_server\u003c/span\u003e = utf8mb4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 数据库字符集对应一些排序等规则，注意要和 character_set_server 对应\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ecollation-server\u003c/span\u003e = utf8mb\u003cspan class=\"number\"\u003e4_0900_\u003c/span\u003eai_ci\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 设置 client 连接 mysql 时的字符集，防止乱码\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# init_connect=\u0026#39;SET NAMES utf8\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 是否对 sql 语句大小写敏感，默认值为 0，1 表示不敏感\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003elower_case_table_names\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 数据库连接配置\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# -------------------------------------------------------------------------------\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 最大连接数，可设最大值 16384，一般考虑根据同时在线人数设置一个比较综合的数字，鉴于该数值增大并不太消耗系统资源，建议直接设 10000\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 如果在访问时经常出现 Too Many Connections 的错误提示，则需要增大该参数值\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003emax_connections\u003c/span\u003e = \u003cspan class=\"number\"\u003e10000\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 100，最大错误连接数，如果有超出该参数值个数的中断错误连接，则该主机将被禁止连接。如需对该主机进行解禁，执行：FLUSH HOST\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 考虑高并发场景下的容错，建议加大。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003emax_connect_errors\u003c/span\u003e = \u003cspan class=\"number\"\u003e10000\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# MySQL 打开的文件描述符限制，默认最小 1024;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 当 open_files_limit 没有被配置的时候，比较 max_connections\\*5 和 ulimit -n 的值，哪个大用哪个，\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 当 open_file_limit 被配置的时候，比较 open_files_limit 和 max_connections\\*5 的值，哪个大用哪个。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 注意：仍然可能出现报错信息 Can\u0026#39;t create a new thread；此时观察系统 cat /proc/mysql 进程号/limits，观察进程 ulimit 限制情况\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 过小的话，考虑修改系统配置表，/etc/security/limits.conf 和 /etc/security/limits.d/90-nproc.conf\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eopen_files_limit\u003c/span\u003e = \u003cspan class=\"number\"\u003e65535\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 超时配置\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# -------------------------------------------------------------------------------\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# MySQL 默认的 wait_timeout 值为 8 个小时，interactive_timeout 参数需要同时配置才能生效\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# MySQL 连接闲置超过一定时间后(单位：秒，此处为 1800 秒)将会被强行关闭\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einteractive_timeout\u003c/span\u003e = \u003cspan class=\"number\"\u003e1800\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ewait_timeout\u003c/span\u003e = \u003cspan class=\"number\"\u003e1800\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 在 MySQL 暂时停止响应新请求之前的短时间内多少个请求可以被存在堆栈中\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 官方建议 back_log = 50 + (max_connections / 5)，封顶数为 900\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eback_log\u003c/span\u003e = \u003cspan class=\"number\"\u003e900\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 数据库数据交换配置\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# -------------------------------------------------------------------------------\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 该参数限制服务器端，接受的数据包大小，如果有 BLOB 子段，建议增大此值，避免写入或者更新出错。有 BLOB 子段，建议改为 1024M\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003emax_allowed_packet\u003c/span\u003e = \u003cspan class=\"number\"\u003e128\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 内存、cache 与 buffer 设置\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 内存临时表的最大值，默认 16M，此处设置成 64M\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003etmp_table_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e64\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 用户创建的内存表的大小，默认 16M，往往和 tmp_table_size 一起设置，限制用户临时表大小。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 超限的话，MySQL 就会自动地把它转化为基于磁盘的 MyISAM 表，存储在指定的 tmpdir 目录下，增大 IO 压力，建议内存大，增大该数值。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003emax_heap_table_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e64\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 表示这个 mysql 版本是否支持查询缓存。ps：SHOW STATUS LIKE \u0026#39;qcache%\u0026#39;，与缓存相关的状态变量。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# have_query_cache\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 这个系统变量控制着查询缓存功能的开启和关闭，0 表示关闭，1 表示打开，2 表示只要 select 中明确指定 SQL_CACHE 才缓存。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 看业务场景决定是否使用缓存，不使用，下面就不用配置了。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# Mysql8 不支持\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003equery_cache_type\u003c/span\u003e = \u003cspan class=\"number\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 1M，优点是查询缓存可以极大的提高服务器速度，如果你有大量的相同的查询并且很少修改表。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 缺点：在你表经常变化的情况下或者如果你的查询原文每次都不同，查询缓存也许引起性能下降而不是性能提升。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# Mysql8 不支持\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003equery_cache_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e64\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 只有小于此设定值的结果才会被缓冲，保护查询缓冲，防止一个极大的结果集将其他所有的查询结果都覆盖。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003equery_cache_limit\u003c/span\u003e = \u003cspan class=\"number\"\u003e2\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 每个被缓存的结果集要占用的最小内存，默认值 4kb，一般不怎么调整。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 如果 Qcache_free_blocks 值过大，可能是 query_cache_min_res_unit 值过大，应该调小些\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# query_cache_min_res_unit 的估计值：(query_cache_size - Qcache_free_memory) / Qcache_queries_in_cache\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003equery_cache_min_res_unit\u003c/span\u003e = \u003cspan class=\"number\"\u003e4\u003c/span\u003ekb\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 在一个事务中 binlog 为了记录 SQL 状态所持有的 cache 大小\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 如果你经常使用大的、多声明的事务，你可以增加此值来获取更大的性能。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 所有从事务来的状态都将被缓冲在 binlog 缓冲中然后在提交后一次性写入到 binlog 中\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 如果事务比此值大，会使用磁盘上的临时文件来替代。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 此缓冲在每个连接的事务第一次更新状态时被创建\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ebinlog_cache_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 日志配置\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# -------------------------------------------------------------------------------\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 日志文件相关设置，一般只开启三种日志，错误日志，慢查询日志，二进制日志。普通查询日志不开启。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 普通查询日志，默认值 off，不开启\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003egeneral_log\u003c/span\u003e = \u003cspan class=\"number\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 普通查询日志存放地址\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003egeneral_log_file\u003c/span\u003e = /usr/local/mysql-\u003cspan class=\"number\"\u003e5.7\u003c/span\u003e.\u003cspan class=\"number\"\u003e21\u003c/span\u003e/log/mysql-general.log\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 全局动态变量，默认 3，范围：1 ～ 3\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 表示错误日志记录的信息，1：只记录 error 信息；2：记录 error 和 warnings 信息；3：记录 error、warnings 和普通的 notes 信息。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003elog_error_verbosity\u003c/span\u003e = \u003cspan class=\"number\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 错误日志文件地址\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003elog_error\u003c/span\u003e = /usr/local/mysql-\u003cspan class=\"number\"\u003e5.7\u003c/span\u003e.\u003cspan class=\"number\"\u003e21\u003c/span\u003e/log/mysql-error.log\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 开启慢查询\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eslow_query_log\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 开启慢查询时间，此处为 1 秒，达到此值才记录数据\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003elong_query_time\u003c/span\u003e = \u003cspan class=\"number\"\u003e3\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 检索行数达到此数值，才记录慢查询日志中\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003emin_examined_row_limit\u003c/span\u003e = \u003cspan class=\"number\"\u003e100\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# mysql 5.6.5 新增，用来表示每分钟允许记录到 slow log 的且未使用索引的 SQL 语句次数，默认值为 0，不限制。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003elog_throttle_queries_not_using_indexes\u003c/span\u003e = \u003cspan class=\"number\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 慢查询日志文件地址\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eslow_query_log_file\u003c/span\u003e = /var/log/mysql/mysql-slow.log\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 开启记录没有使用索引查询语句\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003elog-queries-not-using-indexes\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 开启二进制日志\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003elog_bin\u003c/span\u003e = /usr/local/mysql-\u003cspan class=\"number\"\u003e5.7\u003c/span\u003e.\u003cspan class=\"number\"\u003e21\u003c/span\u003e/log/mysql-bin.log\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# mysql 清除过期日志的时间，默认值 0，不自动清理，而是使用滚动循环的方式。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eexpire_logs_days\u003c/span\u003e = \u003cspan class=\"number\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 如果二进制日志写入的内容超出给定值，日志就会发生滚动。你不能将该变量设置为大于 1GB 或小于 4096 字节。 默认值是 1GB。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003emax_binlog_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e1000\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# binlog 的格式也有三种：STATEMENT，ROW，MIXED。mysql 5.7.7 后，默认值从 MIXED 改为 ROW\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 关于 binlog 日志格式问题，请查阅网络资料\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ebinlog_format\u003c/span\u003e = row\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 表示每 N 次写入 binlog 后，持久化到磁盘，默认值 N=1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 建议设置成 1，这样可以保证 MySQL 异常重启之后 binlog 不丢失。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# sync_binlog = 1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# InnoDB 引擎配置\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# -------------------------------------------------------------------------------\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：该参数可以提升扩展性和刷脏页性能。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 1，建议值：4-8；并且必须小于 innodb_buffer_pool_instances\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_page_cleaners\u003c/span\u003e = \u003cspan class=\"number\"\u003e4\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：一般 8k 和 16k 中选择，8k 的话，cpu 消耗小些，selcet 效率高一点，一般不用改\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值：16k；建议值：不改，\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_page_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e16384\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：InnoDB 使用一个缓冲池来保存索引和原始数据，不像 MyISAM。这里你设置越大，你在存取表里面数据时所需要的磁盘 I/O 越少。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 在一个独立使用的数据库服务器上，你可以设置这个变量到服务器物理内存大小的 60%-80%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 注意别设置的过大，会导致 system 的 swap 空间被占用，导致操作系统变慢，从而减低 sql 查询的效率\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值：128M，建议值：物理内存的 60%-80%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_buffer_pool_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e512\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：只有当设置 innodb_buffer_pool_size 值大于 1G 时才有意义，小于 1G，instances 默认为 1，大于 1G，instances 默认为 8\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 但是网络上有评价，最佳性能，每个实例至少 1G 大小。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值：1 或 8，建议值：innodb_buffer_pool_size/innodb_buffer_pool_instances \u0026gt;= 1G\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_buffer_pool_instances\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：mysql 5.7 新特性，defines the chunk size for online InnoDB buffer pool resizing operations。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 实际缓冲区大小必须为 innodb_buffer_pool_chunk_size*innodb_buffer_pool_instances*倍数，取略大于 innodb_buffer_pool_size\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 128M，建议值：默认值就好，乱改反而容易出问题，它会影响实际 buffer pool 大小。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_buffer_pool_chunk_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e128\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 在启动时把热数据加载到内存。默认值为 on，不修改\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_buffer_pool_load_at_startup\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 在关闭时把热数据 dump 到本地磁盘。默认值为 on，不修改\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_buffer_pool_dump_at_shutdown\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：影响 Innodb 缓冲区的刷新算法，建议从小到大配置，直到 zero free pages；innodb_lru_scan_depth \\* innodb_buffer_pool_instances defines the amount of work performed by the page cleaner thread each second。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 1024，建议值： 未知\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_lru_scan_depth\u003c/span\u003e = \u003cspan class=\"number\"\u003e1024\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：事务等待获取资源等待的最长时间，单位为秒，看具体业务情况，一般默认值就好\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值：50，建议值：看业务。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_lock_wait_timeout\u003c/span\u003e = \u003cspan class=\"number\"\u003e60\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：设置了 Mysql 后台任务（例如页刷新和 merge dadta from buffer pool）每秒 io 操作的上限。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值：200，建议值：方法一，单盘 sata 设 100，sas10，raid10 设 200，ssd 设 2000，fushion-io 设 50000；方法二，通过测试工具获得磁盘 io 性能后，设置 IOPS 数值/2。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_io_capacity\u003c/span\u003e = \u003cspan class=\"number\"\u003e2000\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：该参数是所有缓冲区线程 io 操作的总上限。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值：innodb_io_capacity 的两倍。建议值：例如用 iometer 测试后的 iops 数值就好\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_io_capacity_max\u003c/span\u003e = \u003cspan class=\"number\"\u003e4000\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：控制着 innodb 数据文件及 redo log 的打开、刷写模式，三种模式：fdatasync(默认)，O_DSYNC，O_DIRECT\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# fdatasync：数据文件，buffer pool-\u0026gt;os buffer-\u0026gt;磁盘；日志文件，buffer pool-\u0026gt;os buffer-\u0026gt;磁盘；\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# O_DSYNC： 数据文件，buffer pool-\u0026gt;os buffer-\u0026gt;磁盘；日志文件，buffer pool-\u0026gt;磁盘；\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# O_DIRECT： 数据文件，buffer pool-\u0026gt;磁盘； 日志文件，buffer pool-\u0026gt;os buffer-\u0026gt;磁盘；\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值为空，建议值：使用 SAN 或者 raid，建议用 O_DIRECT，不懂测试的话，默认生产上使用 O_DIRECT\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_flush_method\u003c/span\u003e = O_DIRECT\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：mysql5.7 之后默认开启，意思是，每张表一个独立表空间。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 1，开启\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_file_per_table\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：The path where InnoDB creates undo tablespaces。通常等于 undo log 文件的存放目录。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 ./;自行设置\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_undo_directory\u003c/span\u003e = /usr/local/mysql-\u003cspan class=\"number\"\u003e5.7\u003c/span\u003e.\u003cspan class=\"number\"\u003e21\u003c/span\u003e/log\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：The number of undo tablespaces used by InnoDB 等于 undo log 文件数量。5.7.21 后开始弃用\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值为 0，建议默认值就好，不用调整了。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_undo_tablespaces\u003c/span\u003e = \u003cspan class=\"number\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：定义 undo 使用的回滚段数量。5.7.19 后弃用\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 128，建议不动，以后弃用了。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_undo_logs\u003c/span\u003e = \u003cspan class=\"number\"\u003e128\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：5.7.5 后开始使用，在线收缩 undo log 使用的空间。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值：关闭，建议值：开启\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_undo_log_truncate\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：结合 innodb_undo_log_truncate，实现 undo 空间收缩功能\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值：1G，建议值，不改。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_max_undo_log_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003eG\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：重作日志文件的存放目录\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_log_group_home_dir\u003c/span\u003e = /usr/local/mysql-\u003cspan class=\"number\"\u003e5.7\u003c/span\u003e.\u003cspan class=\"number\"\u003e21\u003c/span\u003e/log\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：日志文件的大小\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值：48M，建议值：根据你系统的磁盘空间和日志增长情况调整大小\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_log_file_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e128\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：日志组中的文件数量，mysql 以循环方式写入日志\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 2，建议值：根据你系统的磁盘空间和日志增长情况调整大小\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_log_files_in_group\u003c/span\u003e = \u003cspan class=\"number\"\u003e3\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 此参数确定些日志文件所用的内存大小，以 M 为单位。缓冲区更大能提高性能，但意外的故障将会丢失数据。MySQL 开发人员建议设置为 1－8M 之间\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_log_buffer_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e16\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：可以控制 log 从系统 buffer 刷入磁盘文件的刷新频率，增大可减轻系统负荷\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值是 1；建议值不改。系统性能一般够用。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_flush_log_at_timeout\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：参数可设为 0，1，2；\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 参数 0：表示每秒将 log buffer 内容刷新到系统 buffer 中，再调用系统 flush 操作写入磁盘文件。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 参数 1：表示每次事务提交，redo log 都直接持久化到磁盘。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 参数 2：表示每次事务提交，隔 1 秒后再将 redo log 持久化到磁盘。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 建议设置成 1，这样可以保证 MySQL 异常重启之后数据不丢失。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_flush_log_at_trx_commit\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：限制 Innodb 能打开的表的数据，如果库里的表特别多的情况，请增加这个。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 值默认是 2000，建议值：参考数据库表总数再进行调整，一般够用不用调整。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_open_files\u003c/span\u003e = \u003cspan class=\"number\"\u003e8192\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# innodb 处理 io 读写的后台并发线程数量，根据 cpu 核来确认，取值范围：1-64\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值：4，建议值：与逻辑 cpu 数量的一半保持一致。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_read_io_threads\u003c/span\u003e = \u003cspan class=\"number\"\u003e4\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_write_io_threads\u003c/span\u003e = \u003cspan class=\"number\"\u003e4\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认设置为 0，表示不限制并发数，这里推荐设置为 0，更好去发挥 CPU 多核处理能力，提高并发量\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_thread_concurrency\u003c/span\u003e = \u003cspan class=\"number\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值为 4，建议不变。InnoDB 中的清除操作是一类定期回收无用数据的操作。mysql 5.5 之后，支持多线程清除操作。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_purge_threads\u003c/span\u003e = \u003cspan class=\"number\"\u003e4\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：mysql 缓冲区分为 new blocks 和 old blocks；此参数表示 old blocks 占比；\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值：37，建议值，一般不动\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_old_blocks_pct\u003c/span\u003e = \u003cspan class=\"number\"\u003e37\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：新数据被载入缓冲池，进入 old pages 链区，当 1 秒后再次访问，则提升进入 new pages 链区。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值：1000\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_old_blocks_time\u003c/span\u003e=\u003cspan class=\"number\"\u003e1000\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：开启异步 io，可以提高并发性，默认开启。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值为 1，建议不动\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_use_native_aio\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：默认为空，使用 data 目录，一般不改。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_data_home_dir\u003c/span\u003e=/usr/local/mysql-\u003cspan class=\"number\"\u003e5.7\u003c/span\u003e.\u003cspan class=\"number\"\u003e21\u003c/span\u003e/data\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：Defines the name，size，and attributes of InnoDB system tablespace data files。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值，不指定，默认为 ibdata1：12M：autoextend\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003einnodb_data_file_path\u003c/span\u003e = ibdata1：\u003cspan class=\"number\"\u003e12\u003c/span\u003eM：autoextend\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：设置了 InnoDB 存储引擎用来存放数据字典信息以及一些内部数据结构的内存空间大小，除非你的数据对象及其多，否则一般默认不改。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# innodb_additional_mem_pool_size = 16M\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 说明：The crash recovery mode。只有紧急情况需要恢复数据的时候，才改为大于 1-6 之间数值，含义查下官网。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值为 0；\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e#innodb_force_recovery = 0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# MyISAM 引擎配置\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# -------------------------------------------------------------------------------\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 指定索引缓冲区的大小，为 MYISAM 数据表开启供线程共享的索引缓存，对 INNODB 引擎无效。相当影响 MyISAM 的性能。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 不要将其设置大于你可用内存的 30%，因为一部分内存同样被 OS 用来缓冲行数据\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 甚至在你并不使用 MyISAM 表的情况下，你也需要仍旧设置起 8-64M 内存由于它同样会被内部临时磁盘表使用。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 8M，建议值：对于内存在 4GB 左右的服务器该参数可设置为 256M 或 384M。注意：该参数值设置的过大反而会是服务器整体效率降低！\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ekey_buffer_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e64\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 为每个扫描 MyISAM 的线程分配参数设置的内存大小缓冲区。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 128kb，建议值：16G 内存建议 1M，4G：128kb 或者 256kb 吧\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 注意，该缓冲区是每个连接独占的，所以总缓冲区大小为 128kb*连接数；极端情况 128kb*maxconnectiosns，会超级大，所以要考虑日常平均连接数。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 一般不需要太关心该数值，稍微增大就可以了，\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eread_buffer_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e262144\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 支持任何存储引擎\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# MySQL 的随机读缓冲区大小，适当增大，可以提高性能。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 256kb；建议值：得参考连接数，16G 内存，有人推荐 8M\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 注意，该缓冲区是每个连接独占的，所以总缓冲区大小为 128kb*连接数；极端情况 128kb*maxconnectiosns，会超级大，所以要考虑日常平均连接数。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eread_rnd_buffer_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# order by 或 group by 时用到\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 支持所有引擎，innodb 和 myisam 有自己的 innodb_sort_buffer_size 和 myisam_sort_buffer_size 设置\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 256kb；建议值：得参考连接数，16G 内存，有人推荐 8M。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 注意，该缓冲区是每个连接独占的，所以总缓冲区大小为 1M*连接数；极端情况 1M*maxconnectiosns，会超级大。所以要考虑日常平均连接数。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003esort_buffer_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 此缓冲被使用来优化全联合(full JOINs 不带索引的联合)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 类似的联合在极大多数情况下有非常糟糕的性能表现，但是将此值设大能够减轻性能影响。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 通过 “Select_full_join” 状态变量查看全联合的数量\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 注意，该缓冲区是每个连接独占的，所以总缓冲区大小为 1M*连接数；极端情况 1M*maxconnectiosns，会超级大。所以要考虑日常平均连接数。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 256kb;建议值：16G 内存，设置 8M。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ejoin_buffer_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e1\u003c/span\u003eM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 缓存 linux 文件描述符信息，加快数据文件打开速度\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 它影响 myisam 表的打开关闭，但是不影响 innodb 表的打开关闭。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 2000，建议值：根据状态变量 Opened_tables 去设定\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003etable_open_cache\u003c/span\u003e = \u003cspan class=\"number\"\u003e2000\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 缓存表定义的相关信息，加快读取表信息速度\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 1400，最大值 2000，建议值：基本不改。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003etable_definition_cache\u003c/span\u003e = \u003cspan class=\"number\"\u003e1400\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 该参数是 myssql 5.6 后引入的，目的是提高并发。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 1，建议值：cpu 核数，并且\u0026lt;=16\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003etable_open_cache_instances\u003c/span\u003e = \u003cspan class=\"number\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 当客户端断开之后，服务器处理此客户的线程将会缓存起来以响应下一个客户而不是销毁。可重用，减小了系统开销。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值为 9，建议值：两种取值方式，方式一，根据物理内存，1G —\u0026gt; 8；2G —\u0026gt; 16； 3G —\u0026gt; 32； \u0026gt;3G —\u0026gt; 64；\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 方式二，根据 show status like \u0026#39;threads%\u0026#39;，查看 Threads_connected 值。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ethread_cache_size\u003c/span\u003e = \u003cspan class=\"number\"\u003e16\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 默认值 256k，建议值：16/32G 内存，512kb，其他一般不改变，如果报错：Thread stack overrun，就增大看看，\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 注意，每个线程分配内存空间，所以总内存空间。。。你懂得。\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ethread_stack\u003c/span\u003e = \u003cspan class=\"number\"\u003e512\u003c/span\u003ek\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"section\"\u003e[client]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003esocket\u003c/span\u003e  = /var/lib/mysql/mysql.sock\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eport\u003c/span\u003e = \u003cspan class=\"number\"\u003e3306\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eGENERAL\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003edatadir\u003c/code\u003e - mysql 数据文件所在目录\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003esocket\u003c/code\u003e - scoket 文件\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epid_file\u003c/code\u003e - PID 文件\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003euser\u003c/code\u003e - 启动 mysql 服务进程的用户\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eport\u003c/code\u003e - 服务端口号，默认 \u003ccode\u003e3306\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edefault_storage_engine\u003c/code\u003e - mysql 5.1 之后，默认引擎是 InnoDB\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edefault_time_zone\u003c/code\u003e - 默认时区。中国大部分地区在东八区，即 \u003ccode\u003e+8:00\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003echaracter_set_server\u003c/code\u003e - 数据库默认字符集\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecollation_server\u003c/code\u003e - 数据库字符集对应一些排序等规则，注意要和 \u003ccode\u003echaracter_set_server\u003c/code\u003e 对应\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eLOG\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003elog_error\u003c/code\u003e - 错误日志文件地址\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eslow_query_log\u003c/code\u003e - 错误日志文件地址\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eInnoDB\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003einnodb_buffer_pool_size\u003c/code\u003e - InnoDB 使用一个缓冲池来保存索引和原始数据，不像 MyISAM。这里你设置越大，你在存取表里面数据时所需要的磁盘 I/O 越少。\u003cul\u003e\n\u003cli\u003e在一个独立使用的数据库服务器上,你可以设置这个变量到服务器物理内存大小的 60%-80%\u003c/li\u003e\n\u003cli\u003e注意别设置的过大，会导致 system 的 swap 空间被占用，导致操作系统变慢，从而减低 sql 查询的效率\u003c/li\u003e\n\u003cli\u003e默认值：128M，建议值：物理内存的 60%-80%\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003einnodb_log_file_size\u003c/code\u003e - 日志文件的大小。默认值：48M，建议值：根据你系统的磁盘空间和日志增长情况调整大小\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003einnodb_file_per_table\u003c/code\u003e - 说明：mysql5.7 之后默认开启，意思是，每张表一个独立表空间。默认值 1，开启。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003einnodb_flush_method\u003c/code\u003e - 说明：控制着 innodb 数据文件及 redo log 的打开、刷写模式，三种模式：fdatasync(默认)，O_DSYNC，O_DIRECT。默认值为空，建议值：使用 SAN 或者 raid，建议用 O_DIRECT，不懂测试的话，默认生产上使用 O_DIRECT\u003cul\u003e\n\u003cli\u003e\u003ccode\u003efdatasync\u003c/code\u003e：数据文件，buffer pool-\u0026gt;os buffer-\u0026gt;磁盘；日志文件，buffer pool-\u0026gt;os buffer-\u0026gt;磁盘；\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eO_DSYNC\u003c/code\u003e： 数据文件，buffer pool-\u0026gt;os buffer-\u0026gt;磁盘；日志文件，buffer pool-\u0026gt;磁盘；\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eO_DIRECT\u003c/code\u003e： 数据文件，buffer pool-\u0026gt;磁盘； 日志文件，buffer pool-\u0026gt;os buffer-\u0026gt;磁盘；\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eMyIsam\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ekey_buffer_size\u003c/code\u003e - 指定索引缓冲区的大小，为 MYISAM 数据表开启供线程共享的索引缓存，对 INNODB 引擎无效。相当影响 MyISAM 的性能。\u003cul\u003e\n\u003cli\u003e不要将其设置大于你可用内存的 30%，因为一部分内存同样被 OS 用来缓冲行数据\u003c/li\u003e\n\u003cli\u003e甚至在你并不使用 MyISAM 表的情况下，你也需要仍旧设置起 8-64M 内存由于它同样会被内部临时磁盘表使用。\u003c/li\u003e\n\u003cli\u003e默认值 8M，建议值：对于内存在 4GB 左右的服务器该参数可设置为 256M 或 384M。\u003c/li\u003e\n\u003cli\u003e注意：该参数值设置的过大反而会是服务器整体效率降低！\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eOTHER\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003etmp_table_size\u003c/code\u003e - 内存临时表的最大值，默认 16M，此处设置成 128M\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emax_heap_table_size\u003c/code\u003e - 用户创建的内存表的大小，默认 16M，往往和 \u003ccode\u003etmp_table_size\u003c/code\u003e 一起设置，限制用户临时表大小。超限的话，MySQL 就会自动地把它转化为基于磁盘的 MyISAM 表，存储在指定的 tmpdir 目录下，增大 IO 压力，建议内存大，增大该数值。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003equery_cache_type\u003c/code\u003e - 这个系统变量控制着查询缓存功能的开启和关闭，0 表示关闭，1 表示打开，2 表示只要 \u003ccode\u003eselect\u003c/code\u003e 中明确指定 \u003ccode\u003eSQL_CACHE\u003c/code\u003e 才缓存。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003equery_cache_size\u003c/code\u003e - 默认值 1M，优点是查询缓存可以极大的提高服务器速度，如果你有大量的相同的查询并且很少修改表。缺点：在你表经常变化的情况下或者如果你的查询原文每次都不同，查询缓存也许引起性能下降而不是性能提升。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emax_connections\u003c/code\u003e - 最大连接数，可设最大值 16384，一般考虑根据同时在线人数设置一个比较综合的数字，鉴于该数值增大并不太消耗系统资源，建议直接设 10000。如果在访问时经常出现 Too Many Connections 的错误提示，则需要增大该参数值\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ethread_cache\u003c/code\u003e - 当客户端断开之后，服务器处理此客户的线程将会缓存起来以响应下一个客户而不是销毁。可重用，减小了系统开销。默认值为 9，建议值：两种取值方式，\u003cul\u003e\n\u003cli\u003e方式一，根据物理内存，1G —\u0026gt; 8；2G —\u0026gt; 16； 3G —\u0026gt; 32； \u0026gt;3G —\u0026gt; 64；\u003c/li\u003e\n\u003cli\u003e方式二，根据 show status like ‘threads%’，查看 Threads_connected 值。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eopen_files_limit\u003c/code\u003e - MySQL 打开的文件描述符限制，默认最小 1024;\u003cul\u003e\n\u003cli\u003e当 open_files_limit 没有被配置的时候，比较 max_connections*5 和 ulimit -n 的值，哪个大用哪个，\u003c/li\u003e\n\u003cli\u003e当 open_file_limit 被配置的时候，比较 open_files_limit 和 max_connections*5 的值，哪个大用哪个\u003c/li\u003e\n\u003cli\u003e注意：仍然可能出现报错信息 Can’t create a new thread；此时观察系统 \u003ccode\u003ecat /proc/mysql\u003c/code\u003e 进程号/limits，观察进程 ulimit 限制情况\u003c/li\u003e\n\u003cli\u003e过小的话，考虑修改系统配置表，\u003ccode\u003e/etc/security/limits.conf\u003c/code\u003e 和 \u003ccode\u003e/etc/security/limits.d/90-nproc.conf\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"常见问题\"\u003e\u003ca href=\"#常见问题\" class=\"headerlink\" title=\"常见问题\"\u003e\u003c/a\u003e常见问题\u003c/h2\u003e\u003ch3 id=\"Too-many-connections\"\u003e\u003ca href=\"#Too-many-connections\" class=\"headerlink\" title=\"Too many connections\"\u003e\u003c/a\u003eToo many connections\u003c/h3\u003e\u003cp\u003e\u003cstrong\u003e现象\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e尝试连接 Mysql 时，遇到 \u003ccode\u003eToo many connections\u003c/code\u003e 错误。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e原因\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e数据库连接线程数超过最大值，访问被拒绝。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e解决方案\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e如果实际连接线程数过大，可以考虑增加服务器节点来分流；如果实际线程数并不算过大，那么可以配置 \u003ccode\u003emax_connections\u003c/code\u003e 来增加允许的最大连接数。需要注意的是，连接数不宜过大，一般来说，单库每秒有 2000 个并发连接时，就可以考虑扩容了，健康的状态应该维持在每秒 1000 个并发连接左右。\u003c/p\u003e\n\u003cp\u003e（1）查看最大连接数\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"keyword\"\u003eshow\u003c/span\u003e variables \u003cspan class=\"keyword\"\u003elike\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;%max_connections%\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e------------------------+-------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e Variable_name          \u003cspan class=\"operator\"\u003e|\u003c/span\u003e \u003cspan class=\"keyword\"\u003eValue\u003c/span\u003e \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e------------------------+-------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e max_connections        \u003cspan class=\"operator\"\u003e|\u003c/span\u003e \u003cspan class=\"number\"\u003e151\u003c/span\u003e   \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e mysqlx_max_connections \u003cspan class=\"operator\"\u003e|\u003c/span\u003e \u003cspan class=\"number\"\u003e100\u003c/span\u003e   \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e------------------------+-------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e（2）查看服务器响应的最大连接数\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"keyword\"\u003eshow\u003c/span\u003e \u003cspan class=\"keyword\"\u003eglobal\u003c/span\u003e status \u003cspan class=\"keyword\"\u003elike\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;Max_used_connections\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e----------------------+-------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e Variable_name        \u003cspan class=\"operator\"\u003e|\u003c/span\u003e \u003cspan class=\"keyword\"\u003eValue\u003c/span\u003e \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e----------------------+-------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e Max_used_connections \u003cspan class=\"operator\"\u003e|\u003c/span\u003e \u003cspan class=\"number\"\u003e142\u003c/span\u003e   \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e----------------------+-------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"number\"\u003e1\u003c/span\u003e \u003cspan class=\"type\"\u003erow\u003c/span\u003e \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"keyword\"\u003eset\u003c/span\u003e (\u003cspan class=\"number\"\u003e0.00\u003c/span\u003e sec)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e（3）临时设置最大连接数\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eset\u003c/span\u003e \u003cspan class=\"keyword\"\u003eGLOBAL\u003c/span\u003e max_connections\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"number\"\u003e256\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e注意：当服务器重启时，最大连接数会被重置。\u003c/p\u003e\n\u003cp\u003e（4）永久设置最大连接数\u003c/p\u003e\n\u003cp\u003e修改 \u003ccode\u003e/etc/my.cnf\u003c/code\u003e 配置文件，在 \u003ccode\u003e[mysqld]\u003c/code\u003e 添加以下配置：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emax_connections\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"number\"\u003e256\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e重启 mysql 以生效\u003c/p\u003e\n\u003cp\u003e（5）修改 Linux 最大文件数限制\u003c/p\u003e\n\u003cp\u003e设置了最大连接数，如果还是没有生效，考虑检查一下 Linux 最大文件数\u003c/p\u003e\n\u003cp\u003eMysql 最大连接数会受到最大文件数限制，\u003ccode\u003evim /etc/security/limits.conf\u003c/code\u003e，添加 mysql 用户配置\u003c/p\u003e\n\u003cfigure class=\"highlight apache\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003emysql\u003c/span\u003e hard nofile \u003cspan class=\"number\"\u003e65535\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003emysql\u003c/span\u003e soft nofile \u003cspan class=\"number\"\u003e65535\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e（6）检查 LimitNOFILE\u003c/p\u003e\n\u003cp\u003e如果是使用 rpm 方式安装 mysql，检查 \u003cstrong\u003emysqld.service\u003c/strong\u003e 文件中的 \u003ccode\u003eLimitNOFILE\u003c/code\u003e 是否配置的太小。\u003c/p\u003e\n\u003ch3 id=\"时区（time-zone）偏差\"\u003e\u003ca href=\"#时区（time-zone）偏差\" class=\"headerlink\" title=\"时区（time_zone）偏差\"\u003e\u003c/a\u003e时区（time_zone）偏差\u003c/h3\u003e\u003cp\u003e\u003cstrong\u003e现象\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e数据库中存储的 Timestamp 字段值比真实值少了 13 个小时。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e原因\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e当 JDBC 与 MySQL 开始建立连接时，会获取服务器参数。\u003c/li\u003e\n\u003cli\u003e当 MySQL 的 \u003ccode\u003etime_zone\u003c/code\u003e 值为 \u003ccode\u003eSYSTEM\u003c/code\u003e 时，会取 \u003ccode\u003esystem_time_zone\u003c/code\u003e 值作为协调时区，若得到的是 \u003ccode\u003eCST\u003c/code\u003e 那么 Java 会误以为这是 \u003ccode\u003eCST -0500\u003c/code\u003e ，因此会给出错误的时区信息（国内一般是\u003ccode\u003eCST +0800\u003c/code\u003e，即东八区）。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e查看时区方法：\u003c/p\u003e\n\u003cp\u003e通过 \u003ccode\u003eshow variables like \u0026#39;%time_zone%\u0026#39;;\u003c/code\u003e 命令查看 Mysql 时区配置：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"keyword\"\u003eshow\u003c/span\u003e variables \u003cspan class=\"keyword\"\u003elike\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;%time_zone%\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e------------------+--------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e Variable_name    \u003cspan class=\"operator\"\u003e|\u003c/span\u003e \u003cspan class=\"keyword\"\u003eValue\u003c/span\u003e  \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e------------------+--------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e system_time_zone \u003cspan class=\"operator\"\u003e|\u003c/span\u003e CST    \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e time_zone        \u003cspan class=\"operator\"\u003e|\u003c/span\u003e \u003cspan class=\"keyword\"\u003eSYSTEM\u003c/span\u003e \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e------------------+--------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cstrong\u003e解决方案\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e方案一\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"keyword\"\u003eset\u003c/span\u003e \u003cspan class=\"keyword\"\u003eglobal\u003c/span\u003e time_zone \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;+08:00\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eQuery OK, \u003cspan class=\"number\"\u003e0\u003c/span\u003e \u003cspan class=\"keyword\"\u003erows\u003c/span\u003e affected (\u003cspan class=\"number\"\u003e0.00\u003c/span\u003e sec)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysql\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"keyword\"\u003eset\u003c/span\u003e time_zone \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;+08:00\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eQuery OK, \u003cspan class=\"number\"\u003e0\u003c/span\u003e \u003cspan class=\"keyword\"\u003erows\u003c/span\u003e affected (\u003cspan class=\"number\"\u003e0.00\u003c/span\u003e sec)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e方案二\u003c/p\u003e\n\u003cp\u003e修改 \u003ccode\u003emy.cnf\u003c/code\u003e 文件，在 \u003ccode\u003e[mysqld]\u003c/code\u003e 节下增加 \u003ccode\u003edefault-time-zone=\u0026#39;+08:00\u0026#39;\u003c/code\u003e ，然后重启。\u003c/p\u003e\n\u003ch3 id=\"数据表损坏如何修复\"\u003e\u003ca href=\"#数据表损坏如何修复\" class=\"headerlink\" title=\"数据表损坏如何修复\"\u003e\u003c/a\u003e数据表损坏如何修复\u003c/h3\u003e\u003cp\u003e使用 myisamchk 来修复，具体步骤：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e修复前将 mysql 服务停止。\u003c/li\u003e\n\u003cli\u003e打开命令行方式，然后进入到 mysql 的 \u003ccode\u003ebin\u003c/code\u003e 目录。\u003c/li\u003e\n\u003cli\u003e执行 myisamchk –recover 数据库所在路 /*.MYI\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e使用 repair table 或者 OPTIMIZE table 命令来修复，REPAIR TABLE table_name 修复表 OPTIMIZE TABLE table_name 优化表 REPAIR TABLE 用于修复被破坏的表。 OPTIMIZE TABLE 用于回收闲置的数据库空间，当表上的数据行被删除时，所占据的磁盘空间并没有立即被回收，使用了 OPTIMIZE TABLE 命令后这些空间将被回收，并且对磁盘上的数据行进行重排（注意：是磁盘上，而非数据库）\u003c/p\u003e\n\u003ch3 id=\"数据结构\"\u003e\u003ca href=\"#数据结构\" class=\"headerlink\" title=\"数据结构\"\u003e\u003c/a\u003e数据结构\u003c/h3\u003e\u003cblockquote\u003e\n\u003cp\u003e问题现象：ERROR 1071: Specified key was too long; max key length is 767 bytes\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e问题原因：Mysql 默认情况下单个列的索引不能超过 767 位（不同版本可能存在差异） 。\u003c/p\u003e\n\u003cp\u003e解决方法：优化索引结构，索引字段不宜过长。\u003c/p\u003e\n\u003ch2 id=\"脚本\"\u003e\u003ca href=\"#脚本\" class=\"headerlink\" title=\"脚本\"\u003e\u003c/a\u003e脚本\u003c/h2\u003e\u003cp\u003e这里推荐我写的几个一键运维脚本，非常方便，欢迎使用：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/dunwu/linux-tutorial/tree/master/codes/linux/soft/mysql-install.sh\"\u003eMysql 安装脚本\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/dunwu/linux-tutorial/tree/master/codes/linux/soft/mysql-backup.sh\"\u003eMysql 备份脚本\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"参考资料\"\u003e\u003ca href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"\u003e\u003c/a\u003e参考资料\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://book.douban.com/subject/23008813/\"\u003e《高性能 MySQL》\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.cnblogs.com/xiaopotian/p/8196464.html\"\u003ehttps://www.cnblogs.com/xiaopotian/p/8196464.html\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.cnblogs.com/bigbrotherer/p/7241845.html\"\u003ehttps://www.cnblogs.com/bigbrotherer/p/7241845.html\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://blog.csdn.net/managementandjava/article/details/80039650\"\u003ehttps://blog.csdn.net/managementandjava/article/details/80039650\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.manongjc.com/article/6996.html\"\u003ehttp://www.manongjc.com/article/6996.html\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.cnblogs.com/xyabk/p/8967990.html\"\u003ehttps://www.cnblogs.com/xyabk/p/8967990.html\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://blog.csdn.net/zyhlwzy/article/details/80569422\"\u003eMySQL 8.0 主从（Master-Slave）配置\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://juejin.im/post/58eb5d162f301e00624f014a\"\u003eMysql 主从同步实战\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://juejin.im/entry/5a0aa2026fb9a045132a369f\"\u003eMySQL 备份和恢复机制\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.jianshu.com/p/5f39c486561b\"\u003eMysql 配置文件/etc/my.cnf 解析\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n    \u003c/div\u003e",
  "Date": "2019-11-26T13:37:17Z",
  "Author": "钝悟 ◾ Dunwu"
}