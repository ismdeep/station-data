{
  "Source": "dunwu",
  "Title": "Hive 数据查询详解",
  "Link": "https://dunwu.github.io/blog/pages/b7b857/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003ch1 id=\"Hive-数据查询详解\"\u003e\u003ca href=\"#Hive-数据查询详解\" class=\"headerlink\" title=\"Hive 数据查询详解\"\u003e\u003c/a\u003eHive 数据查询详解\u003c/h1\u003e\u003ch2 id=\"数据准备\"\u003e\u003ca href=\"#数据准备\" class=\"headerlink\" title=\"数据准备\"\u003e\u003c/a\u003e数据准备\u003c/h2\u003e\u003cp\u003e为了演示查询操作，这里需要预先创建三张表，并加载测试数据。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e数据文件 emp.txt 和 dept.txt 可以从本仓库的\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/heibaiying/BigData-Notes/tree/master/resources\"\u003eresources\u003c/a\u003e 目录下载。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"员工表\"\u003e\u003ca href=\"#员工表\" class=\"headerlink\" title=\"员工表\"\u003e\u003c/a\u003e员工表\u003c/h3\u003e\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e \u003cspan class=\"comment\"\u003e-- 建表语句\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e \u003cspan class=\"keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTABLE\u003c/span\u003e emp(\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e     empno \u003cspan class=\"type\"\u003eINT\u003c/span\u003e,     \u003cspan class=\"comment\"\u003e-- 员工表编号\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e     ename STRING,  \u003cspan class=\"comment\"\u003e-- 员工姓名\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e     job STRING,    \u003cspan class=\"comment\"\u003e-- 职位类型\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e     mgr \u003cspan class=\"type\"\u003eINT\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e     hiredate \u003cspan class=\"type\"\u003eTIMESTAMP\u003c/span\u003e,  \u003cspan class=\"comment\"\u003e--雇佣日期\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e     sal \u003cspan class=\"type\"\u003eDECIMAL\u003c/span\u003e(\u003cspan class=\"number\"\u003e7\u003c/span\u003e,\u003cspan class=\"number\"\u003e2\u003c/span\u003e),  \u003cspan class=\"comment\"\u003e--工资\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e     comm \u003cspan class=\"type\"\u003eDECIMAL\u003c/span\u003e(\u003cspan class=\"number\"\u003e7\u003c/span\u003e,\u003cspan class=\"number\"\u003e2\u003c/span\u003e),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e     deptno \u003cspan class=\"type\"\u003eINT\u003c/span\u003e)   \u003cspan class=\"comment\"\u003e--部门编号\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eROW\u003c/span\u003e FORMAT DELIMITED FIELDS TERMINATED \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e \u0026#34;\\t\u0026#34;;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"comment\"\u003e--加载数据\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLOAD DATA \u003cspan class=\"keyword\"\u003eLOCAL\u003c/span\u003e INPATH \u0026#34;/usr/file/emp.txt\u0026#34; OVERWRITE \u003cspan class=\"keyword\"\u003eINTO\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTABLE\u003c/span\u003e emp;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"部门表\"\u003e\u003ca href=\"#部门表\" class=\"headerlink\" title=\"部门表\"\u003e\u003c/a\u003e部门表\u003c/h3\u003e\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 建表语句\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTABLE\u003c/span\u003e dept(\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    deptno \u003cspan class=\"type\"\u003eINT\u003c/span\u003e,   \u003cspan class=\"comment\"\u003e--部门编号\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    dname STRING,  \u003cspan class=\"comment\"\u003e--部门名称\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    loc STRING    \u003cspan class=\"comment\"\u003e--部门所在的城市\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"type\"\u003eROW\u003c/span\u003e FORMAT DELIMITED FIELDS TERMINATED \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e \u0026#34;\\t\u0026#34;;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e--加载数据\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLOAD DATA \u003cspan class=\"keyword\"\u003eLOCAL\u003c/span\u003e INPATH \u0026#34;/usr/file/dept.txt\u0026#34; OVERWRITE \u003cspan class=\"keyword\"\u003eINTO\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTABLE\u003c/span\u003e dept;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"分区表\"\u003e\u003ca href=\"#分区表\" class=\"headerlink\" title=\"分区表\"\u003e\u003c/a\u003e分区表\u003c/h3\u003e\u003cp\u003e这里需要额外创建一张分区表，主要是为了演示分区查询：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eEXTERNAL\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTABLE\u003c/span\u003e emp_ptn(\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      empno \u003cspan class=\"type\"\u003eINT\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      ename STRING,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      job STRING,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      mgr \u003cspan class=\"type\"\u003eINT\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      hiredate \u003cspan class=\"type\"\u003eTIMESTAMP\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      sal \u003cspan class=\"type\"\u003eDECIMAL\u003c/span\u003e(\u003cspan class=\"number\"\u003e7\u003c/span\u003e,\u003cspan class=\"number\"\u003e2\u003c/span\u003e),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      comm \u003cspan class=\"type\"\u003eDECIMAL\u003c/span\u003e(\u003cspan class=\"number\"\u003e7\u003c/span\u003e,\u003cspan class=\"number\"\u003e2\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  )\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e PARTITIONED \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e (deptno \u003cspan class=\"type\"\u003eINT\u003c/span\u003e)   \u003cspan class=\"comment\"\u003e-- 按照部门编号进行分区\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e \u003cspan class=\"type\"\u003eROW\u003c/span\u003e FORMAT DELIMITED FIELDS TERMINATED \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e \u0026#34;\\t\u0026#34;;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e--加载数据\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLOAD DATA \u003cspan class=\"keyword\"\u003eLOCAL\u003c/span\u003e INPATH \u0026#34;/usr/file/emp.txt\u0026#34; OVERWRITE \u003cspan class=\"keyword\"\u003eINTO\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTABLE\u003c/span\u003e emp_ptn \u003cspan class=\"keyword\"\u003ePARTITION\u003c/span\u003e (deptno\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"number\"\u003e20\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLOAD DATA \u003cspan class=\"keyword\"\u003eLOCAL\u003c/span\u003e INPATH \u0026#34;/usr/file/emp.txt\u0026#34; OVERWRITE \u003cspan class=\"keyword\"\u003eINTO\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTABLE\u003c/span\u003e emp_ptn \u003cspan class=\"keyword\"\u003ePARTITION\u003c/span\u003e (deptno\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"number\"\u003e30\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLOAD DATA \u003cspan class=\"keyword\"\u003eLOCAL\u003c/span\u003e INPATH \u0026#34;/usr/file/emp.txt\u0026#34; OVERWRITE \u003cspan class=\"keyword\"\u003eINTO\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTABLE\u003c/span\u003e emp_ptn \u003cspan class=\"keyword\"\u003ePARTITION\u003c/span\u003e (deptno\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"number\"\u003e40\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLOAD DATA \u003cspan class=\"keyword\"\u003eLOCAL\u003c/span\u003e INPATH \u0026#34;/usr/file/emp.txt\u0026#34; OVERWRITE \u003cspan class=\"keyword\"\u003eINTO\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTABLE\u003c/span\u003e emp_ptn \u003cspan class=\"keyword\"\u003ePARTITION\u003c/span\u003e (deptno\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"number\"\u003e50\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"单表查询\"\u003e\u003ca href=\"#单表查询\" class=\"headerlink\" title=\"单表查询\"\u003e\u003c/a\u003e单表查询\u003c/h2\u003e\u003ch3 id=\"SELECT\"\u003e\u003ca href=\"#SELECT\" class=\"headerlink\" title=\"SELECT\"\u003e\u003c/a\u003eSELECT\u003c/h3\u003e\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 查询表中全部数据\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"WHERE\"\u003e\u003ca href=\"#WHERE\" class=\"headerlink\" title=\"WHERE\"\u003e\u003c/a\u003eWHERE\u003c/h3\u003e\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 查询 10 号部门中员工编号大于 7782 的员工信息\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp \u003cspan class=\"keyword\"\u003eWHERE\u003c/span\u003e empno \u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"number\"\u003e7782\u003c/span\u003e \u003cspan class=\"keyword\"\u003eAND\u003c/span\u003e deptno \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"number\"\u003e10\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"DISTINCT\"\u003e\u003ca href=\"#DISTINCT\" class=\"headerlink\" title=\"DISTINCT\"\u003e\u003c/a\u003eDISTINCT\u003c/h3\u003e\u003cp\u003eHive 支持使用 DISTINCT 关键字去重。\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 查询所有工作类型\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eDISTINCT\u003c/span\u003e job \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"分区查询\"\u003e\u003ca href=\"#分区查询\" class=\"headerlink\" title=\"分区查询\"\u003e\u003c/a\u003e分区查询\u003c/h3\u003e\u003cp\u003e分区查询 (Partition Based Queries)，可以指定某个分区或者分区范围。\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 查询分区表中部门编号在[20,40]之间的员工\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e emp_ptn.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp_ptn\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eWHERE\u003c/span\u003e emp_ptn.deptno \u003cspan class=\"operator\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"number\"\u003e20\u003c/span\u003e \u003cspan class=\"keyword\"\u003eAND\u003c/span\u003e emp_ptn.deptno \u003cspan class=\"operator\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"number\"\u003e40\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"LIMIT\"\u003e\u003ca href=\"#LIMIT\" class=\"headerlink\" title=\"LIMIT\"\u003e\u003c/a\u003eLIMIT\u003c/h3\u003e\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 查询薪资最高的 5 名员工\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp \u003cspan class=\"keyword\"\u003eORDER\u003c/span\u003e \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e sal \u003cspan class=\"keyword\"\u003eDESC\u003c/span\u003e LIMIT \u003cspan class=\"number\"\u003e5\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"GROUP-BY\"\u003e\u003ca href=\"#GROUP-BY\" class=\"headerlink\" title=\"GROUP BY\"\u003e\u003c/a\u003eGROUP BY\u003c/h3\u003e\u003cp\u003eHive 支持使用 GROUP BY 进行分组聚合操作。\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eset\u003c/span\u003e hive.map.aggr\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"literal\"\u003etrue\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 查询各个部门薪酬综合\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e deptno,\u003cspan class=\"built_in\"\u003eSUM\u003c/span\u003e(sal) \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp \u003cspan class=\"keyword\"\u003eGROUP\u003c/span\u003e \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e deptno;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003ccode\u003ehive.map.aggr\u003c/code\u003e 控制程序如何进行聚合。默认值为 false。如果设置为 true，Hive 会在 map 阶段就执行一次聚合。这可以提高聚合效率，但需要消耗更多内存。\u003c/p\u003e\n\u003ch3 id=\"ORDER-AND-SORT\"\u003e\u003ca href=\"#ORDER-AND-SORT\" class=\"headerlink\" title=\"ORDER AND SORT\"\u003e\u003c/a\u003eORDER AND SORT\u003c/h3\u003e\u003cp\u003e可以使用 ORDER BY 或者 Sort BY 对查询结果进行排序，排序字段可以是整型也可以是字符串：如果是整型，则按照大小排序；如果是字符串，则按照字典序排序。ORDER BY 和 SORT BY 的区别如下：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e使用 ORDER BY 时会有一个 Reducer 对全部查询结果进行排序，可以保证数据的全局有序性；\u003c/li\u003e\n\u003cli\u003e使用 SORT BY 时只会在每个 Reducer 中进行排序，这可以保证每个 Reducer 的输出数据是有序的，但不能保证全局有序。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e由于 ORDER BY 的时间可能很长，如果你设置了严格模式 (hive.mapred.mode = strict)，则其后面必须再跟一个 \u003ccode\u003elimit\u003c/code\u003e 子句。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e注 ：hive.mapred.mode 默认值是 nonstrict ，也就是非严格模式。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 查询员工工资，结果按照部门升序，按照工资降序排列\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e empno, deptno, sal \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp \u003cspan class=\"keyword\"\u003eORDER\u003c/span\u003e \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e deptno \u003cspan class=\"keyword\"\u003eASC\u003c/span\u003e, sal \u003cspan class=\"keyword\"\u003eDESC\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"HAVING\"\u003e\u003ca href=\"#HAVING\" class=\"headerlink\" title=\"HAVING\"\u003e\u003c/a\u003eHAVING\u003c/h3\u003e\u003cp\u003e可以使用 HAVING 对分组数据进行过滤。\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 查询工资总和大于 9000 的所有部门\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e deptno,\u003cspan class=\"built_in\"\u003eSUM\u003c/span\u003e(sal) \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp \u003cspan class=\"keyword\"\u003eGROUP\u003c/span\u003e \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e deptno \u003cspan class=\"keyword\"\u003eHAVING\u003c/span\u003e \u003cspan class=\"built_in\"\u003eSUM\u003c/span\u003e(sal)\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"number\"\u003e9000\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"DISTRIBUTE-BY\"\u003e\u003ca href=\"#DISTRIBUTE-BY\" class=\"headerlink\" title=\"DISTRIBUTE BY\"\u003e\u003c/a\u003eDISTRIBUTE BY\u003c/h3\u003e\u003cp\u003e默认情况下，MapReduce 程序会对 Map 输出结果的 Key 值进行散列，并均匀分发到所有 Reducer 上。如果想要把具有相同 Key 值的数据分发到同一个 Reducer 进行处理，这就需要使用 DISTRIBUTE BY 字句。\u003c/p\u003e\n\u003cp\u003e需要注意的是，DISTRIBUTE BY 虽然能保证具有相同 Key 值的数据分发到同一个 Reducer，但是不能保证数据在 Reducer 上是有序的。情况如下：\u003c/p\u003e\n\u003cp\u003e把以下 5 个数据发送到两个 Reducer 上进行处理：\u003c/p\u003e\n\u003cfigure class=\"highlight properties\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ek1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ek2\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ek4\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ek3\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ek1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003eReducer1 得到如下乱序数据：\u003c/p\u003e\n\u003cfigure class=\"highlight properties\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ek1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ek2\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ek1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003eReducer2 得到数据如下：\u003c/p\u003e\n\u003cfigure class=\"highlight properties\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ek4\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ek3\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e如果想让 Reducer 上的数据时有序的，可以结合 \u003ccode\u003eSORT BY\u003c/code\u003e 使用 (示例如下)，或者使用下面我们将要介绍的 CLUSTER BY。\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 将数据按照部门分发到对应的 Reducer 上处理\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e empno, deptno, sal \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp DISTRIBUTE \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e deptno SORT \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e deptno \u003cspan class=\"keyword\"\u003eASC\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"CLUSTER-BY\"\u003e\u003ca href=\"#CLUSTER-BY\" class=\"headerlink\" title=\"CLUSTER BY\"\u003e\u003c/a\u003eCLUSTER BY\u003c/h3\u003e\u003cp\u003e如果 \u003ccode\u003eSORT BY\u003c/code\u003e 和 \u003ccode\u003eDISTRIBUTE BY\u003c/code\u003e 指定的是相同字段，且 SORT BY 排序规则是 ASC，此时可以使用 \u003ccode\u003eCLUSTER BY\u003c/code\u003e 进行替换，同时 \u003ccode\u003eCLUSTER BY\u003c/code\u003e 可以保证数据在全局是有序的。\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e empno, deptno, sal \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp CLUSTER  \u003cspan class=\"keyword\"\u003eBY\u003c/span\u003e deptno ;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"多表联结查询\"\u003e\u003ca href=\"#多表联结查询\" class=\"headerlink\" title=\"多表联结查询\"\u003e\u003c/a\u003e多表联结查询\u003c/h2\u003e\u003cp\u003eHive 支持内连接，外连接，左外连接，右外连接，笛卡尔连接，这和传统数据库中的概念是一致的，可以参见下图。\u003c/p\u003e\n\u003cp\u003e需要特别强调：JOIN 语句的关联条件必须用 ON 指定，不能用 WHERE 指定，否则就会先做笛卡尔积，再过滤，这会导致你得不到预期的结果 (下面的演示会有说明)。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/20200224195733.png\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003ch3 id=\"INNER-JOIN\"\u003e\u003ca href=\"#INNER-JOIN\" class=\"headerlink\" title=\"INNER JOIN\"\u003e\u003c/a\u003eINNER JOIN\u003c/h3\u003e\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 查询员工编号为 7369 的员工的详细信息\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e e.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e,d.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eemp e \u003cspan class=\"keyword\"\u003eJOIN\u003c/span\u003e dept d\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eON\u003c/span\u003e e.deptno \u003cspan class=\"operator\"\u003e=\u003c/span\u003e d.deptno\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eWHERE\u003c/span\u003e empno\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"number\"\u003e7369\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e--如果是三表或者更多表连接，语法如下\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e a.val, b.val, c.val \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e a \u003cspan class=\"keyword\"\u003eJOIN\u003c/span\u003e b \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e (a.key \u003cspan class=\"operator\"\u003e=\u003c/span\u003e b.key1) \u003cspan class=\"keyword\"\u003eJOIN\u003c/span\u003e c \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e (c.key \u003cspan class=\"operator\"\u003e=\u003c/span\u003e b.key1)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"LEFT-OUTER-JOIN\"\u003e\u003ca href=\"#LEFT-OUTER-JOIN\" class=\"headerlink\" title=\"LEFT OUTER JOIN\"\u003e\u003c/a\u003eLEFT OUTER JOIN\u003c/h3\u003e\u003cp\u003eLEFT OUTER JOIN 和 LEFT JOIN 是等价的。\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 左连接\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e e.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e,d.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp e \u003cspan class=\"keyword\"\u003eLEFT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eOUTER\u003c/span\u003e  \u003cspan class=\"keyword\"\u003eJOIN\u003c/span\u003e  dept d\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eON\u003c/span\u003e e.deptno \u003cspan class=\"operator\"\u003e=\u003c/span\u003e d.deptno;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"RIGHT-OUTER-JOIN\"\u003e\u003ca href=\"#RIGHT-OUTER-JOIN\" class=\"headerlink\" title=\"RIGHT OUTER JOIN\"\u003e\u003c/a\u003eRIGHT OUTER JOIN\u003c/h3\u003e\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e--右连接\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e e.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e,d.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp e \u003cspan class=\"keyword\"\u003eRIGHT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eOUTER\u003c/span\u003e \u003cspan class=\"keyword\"\u003eJOIN\u003c/span\u003e  dept d\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eON\u003c/span\u003e e.deptno \u003cspan class=\"operator\"\u003e=\u003c/span\u003e d.deptno;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e执行右连接后，由于 40 号部门下没有任何员工，所以此时员工信息为 NULL。这个查询可以很好的复述上面提到的——JOIN 语句的关联条件必须用 ON 指定，不能用 WHERE 指定。你可以把 ON 改成 WHERE，你会发现无论如何都查不出 40 号部门这条数据，因为笛卡尔运算不会有 (NULL, 40) 这种情况。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-right-join.png\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003ch3 id=\"FULL-OUTER-JOIN\"\u003e\u003ca href=\"#FULL-OUTER-JOIN\" class=\"headerlink\" title=\"FULL OUTER JOIN\"\u003e\u003c/a\u003eFULL OUTER JOIN\u003c/h3\u003e\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e e.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e,d.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp e \u003cspan class=\"keyword\"\u003eFULL\u003c/span\u003e \u003cspan class=\"keyword\"\u003eOUTER\u003c/span\u003e \u003cspan class=\"keyword\"\u003eJOIN\u003c/span\u003e  dept d\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eON\u003c/span\u003e e.deptno \u003cspan class=\"operator\"\u003e=\u003c/span\u003e d.deptno;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"LEFT-SEMI-JOIN\"\u003e\u003ca href=\"#LEFT-SEMI-JOIN\" class=\"headerlink\" title=\"LEFT SEMI JOIN\"\u003e\u003c/a\u003eLEFT SEMI JOIN\u003c/h3\u003e\u003cp\u003eLEFT SEMI JOIN （左半连接）是 IN/EXISTS 子查询的一种更高效的实现。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eJOIN 子句中右边的表只能在 ON 子句中设置过滤条件;\u003c/li\u003e\n\u003cli\u003e查询结果只包含左边表的数据，所以只能 SELECT 左表中的列。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- 查询在纽约办公的所有员工信息\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e emp.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp \u003cspan class=\"keyword\"\u003eLEFT\u003c/span\u003e SEMI \u003cspan class=\"keyword\"\u003eJOIN\u003c/span\u003e dept\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eON\u003c/span\u003e emp.deptno \u003cspan class=\"operator\"\u003e=\u003c/span\u003e dept.deptno \u003cspan class=\"keyword\"\u003eAND\u003c/span\u003e dept.loc\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u0026#34;NEW YORK\u0026#34;;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e--上面的语句就等价于\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e emp.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eWHERE\u003c/span\u003e emp.deptno \u003cspan class=\"keyword\"\u003eIN\u003c/span\u003e (\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e deptno \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e dept \u003cspan class=\"keyword\"\u003eWHERE\u003c/span\u003e loc\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u0026#34;NEW YORK\u0026#34;);\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"JOIN\"\u003e\u003ca href=\"#JOIN\" class=\"headerlink\" title=\"JOIN\"\u003e\u003c/a\u003eJOIN\u003c/h3\u003e\u003cp\u003e笛卡尔积连接，这个连接日常的开发中可能很少遇到，且性能消耗比较大，基于这个原因，如果在严格模式下 (hive.mapred.mode = strict)，Hive 会阻止用户执行此操作。\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp \u003cspan class=\"keyword\"\u003eJOIN\u003c/span\u003e dept;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"JOIN-优化\"\u003e\u003ca href=\"#JOIN-优化\" class=\"headerlink\" title=\"JOIN 优化\"\u003e\u003c/a\u003eJOIN 优化\u003c/h2\u003e\u003ch3 id=\"STREAMTABLE\"\u003e\u003ca href=\"#STREAMTABLE\" class=\"headerlink\" title=\"STREAMTABLE\"\u003e\u003c/a\u003eSTREAMTABLE\u003c/h3\u003e\u003cp\u003e在多表进行联结的时候，如果每个 ON 字句都使用到共同的列（如下面的 \u003ccode\u003eb.key\u003c/code\u003e），此时 Hive 会进行优化，将多表 JOIN 在同一个 map / reduce 作业上进行。同时假定查询的最后一个表（如下面的 c 表）是最大的一个表，在对每行记录进行 JOIN 操作时，它将尝试将其他的表缓存起来，然后扫描最后那个表进行计算。因此用户需要保证查询的表的大小从左到右是依次增加的。\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e`\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e a.val, b.val, c.val \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e a \u003cspan class=\"keyword\"\u003eJOIN\u003c/span\u003e b \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e (a.key \u003cspan class=\"operator\"\u003e=\u003c/span\u003e b.key) \u003cspan class=\"keyword\"\u003eJOIN\u003c/span\u003e c \u003cspan class=\"keyword\"\u003eON\u003c/span\u003e (c.key \u003cspan class=\"operator\"\u003e=\u003c/span\u003e b.key)`\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e然后，用户并非需要总是把最大的表放在查询语句的最后面，Hive 提供了 \u003ccode\u003e/*+ STREAMTABLE() */\u003c/code\u003e 标志，用于标识最大的表，示例如下：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"comment\"\u003e/*+ STREAMTABLE(d) */\u003c/span\u003e  e.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e,d.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp e \u003cspan class=\"keyword\"\u003eJOIN\u003c/span\u003e dept d\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eON\u003c/span\u003e e.deptno \u003cspan class=\"operator\"\u003e=\u003c/span\u003e d.deptno\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eWHERE\u003c/span\u003e job\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"string\"\u003e\u0026#39;CLERK\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"MAPJOIN\"\u003e\u003ca href=\"#MAPJOIN\" class=\"headerlink\" title=\"MAPJOIN\"\u003e\u003c/a\u003eMAPJOIN\u003c/h3\u003e\u003cp\u003e如果所有表中只有一张表是小表，那么 Hive 把这张小表加载到内存中。这时候程序会在 map 阶段直接拿另外一个表的数据和内存中表数据做匹配，由于在 map 就进行了 JOIN 操作，从而可以省略 reduce 过程，这样效率可以提升很多。Hive 中提供了 \u003ccode\u003e/*+ MAPJOIN() */\u003c/code\u003e 来标记小表，示例如下：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"comment\"\u003e/*+ MAPJOIN(d) */\u003c/span\u003e e.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e,d.\u003cspan class=\"operator\"\u003e*\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e emp e \u003cspan class=\"keyword\"\u003eJOIN\u003c/span\u003e dept d\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eON\u003c/span\u003e e.deptno \u003cspan class=\"operator\"\u003e=\u003c/span\u003e d.deptno\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eWHERE\u003c/span\u003e job\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"string\"\u003e\u0026#39;CLERK\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"SELECT-的其他用途\"\u003e\u003ca href=\"#SELECT-的其他用途\" class=\"headerlink\" title=\"SELECT 的其他用途\"\u003e\u003c/a\u003eSELECT 的其他用途\u003c/h2\u003e\u003cp\u003e查看当前数据库：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e current_database()\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"本地模式\"\u003e\u003ca href=\"#本地模式\" class=\"headerlink\" title=\"本地模式\"\u003e\u003c/a\u003e本地模式\u003c/h2\u003e\u003cp\u003e在上面演示的语句中，大多数都会触发 MapReduce, 少部分不会触发，比如 \u003ccode\u003eselect * from emp limit 5\u003c/code\u003e 就不会触发 MR，此时 Hive 只是简单的读取数据文件中的内容，然后格式化后进行输出。在需要执行 MapReduce 的查询中，你会发现执行时间可能会很长，这时候你可以选择开启本地模式。\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e--本地模式默认关闭，需要手动开启此功能\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSET\u003c/span\u003e hive.exec.mode.local.auto\u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"literal\"\u003etrue\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e启用后，Hive 将分析查询中每个 map-reduce 作业的大小，如果满足以下条件，则可以在本地运行它：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e作业的总输入大小低于：hive.exec.mode.local.auto.inputbytes.max（默认为 128MB）；\u003c/li\u003e\n\u003cli\u003emap-tasks 的总数小于：hive.exec.mode.local.auto.tasks.max（默认为 4）；\u003c/li\u003e\n\u003cli\u003e所需的 reduce 任务总数为 1 或 0。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e因为我们测试的数据集很小，所以你再次去执行上面涉及 MR 操作的查询，你会发现速度会有显著的提升。\u003c/p\u003e\n\u003ch2 id=\"参考资料\"\u003e\u003ca href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"\u003e\u003c/a\u003e参考资料\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Select\"\u003eLanguageManual Select\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Joins\"\u003eLanguageManual Joins\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://cwiki.apache.org/confluence/display/Hive/LanguageManual+GroupBy\"\u003eLanguageManual GroupBy\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://cwiki.apache.org/confluence/display/Hive/LanguageManual+SortBy\"\u003eLanguageManual SortBy\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n    \u003c/div\u003e",
  "Date": "2020-02-24T13:14:47Z",
  "Author": "钝悟 ◾ Dunwu"
}