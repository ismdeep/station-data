{
  "Source": "dunwu",
  "Title": "JavaMail 快速入门",
  "Link": "https://dunwu.github.io/blog/pages/cd38ec/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003ch1 id=\"JavaMail-快速入门\"\u003e\u003ca href=\"#JavaMail-快速入门\" class=\"headerlink\" title=\"JavaMail 快速入门\"\u003e\u003c/a\u003eJavaMail 快速入门\u003c/h1\u003e\u003ch2 id=\"简介\"\u003e\u003ca href=\"#简介\" class=\"headerlink\" title=\"简介\"\u003e\u003c/a\u003e简介\u003c/h2\u003e\u003ch3 id=\"邮件相关的标准\"\u003e\u003ca href=\"#邮件相关的标准\" class=\"headerlink\" title=\"邮件相关的标准\"\u003e\u003c/a\u003e邮件相关的标准\u003c/h3\u003e\u003cp\u003e厂商所提供的 JavaMail 服务程序可以有选择地实现某些邮件协议，常见的邮件协议包括：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eSMTP(Simple Mail Transfer Protocol)\u003c/code\u003e ：即简单邮件传输协议，它是一组用于由源地址到目的地址传送邮件的规则，由它来控制信件的中转方式。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ePOP3(Post Office Protocol - Version 3)\u003c/code\u003e ：即邮局协议版本 3 ，用于接收电子邮件的标准协议。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eIMAP(Internet Mail Access Protocol)\u003c/code\u003e ：即 Internet 邮件访问协议。是 POP3 的替代协议。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e这三种协议都有对应 SSL 加密传输的协议，分别是 \u003cstrong\u003eSMTPS\u003c/strong\u003e， \u003cstrong\u003ePOP3S\u003c/strong\u003e和 \u003cstrong\u003eIMAPS\u003c/strong\u003e。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eMIME(Multipurpose Internet Mail Extensions)\u003c/code\u003e ：即多用途因特网邮件扩展标准。它不是邮件传输协议。但对传输内容的消息、附件及其它的内容定义了格式。\u003c/p\u003e\n\u003ch3 id=\"JavaMail-简介\"\u003e\u003ca href=\"#JavaMail-简介\" class=\"headerlink\" title=\"JavaMail 简介\"\u003e\u003c/a\u003eJavaMail 简介\u003c/h3\u003e\u003cp\u003eJavaMail 是由 Sun 发布的用来处理 email 的 API 。它并没有包含在 Java SE 中，而是作为 Java EE 的一部分。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003email.jar\u003c/code\u003e ：此 JAR 文件包含 JavaMail API 和 Sun 提供的 SMTP 、 IMAP 和 POP3 服务提供程序；\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eactivation.jar\u003c/code\u003e ：此 JAR 文件包含 JAF API 和 Sun 的实现。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eJavaMail 包中用于处理电子邮件的核心类是： \u003ccode\u003eProperties\u003c/code\u003e 、 \u003ccode\u003eSession\u003c/code\u003e 、 \u003ccode\u003eMessage\u003c/code\u003e 、 \u003ccode\u003eAddress\u003c/code\u003e 、 \u003ccode\u003eAuthenticator\u003c/code\u003e 、 \u003ccode\u003eTransport\u003c/code\u003e 、 \u003ccode\u003eStore\u003c/code\u003e 等。\u003c/p\u003e\n\u003ch3 id=\"邮件传输过程\"\u003e\u003ca href=\"#邮件传输过程\" class=\"headerlink\" title=\"邮件传输过程\"\u003e\u003c/a\u003e邮件传输过程\u003c/h3\u003e\u003cp\u003e如上图，电子邮件的处理步骤如下：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e创建一个 Session 对象。\u003c/li\u003e\n\u003cli\u003eSession 对象创建一个 Transport 对象 /Store 对象，用来发送 / 保存邮件。\u003c/li\u003e\n\u003cli\u003eTransport 对象 /Store 对象连接邮件服务器。\u003c/li\u003e\n\u003cli\u003eTransport 对象 /Store 对象创建一个 Message 对象 ( 也就是邮件内容 ) 。\u003c/li\u003e\n\u003cli\u003eTransport 对象发送邮件； Store 对象获取邮箱的邮件。\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"Message-结构\"\u003e\u003ca href=\"#Message-结构\" class=\"headerlink\" title=\"Message 结构\"\u003e\u003c/a\u003eMessage 结构\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eMimeMessage\u003c/code\u003e 类：代表整封邮件。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eMimeBodyPart\u003c/code\u003e 类：代表邮件的一个 MIME 信息。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eMimeMultipart\u003c/code\u003e 类：代表一个由多个 MIME 信息组合成的组合 MIME 信息。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"http://upload-images.jianshu.io/upload_images/3101171-948230d2f5c7a620.png\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003ch2 id=\"JavaMail-的核心类\"\u003e\u003ca href=\"#JavaMail-的核心类\" class=\"headerlink\" title=\"JavaMail 的核心类\"\u003e\u003c/a\u003eJavaMail 的核心类\u003c/h2\u003e\u003cp\u003eJavaMail 对收发邮件进行了高级的抽象，形成了一些关键的的接口和类，它们构成了程序的基础，下面我们分别来了解一下这些最常见的对象。\u003c/p\u003e\n\u003ch3 id=\"java-util-Properties-类（属性对象）\"\u003e\u003ca href=\"#java-util-Properties-类（属性对象）\" class=\"headerlink\" title=\"java.util.Properties 类（属性对象）\"\u003e\u003c/a\u003ejava.util.Properties 类（属性对象）\u003c/h3\u003e\u003cp\u003ejava.util.Properties 类代表一组属性集合。\u003c/p\u003e\n\u003cp\u003e它的每一个键和值都是 String \u003cstrong\u003e类型。\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e由于 JavaMail 需要和邮件服务器进行通信，这就要求程序提供许多诸如服务器地址、端口、用户名、密码等信息， JavaMail 通过 Properties 对象封装这些属性信息。\u003c/p\u003e\n\u003cp\u003e例： 如下面的代码封装了几个属性信息：\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"type\"\u003eProperties\u003c/span\u003e \u003cspan class=\"variable\"\u003eprop\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eProperties\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eprop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.debug\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eprop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.host\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;[email protected]\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eprop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.transport.protocol\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;smtp\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eprop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.smtp.auth\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e针对不同的的邮件协议， JavaMail 规定了服务提供者必须支持一系列属性，\u003c/p\u003e\n\u003cp\u003e下表是一些常见属性（属性值都以 String 类型进行设置，属性类型栏仅表示属性是如何被解析的）：\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e关键词\u003c/th\u003e\n\u003cth\u003e类型\u003c/th\u003e\n\u003cth\u003e描述\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003email.debug\u003c/td\u003e\n\u003ctd\u003eboolean\u003c/td\u003e\n\u003ctd\u003edebug 开关。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003email.host\u003c/td\u003e\n\u003ctd\u003eString\u003c/td\u003e\n\u003ctd\u003e指定发送、接收邮件的默认邮箱服务器。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003email.store.protocol\u003c/td\u003e\n\u003ctd\u003eString\u003c/td\u003e\n\u003ctd\u003e指定接收邮件的协议。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003email.transport.protocol\u003c/td\u003e\n\u003ctd\u003eString\u003c/td\u003e\n\u003ctd\u003e指定发送邮件的协议。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003email.debug.auth\u003c/td\u003e\n\u003ctd\u003eboolean\u003c/td\u003e\n\u003ctd\u003edebug 输出中是否包含认证命令。默认是 false 。\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003e详情请参考官方 API 文档：\u003c/p\u003e\n\u003cp\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://javamail.java.net/nonav/docs/api/\"\u003ehttps://javamail.java.net/nonav/docs/api/\u003c/a\u003e 。\u003c/p\u003e\n\u003ch3 id=\"javax-mail-Session-类（会话对象）\"\u003e\u003ca href=\"#javax-mail-Session-类（会话对象）\" class=\"headerlink\" title=\"javax.mail.Session 类（会话对象）\"\u003e\u003c/a\u003ejavax.mail.Session 类（会话对象）\u003c/h3\u003e\u003cp\u003e\u003ccode\u003eSession\u003c/code\u003e 表示一个邮件会话。\u003c/p\u003e\n\u003cp\u003eSession 的主要作用包括两个方面：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e接收各种配置属性信息：通过 Properties 对象设置的属性信息；\u003c/li\u003e\n\u003cli\u003e初始化 JavaMail 环境：根据 JavaMail 的配置文件，初始化 JavaMail 环境，以便通过 Session 对象创建其他重要类的实例。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eJavaMail 在 Jar 包的 META-INF 目录下，通过以下文件提供了基本配置信息，以便 session 能够根据这个配置文件加载提供者的实现类：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ejavamail.default.providers\u003c/li\u003e\n\u003cli\u003ejavamail.default.address.map\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"http://upload-images.jianshu.io/upload_images/3101171-b59382c69385df45.png\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e例：\u003c/strong\u003e\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"type\"\u003eProperties\u003c/span\u003e \u003cspan class=\"variable\"\u003eprops\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eProperties\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eprops.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.transport.protocol\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;smtp\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"type\"\u003eSession\u003c/span\u003e \u003cspan class=\"variable\"\u003esession\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e Session.getInstance(props);\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"javax-mail-Transport-类（邮件传输）\"\u003e\u003ca href=\"#javax-mail-Transport-类（邮件传输）\" class=\"headerlink\" title=\"javax.mail.Transport 类（邮件传输）\"\u003e\u003c/a\u003ejavax.mail.Transport 类（邮件传输）\u003c/h3\u003e\u003cp\u003e邮件操作只有发送或接收两种处理方式。\u003c/p\u003e\n\u003cp\u003eJavaMail 将这两种不同操作描述为传输（ javax.mail.Transport ）和存储（ javax.mail.Store ），传输对应邮件的发送，而存储对应邮件的接收。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003egetTransport\u003c/code\u003e - Session 类中的 **getTransport()**有多个重载方法，可以用来创建 Transport 对象。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003econnect\u003c/code\u003e - 如果设置了认证命令—— mail.smtp.auth ，那么使用 Transport 类的 connect 方法连接服务器时，则必须加上用户名和密码。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003esendMessage\u003c/code\u003e - Transport 类的 sendMessage 方法用来发送邮件消息。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eclose\u003c/code\u003e - Transport 类的 close 方法用来关闭和邮件服务器的连接。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"javax-mail-Store-类（邮件存储-）\"\u003e\u003ca href=\"#javax-mail-Store-类（邮件存储-）\" class=\"headerlink\" title=\"javax.mail.Store 类（邮件存储 ）\"\u003e\u003c/a\u003ejavax.mail.Store 类（邮件存储 ）\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e\u003ccode\u003egetStore\u003c/code\u003e - Session 类中的 getStore () 有多个重载方法，可以用来创建 Store 对象。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003econnect\u003c/code\u003e - 如果设置了认证命令—— mail.smtp.auth ，那么使用 Store 类的 connect 方法连接服务器时，则必须加上用户名和密码。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003egetFolder\u003c/code\u003e - Store 类的 getFolder 方法可以 获取邮箱内的邮件夹 Folder 对象\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eclose\u003c/code\u003e - Store 类的 close 方法用来关闭和邮件服务器的连接。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"javax-mail-Message-类（消息对象）\"\u003e\u003ca href=\"#javax-mail-Message-类（消息对象）\" class=\"headerlink\" title=\"javax.mail.Message 类（消息对象）\"\u003e\u003c/a\u003ejavax.mail.Message 类（消息对象）\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ejavax.mail.Message\u003c/code\u003e - 是个抽象类，只能用子类去实例化，多数情况下为 \u003ccode\u003ejavax.mail.internet.MimeMessage\u003c/code\u003e。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eMimeMessage\u003c/code\u003e - 代表 MIME 类型的电子邮件消息。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e要创建一个 Message ，需要将 Session 对象传递给 \u003ccode\u003eMimeMessage\u003c/code\u003e 构造器：\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"type\"\u003eMimeMessage\u003c/span\u003e \u003cspan class=\"variable\"\u003emessage\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMimeMessage\u003c/span\u003e(session);\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e注意：还存在其它构造器，如用按 RFC822 格式的输入流来创建消息。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003esetFrom - 设置邮件的发件人\u003c/li\u003e\n\u003cli\u003esetRecipient - 设置邮件的发送人、抄送人、密送人\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e三种预定义的地址类型是：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eMessage.RecipientType.TO\u003c/code\u003e - 收件人\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eMessage.RecipientType.CC\u003c/code\u003e - 抄送人\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eMessage.RecipientType.BCC\u003c/code\u003e - 密送人\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003esetSubject\u003c/code\u003e - 设置邮件的主题\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003esetContent\u003c/code\u003e - 设置邮件内容\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003esetText\u003c/code\u003e - 如果邮件内容是纯文本，可以使用此接口设置文本内容。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"javax-mail-Address-类（地址）\"\u003e\u003ca href=\"#javax-mail-Address-类（地址）\" class=\"headerlink\" title=\"javax.mail.Address 类（地址）\"\u003e\u003c/a\u003ejavax.mail.Address 类（地址）\u003c/h3\u003e\u003cp\u003e一旦您创建了 Session 和 Message ，并将内容填入消息后，就可以用 Address 确定信件地址了。和 Message 一样， Address 也是个抽象类。您用的是 javax.mail.internet.InternetAddress 类。\u003c/p\u003e\n\u003cp\u003e若创建的地址只包含电子邮件地址，只要传递电子邮件地址到构造器就行了。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e例：\u003c/strong\u003e\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"type\"\u003eAddress\u003c/span\u003e \u003cspan class=\"variable\"\u003eaddress\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInternetAddress\u003c/span\u003e(\u003cspan class=\"string\"\u003e\u0026#34;[email protected]\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"Authenticator-类（认证者）\"\u003e\u003ca href=\"#Authenticator-类（认证者）\" class=\"headerlink\" title=\"Authenticator 类（认证者）\"\u003e\u003c/a\u003eAuthenticator 类（认证者）\u003c/h3\u003e\u003cp\u003e与 java.net 类一样， JavaMail API 也可以利用 \u003ccode\u003eAuthenticator\u003c/code\u003e 通过用户名和密码访问受保护的资源。对于 JavaMail API 来说，这些资源就是邮件服务器。\u003ccode\u003eAuthenticator\u003c/code\u003e 在 javax.mail 包中，而且它和 java.net 中同名的类 Authenticator 不同。两者并不共享同一个 Authenticator ，因为 JavaMail API 用于 Java 1.1 ，它没有 java.net 类别。\u003c/p\u003e\n\u003cp\u003e要使用 Authenticator ，先创建一个抽象类的子类，并从 \u003ccode\u003egetPasswordAuthentication()\u003c/code\u003e 方法中返回 \u003ccode\u003ePasswordAuthentication\u003c/code\u003e 实例。创建完成后，您必需向 session 注册 \u003ccode\u003eAuthenticator\u003c/code\u003e 。然后，在需要认证的时候，就会通知 \u003ccode\u003eAuthenticator\u003c/code\u003e 。您可以弹出窗口，也可以从配置文件中（虽然没有加密是不安全的）读取用户名和密码，将它们作为 \u003ccode\u003ePasswordAuthentication\u003c/code\u003e 对象返回给调用程序。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e例：\u003c/strong\u003e\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"type\"\u003eProperties\u003c/span\u003e \u003cspan class=\"variable\"\u003eprops\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eProperties\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"type\"\u003eAuthenticator\u003c/span\u003e \u003cspan class=\"variable\"\u003eauth\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMyAuthenticator\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"type\"\u003eSession\u003c/span\u003e \u003cspan class=\"variable\"\u003esession\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e Session.getDefaultInstance(props, auth);\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"实例\"\u003e\u003ca href=\"#实例\" class=\"headerlink\" title=\"实例\"\u003e\u003c/a\u003e实例\u003c/h2\u003e\u003ch3 id=\"发送文本邮件\"\u003e\u003ca href=\"#发送文本邮件\" class=\"headerlink\" title=\"发送文本邮件\"\u003e\u003c/a\u003e发送文本邮件\u003c/h3\u003e\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003emain\u003c/span\u003e\u003cspan class=\"params\"\u003e(String[] args)\u003c/span\u003e \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e Exception {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eProperties\u003c/span\u003e \u003cspan class=\"variable\"\u003eprop\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eProperties\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.debug\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.host\u0026#34;\u003c/span\u003e, MAIL_SERVER_HOST);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.transport.protocol\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;smtp\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.smtp.auth\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 1、创建session\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eSession\u003c/span\u003e \u003cspan class=\"variable\"\u003esession\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e Session.getInstance(prop);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eTransport\u003c/span\u003e \u003cspan class=\"variable\"\u003ets\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"literal\"\u003enull\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 2、通过session得到transport对象\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    ts = session.getTransport();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 3、连上邮件服务器\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    ts.connect(MAIL_SERVER_HOST, USER, PASSWORD);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 4、创建邮件\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eMimeMessage\u003c/span\u003e \u003cspan class=\"variable\"\u003emessage\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMimeMessage\u003c/span\u003e(session);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 邮件消息头\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setFrom(\u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInternetAddress\u003c/span\u003e(MAIL_FROM)); \u003cspan class=\"comment\"\u003e// 邮件的发件人\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setRecipient(Message.RecipientType.TO, \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInternetAddress\u003c/span\u003e(MAIL_TO)); \u003cspan class=\"comment\"\u003e// 邮件的收件人\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setRecipient(Message.RecipientType.CC, \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInternetAddress\u003c/span\u003e(MAIL_CC)); \u003cspan class=\"comment\"\u003e// 邮件的抄送人\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setRecipient(Message.RecipientType.BCC, \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInternetAddress\u003c/span\u003e(MAIL_BCC)); \u003cspan class=\"comment\"\u003e// 邮件的密送人\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setSubject(\u003cspan class=\"string\"\u003e\u0026#34;测试文本邮件\u0026#34;\u003c/span\u003e); \u003cspan class=\"comment\"\u003e// 邮件的标题\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 邮件消息体\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setText(\u003cspan class=\"string\"\u003e\u0026#34;天下无双。\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 5、发送邮件\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    ts.sendMessage(message, message.getAllRecipients());\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    ts.close();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"发送-HTML-格式的邮件\"\u003e\u003ca href=\"#发送-HTML-格式的邮件\" class=\"headerlink\" title=\"发送 HTML 格式的邮件\"\u003e\u003c/a\u003e发送 HTML 格式的邮件\u003c/h3\u003e\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e35\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e36\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e37\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e38\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e39\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e40\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e41\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e42\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e43\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e44\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e45\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e46\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e47\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003emain\u003c/span\u003e\u003cspan class=\"params\"\u003e(String[] args)\u003c/span\u003e \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e Exception {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eProperties\u003c/span\u003e \u003cspan class=\"variable\"\u003eprop\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eProperties\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.debug\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.host\u0026#34;\u003c/span\u003e, MAIL_SERVER_HOST);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.transport.protocol\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;smtp\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.smtp.auth\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 1、创建session\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eSession\u003c/span\u003e \u003cspan class=\"variable\"\u003esession\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e Session.getInstance(prop);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eTransport\u003c/span\u003e \u003cspan class=\"variable\"\u003ets\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"literal\"\u003enull\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 2、通过session得到transport对象\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    ts = session.getTransport();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 3、连上邮件服务器\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    ts.connect(MAIL_SERVER_HOST, USER, PASSWORD);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 4、创建邮件\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eMimeMessage\u003c/span\u003e \u003cspan class=\"variable\"\u003emessage\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMimeMessage\u003c/span\u003e(session);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 邮件消息头\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setFrom(\u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInternetAddress\u003c/span\u003e(MAIL_FROM)); \u003cspan class=\"comment\"\u003e// 邮件的发件人\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setRecipient(Message.RecipientType.TO, \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInternetAddress\u003c/span\u003e(MAIL_TO)); \u003cspan class=\"comment\"\u003e// 邮件的收件人\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setRecipient(Message.RecipientType.CC, \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInternetAddress\u003c/span\u003e(MAIL_CC)); \u003cspan class=\"comment\"\u003e// 邮件的抄送人\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setRecipient(Message.RecipientType.BCC, \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInternetAddress\u003c/span\u003e(MAIL_BCC)); \u003cspan class=\"comment\"\u003e// 邮件的密送人\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setSubject(\u003cspan class=\"string\"\u003e\u0026#34;测试HTML邮件\u0026#34;\u003c/span\u003e); \u003cspan class=\"comment\"\u003e// 邮件的标题\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003ehtmlContent\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;h1\u0026gt;Hello\u0026lt;/h1\u0026gt;\u0026#34;\u003c/span\u003e + \u003cspan class=\"string\"\u003e\u0026#34;\u0026lt;p\u0026gt;显示图片\u0026lt;img src=\u0026#39;cid:abc.jpg\u0026#39;\u0026gt;1.jpg\u0026lt;/p\u0026gt;\u0026#34;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eMimeBodyPart\u003c/span\u003e \u003cspan class=\"variable\"\u003etext\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMimeBodyPart\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    text.setContent(htmlContent, \u003cspan class=\"string\"\u003e\u0026#34;text/html;charset=UTF-8\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eMimeBodyPart\u003c/span\u003e \u003cspan class=\"variable\"\u003eimage\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMimeBodyPart\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eDataHandler\u003c/span\u003e \u003cspan class=\"variable\"\u003edh\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eDataHandler\u003c/span\u003e(\u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eFileDataSource\u003c/span\u003e(\u003cspan class=\"string\"\u003e\u0026#34;D:\\\\05_Datas\\\\图库\\\\吉他少年背影.png\u0026#34;\u003c/span\u003e));\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    image.setDataHandler(dh);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    image.setContentID(\u003cspan class=\"string\"\u003e\u0026#34;abc.jpg\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 描述数据关系\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eMimeMultipart\u003c/span\u003e \u003cspan class=\"variable\"\u003emm\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMimeMultipart\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    mm.addBodyPart(text);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    mm.addBodyPart(image);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    mm.setSubType(\u003cspan class=\"string\"\u003e\u0026#34;related\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setContent(mm);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.saveChanges();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 5、发送邮件\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    ts.sendMessage(message, message.getAllRecipients());\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    ts.close();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"发送带附件的邮件\"\u003e\u003ca href=\"#发送带附件的邮件\" class=\"headerlink\" title=\"发送带附件的邮件\"\u003e\u003c/a\u003e发送带附件的邮件\u003c/h3\u003e\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e35\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e36\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e37\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e38\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e39\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e40\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e41\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e42\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e43\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e44\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e45\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e46\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e47\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e48\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e49\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e50\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e51\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003emain\u003c/span\u003e\u003cspan class=\"params\"\u003e(String[] args)\u003c/span\u003e \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e Exception {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eProperties\u003c/span\u003e \u003cspan class=\"variable\"\u003eprop\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eProperties\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.debug\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.host\u0026#34;\u003c/span\u003e, MAIL_SERVER_HOST);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.transport.protocol\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;smtp\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.smtp.auth\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 1、创建session\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eSession\u003c/span\u003e \u003cspan class=\"variable\"\u003esession\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e Session.getInstance(prop);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 2、通过session得到transport对象\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eTransport\u003c/span\u003e \u003cspan class=\"variable\"\u003ets\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e session.getTransport();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 3、连上邮件服务器\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    ts.connect(MAIL_SERVER_HOST, USER, PASSWORD);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 4、创建邮件\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eMimeMessage\u003c/span\u003e \u003cspan class=\"variable\"\u003emessage\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMimeMessage\u003c/span\u003e(session);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 邮件消息头\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setFrom(\u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInternetAddress\u003c/span\u003e(MAIL_FROM)); \u003cspan class=\"comment\"\u003e// 邮件的发件人\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setRecipient(Message.RecipientType.TO, \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInternetAddress\u003c/span\u003e(MAIL_TO)); \u003cspan class=\"comment\"\u003e// 邮件的收件人\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setRecipient(Message.RecipientType.CC, \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInternetAddress\u003c/span\u003e(MAIL_CC)); \u003cspan class=\"comment\"\u003e// 邮件的抄送人\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setRecipient(Message.RecipientType.BCC, \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInternetAddress\u003c/span\u003e(MAIL_BCC)); \u003cspan class=\"comment\"\u003e// 邮件的密送人\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setSubject(\u003cspan class=\"string\"\u003e\u0026#34;测试带附件邮件\u0026#34;\u003c/span\u003e); \u003cspan class=\"comment\"\u003e// 邮件的标题\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eMimeBodyPart\u003c/span\u003e \u003cspan class=\"variable\"\u003etext\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMimeBodyPart\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    text.setContent(\u003cspan class=\"string\"\u003e\u0026#34;邮件中有两个附件。\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;text/html;charset=UTF-8\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 描述数据关系\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eMimeMultipart\u003c/span\u003e \u003cspan class=\"variable\"\u003emm\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMimeMultipart\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    mm.setSubType(\u003cspan class=\"string\"\u003e\u0026#34;related\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    mm.addBodyPart(text);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    String[] files = {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            \u003cspan class=\"string\"\u003e\u0026#34;D:\\\\00_Temp\\\\temp\\\\1.jpg\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;D:\\\\00_Temp\\\\temp\\\\2.png\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    };\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 添加邮件附件\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003efor\u003c/span\u003e (String filename : files) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eMimeBodyPart\u003c/span\u003e \u003cspan class=\"variable\"\u003eattachPart\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMimeBodyPart\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        attachPart.attachFile(filename);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        mm.addBodyPart(attachPart);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.setContent(mm);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    message.saveChanges();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 5、发送邮件\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    ts.sendMessage(message, message.getAllRecipients());\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    ts.close();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"获取邮箱中的邮件\"\u003e\u003ca href=\"#获取邮箱中的邮件\" class=\"headerlink\" title=\"获取邮箱中的邮件\"\u003e\u003c/a\u003e获取邮箱中的邮件\u003c/h3\u003e\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003emain\u003c/span\u003e\u003cspan class=\"params\"\u003e(String[] args)\u003c/span\u003e \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e Exception {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 创建一个有具体连接信息的Properties对象\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eProperties\u003c/span\u003e \u003cspan class=\"variable\"\u003eprop\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eProperties\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.debug\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.store.protocol\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;pop3\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.setProperty(\u003cspan class=\"string\"\u003e\u0026#34;mail.pop3.host\u0026#34;\u003c/span\u003e, MAIL_SERVER_HOST);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 1、创建session\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eSession\u003c/span\u003e \u003cspan class=\"variable\"\u003esession\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e Session.getInstance(prop);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 2、通过session得到Store对象\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eStore\u003c/span\u003e \u003cspan class=\"variable\"\u003estore\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e session.getStore();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 3、连上邮件服务器\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    store.connect(MAIL_SERVER_HOST, USER, PASSWORD);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 4、获得邮箱内的邮件夹\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eFolder\u003c/span\u003e \u003cspan class=\"variable\"\u003efolder\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e store.getFolder(\u003cspan class=\"string\"\u003e\u0026#34;inbox\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    folder.open(Folder.READ_ONLY);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 获得邮件夹Folder内的所有邮件Message对象\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    Message[] messages = folder.getMessages();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"type\"\u003eint\u003c/span\u003e \u003cspan class=\"variable\"\u003ei\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"number\"\u003e0\u003c/span\u003e; i \u0026lt; messages.length; i++) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003esubject\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e messages[i].getSubject();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003efrom\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e (messages[i].getFrom()[\u003cspan class=\"number\"\u003e0\u003c/span\u003e]).toString();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        System.out.println(\u003cspan class=\"string\"\u003e\u0026#34;第 \u0026#34;\u003c/span\u003e + (i + \u003cspan class=\"number\"\u003e1\u003c/span\u003e) + \u003cspan class=\"string\"\u003e\u0026#34;封邮件的主题：\u0026#34;\u003c/span\u003e + subject);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        System.out.println(\u003cspan class=\"string\"\u003e\u0026#34;第 \u0026#34;\u003c/span\u003e + (i + \u003cspan class=\"number\"\u003e1\u003c/span\u003e) + \u003cspan class=\"string\"\u003e\u0026#34;封邮件的发件人地址：\u0026#34;\u003c/span\u003e + from);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 5、关闭\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    folder.close(\u003cspan class=\"literal\"\u003efalse\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    store.close();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"转发邮件\"\u003e\u003ca href=\"#转发邮件\" class=\"headerlink\" title=\"转发邮件\"\u003e\u003c/a\u003e转发邮件\u003c/h3\u003e\u003cp\u003e例：获取指定邮件夹下的第一封邮件并转发\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e35\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e36\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e37\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e38\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e39\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e40\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e41\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e42\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e43\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e44\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e45\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e46\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e47\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e48\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e49\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e50\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e51\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e52\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e53\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e54\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e55\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e56\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e57\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e58\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e59\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e60\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e61\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e62\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e63\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e64\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e65\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e66\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e67\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e68\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e69\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e70\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e71\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e72\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e73\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e74\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003emain\u003c/span\u003e\u003cspan class=\"params\"\u003e(String[] args)\u003c/span\u003e \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e Exception {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eProperties\u003c/span\u003e \u003cspan class=\"variable\"\u003eprop\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eProperties\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.put(\u003cspan class=\"string\"\u003e\u0026#34;mail.store.protocol\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;pop3\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.put(\u003cspan class=\"string\"\u003e\u0026#34;mail.pop3.host\u0026#34;\u003c/span\u003e, MAIL_SERVER_POP3);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.put(\u003cspan class=\"string\"\u003e\u0026#34;mail.pop3.starttls.enable\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.put(\u003cspan class=\"string\"\u003e\u0026#34;mail.smtp.auth\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    prop.put(\u003cspan class=\"string\"\u003e\u0026#34;mail.smtp.host\u0026#34;\u003c/span\u003e, MAIL_SERVER_SMTP);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 1、创建session\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eSession\u003c/span\u003e \u003cspan class=\"variable\"\u003esession\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e Session.getDefaultInstance(prop);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 2、读取邮件夹\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eStore\u003c/span\u003e \u003cspan class=\"variable\"\u003estore\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e session.getStore(\u003cspan class=\"string\"\u003e\u0026#34;pop3\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    store.connect(MAIL_SERVER_POP3, USER, PASSWORD);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eFolder\u003c/span\u003e \u003cspan class=\"variable\"\u003efolder\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e store.getFolder(\u003cspan class=\"string\"\u003e\u0026#34;inbox\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    folder.open(Folder.READ_ONLY);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 获取邮件夹中第1封邮件信息\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    Message[] messages = folder.getMessages();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e (messages.length \u0026lt;= \u003cspan class=\"number\"\u003e0\u003c/span\u003e) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eMessage\u003c/span\u003e \u003cspan class=\"variable\"\u003emessage\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e messages[\u003cspan class=\"number\"\u003e0\u003c/span\u003e];\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 打印邮件关键信息\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003efrom\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e InternetAddress.toString(message.getFrom());\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e (from != \u003cspan class=\"literal\"\u003enull\u003c/span\u003e) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        System.out.println(\u003cspan class=\"string\"\u003e\u0026#34;From: \u0026#34;\u003c/span\u003e + from);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003ereplyTo\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e InternetAddress.toString(message.getReplyTo());\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e (replyTo != \u003cspan class=\"literal\"\u003enull\u003c/span\u003e) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        System.out.println(\u003cspan class=\"string\"\u003e\u0026#34;Reply-to: \u0026#34;\u003c/span\u003e + replyTo);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003eto\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e InternetAddress.toString(message.getRecipients(Message.RecipientType.TO));\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e (to != \u003cspan class=\"literal\"\u003enull\u003c/span\u003e) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        System.out.println(\u003cspan class=\"string\"\u003e\u0026#34;To: \u0026#34;\u003c/span\u003e + to);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eString\u003c/span\u003e \u003cspan class=\"variable\"\u003esubject\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e message.getSubject();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e (subject != \u003cspan class=\"literal\"\u003enull\u003c/span\u003e) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        System.out.println(\u003cspan class=\"string\"\u003e\u0026#34;Subject: \u0026#34;\u003c/span\u003e + subject);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eDate\u003c/span\u003e \u003cspan class=\"variable\"\u003esent\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e message.getSentDate();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e (sent != \u003cspan class=\"literal\"\u003enull\u003c/span\u003e) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        System.out.println(\u003cspan class=\"string\"\u003e\u0026#34;Sent: \u0026#34;\u003c/span\u003e + sent);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 设置转发邮件信息头\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eMessage\u003c/span\u003e \u003cspan class=\"variable\"\u003eforward\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMimeMessage\u003c/span\u003e(session);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    forward.setFrom(\u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInternetAddress\u003c/span\u003e(MAIL_FROM));\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    forward.setRecipient(Message.RecipientType.TO, \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInternetAddress\u003c/span\u003e(MAIL_TO));\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    forward.setSubject(\u003cspan class=\"string\"\u003e\u0026#34;Fwd: \u0026#34;\u003c/span\u003e + message.getSubject());\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// 设置转发邮件内容\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eMimeBodyPart\u003c/span\u003e \u003cspan class=\"variable\"\u003ebodyPart\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMimeBodyPart\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    bodyPart.setContent(message, \u003cspan class=\"string\"\u003e\u0026#34;message/rfc822\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eMultipart\u003c/span\u003e \u003cspan class=\"variable\"\u003emultipart\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMimeMultipart\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    multipart.addBodyPart(bodyPart);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    forward.setContent(multipart);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    forward.saveChanges();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eTransport\u003c/span\u003e \u003cspan class=\"variable\"\u003ets\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e session.getTransport(\u003cspan class=\"string\"\u003e\u0026#34;smtp\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    ts.connect(USER, PASSWORD);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    ts.sendMessage(forward, forward.getAllRecipients());\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    folder.close(\u003cspan class=\"literal\"\u003efalse\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    store.close();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    ts.close();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    System.out.println(\u003cspan class=\"string\"\u003e\u0026#34;message forwarded successfully....\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n    \u003c/div\u003e",
  "Date": "2022-02-17T14:34:30Z",
  "Author": "钝悟 ◾ Dunwu"
}