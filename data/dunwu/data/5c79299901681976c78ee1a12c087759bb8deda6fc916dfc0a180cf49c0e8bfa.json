{
  "Source": "dunwu",
  "Title": "hive-ops",
  "Link": "https://dunwu.github.io/blog/pages/94f791/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003ch1 id=\"Hive-运维\"\u003e\u003ca href=\"#Hive-运维\" class=\"headerlink\" title=\"Hive 运维\"\u003e\u003c/a\u003eHive 运维\u003c/h1\u003e\u003ch2 id=\"Hive-安装\"\u003e\u003ca href=\"#Hive-安装\" class=\"headerlink\" title=\"Hive 安装\"\u003e\u003c/a\u003eHive 安装\u003c/h2\u003e\u003ch3 id=\"下载并解压\"\u003e\u003ca href=\"#下载并解压\" class=\"headerlink\" title=\"下载并解压\"\u003e\u003c/a\u003e下载并解压\u003c/h3\u003e\u003cp\u003e下载所需版本的 Hive，这里我下载版本为 \u003ccode\u003ecdh5.15.2\u003c/code\u003e。下载地址：\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://archive.cloudera.com/cdh5/cdh/5/\"\u003ehttp://archive.cloudera.com/cdh5/cdh/5/\u003c/a\u003e\u003c/p\u003e\n\u003cfigure class=\"highlight apache\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 下载后进行解压\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e \u003cspan class=\"attribute\"\u003etar\u003c/span\u003e -zxvf hive-\u003cspan class=\"number\"\u003e1\u003c/span\u003e.\u003cspan class=\"number\"\u003e1\u003c/span\u003e.\u003cspan class=\"number\"\u003e0\u003c/span\u003e-cdh5.\u003cspan class=\"number\"\u003e15\u003c/span\u003e.\u003cspan class=\"number\"\u003e2\u003c/span\u003e.tar.gz\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"配置环境变量\"\u003e\u003ca href=\"#配置环境变量\" class=\"headerlink\" title=\"配置环境变量\"\u003e\u003c/a\u003e配置环境变量\u003c/h3\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003evim /etc/profile\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e添加环境变量：\u003c/p\u003e\n\u003cfigure class=\"highlight routeros\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"built_in\"\u003eexport\u003c/span\u003e \u003cspan class=\"attribute\"\u003eHIVE_HOME\u003c/span\u003e=/usr/app/hive-1.1.0-cdh5.15.2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"built_in\"\u003eexport\u003c/span\u003e \u003cspan class=\"attribute\"\u003ePATH\u003c/span\u003e=\u003cspan class=\"variable\"\u003e$HIVE_HOME\u003c/span\u003e/bin:$PATH\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e使得配置的环境变量立即生效：\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"built_in\"\u003esource\u003c/span\u003e /etc/profile\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"修改配置\"\u003e\u003ca href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"\u003e\u003c/a\u003e修改配置\u003c/h3\u003e\u003cp\u003e\u003cstrong\u003e1. hive-env.sh\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e进入安装目录下的 \u003ccode\u003econf/\u003c/code\u003e 目录，拷贝 Hive 的环境配置模板 \u003ccode\u003eflume-env.sh.template\u003c/code\u003e\u003c/p\u003e\n\u003cfigure class=\"highlight vim\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003ecp\u003c/span\u003e hive-env.\u003cspan class=\"keyword\"\u003esh\u003c/span\u003e.template hive-env.\u003cspan class=\"keyword\"\u003esh\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e修改 \u003ccode\u003ehive-env.sh\u003c/code\u003e，指定 Hadoop 的安装路径：\u003c/p\u003e\n\u003cfigure class=\"highlight apache\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003eHADOOP_HOME\u003c/span\u003e=/usr/app/hadoop-\u003cspan class=\"number\"\u003e2\u003c/span\u003e.\u003cspan class=\"number\"\u003e6\u003c/span\u003e.\u003cspan class=\"number\"\u003e0\u003c/span\u003e-cdh5.\u003cspan class=\"number\"\u003e15\u003c/span\u003e.\u003cspan class=\"number\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cstrong\u003e2. hive-site.xml\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e新建 hive-site.xml 文件，内容如下，主要是配置存放元数据的 MySQL 的地址、驱动、用户名和密码等信息：\u003c/p\u003e\n\u003cfigure class=\"highlight xml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e\u0026lt;?xml version=\u003cspan class=\"string\"\u003e\u0026#34;1.0\u0026#34;\u003c/span\u003e?\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e\u0026lt;?xml-stylesheet type=\u003cspan class=\"string\"\u003e\u0026#34;text/xsl\u0026#34;\u003c/span\u003e href=\u003cspan class=\"string\"\u003e\u0026#34;configuration.xsl\u0026#34;\u003c/span\u003e?\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003econfiguration\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003ename\u003c/span\u003e\u0026gt;\u003c/span\u003ejavax.jdo.option.ConnectionURL\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003ename\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003evalue\u003c/span\u003e\u0026gt;\u003c/span\u003ejdbc:mysql://hadoop001:3306/hadoop_hive?createDatabaseIfNotExist=true\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003evalue\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003ename\u003c/span\u003e\u0026gt;\u003c/span\u003ejavax.jdo.option.ConnectionDriverName\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003ename\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003evalue\u003c/span\u003e\u0026gt;\u003c/span\u003ecom.mysql.jdbc.Driver\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003evalue\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003ename\u003c/span\u003e\u0026gt;\u003c/span\u003ejavax.jdo.option.ConnectionUserName\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003ename\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003evalue\u003c/span\u003e\u0026gt;\u003c/span\u003eroot\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003evalue\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003ename\u003c/span\u003e\u0026gt;\u003c/span\u003ejavax.jdo.option.ConnectionPassword\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003ename\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003evalue\u003c/span\u003e\u0026gt;\u003c/span\u003eroot\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003evalue\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003econfiguration\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"拷贝数据库驱动\"\u003e\u003ca href=\"#拷贝数据库驱动\" class=\"headerlink\" title=\"拷贝数据库驱动\"\u003e\u003c/a\u003e拷贝数据库驱动\u003c/h3\u003e\u003cp\u003e将 MySQL 驱动包拷贝到 Hive 安装目录的 \u003ccode\u003elib\u003c/code\u003e 目录下, MySQL 驱动的下载地址为：\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://dev.mysql.com/downloads/connector/j/\"\u003ehttps://dev.mysql.com/downloads/connector/j/\u003c/a\u003e。\u003c/p\u003e\n\u003ch3 id=\"初始化元数据库\"\u003e\u003ca href=\"#初始化元数据库\" class=\"headerlink\" title=\"初始化元数据库\"\u003e\u003c/a\u003e初始化元数据库\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e\u003cp\u003e当使用的 hive 是 1.x 版本时，可以不进行初始化操作，Hive 会在第一次启动的时候会自动进行初始化，但不会生成所有的元数据信息表，只会初始化必要的一部分，在之后的使用中用到其余表时会自动创建；\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e当使用的 hive 是 2.x 版本时，必须手动初始化元数据库。初始化命令：\u003c/p\u003e\n\u003cfigure class=\"highlight mipsasm\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# schematool 命令在安装目录的 bin 目录下，由于上面已经配置过环境变量，在任意位置执行即可\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eschematool \u003c/span\u003e-dbType mysql -initSchema\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e这里我使用的是 CDH 的 \u003ccode\u003ehive-1.1.0-cdh5.15.2.tar.gz\u003c/code\u003e，对应 \u003ccode\u003eHive 1.1.0\u003c/code\u003e 版本，可以跳过这一步。\u003c/p\u003e\n\u003ch3 id=\"启动\"\u003e\u003ca href=\"#启动\" class=\"headerlink\" title=\"启动\"\u003e\u003c/a\u003e启动\u003c/h3\u003e\u003cp\u003e由于已经将 Hive 的 bin 目录配置到环境变量，直接使用以下命令启动，成功进入交互式命令行后执行 \u003ccode\u003eshow databases\u003c/code\u003e 命令，无异常则代表搭建成功。\u003c/p\u003e\n\u003cfigure class=\"highlight 1c\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e# hive\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cimg src=\"https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-install-2.png\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003cp\u003e在 Mysql 中也能看到 Hive 创建的库和存放元数据信息的表\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-mysql-tables.png\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003ch2 id=\"HiveServer2-beeline\"\u003e\u003ca href=\"#HiveServer2-beeline\" class=\"headerlink\" title=\"HiveServer2/beeline\"\u003e\u003c/a\u003eHiveServer2/beeline\u003c/h2\u003e\u003cp\u003eHive 内置了 HiveServer 和 HiveServer2 服务，两者都允许客户端使用多种编程语言进行连接，但是 HiveServer 不能处理多个客户端的并发请求，因此产生了 HiveServer2。\u003c/p\u003e\n\u003cp\u003eHiveServer2（HS2）允许远程客户端可以使用各种编程语言向 Hive 提交请求并检索结果，支持多客户端并发访问和身份验证。HS2 是由多个服务组成的单个进程，其包括基于 Thrift 的 Hive 服务（TCP 或 HTTP）和用于 Web UI 的 Jetty Web 服务。\u003c/p\u003e\n\u003cp\u003eHiveServer2 拥有自己的 CLI 工具——Beeline。Beeline 是一个基于 SQLLine 的 JDBC 客户端。由于目前 HiveServer2 是 Hive 开发维护的重点，所以官方更加推荐使用 Beeline 而不是 Hive CLI。以下主要讲解 Beeline 的配置方式。\u003c/p\u003e\n\u003ch3 id=\"修改-Hadoop-配置\"\u003e\u003ca href=\"#修改-Hadoop-配置\" class=\"headerlink\" title=\"修改 Hadoop 配置\"\u003e\u003c/a\u003e修改 Hadoop 配置\u003c/h3\u003e\u003cp\u003e修改 hadoop 集群的 core-site.xml 配置文件，增加如下配置，指定 hadoop 的 root 用户可以代理本机上所有的用户。\u003c/p\u003e\n\u003cfigure class=\"highlight xml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003ename\u003c/span\u003e\u0026gt;\u003c/span\u003ehadoop.proxyuser.root.hosts\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003ename\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003evalue\u003c/span\u003e\u0026gt;\u003c/span\u003e*\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003evalue\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003ename\u003c/span\u003e\u0026gt;\u003c/span\u003ehadoop.proxyuser.root.groups\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003ename\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003evalue\u003c/span\u003e\u0026gt;\u003c/span\u003e*\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003evalue\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e之所以要配置这一步，是因为 hadoop 2.0 以后引入了安全伪装机制，使得 hadoop 不允许上层系统（如 hive）直接将实际用户传递到 hadoop 层，而应该将实际用户传递给一个超级代理，由该代理在 hadoop 上执行操作，以避免任意客户端随意操作 hadoop。如果不配置这一步，在之后的连接中可能会抛出 \u003ccode\u003eAuthorizationException\u003c/code\u003e 异常。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e关于 Hadoop 的用户代理机制，可以参考：\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://blog.csdn.net/u012948976/article/details/49904675#%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E8%A7%A3%E8%AF%BB\"\u003ehadoop 的用户代理机制\u003c/a\u003e 或 \u003ca target=\"_blank\" rel=\"noopener\" href=\"http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/Superusers.html\"\u003eSuperusers Acting On Behalf Of Other Users\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"启动-hiveserver2\"\u003e\u003ca href=\"#启动-hiveserver2\" class=\"headerlink\" title=\"启动 hiveserver2\"\u003e\u003c/a\u003e启动 hiveserver2\u003c/h3\u003e\u003cp\u003e由于上面已经配置过环境变量，这里直接启动即可：\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"built_in\"\u003enohup\u003c/span\u003e hiveserver2 \u0026amp;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"使用-beeline\"\u003e\u003ca href=\"#使用-beeline\" class=\"headerlink\" title=\"使用 beeline\"\u003e\u003c/a\u003e使用 beeline\u003c/h3\u003e\u003cp\u003e可以使用以下命令进入 beeline 交互式命令行，出现 \u003ccode\u003eConnected\u003c/code\u003e 则代表连接成功。\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ebeeline -u jdbc:hive2://hadoop001:10000 -n root\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"Beeline-选项\"\u003e\u003ca href=\"#Beeline-选项\" class=\"headerlink\" title=\"Beeline 选项\"\u003e\u003c/a\u003eBeeline 选项\u003c/h3\u003e\u003cp\u003eBeeline 拥有更多可使用参数，可以使用 \u003ccode\u003ebeeline --help\u003c/code\u003e 查看，完整参数如下：\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e35\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e36\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e37\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e38\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e39\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e40\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e41\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eUsage: java org.apache.hive.cli.beeline.BeeLine\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   -u \u0026lt;database url\u0026gt;               the JDBC URL to connect to\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   -r                              reconnect to last saved connect url (in conjunction with !save)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   -n \u0026lt;username\u0026gt;                   the username to connect as\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   -p \u0026lt;password\u0026gt;                   the password to connect as\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   -d \u0026lt;driver class\u0026gt;               the driver class to use\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   -i \u0026lt;init file\u0026gt;                  script file for initialization\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   -e \u0026lt;query\u0026gt;                      query that should be executed\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   -f \u0026lt;exec file\u0026gt;                  script file that should be executed\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   -w (or) --password-file \u0026lt;password file\u0026gt;  the password file to read password from\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --hiveconf property=value       Use value for given property\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --hivevar name=value            hive variable name and value\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                                   This is Hive specific settings in which variables\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                                   can be set at session level and referenced in Hive\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                                   commands or queries.\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --property-file=\u0026lt;property-file\u0026gt; the file to read connection properties (url, driver, user, password) from\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --color=[true/false]            control whether color is used for display\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --showHeader=[true/false]       show column names in query results\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --headerInterval=ROWS;          the interval between which heades are displayed\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --fastConnect=[true/false]      skip building table/column list for tab-completion\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --autoCommit=[true/false]       enable/disable automatic transaction commit\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --verbose=[true/false]          show verbose error messages and debug info\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --showWarnings=[true/false]     display connection warnings\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --showNestedErrs=[true/false]   display nested errors\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --numberFormat=[pattern]        format numbers using DecimalFormat pattern\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --force=[true/false]            continue running script even after errors\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --maxWidth=MAXWIDTH             the maximum width of the terminal\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --maxColumnWidth=MAXCOLWIDTH    the maximum width to use when displaying columns\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --silent=[true/false]           be more silent\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --autosave=[true/false]         automatically save preferences\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --outputformat=[table/vertical/csv2/tsv2/dsv/csv/tsv]  format mode for result display\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --incrementalBufferRows=NUMROWS the number of rows to buffer when printing rows on stdout,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                                   defaults to 1000; only applicable if --incremental=true\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                                   and --outputformat=table\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --truncateTable=[true/false]    truncate table column when it exceeds length\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --delimiterForDSV=DELIMITER     specify the delimiter for delimiter-separated values output format (default: |)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --isolation=LEVEL               set the transaction isolation level\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --nullemptystring=[true/false]  set to true to get historic behavior of printing null as empty string\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --maxHistoryRows=MAXHISTORYROWS The maximum number of rows to store beeline history.\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --convertBinaryArrayToString=[true/false]    display binary column data as string or as byte array\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e   --help                          display this message\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"常用参数\"\u003e\u003ca href=\"#常用参数\" class=\"headerlink\" title=\"常用参数\"\u003e\u003c/a\u003e常用参数\u003c/h3\u003e\u003cp\u003e在 Hive CLI 中支持的参数，Beeline 都支持，常用的参数如下。更多参数说明可以参见官方文档 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-Beeline%E2%80%93NewCommandLineShell\"\u003eBeeline Command Options\u003c/a\u003e\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e参数\u003c/th\u003e\n\u003cth\u003e说明\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e-u\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e数据库地址\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e-n\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e用户名\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e-p\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e密码\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e-d\u003c/td\u003e\n\u003ctd\u003e驱动 (可选)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e-e\u003c/code\u003e*\u003c/td\u003e\n\u003ctd\u003e执行 SQL 命令\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e-f\u003c/code\u003e*\u003c/td\u003e\n\u003ctd\u003e执行 SQL 脚本\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e-i (or)--init\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e在进入交互模式之前运行初始化脚本\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e--property-file\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e指定配置文件\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e--hiveconf property=value\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e指定配置属性\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e--hivevar name=value\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e用户自定义属性，在会话级别有效\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003e示例： 使用用户名和密码连接 Hive\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ebeeline -u jdbc:hive2://localhost:10000  -n username -p password\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"Hive-命令\"\u003e\u003ca href=\"#Hive-命令\" class=\"headerlink\" title=\"Hive 命令\"\u003e\u003c/a\u003eHive 命令\u003c/h2\u003e\u003ch3 id=\"Help\"\u003e\u003ca href=\"#Help\" class=\"headerlink\" title=\"Help\"\u003e\u003c/a\u003eHelp\u003c/h3\u003e\u003cp\u003e使用 \u003ccode\u003ehive -H\u003c/code\u003e 或者 \u003ccode\u003ehive --help\u003c/code\u003e 命令可以查看所有命令的帮助，显示如下：\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eusage: hive\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e -d,--define \u0026lt;key=value\u0026gt;          Variable subsitution to apply to hive\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                                  commands. e.g. -d A=B or --define A=B  --定义用户自定义变量\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    --database \u0026lt;databasename\u0026gt;     Specify the database to use  -- 指定使用的数据库\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e -e \u0026lt;quoted-query-string\u0026gt;         SQL from command line   -- 执行指定的 SQL\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e -f \u0026lt;filename\u0026gt;                    SQL from files   --执行 SQL 脚本\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e -H,--help                        Print help information  -- 打印帮助信息\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    --hiveconf \u0026lt;property=value\u0026gt;   Use value for given property    --自定义配置\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    --hivevar \u0026lt;key=value\u0026gt;         Variable subsitution to apply to hive  --自定义变量\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                                  commands. e.g. --hivevar A=B\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e -i \u0026lt;filename\u0026gt;                    Initialization SQL file  --在进入交互模式之前运行初始化脚本\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e -S,--silent                      Silent mode in interactive shell    --静默模式\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e -v,--verbose                     Verbose mode (echo executed SQL to the  console)  --详细模式\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"交互式命令行\"\u003e\u003ca href=\"#交互式命令行\" class=\"headerlink\" title=\"交互式命令行\"\u003e\u003c/a\u003e交互式命令行\u003c/h3\u003e\u003cp\u003e直接使用 \u003ccode\u003eHive\u003c/code\u003e 命令，不加任何参数，即可进入交互式命令行。\u003c/p\u003e\n\u003ch3 id=\"执行-SQL-命令\"\u003e\u003ca href=\"#执行-SQL-命令\" class=\"headerlink\" title=\"执行 SQL 命令\"\u003e\u003c/a\u003e执行 SQL 命令\u003c/h3\u003e\u003cp\u003e在不进入交互式命令行的情况下，可以使用 \u003ccode\u003ehive -e\u003c/code\u003e执行 SQL 命令。\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ehive -e \u0026#39;select * from emp\u0026#39;;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/heibaiying/BigData-Notes/blob/master/pictures/hive-e.png\"\u003e\u003cimg src=\"https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-e.png\" alt=\"img\"/\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"执行-SQL-脚本\"\u003e\u003ca href=\"#执行-SQL-脚本\" class=\"headerlink\" title=\"执行 SQL 脚本\"\u003e\u003c/a\u003e执行 SQL 脚本\u003c/h3\u003e\u003cp\u003e用于执行的 sql 脚本可以在本地文件系统，也可以在 HDFS 上。\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e本地文件系统\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehive -f /usr/file/simple.sql;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003eHDFS文件系统\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehive -f hdfs://hadoop001:8020/tmp/simple.sql;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e其中 \u003ccode\u003esimple.sql\u003c/code\u003e 内容如下：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eselect\u003c/span\u003e \u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003efrom\u003c/span\u003e emp;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"配置-Hive-变量\"\u003e\u003ca href=\"#配置-Hive-变量\" class=\"headerlink\" title=\"配置 Hive 变量\"\u003e\u003c/a\u003e配置 Hive 变量\u003c/h3\u003e\u003cp\u003e可以使用 \u003ccode\u003e--hiveconf\u003c/code\u003e 设置 Hive 运行时的变量。\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ehive -e \u0026#39;select * from emp\u0026#39; \\\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e--hiveconf hive.exec.scratchdir=/tmp/hive_scratch  \\\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e--hiveconf mapred.reduce.tasks=4;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003ehive.exec.scratchdir：指定 HDFS 上目录位置，用于存储不同 map/reduce 阶段的执行计划和这些阶段的中间输出结果。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"配置文件启动\"\u003e\u003ca href=\"#配置文件启动\" class=\"headerlink\" title=\"配置文件启动\"\u003e\u003c/a\u003e配置文件启动\u003c/h3\u003e\u003cp\u003e使用 \u003ccode\u003e-i\u003c/code\u003e 可以在进入交互模式之前运行初始化脚本，相当于指定配置文件启动。\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ehive -i /usr/file/hive-init.conf;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e其中 \u003ccode\u003ehive-init.conf\u003c/code\u003e 的内容如下：\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eset hive.exec.mode.local.auto = true;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003ehive.exec.mode.local.auto 默认值为 false，这里设置为 true ，代表开启本地模式。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"用户自定义变量\"\u003e\u003ca href=\"#用户自定义变量\" class=\"headerlink\" title=\"用户自定义变量\"\u003e\u003c/a\u003e用户自定义变量\u003c/h3\u003e\u003cp\u003e\u003ccode\u003e--define\u003c/code\u003e和 \u003ccode\u003e--hivevar\u003c/code\u003e在功能上是等价的，都是用来实现自定义变量，这里给出一个示例:\u003c/p\u003e\n\u003cp\u003e定义变量：\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ehive  --define  n=ename --hiveconf  --hivevar j=job;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e在查询中引用自定义变量：\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e以下两条语句等价\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehive \u0026gt; select ${n} from emp;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehive \u0026gt; select ${hivevar:n} from emp;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e以下两条语句等价\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehive \u0026gt; select ${j} from emp;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehive \u0026gt; select ${hivevar:j} from emp;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e结果如下：\u003c/p\u003e\n\u003cp\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/heibaiying/BigData-Notes/blob/master/pictures/hive-n-j.png\"\u003e\u003cimg src=\"https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-n-j.png\" alt=\"img\"/\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"Hive-配置\"\u003e\u003ca href=\"#Hive-配置\" class=\"headerlink\" title=\"Hive 配置\"\u003e\u003c/a\u003eHive 配置\u003c/h2\u003e\u003cp\u003e可以通过三种方式对 Hive 的相关属性进行配置，分别介绍如下：\u003c/p\u003e\n\u003ch3 id=\"配置文件\"\u003e\u003ca href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"\u003e\u003c/a\u003e配置文件\u003c/h3\u003e\u003cp\u003e方式一为使用配置文件，使用配置文件指定的配置是永久有效的。Hive 有以下三个可选的配置文件：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ehive-site.xml\u003c/code\u003e - Hive 的主要配置文件；\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ehivemetastore-site.xml\u003c/code\u003e - 关于元数据的配置；\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ehiveserver2-site.xml\u003c/code\u003e - 关于 HiveServer2 的配置。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e示例如下,在 hive-site.xml 配置 \u003ccode\u003ehive.exec.scratchdir\u003c/code\u003e：\u003c/p\u003e\n\u003cfigure class=\"highlight xml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003ename\u003c/span\u003e\u0026gt;\u003c/span\u003ehive.exec.scratchdir\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003ename\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003evalue\u003c/span\u003e\u0026gt;\u003c/span\u003e/tmp/mydir\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003evalue\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003edescription\u003c/span\u003e\u0026gt;\u003c/span\u003eScratch space for Hive jobs\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003edescription\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"hiveconf\"\u003e\u003ca href=\"#hiveconf\" class=\"headerlink\" title=\"hiveconf\"\u003e\u003c/a\u003ehiveconf\u003c/h3\u003e\u003cp\u003e方式二为在启动命令行 (Hive CLI / Beeline) 的时候使用 \u003ccode\u003e--hiveconf\u003c/code\u003e 指定配置，这种方式指定的配置作用于整个 Session。\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ehive --hiveconf hive.exec.scratchdir=/tmp/mydir\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"set\"\u003e\u003ca href=\"#set\" class=\"headerlink\" title=\"set\"\u003e\u003c/a\u003eset\u003c/h3\u003e\u003cp\u003e方式三为在交互式环境下 (Hive CLI / Beeline)，使用 set 命令指定。这种设置的作用范围也是 Session 级别的，配置对于执行该命令后的所有命令生效。set 兼具设置参数和查看参数的功能。如下：\u003c/p\u003e\n\u003cfigure class=\"highlight asciidoc\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e0: jdbc:hive2://hadoop001:10000\u0026gt; set hive.exec.scratchdir=/tmp/mydir;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eNo rows affected (0.025 seconds)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"section\"\u003e0: jdbc:hive2://hadoop001:10000\u0026gt; set hive.exec.scratchdir;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"section\"\u003e+----------------------------------+--+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"section\"\u003e|               set                |\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"section\"\u003e+----------------------------------+--+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"section\"\u003e| hive.exec.scratchdir=/tmp/mydir  |\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"section\"\u003e+----------------------------------+--+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"配置优先级\"\u003e\u003ca href=\"#配置优先级\" class=\"headerlink\" title=\"配置优先级\"\u003e\u003c/a\u003e配置优先级\u003c/h3\u003e\u003cp\u003e配置的优先顺序如下 (由低到高)：\u003cbr/\u003e\u003ccode\u003ehive-site.xml\u003c/code\u003e - \u0026gt;\u003ccode\u003ehivemetastore-site.xml\u003c/code\u003e- \u0026gt; \u003ccode\u003ehiveserver2-site.xml\u003c/code\u003e - \u0026gt;\u003ccode\u003e-- hiveconf\u003c/code\u003e- \u0026gt; \u003ccode\u003eset\u003c/code\u003e\u003c/p\u003e\n\u003ch3 id=\"配置参数\"\u003e\u003ca href=\"#配置参数\" class=\"headerlink\" title=\"配置参数\"\u003e\u003c/a\u003e配置参数\u003c/h3\u003e\u003cp\u003eHive 可选的配置参数非常多，在用到时查阅官方文档即可\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://cwiki.apache.org/confluence/display/Hive/AdminManual+Configuration\"\u003eAdminManual Configuration\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"参考资料\"\u003e\u003ca href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"\u003e\u003c/a\u003e参考资料\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/heibaiying/BigData-Notes\"\u003eBigData-Notes\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n    \u003c/div\u003e",
  "Date": "2020-02-24T13:14:47Z",
  "Author": "钝悟 ◾ Dunwu"
}