{
  "Source": "dunwu",
  "Title": "crontab",
  "Link": "https://dunwu.github.io/blog/pages/a6ec53/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003ch1 id=\"定时任务-crontab\"\u003e\u003ca href=\"#定时任务-crontab\" class=\"headerlink\" title=\"定时任务 - crontab\"\u003e\u003c/a\u003e定时任务 - crontab\u003c/h1\u003e\u003cblockquote\u003e\n\u003cp\u003e环境：CentOS\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e通过 \u003ccode\u003ecrontab\u003c/code\u003e 命令，我们可以在固定的间隔时间执行指定的系统指令或 shell script 脚本。时间间隔的单位可以是分钟、小时、日、月、周及以上的任意组合。这个命令非常适合周期性的日志分析或数据备份等工作。\u003c/p\u003e\n\u003ch2 id=\"crond-服务\"\u003e\u003ca href=\"#crond-服务\" class=\"headerlink\" title=\"crond 服务\"\u003e\u003c/a\u003ecrond 服务\u003c/h2\u003e\u003cp\u003eLinux 通过 crond 服务来支持 crontab。\u003c/p\u003e\n\u003ch3 id=\"检查-crond-服务\"\u003e\u003ca href=\"#检查-crond-服务\" class=\"headerlink\" title=\"检查 crond 服务\"\u003e\u003c/a\u003e检查 \u003ccode\u003ecrond\u003c/code\u003e 服务\u003c/h3\u003e\u003cp\u003e使用 \u003ccode\u003esystemctl list-unit-files\u003c/code\u003e 命令确认 \u003ccode\u003ecrond\u003c/code\u003e 服务是否已安装。\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003esystemctl list-unit-files | grep crond\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecrond.service                               enabled\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e如果为 enabled，表示服务正运行。\u003c/p\u003e\n\u003ch3 id=\"crond-服务命令\"\u003e\u003ca href=\"#crond-服务命令\" class=\"headerlink\" title=\"crond 服务命令\"\u003e\u003c/a\u003ecrond 服务命令\u003c/h3\u003e\u003cp\u003e开机自动启动 crond 服务：\u003ccode\u003echkconfig crond on\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e或者，按以下命令手动启动：\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003esystemctl enable crond.service  # 开启服务（开机自动启动服务）\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003esystemctl disable crond.service # 关闭服务（开机不会自动启动服务）\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003esystemctl start crond.service   # 启动服务\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003esystemctl stop crond.service    # 停止服务\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003esystemctl restart crond.service # 重启服务\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003esystemctl reload crond.service  # 重新载入配置\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003esystemctl status crond.service  # 查看服务状态\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"crontab\"\u003e\u003ca href=\"#crontab\" class=\"headerlink\" title=\"crontab\"\u003e\u003c/a\u003ecrontab\u003c/h2\u003e\u003ch3 id=\"crontab-命令\"\u003e\u003ca href=\"#crontab-命令\" class=\"headerlink\" title=\"crontab 命令\"\u003e\u003c/a\u003ecrontab 命令\u003c/h3\u003e\u003cp\u003ecrontab 命令格式如下：\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ecrontab [-u user] file crontab [-u user] [ -e | -l | -r ]\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e说明：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e-u user\u003c/code\u003e：用来设定某个用户的 crontab 服务；\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003efile\u003c/code\u003e：file 是命令文件的名字，表示将 file 做为 crontab 的任务列表文件并载入 crontab。如果在命令行中没有指定这个文件，crontab 命令将接受标准输入（键盘）上键入的命令，并将它们载入 crontab。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-e\u003c/code\u003e：编辑某个用户的 crontab 文件内容。如果不指定用户，则表示编辑当前用户的 crontab 文件。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-l\u003c/code\u003e：显示某个用户的 crontab 文件内容，如果不指定用户，则表示显示当前用户的 crontab 文件内容。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-r\u003c/code\u003e：从/var/spool/cron 目录中删除某个用户的 crontab 文件，如果不指定用户，则默认删除当前用户的 crontab 文件。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-i\u003c/code\u003e：在删除用户的 crontab 文件时给确认提示。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e有两种方法写入定时任务：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e在命令行输入：\u003ccode\u003ecrontab -e\u003c/code\u003e 然后添加相应的任务，存盘退出。\u003c/li\u003e\n\u003cli\u003e直接编辑 \u003ccode\u003e/etc/crontab\u003c/code\u003e 文件，即 \u003ccode\u003evi /etc/crontab\u003c/code\u003e，添加相应的任务。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"crontab-文件\"\u003e\u003ca href=\"#crontab-文件\" class=\"headerlink\" title=\"crontab 文件\"\u003e\u003c/a\u003ecrontab 文件\u003c/h3\u003e\u003cp\u003ecrontab 要执行的定时任务都被保存在 \u003ccode\u003e/etc/crontab\u003c/code\u003e 文件中。\u003c/p\u003e\n\u003cp\u003ecrontab 的文件格式如下：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/20200211113339.png\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003ch4 id=\"标准字段\"\u003e\u003ca href=\"#标准字段\" class=\"headerlink\" title=\"标准字段\"\u003e\u003c/a\u003e标准字段\u003c/h4\u003e\u003cp\u003e\u003cstrong\u003e逗号\u003c/strong\u003e用于分隔列表。例如，在第 5 个字段(星期几)中使用 \u003ccode\u003eMON,WED,FRI\u003c/code\u003e 表示周一、周三和周五。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e连字符\u003c/strong\u003e定义范围。例如，\u003ccode\u003e2000-2010\u003c/code\u003e 表示 2000 年至 2010 年期间的每年，包括 2000 年和 2010 年。\u003c/p\u003e\n\u003cp\u003e除非用反斜杠()转义，否则命令中的**百分号(%)**会被替换成换行符，第一个百分号后面的所有数据都会作为标准输入发送给命令。\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth align=\"left\"\u003e字段\u003c/th\u003e\n\u003cth align=\"left\"\u003e是否必填\u003c/th\u003e\n\u003cth align=\"left\"\u003e允许值\u003c/th\u003e\n\u003cth align=\"left\"\u003e允许特殊字符\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd align=\"left\"\u003eMinutes\u003c/td\u003e\n\u003ctd align=\"left\"\u003e是\u003c/td\u003e\n\u003ctd align=\"left\"\u003e0–59\u003c/td\u003e\n\u003ctd align=\"left\"\u003e\u003ccode\u003e*\u003c/code\u003e,\u003ccode\u003e-\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"left\"\u003eHours\u003c/td\u003e\n\u003ctd align=\"left\"\u003e是\u003c/td\u003e\n\u003ctd align=\"left\"\u003e0–23\u003c/td\u003e\n\u003ctd align=\"left\"\u003e\u003ccode\u003e*\u003c/code\u003e,\u003ccode\u003e-\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"left\"\u003eDay of month\u003c/td\u003e\n\u003ctd align=\"left\"\u003e是\u003c/td\u003e\n\u003ctd align=\"left\"\u003e1–31\u003c/td\u003e\n\u003ctd align=\"left\"\u003e\u003ccode\u003e*\u003c/code\u003e,\u003ccode\u003e-\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"left\"\u003eMonth\u003c/td\u003e\n\u003ctd align=\"left\"\u003e是\u003c/td\u003e\n\u003ctd align=\"left\"\u003e1–12 or JAN–DEC\u003c/td\u003e\n\u003ctd align=\"left\"\u003e\u003ccode\u003e*\u003c/code\u003e,\u003ccode\u003e-\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"left\"\u003eDay of week\u003c/td\u003e\n\u003ctd align=\"left\"\u003e是\u003c/td\u003e\n\u003ctd align=\"left\"\u003e0–6 or SUN–SAT\u003c/td\u003e\n\u003ctd align=\"left\"\u003e\u003ccode\u003e*\u003c/code\u003e,\u003ccode\u003e-\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003e\u003ccode\u003e/etc/crontab\u003c/code\u003e 文件示例：\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eSHELL=/bin/bash\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ePATH=/sbin:/bin:/usr/sbin:/usr/bin\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eMAILTO=root\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003eFor details see man 4 crontabs\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003eExample of job definition:\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e.---------------- minute (0 - 59)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e|  .------------- hour (0 - 23)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e|  |  .---------- day of month (1 - 31)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e|  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e|  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e|  |  |  |  |\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e*  *  *  *  * user-name  \u003cspan class=\"built_in\"\u003ecommand\u003c/span\u003e to be executed\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e每两个小时以root身份执行 /home/hello.sh 脚本\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e0 */2 * * * root /home/hello.sh\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"crontab-实例\"\u003e\u003ca href=\"#crontab-实例\" class=\"headerlink\" title=\"crontab 实例\"\u003e\u003c/a\u003ecrontab 实例\u003c/h3\u003e\u003ch4 id=\"实例-1：每-1-分钟执行一次-myCommand\"\u003e\u003ca href=\"#实例-1：每-1-分钟执行一次-myCommand\" class=\"headerlink\" title=\"实例 1：每 1 分钟执行一次 myCommand\"\u003e\u003c/a\u003e实例 1：每 1 分钟执行一次 myCommand\u003c/h4\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e* * * * * myCommand\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"实例-2：每小时的第-3-和第-15-分钟执行\"\u003e\u003ca href=\"#实例-2：每小时的第-3-和第-15-分钟执行\" class=\"headerlink\" title=\"实例 2：每小时的第 3 和第 15 分钟执行\"\u003e\u003c/a\u003e实例 2：每小时的第 3 和第 15 分钟执行\u003c/h4\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e3,15 * * * * myCommand\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"实例-3：在上午-8-点到-11-点的第-3-和第-15-分钟执行\"\u003e\u003ca href=\"#实例-3：在上午-8-点到-11-点的第-3-和第-15-分钟执行\" class=\"headerlink\" title=\"实例 3：在上午 8 点到 11 点的第 3 和第 15 分钟执行\"\u003e\u003c/a\u003e实例 3：在上午 8 点到 11 点的第 3 和第 15 分钟执行\u003c/h4\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e3,15 8-11 * * * myCommand\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"实例-4：每隔两天的上午-8-点到-11-点的第-3-和第-15-分钟执行\"\u003e\u003ca href=\"#实例-4：每隔两天的上午-8-点到-11-点的第-3-和第-15-分钟执行\" class=\"headerlink\" title=\"实例 4：每隔两天的上午 8 点到 11 点的第 3 和第 15 分钟执行\"\u003e\u003c/a\u003e实例 4：每隔两天的上午 8 点到 11 点的第 3 和第 15 分钟执行\u003c/h4\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e3,15 8-11 */2  *  * myCommand\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"实例-5：每周一上午-8-点到-11-点的第-3-和第-15-分钟执行\"\u003e\u003ca href=\"#实例-5：每周一上午-8-点到-11-点的第-3-和第-15-分钟执行\" class=\"headerlink\" title=\"实例 5：每周一上午 8 点到 11 点的第 3 和第 15 分钟执行\"\u003e\u003c/a\u003e实例 5：每周一上午 8 点到 11 点的第 3 和第 15 分钟执行\u003c/h4\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e3,15 8-11 * * 1 myCommand\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"实例-6：每晚的-21-30-重启-smb\"\u003e\u003ca href=\"#实例-6：每晚的-21-30-重启-smb\" class=\"headerlink\" title=\"实例 6：每晚的 21:30 重启 smb\"\u003e\u003c/a\u003e实例 6：每晚的 21:30 重启 smb\u003c/h4\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e30 21 * * * /etc/init.d/smb restart\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"实例-7：每月-1、10、22-日的-4-45-重启-smb\"\u003e\u003ca href=\"#实例-7：每月-1、10、22-日的-4-45-重启-smb\" class=\"headerlink\" title=\"实例 7：每月 1、10、22 日的 4 : 45 重启 smb\"\u003e\u003c/a\u003e实例 7：每月 1、10、22 日的 4 : 45 重启 smb\u003c/h4\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e45 4 1,10,22 * * /etc/init.d/smb restart\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"实例-8：每周六、周日的-1-10-重启-smb\"\u003e\u003ca href=\"#实例-8：每周六、周日的-1-10-重启-smb\" class=\"headerlink\" title=\"实例 8：每周六、周日的 1 : 10 重启 smb\"\u003e\u003c/a\u003e实例 8：每周六、周日的 1 : 10 重启 smb\u003c/h4\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e10 1 * * 6,0 /etc/init.d/smb restart\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"实例-9：每天-18-00-至-23-00-之间每隔-30-分钟重启-smb\"\u003e\u003ca href=\"#实例-9：每天-18-00-至-23-00-之间每隔-30-分钟重启-smb\" class=\"headerlink\" title=\"实例 9：每天 18 : 00 至 23 : 00 之间每隔 30 分钟重启 smb\"\u003e\u003c/a\u003e实例 9：每天 18 : 00 至 23 : 00 之间每隔 30 分钟重启 smb\u003c/h4\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e0,30 18-23 * * * /etc/init.d/smb restart\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"实例-10：每星期六的晚上-11-00-pm-重启-smb\"\u003e\u003ca href=\"#实例-10：每星期六的晚上-11-00-pm-重启-smb\" class=\"headerlink\" title=\"实例 10：每星期六的晚上 11 : 00 pm 重启 smb\"\u003e\u003c/a\u003e实例 10：每星期六的晚上 11 : 00 pm 重启 smb\u003c/h4\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e0 23 * * 6 /etc/init.d/smb restart\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"实例-11：每一小时重启-smb\"\u003e\u003ca href=\"#实例-11：每一小时重启-smb\" class=\"headerlink\" title=\"实例 11：每一小时重启 smb\"\u003e\u003c/a\u003e实例 11：每一小时重启 smb\u003c/h4\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e0 * * * * /etc/init.d/smb restart\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"实例-12：晚上-11-点到早上-7-点之间，每隔一小时重启-smb\"\u003e\u003ca href=\"#实例-12：晚上-11-点到早上-7-点之间，每隔一小时重启-smb\" class=\"headerlink\" title=\"实例 12：晚上 11 点到早上 7 点之间，每隔一小时重启 smb\"\u003e\u003c/a\u003e实例 12：晚上 11 点到早上 7 点之间，每隔一小时重启 smb\u003c/h4\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e0 23-7 * * * /etc/init.d/smb restart\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"参考资料\"\u003e\u003ca href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"\u003e\u003c/a\u003e参考资料\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e文章\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/crontab.html\"\u003ecrontab 定时任务\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://blog.csdn.net/z_yong_cool/article/details/79288397\"\u003elinux 定时执行脚本\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e在线工具\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://tool.lu/crontab/\"\u003ehttps://tool.lu/crontab/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://cron.qqe2.com/\"\u003ehttps://cron.qqe2.com/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n    \u003c/div\u003e",
  "Date": "2020-02-11T05:11:00Z",
  "Author": "钝悟 ◾ Dunwu"
}