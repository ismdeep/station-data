{
  "Source": "dunwu",
  "Title": "Mybatis快速入门",
  "Link": "https://dunwu.github.io/blog/pages/d4e6ee/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003ch1 id=\"MyBatis-快速入门\"\u003e\u003ca href=\"#MyBatis-快速入门\" class=\"headerlink\" title=\"MyBatis 快速入门\"\u003e\u003c/a\u003eMyBatis 快速入门\u003c/h1\u003e\u003cblockquote\u003e\n\u003cp\u003eMyBatis 的前身就是 iBatis ，是一个作用在数据持久层的对象关系映射（Object Relational Mapping，简称 ORM）框架。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/20200716162305.png\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003ch2 id=\"Mybatis-简介\"\u003e\u003ca href=\"#Mybatis-简介\" class=\"headerlink\" title=\"Mybatis 简介\"\u003e\u003c/a\u003eMybatis 简介\u003c/h2\u003e\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/20210510164925.png\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003ch3 id=\"什么是-MyBatis\"\u003e\u003ca href=\"#什么是-MyBatis\" class=\"headerlink\" title=\"什么是 MyBatis\"\u003e\u003c/a\u003e什么是 MyBatis\u003c/h3\u003e\u003cp\u003eMyBatis 是一款持久层框架，它支持定制化 SQL、存储过程以及高级映射。MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集。MyBatis 可以使用简单的 XML 或注解来配置和映射原生类型、接口和 Java 的 POJO（Plain Old Java Objects，普通老式 Java 对象）为数据库中的记录。\u003c/p\u003e\n\u003ch3 id=\"MyBatis-vs-Hibernate\"\u003e\u003ca href=\"#MyBatis-vs-Hibernate\" class=\"headerlink\" title=\"MyBatis vs. Hibernate\"\u003e\u003c/a\u003eMyBatis vs. Hibernate\u003c/h3\u003e\u003cp\u003eMyBatis 和 Hibernate 都是 Java 世界中比较流行的 ORM 框架。我们应该了解其各自的优势，根据项目的需要去抉择在开发中使用哪个框架。\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eMybatis 优势\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMyBatis 可以进行更为细致的 SQL 优化，可以减少查询字段。\u003c/li\u003e\n\u003cli\u003eMyBatis 容易掌握，而 Hibernate 门槛较高。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eHibernate 优势\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eHibernate 的 DAO 层开发比 MyBatis 简单，Mybatis 需要维护 SQL 和结果映射。\u003c/li\u003e\n\u003cli\u003eHibernate 对对象的维护和缓存要比 MyBatis 好，对增删改查的对象的维护要方便。\u003c/li\u003e\n\u003cli\u003eHibernate 数据库移植性很好，MyBatis 的数据库移植性不好，不同的数据库需要写不同 SQL。\u003c/li\u003e\n\u003cli\u003eHibernate 有更好的二级缓存机制，可以使用第三方缓存。MyBatis 本身提供的缓存机制不佳。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"快速入门\"\u003e\u003ca href=\"#快速入门\" class=\"headerlink\" title=\"快速入门\"\u003e\u003c/a\u003e快速入门\u003c/h2\u003e\u003cblockquote\u003e\n\u003cp\u003e这里，我将以一个入门级的示例来演示 Mybatis 是如何工作的。\u003c/p\u003e\n\u003cp\u003e注：本文后面章节中的原理、源码部分也将基于这个示例来进行讲解。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"数据库准备\"\u003e\u003ca href=\"#数据库准备\" class=\"headerlink\" title=\"数据库准备\"\u003e\u003c/a\u003e数据库准备\u003c/h3\u003e\u003cp\u003e在本示例中，需要针对一张用户表进行 CRUD 操作。其数据模型如下：\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTABLE\u003c/span\u003e IF \u003cspan class=\"keyword\"\u003eNOT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eEXISTS\u003c/span\u003e \u003cspan class=\"keyword\"\u003euser\u003c/span\u003e (\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    id      \u003cspan class=\"type\"\u003eBIGINT\u003c/span\u003e(\u003cspan class=\"number\"\u003e10\u003c/span\u003e) UNSIGNED \u003cspan class=\"keyword\"\u003eNOT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eNULL\u003c/span\u003e AUTO_INCREMENT COMMENT \u003cspan class=\"string\"\u003e\u0026#39;Id\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    name    \u003cspan class=\"type\"\u003eVARCHAR\u003c/span\u003e(\u003cspan class=\"number\"\u003e10\u003c/span\u003e)         \u003cspan class=\"keyword\"\u003eNOT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eNULL\u003c/span\u003e \u003cspan class=\"keyword\"\u003eDEFAULT\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e COMMENT \u003cspan class=\"string\"\u003e\u0026#39;用户名\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    age     \u003cspan class=\"type\"\u003eINT\u003c/span\u003e(\u003cspan class=\"number\"\u003e3\u003c/span\u003e)              \u003cspan class=\"keyword\"\u003eNOT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eNULL\u003c/span\u003e \u003cspan class=\"keyword\"\u003eDEFAULT\u003c/span\u003e \u003cspan class=\"number\"\u003e0\u003c/span\u003e COMMENT \u003cspan class=\"string\"\u003e\u0026#39;年龄\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    address \u003cspan class=\"type\"\u003eVARCHAR\u003c/span\u003e(\u003cspan class=\"number\"\u003e32\u003c/span\u003e)         \u003cspan class=\"keyword\"\u003eNOT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eNULL\u003c/span\u003e \u003cspan class=\"keyword\"\u003eDEFAULT\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e COMMENT \u003cspan class=\"string\"\u003e\u0026#39;地址\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    email   \u003cspan class=\"type\"\u003eVARCHAR\u003c/span\u003e(\u003cspan class=\"number\"\u003e32\u003c/span\u003e)         \u003cspan class=\"keyword\"\u003eNOT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eNULL\u003c/span\u003e \u003cspan class=\"keyword\"\u003eDEFAULT\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e COMMENT \u003cspan class=\"string\"\u003e\u0026#39;邮件\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003ePRIMARY\u003c/span\u003e KEY (id)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e) COMMENT \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;用户表\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eINTO\u003c/span\u003e \u003cspan class=\"keyword\"\u003euser\u003c/span\u003e (name, age, address, email)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eVALUES\u003c/span\u003e (\u003cspan class=\"string\"\u003e\u0026#39;张三\u0026#39;\u003c/span\u003e, \u003cspan class=\"number\"\u003e18\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;北京\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;xxx@163.com\u0026#39;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eINTO\u003c/span\u003e \u003cspan class=\"keyword\"\u003euser\u003c/span\u003e (name, age, address, email)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eVALUES\u003c/span\u003e (\u003cspan class=\"string\"\u003e\u0026#39;李四\u0026#39;\u003c/span\u003e, \u003cspan class=\"number\"\u003e19\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;上海\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;xxx@163.com\u0026#39;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"添加-Mybatis\"\u003e\u003ca href=\"#添加-Mybatis\" class=\"headerlink\" title=\"添加 Mybatis\"\u003e\u003c/a\u003e添加 Mybatis\u003c/h3\u003e\u003cp\u003e如果使用 Maven 来构建项目，则需将下面的依赖代码置于 pom.xml 文件中：\u003c/p\u003e\n\u003cfigure class=\"highlight xml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eorg.mybatis\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003emybatis\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003ex.x.x\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"Mybatis-配置\"\u003e\u003ca href=\"#Mybatis-配置\" class=\"headerlink\" title=\"Mybatis 配置\"\u003e\u003c/a\u003eMybatis 配置\u003c/h3\u003e\u003cp\u003eXML 配置文件中包含了对 MyBatis 系统的核心设置，包括获取数据库连接实例的数据源（DataSource）以及决定事务作用域和控制方式的事务管理器（TransactionManager）。\u003c/p\u003e\n\u003cp\u003e本示例中只是给出最简化的配置。\u003c/p\u003e\n\u003cp\u003e【示例】mybatis-config.xml 文件\u003c/p\u003e\n\u003cfigure class=\"highlight xml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e\u0026lt;?xml version=\u003cspan class=\"string\"\u003e\u0026#34;1.0\u0026#34;\u003c/span\u003e encoding=\u003cspan class=\"string\"\u003e\u0026#34;utf-8\u0026#34;\u003c/span\u003e?\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e\u0026lt;!DOCTYPE \u003cspan class=\"keyword\"\u003econfiguration\u003c/span\u003e \u003cspan class=\"keyword\"\u003ePUBLIC\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#34;-//mybatis.org//DTD Config 3.0//EN\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e  \u003cspan class=\"string\"\u003e\u0026#34;http://mybatis.org/dtd/mybatis-3-config.dtd\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003econfiguration\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eenvironments\u003c/span\u003e \u003cspan class=\"attr\"\u003edefault\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;development\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eenvironment\u003c/span\u003e \u003cspan class=\"attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;development\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003etransactionManager\u003c/span\u003e \u003cspan class=\"attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;JDBC\u0026#34;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003edataSource\u003c/span\u003e \u003cspan class=\"attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;POOLED\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e \u003cspan class=\"attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;driver\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;com.mysql.cj.jdbc.Driver\u0026#34;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e \u003cspan class=\"attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;url\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e                  \u003cspan class=\"attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;jdbc:mysql://127.0.0.1:3306/spring_tutorial?serverTimezone=UTC\u0026#34;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e \u003cspan class=\"attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;username\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;root\u0026#34;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e \u003cspan class=\"attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;password\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;root\u0026#34;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      \u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003edataSource\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eenvironment\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eenvironments\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003emappers\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003emapper\u003c/span\u003e \u003cspan class=\"attr\"\u003eresource\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;mybatis/mapper/UserMapper.xml\u0026#34;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003emappers\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003econfiguration\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e说明：上面的配置文件中仅仅指定了数据源连接方式和 User 表的映射配置文件。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"Mapper\"\u003e\u003ca href=\"#Mapper\" class=\"headerlink\" title=\"Mapper\"\u003e\u003c/a\u003eMapper\u003c/h3\u003e\u003ch4 id=\"Mapper-xml\"\u003e\u003ca href=\"#Mapper-xml\" class=\"headerlink\" title=\"Mapper.xml\"\u003e\u003c/a\u003eMapper.xml\u003c/h4\u003e\u003cp\u003e个人理解，Mapper.xml 文件可以看做是 Mybatis 的 JDBC SQL 模板。\u003c/p\u003e\n\u003cp\u003e【示例】UserMapper.xml 文件\u003c/p\u003e\n\u003cp\u003e下面是一个通过 Mybatis Generator 自动生成的完整的 Mapper 文件。\u003c/p\u003e\n\u003cfigure class=\"highlight xml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e35\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e36\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e37\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e38\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e\u0026lt;?xml version=\u003cspan class=\"string\"\u003e\u0026#34;1.0\u0026#34;\u003c/span\u003e encoding=\u003cspan class=\"string\"\u003e\u0026#34;UTF-8\u0026#34;\u003c/span\u003e?\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e\u0026lt;!DOCTYPE \u003cspan class=\"keyword\"\u003emapper\u003c/span\u003e \u003cspan class=\"keyword\"\u003ePUBLIC\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#34;-//mybatis.org//DTD Mapper 3.0//EN\u0026#34;\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003emapper\u003c/span\u003e \u003cspan class=\"attr\"\u003enamespace\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;io.github.dunwu.spring.orm.mapper.UserMapper\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eresultMap\u003c/span\u003e \u003cspan class=\"attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;BaseResultMap\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;io.github.dunwu.spring.orm.entity.User\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eid\u003c/span\u003e \u003cspan class=\"attr\"\u003ecolumn\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;id\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003ejdbcType\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;BIGINT\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003eproperty\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;id\u0026#34;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eresult\u003c/span\u003e \u003cspan class=\"attr\"\u003ecolumn\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003ejdbcType\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;VARCHAR\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003eproperty\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eresult\u003c/span\u003e \u003cspan class=\"attr\"\u003ecolumn\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;age\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003ejdbcType\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;INTEGER\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003eproperty\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;age\u0026#34;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eresult\u003c/span\u003e \u003cspan class=\"attr\"\u003ecolumn\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;address\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003ejdbcType\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;VARCHAR\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003eproperty\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;address\u0026#34;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eresult\u003c/span\u003e \u003cspan class=\"attr\"\u003ecolumn\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;email\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003ejdbcType\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;VARCHAR\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003eproperty\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;email\u0026#34;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eresultMap\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003edelete\u003c/span\u003e \u003cspan class=\"attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;deleteByPrimaryKey\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003eparameterType\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;java.lang.Long\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    delete from user\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    where id = #{id,jdbcType=BIGINT}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003edelete\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003einsert\u003c/span\u003e \u003cspan class=\"attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;insert\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003eparameterType\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;io.github.dunwu.spring.orm.entity.User\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    insert into user (id, name, age,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      address, email)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    values (#{id,jdbcType=BIGINT}, #{name,jdbcType=VARCHAR}, #{age,jdbcType=INTEGER},\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      #{address,jdbcType=VARCHAR}, #{email,jdbcType=VARCHAR})\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003einsert\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eupdate\u003c/span\u003e \u003cspan class=\"attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;updateByPrimaryKey\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003eparameterType\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;io.github.dunwu.spring.orm.entity.User\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    update user\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    set name = #{name,jdbcType=VARCHAR},\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      age = #{age,jdbcType=INTEGER},\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      address = #{address,jdbcType=VARCHAR},\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      email = #{email,jdbcType=VARCHAR}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    where id = #{id,jdbcType=BIGINT}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eupdate\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eselect\u003c/span\u003e \u003cspan class=\"attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;selectByPrimaryKey\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003eparameterType\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;java.lang.Long\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003eresultMap\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;BaseResultMap\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    select id, name, age, address, email\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    from user\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    where id = #{id,jdbcType=BIGINT}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eselect\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eselect\u003c/span\u003e \u003cspan class=\"attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;selectAll\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003eresultMap\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;BaseResultMap\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    select id, name, age, address, email\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    from user\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eselect\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003emapper\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"Mapper-java\"\u003e\u003ca href=\"#Mapper-java\" class=\"headerlink\" title=\"Mapper.java\"\u003e\u003c/a\u003eMapper.java\u003c/h4\u003e\u003cp\u003eMapper.java 文件是 Mapper.xml 对应的 Java 对象。\u003c/p\u003e\n\u003cp\u003e【示例】UserMapper.java 文件\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"title class_\"\u003eUserMapper\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eint\u003c/span\u003e \u003cspan class=\"title function_\"\u003edeleteByPrimaryKey\u003c/span\u003e\u003cspan class=\"params\"\u003e(Long id)\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eint\u003c/span\u003e \u003cspan class=\"title function_\"\u003einsert\u003c/span\u003e\u003cspan class=\"params\"\u003e(User record)\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    User \u003cspan class=\"title function_\"\u003eselectByPrimaryKey\u003c/span\u003e\u003cspan class=\"params\"\u003e(Long id)\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    List\u0026lt;User\u0026gt; \u003cspan class=\"title function_\"\u003eselectAll\u003c/span\u003e\u003cspan class=\"params\"\u003e()\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eint\u003c/span\u003e \u003cspan class=\"title function_\"\u003eupdateByPrimaryKey\u003c/span\u003e\u003cspan class=\"params\"\u003e(User record)\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e对比 UserMapper.java 和 UserMapper.xml 文件，不难发现：\u003c/p\u003e\n\u003cp\u003eUserMapper.java 中的方法和 UserMapper.xml 的 CRUD 语句元素（ \u003ccode\u003e\u0026lt;insert\u0026gt;\u003c/code\u003e、\u003ccode\u003e\u0026lt;delete\u0026gt;\u003c/code\u003e、\u003ccode\u003e\u0026lt;update\u0026gt;\u003c/code\u003e、\u003ccode\u003e\u0026lt;select\u0026gt;\u003c/code\u003e）存在一一对应关系。\u003c/p\u003e\n\u003cp\u003e在 Mybatis 中，正是通过方法的全限定名，将二者绑定在一起。\u003c/p\u003e\n\u003ch4 id=\"数据实体-java\"\u003e\u003ca href=\"#数据实体-java\" class=\"headerlink\" title=\"数据实体.java\"\u003e\u003c/a\u003e数据实体.java\u003c/h4\u003e\u003cp\u003e【示例】User.java 文件\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"title class_\"\u003eUser\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eprivate\u003c/span\u003e Long id;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eprivate\u003c/span\u003e String name;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eprivate\u003c/span\u003e Integer age;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eprivate\u003c/span\u003e String address;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eprivate\u003c/span\u003e String email;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003ccode\u003e\u0026lt;insert\u0026gt;\u003c/code\u003e、\u003ccode\u003e\u0026lt;delete\u0026gt;\u003c/code\u003e、\u003ccode\u003e\u0026lt;update\u0026gt;\u003c/code\u003e、\u003ccode\u003e\u0026lt;select\u0026gt;\u003c/code\u003e 的 \u003ccode\u003eparameterType\u003c/code\u003e 属性以及 \u003ccode\u003e\u0026lt;resultMap\u0026gt;\u003c/code\u003e 的 \u003ccode\u003etype\u003c/code\u003e 属性都可能会绑定到数据实体。这样就可以把 JDBC 操作的输入输出和 JavaBean 结合起来，更加方便、易于理解。\u003c/p\u003e\n\u003ch3 id=\"测试程序\"\u003e\u003ca href=\"#测试程序\" class=\"headerlink\" title=\"测试程序\"\u003e\u003c/a\u003e测试程序\u003c/h3\u003e\u003cp\u003e【示例】MybatisDemo.java 文件\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMybatisDemo\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003emain\u003c/span\u003e\u003cspan class=\"params\"\u003e(String[] args)\u003c/span\u003e \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e Exception {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 1. 加载 mybatis 配置文件，创建 SqlSessionFactory\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 注：在实际的应用中，SqlSessionFactory 应该是单例\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eInputStream\u003c/span\u003e \u003cspan class=\"variable\"\u003einputStream\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e Resources.getResourceAsStream(\u003cspan class=\"string\"\u003e\u0026#34;mybatis/mybatis-config.xml\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eSqlSessionFactoryBuilder\u003c/span\u003e \u003cspan class=\"variable\"\u003ebuilder\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eSqlSessionFactoryBuilder\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eSqlSessionFactory\u003c/span\u003e \u003cspan class=\"variable\"\u003efactory\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e builder.build(inputStream);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 2. 创建一个 SqlSession 实例，进行数据库操作\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eSqlSession\u003c/span\u003e \u003cspan class=\"variable\"\u003esqlSession\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e factory.openSession();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 3. Mapper 映射并执行\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eLong\u003c/span\u003e \u003cspan class=\"variable\"\u003eparams\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"number\"\u003e1L\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        List\u0026lt;User\u0026gt; list = sqlSession.selectList(\u003cspan class=\"string\"\u003e\u0026#34;io.github.dunwu.spring.orm.mapper.UserMapper.selectByPrimaryKey\u0026#34;\u003c/span\u003e, params);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003efor\u003c/span\u003e (User user : list) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            System.out.println(\u003cspan class=\"string\"\u003e\u0026#34;user name: \u0026#34;\u003c/span\u003e + user.getName());\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e// 输出：user name: 张三\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e说明：\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eSqlSession\u003c/code\u003e 接口是 Mybatis API 核心中的核心，它代表了 Mybatis 和数据库的一次完整会话。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMybatis 会解析配置，并根据配置创建 \u003ccode\u003eSqlSession\u003c/code\u003e 。\u003c/li\u003e\n\u003cli\u003e然后，Mybatis 将 Mapper 映射为 \u003ccode\u003eSqlSession\u003c/code\u003e，然后传递参数，执行 SQL 语句并获取结果。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"Mybatis-xml-配置\"\u003e\u003ca href=\"#Mybatis-xml-配置\" class=\"headerlink\" title=\"Mybatis xml 配置\"\u003e\u003c/a\u003eMybatis xml 配置\u003c/h2\u003e\u003cblockquote\u003e\n\u003cp\u003e配置的详细内容请参考：“ \u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.mybatis.org/mybatis-3/zh/configuration.html\"\u003eMybatis 官方文档之配置\u003c/a\u003e ” 。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eMyBatis 的配置文件包含了会深深影响 MyBatis 行为的设置和属性信息。主要配置项有以下：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.mybatis.org/mybatis-3/zh/configuration.html#properties\"\u003eproperties（属性）\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.mybatis.org/mybatis-3/zh/configuration.html#settings\"\u003esettings（设置）\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.mybatis.org/mybatis-3/zh/configuration.html#typeAliases\"\u003etypeAliases（类型别名）\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.mybatis.org/mybatis-3/zh/configuration.html#typeHandlers\"\u003etypeHandlers（类型处理器）\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.mybatis.org/mybatis-3/zh/configuration.html#objectFactory\"\u003eobjectFactory（对象工厂）\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.mybatis.org/mybatis-3/zh/configuration.html#plugins\"\u003eplugins（插件）\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.mybatis.org/mybatis-3/zh/configuration.html#environments\"\u003eenvironments（环境配置）\u003c/a\u003e\u003cul\u003e\n\u003cli\u003eenvironment（环境变量）\u003cul\u003e\n\u003cli\u003etransactionManager（事务管理器）\u003c/li\u003e\n\u003cli\u003edataSource（数据源）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.mybatis.org/mybatis-3/zh/configuration.html#databaseIdProvider\"\u003edatabaseIdProvider（数据库厂商标识）\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.mybatis.org/mybatis-3/zh/configuration.html#mappers\"\u003emappers（映射器）\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"Mybatis-xml-映射器\"\u003e\u003ca href=\"#Mybatis-xml-映射器\" class=\"headerlink\" title=\"Mybatis xml 映射器\"\u003e\u003c/a\u003eMybatis xml 映射器\u003c/h2\u003e\u003cblockquote\u003e\n\u003cp\u003eSQL XML 映射文件详细内容请参考：“ \u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.mybatis.org/mybatis-3/zh/sqlmap-xml.html\"\u003eMybatis 官方文档之 XML 映射文件\u003c/a\u003e ”。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eXML 映射文件只有几个顶级元素：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ecache\u003c/code\u003e – 对给定命名空间的缓存配置。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecache-ref\u003c/code\u003e – 对其他命名空间缓存配置的引用。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eresultMap\u003c/code\u003e – 是最复杂也是最强大的元素，用来描述如何从数据库结果集中来加载对象。\u003c/li\u003e\n\u003cli\u003e\u003cdel\u003e\u003ccode\u003eparameterMap\u003c/code\u003e – 已被废弃！老式风格的参数映射。更好的办法是使用内联参数，此元素可能在将来被移除。文档中不会介绍此元素。\u003c/del\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003esql\u003c/code\u003e – 可被其他语句引用的可重用语句块。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003einsert\u003c/code\u003e – 映射插入语句\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eupdate\u003c/code\u003e – 映射更新语句\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edelete\u003c/code\u003e – 映射删除语句\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eselect\u003c/code\u003e – 映射查询语句\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"Mybatis-扩展\"\u003e\u003ca href=\"#Mybatis-扩展\" class=\"headerlink\" title=\"Mybatis 扩展\"\u003e\u003c/a\u003eMybatis 扩展\u003c/h2\u003e\u003ch3 id=\"Mybatis-类型处理器\"\u003e\u003ca href=\"#Mybatis-类型处理器\" class=\"headerlink\" title=\"Mybatis 类型处理器\"\u003e\u003c/a\u003eMybatis 类型处理器\u003c/h3\u003e\u003cp\u003eMyBatis 在设置预处理语句（PreparedStatement）中的参数或从结果集中取出一个值时， 都会用类型处理器将获取到的值以合适的方式转换成 Java 类型。下表描述了一些默认的类型处理器。\u003c/p\u003e\n\u003cp\u003e从 3.4.5 开始，MyBatis 默认支持 JSR-310（日期和时间 API） 。\u003c/p\u003e\n\u003cp\u003e你可以重写已有的类型处理器或创建你自己的类型处理器来处理不支持的或非标准的类型。 具体做法为：实现 \u003ccode\u003eorg.apache.ibatis.type.TypeHandler\u003c/code\u003e 接口， 或继承一个很便利的类 \u003ccode\u003eorg.apache.ibatis.type.BaseTypeHandler\u003c/code\u003e， 并且可以（可选地）将它映射到一个 JDBC 类型。比如：\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// ExampleTypeHandler.java\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e@MappedJdbcTypes(JdbcType.VARCHAR)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"title class_\"\u003eExampleTypeHandler\u003c/span\u003e \u003cspan class=\"keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"title class_\"\u003eBaseTypeHandler\u003c/span\u003e\u0026lt;String\u0026gt; {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"meta\"\u003e@Override\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003esetNonNullParameter\u003c/span\u003e\u003cspan class=\"params\"\u003e(PreparedStatement ps, \u003cspan class=\"type\"\u003eint\u003c/span\u003e i, String parameter, JdbcType jdbcType)\u003c/span\u003e \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e SQLException {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    ps.setString(i, parameter);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"meta\"\u003e@Override\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e String \u003cspan class=\"title function_\"\u003egetNullableResult\u003c/span\u003e\u003cspan class=\"params\"\u003e(ResultSet rs, String columnName)\u003c/span\u003e \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e SQLException {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e rs.getString(columnName);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"meta\"\u003e@Override\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e String \u003cspan class=\"title function_\"\u003egetNullableResult\u003c/span\u003e\u003cspan class=\"params\"\u003e(ResultSet rs, \u003cspan class=\"type\"\u003eint\u003c/span\u003e columnIndex)\u003c/span\u003e \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e SQLException {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e rs.getString(columnIndex);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"meta\"\u003e@Override\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e String \u003cspan class=\"title function_\"\u003egetNullableResult\u003c/span\u003e\u003cspan class=\"params\"\u003e(CallableStatement cs, \u003cspan class=\"type\"\u003eint\u003c/span\u003e columnIndex)\u003c/span\u003e \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e SQLException {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e cs.getString(columnIndex);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cfigure class=\"highlight xml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e\u0026lt;!-- mybatis-config.xml --\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003etypeHandlers\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003etypeHandler\u003c/span\u003e \u003cspan class=\"attr\"\u003ehandler\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;org.mybatis.example.ExampleTypeHandler\u0026#34;\u003c/span\u003e/\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003etypeHandlers\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e使用上述的类型处理器将会覆盖已有的处理 Java String 类型的属性以及 VARCHAR 类型的参数和结果的类型处理器。 要注意 MyBatis 不会通过检测数据库元信息来决定使用哪种类型，所以你必须在参数和结果映射中指明字段是 VARCHAR 类型， 以使其能够绑定到正确的类型处理器上。这是因为 MyBatis 直到语句被执行时才清楚数据类型。\u003c/p\u003e\n\u003ch3 id=\"Mybatis-插件\"\u003e\u003ca href=\"#Mybatis-插件\" class=\"headerlink\" title=\"Mybatis 插件\"\u003e\u003c/a\u003eMybatis 插件\u003c/h3\u003e\u003cp\u003eMyBatis 允许你在映射语句执行过程中的某一点进行拦截调用。默认情况下，MyBatis 允许使用插件来拦截的方法调用包括：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eExecutor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed)\u003c/li\u003e\n\u003cli\u003eParameterHandler (getParameterObject, setParameters)\u003c/li\u003e\n\u003cli\u003eResultSetHandler (handleResultSets, handleOutputParameters)\u003c/li\u003e\n\u003cli\u003eStatementHandler (prepare, parameterize, batch, update, query)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e这些类中方法的细节可以通过查看每个方法的签名来发现，或者直接查看 MyBatis 发行包中的源代码。 如果你想做的不仅仅是监控方法的调用，那么你最好相当了解要重写的方法的行为。 因为在试图修改或重写已有方法的行为时，很可能会破坏 MyBatis 的核心模块。 这些都是更底层的类和方法，所以使用插件的时候要特别当心。\u003c/p\u003e\n\u003cp\u003e通过 MyBatis 提供的强大机制，使用插件是非常简单的，只需实现 Interceptor 接口，并指定想要拦截的方法签名即可。\u003c/p\u003e\n\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// ExamplePlugin.java\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e@Intercepts({@Signature(\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e  type= Executor.class,\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e  method = \u0026#34;update\u0026#34;,\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e  args = {MappedStatement.class,Object.class})})\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"title class_\"\u003eExamplePlugin\u003c/span\u003e \u003cspan class=\"keyword\"\u003eimplements\u003c/span\u003e \u003cspan class=\"title class_\"\u003eInterceptor\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"type\"\u003eProperties\u003c/span\u003e \u003cspan class=\"variable\"\u003eproperties\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eProperties\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e Object \u003cspan class=\"title function_\"\u003eintercept\u003c/span\u003e\u003cspan class=\"params\"\u003e(Invocation invocation)\u003c/span\u003e \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e Throwable {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// implement pre processing if need\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"type\"\u003eObject\u003c/span\u003e \u003cspan class=\"variable\"\u003ereturnObject\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e invocation.proceed();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e// implement post processing if need\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e returnObject;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003esetProperties\u003c/span\u003e\u003cspan class=\"params\"\u003e(Properties properties)\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"built_in\"\u003ethis\u003c/span\u003e.properties = properties;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cfigure class=\"highlight xml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e\u0026lt;!-- mybatis-config.xml --\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eplugins\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eplugin\u003c/span\u003e \u003cspan class=\"attr\"\u003einterceptor\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;org.mybatis.example.ExamplePlugin\u0026#34;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003eproperty\u003c/span\u003e \u003cspan class=\"attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;someProperty\u0026#34;\u003c/span\u003e \u003cspan class=\"attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"string\"\u003e\u0026#34;100\u0026#34;\u003c/span\u003e/\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eplugin\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003eplugins\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e上面的插件将会拦截在 Executor 实例中所有的 “update” 方法调用， 这里的 Executor 是负责执行底层映射语句的内部对象。\u003c/p\u003e\n\u003ch2 id=\"参考资料\"\u003e\u003ca href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"\u003e\u003c/a\u003e参考资料\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e官方\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/mybatis/mybatis-3\"\u003eMybatis Github\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.mybatis.org/mybatis-3/\"\u003eMybatis 官网\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/mybatis/generator\"\u003eMyBatis 官方代码生成（mybatis-generator）\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/mybatis/spring\"\u003eMyBatis 官方集成 Spring（mybatis-spring）\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/mybatis/spring-boot-starter\"\u003eMybatis 官方集成 Spring Boot（mybatis-spring-boot）\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e扩展插件\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/baomidou/mybatis-plus\"\u003eMyBatis-Plus\u003c/a\u003e - CRUD 扩展插件、代码生成器、分页器等多功能\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/abel533/Mapper\"\u003eMapper\u003c/a\u003e - CRUD 扩展插件\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/pagehelper/Mybatis-PageHelper\"\u003eMybatis-PageHelper\u003c/a\u003e - Mybatis 通用分页插件\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e文章\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://blog.csdn.net/luanlouis/article/details/40422941\"\u003e深入理解 mybatis 原理\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/tuguangquan/mybatis\"\u003emybatis 源码中文注释\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://blog.csdn.net/isea533/article/details/42102297\"\u003eMyBatis Generator 详解\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://juejin.im/post/5aa646cdf265da237e095da1\"\u003eMybatis 常见面试题\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://juejin.im/post/5cee8b61e51d455d88219ea4\"\u003eMybatis 中强大的 resultMap\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n    \u003c/div\u003e",
  "Date": "2022-02-17T14:34:30Z",
  "Author": "钝悟 ◾ Dunwu"
}