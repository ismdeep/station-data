{
  "Source": "dunwu",
  "Title": "Spring 配置元数据",
  "Link": "https://dunwu.github.io/blog/pages/55f315/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003ch1 id=\"Spring-配置元数据\"\u003e\u003ca href=\"#Spring-配置元数据\" class=\"headerlink\" title=\"Spring 配置元数据\"\u003e\u003c/a\u003eSpring 配置元数据\u003c/h1\u003e\u003ch2 id=\"Spring-配置元信息\"\u003e\u003ca href=\"#Spring-配置元信息\" class=\"headerlink\" title=\"Spring 配置元信息\"\u003e\u003c/a\u003eSpring 配置元信息\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003eSpring Bean 配置元信息 - BeanDefinition\u003c/li\u003e\n\u003cli\u003eSpring Bean 属性元信息 - PropertyValues\u003c/li\u003e\n\u003cli\u003eSpring 容器配置元信息\u003c/li\u003e\n\u003cli\u003eSpring 外部化配置元信息 - PropertySource\u003c/li\u003e\n\u003cli\u003eSpring Profile 元信息 - @Profile\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"Spring-Bean-配置元信息\"\u003e\u003ca href=\"#Spring-Bean-配置元信息\" class=\"headerlink\" title=\"Spring Bean 配置元信息\"\u003e\u003c/a\u003eSpring Bean 配置元信息\u003c/h2\u003e\u003cp\u003eBean 配置元信息 - BeanDefinition\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGenericBeanDefinition：通用型 BeanDefinition\u003c/li\u003e\n\u003cli\u003eRootBeanDefinition：无 Parent 的 BeanDefinition 或者合并后 BeanDefinition\u003c/li\u003e\n\u003cli\u003eAnnotatedBeanDefinition：注解标注的 BeanDefinition\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"Spring-Bean-属性元信息\"\u003e\u003ca href=\"#Spring-Bean-属性元信息\" class=\"headerlink\" title=\"Spring Bean 属性元信息\"\u003e\u003c/a\u003eSpring Bean 属性元信息\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003eBean 属性元信息 - PropertyValues\u003cul\u003e\n\u003cli\u003e可修改实现 - MutablePropertyValues\u003c/li\u003e\n\u003cli\u003e元素成员 - PropertyValue\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eBean 属性上下文存储 - AttributeAccessor\u003c/li\u003e\n\u003cli\u003eBean 元信息元素 - BeanMetadataElement\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"Spring-容器配置元信息\"\u003e\u003ca href=\"#Spring-容器配置元信息\" class=\"headerlink\" title=\"Spring 容器配置元信息\"\u003e\u003c/a\u003eSpring 容器配置元信息\u003c/h2\u003e\u003cp\u003eSpring XML 配置元信息 - beans 元素相关\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003ebeans 元素属性\u003c/th\u003e\n\u003cth\u003e默认值\u003c/th\u003e\n\u003cth\u003e使用场景\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003eprofile\u003c/td\u003e\n\u003ctd\u003enull（留空）\u003c/td\u003e\n\u003ctd\u003eSpring Profiles 配置值\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003edefault-lazy-init\u003c/td\u003e\n\u003ctd\u003edefault\u003c/td\u003e\n\u003ctd\u003e当 outter beans “default-lazy-init” 属性存在时，继承该值，否则为“false”\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003edefault-merge\u003c/td\u003e\n\u003ctd\u003edefault\u003c/td\u003e\n\u003ctd\u003e当 outter beans “default-merge” 属性存在时，继承该值，否则为“false”\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003edefault-autowire\u003c/td\u003e\n\u003ctd\u003edefault\u003c/td\u003e\n\u003ctd\u003e当 outter beans “default-autowire” 属性存在时，继承该值，否则为“no”\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003edefault-autowire-candidates\u003c/td\u003e\n\u003ctd\u003enull（留空）\u003c/td\u003e\n\u003ctd\u003e默认 Spring Beans 名称 pattern\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003edefault-init-method\u003c/td\u003e\n\u003ctd\u003enull（留空）\u003c/td\u003e\n\u003ctd\u003e默认 Spring Beans 自定义初始化方法\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003edefault-destroy-method\u003c/td\u003e\n\u003ctd\u003enull（留空）\u003c/td\u003e\n\u003ctd\u003e默认 Spring Beans 自定义销毁方法\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003eSpring XML 配置元信息 - 应用上下文相关\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eXML 元素\u003c/th\u003e\n\u003cth\u003e使用场景\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e\u0026lt;context:annotation-config /\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e激活 Spring 注解驱动\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e\u0026lt;context:component-scan /\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003eSpring @Component 以及自定义注解扫描\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e\u0026lt;context:load-time-weaver /\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e激活 Spring LoadTimeWeaver\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e\u0026lt;context:mbean-export /\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e暴露 Spring Beans 作为 JMX Beans\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e\u0026lt;context:mbean-server /\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e将当前平台作为 MBeanServer\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e\u0026lt;context:property-placeholder /\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e加载外部化配置资源作为 Spring 属性配\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e\u0026lt;context:property-override /\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e利用外部化配置资源覆盖 Spring 属\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003ch2 id=\"基于-XML-文件装载-Spring-Bean-配置元信息\"\u003e\u003ca href=\"#基于-XML-文件装载-Spring-Bean-配置元信息\" class=\"headerlink\" title=\"基于 XML 文件装载 Spring Bean 配置元信息\"\u003e\u003c/a\u003e基于 XML 文件装载 Spring Bean 配置元信息\u003c/h2\u003e\u003cp\u003e底层实现 - XmlBeanDefinitionReader\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eXML 元素\u003c/th\u003e\n\u003cth\u003e使用场景\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e\u0026lt;beans:beans /\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e单 XML 资源下的多个 Spring Beans 配置\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e\u0026lt;beans:bean /\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e单个 Spring Bean 定义（BeanDefinition）配置\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e\u0026lt;beans:alias /\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e为 Spring Bean 定义（BeanDefinition）映射别名\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e\u0026lt;beans:import /\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e加载外部 Spring XML 配置资源\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003ch2 id=\"基于-Properties-文件装载-Spring-Bean-配置元信息\"\u003e\u003ca href=\"#基于-Properties-文件装载-Spring-Bean-配置元信息\" class=\"headerlink\" title=\"基于 Properties 文件装载 Spring Bean 配置元信息\"\u003e\u003c/a\u003e基于 Properties 文件装载 Spring Bean 配置元信息\u003c/h2\u003e\u003cp\u003e底层实现 - PropertiesBeanDefinitionReader\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eProperties 属性名\u003c/th\u003e\n\u003cth\u003e使用场景\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eclass\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003eBean 类全称限定名\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eabstract\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e是否为抽象的 BeanDefinition\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eparent\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e指定 parent BeanDefinition 名称\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003elazy-init\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e是否为延迟初始化\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eref\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e引用其他 Bean 的名称\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003escope\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e设置 Bean 的 scope 属性\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e${n}\u003c/td\u003e\n\u003ctd\u003en 表示第 n+1 个构造器参数\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003ch2 id=\"基于-Java-注解装载-Spring-Bean-配置元信息\"\u003e\u003ca href=\"#基于-Java-注解装载-Spring-Bean-配置元信息\" class=\"headerlink\" title=\"基于 Java 注解装载 Spring Bean 配置元信息\"\u003e\u003c/a\u003e基于 Java 注解装载 Spring Bean 配置元信息\u003c/h2\u003e\u003cp\u003eSpring 模式注解\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eSpring 注解\u003c/th\u003e\n\u003cth\u003e场景说明\u003c/th\u003e\n\u003cth\u003e起始版本\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e@Repository\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e数据仓储模式注解\u003c/td\u003e\n\u003ctd\u003e2.0\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e@Component\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e通用组件模式注解\u003c/td\u003e\n\u003ctd\u003e2.5\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e@Service\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e服务模式注解\u003c/td\u003e\n\u003ctd\u003e2.5\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e@Controller\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003eWeb 控制器模式注解\u003c/td\u003e\n\u003ctd\u003e2.5\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e@Configuration\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e配置类模式注解\u003c/td\u003e\n\u003ctd\u003e3.0\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003eSpring Bean 定义注解\u003c/p\u003e\n\u003cp\u003e| Spring 注解  | 场景说明                                   | 起始版本    |\u003cbr/\u003e| ———— | —————————————— | ———– | — |\u003cbr/\u003e| \u003ccode\u003e@Bean\u003c/code\u003e      | 替换 XML 元素 \u003ccode\u003e\u0026lt;bean\u0026gt;\u003c/code\u003e                     | 3.0         |\u003cbr/\u003e| \u003ccode\u003e@DependsOn\u003c/code\u003e | 替代 XML 属性 \u003ccode\u003e\u0026lt;bean depends-on=\u0026#34;...\u0026#34;/\u0026gt;\u003c/code\u003e   | 3.0         |\u003cbr/\u003e| \u003ccode\u003e@Lazy\u003c/code\u003e      | 替代 XML 属性 \u003ccode\u003e\u0026lt;bean lazy-init=\u0026#34;true       | falses\u0026#34; /\u0026gt;\u003c/code\u003e | 3.0 |\u003cbr/\u003e| \u003ccode\u003e@Primary\u003c/code\u003e   | 替换 XML 元素 \u003ccode\u003e\u0026lt;bean primary=\u0026#34;true         | false\u0026#34; /\u0026gt;\u003c/code\u003e  | 3.0 |\u003cbr/\u003e| \u003ccode\u003e@Role\u003c/code\u003e      | 替换 XML 元素 \u003ccode\u003e\u0026lt;bean role=\u0026#34;...\u0026#34; /\u0026gt;\u003c/code\u003e        | 3.1         |\u003cbr/\u003e| \u003ccode\u003e@Lookup\u003c/code\u003e    | 替代 XML 属性 \u003ccode\u003e\u0026lt;bean lookup-method=\u0026#34;...\u0026#34;\u0026gt;\u003c/code\u003e | 4.1         |\u003c/p\u003e\n\u003cp\u003eSpring Bean 依赖注入注解\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eSpring 注解\u003c/th\u003e\n\u003cth\u003e场景说明\u003c/th\u003e\n\u003cth\u003e起始版本\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e@Autowired\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003eBean 依赖注入，支持多种依赖查找方式\u003c/td\u003e\n\u003ctd\u003e2.5\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003e@Qualifier\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e细粒度的 @Autowired 依赖查找\u003c/td\u003e\n\u003ctd\u003e2.5\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eJava 注解\u003c/th\u003e\n\u003cth\u003e场景说明\u003c/th\u003e\n\u003cth\u003e起始版本\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003e@Resource\u003c/td\u003e\n\u003ctd\u003e类似于 @Autowired\u003c/td\u003e\n\u003ctd\u003e2.5\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e@Inject\u003c/td\u003e\n\u003ctd\u003e类似于 @Autowired\u003c/td\u003e\n\u003ctd\u003e2.5\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003eSpring Bean 条件装配注解\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eSpring 注解\u003c/th\u003e\n\u003cth\u003e场景说明\u003c/th\u003e\n\u003cth\u003e起始版本\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003e@Profile\u003c/td\u003e\n\u003ctd\u003e配置化条件装配\u003c/td\u003e\n\u003ctd\u003e3.1\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e@Conditional\u003c/td\u003e\n\u003ctd\u003e编程条件装配\u003c/td\u003e\n\u003ctd\u003e4.0\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003eSpring Bean 生命周期回调注解\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eSpring 注解\u003c/th\u003e\n\u003cth\u003e场景说明\u003c/th\u003e\n\u003cth\u003e起始版本\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003e@PostConstruct\u003c/td\u003e\n\u003ctd\u003e替换 XML 元素 \u003cbean init-method=\"...\"\u003e 或 InitializingBean\u003c/bean\u003e\u003c/td\u003e\n\u003ctd\u003e2.5\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e@PreDestroy\u003c/td\u003e\n\u003ctd\u003e替换 XML 元素 \u003cbean destroy-method=\"...\"\u003e 或 DisposableBean\u003c/bean\u003e\u003c/td\u003e\n\u003ctd\u003e2.5\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003eSpring BeanDefinition 解析与注册\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eSpring 注解\u003c/th\u003e\n\u003cth\u003e场景说明\u003c/th\u003e\n\u003cth\u003e起始版本\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003eXML 资源\u003c/td\u003e\n\u003ctd\u003eXmlBeanDefinitionReader\u003c/td\u003e\n\u003ctd\u003e1.0\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eProperties 资源\u003c/td\u003e\n\u003ctd\u003ePropertiesBeanDefinitionReader\u003c/td\u003e\n\u003ctd\u003e1.0\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eJava 注解\u003c/td\u003e\n\u003ctd\u003eAnnotatedBeanDefinitionReader\u003c/td\u003e\n\u003ctd\u003e3.0\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003ch2 id=\"Spring-Bean-配置元信息底层实现\"\u003e\u003ca href=\"#Spring-Bean-配置元信息底层实现\" class=\"headerlink\" title=\"Spring Bean 配置元信息底层实现\"\u003e\u003c/a\u003eSpring Bean 配置元信息底层实现\u003c/h2\u003e\u003ch3 id=\"Spring-XML-资源-BeanDefinition-解析与注册\"\u003e\u003ca href=\"#Spring-XML-资源-BeanDefinition-解析与注册\" class=\"headerlink\" title=\"Spring XML 资源 BeanDefinition 解析与注册\"\u003e\u003c/a\u003eSpring XML 资源 BeanDefinition 解析与注册\u003c/h3\u003e\u003cp\u003e核心 API - XmlBeanDefinitionReader\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e资源 - Resource\u003c/li\u003e\n\u003cli\u003e底层 - BeanDefinitionDocumentReader\u003cul\u003e\n\u003cli\u003eXML 解析 - Java DOM Level 3 API\u003c/li\u003e\n\u003cli\u003eBeanDefinition 解析 - BeanDefinitionParserDelegate\u003c/li\u003e\n\u003cli\u003eBeanDefinition 注册 - BeanDefinitionRegistry\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"Spring-Properties-资源-BeanDefinition-解析与注册\"\u003e\u003ca href=\"#Spring-Properties-资源-BeanDefinition-解析与注册\" class=\"headerlink\" title=\"Spring Properties 资源 BeanDefinition 解析与注册\"\u003e\u003c/a\u003eSpring Properties 资源 BeanDefinition 解析与注册\u003c/h3\u003e\u003cp\u003e核心 API - PropertiesBeanDefinitionReader\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e资源\u003cul\u003e\n\u003cli\u003e字节流 - Resource\u003c/li\u003e\n\u003cli\u003e字符流 - EncodedResouce\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e底层\u003cul\u003e\n\u003cli\u003e存储 - java.util.Properties\u003c/li\u003e\n\u003cli\u003eBeanDefinition 解析 - API 内部实现\u003c/li\u003e\n\u003cli\u003eBeanDefinition 注册 - BeanDefinitionRegistry\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"Spring-Java-注册-BeanDefinition-解析与注册\"\u003e\u003ca href=\"#Spring-Java-注册-BeanDefinition-解析与注册\" class=\"headerlink\" title=\"Spring Java 注册 BeanDefinition 解析与注册\"\u003e\u003c/a\u003eSpring Java 注册 BeanDefinition 解析与注册\u003c/h3\u003e\u003cp\u003e核心 API - AnnotatedBeanDefinitionReader\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e资源\u003cul\u003e\n\u003cli\u003e类对象 - java.lang.Class\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e底层\u003cul\u003e\n\u003cli\u003e条件评估 - ConditionEvaluator\u003c/li\u003e\n\u003cli\u003eBean 范围解析 - ScopeMetadataResolver\u003c/li\u003e\n\u003cli\u003eBeanDefinition 解析 - 内部 API 实现\u003c/li\u003e\n\u003cli\u003eBeanDefinition 处理 - AnnotationConfigUtils.processCommonDefinitionAnnotations\u003c/li\u003e\n\u003cli\u003eBeanDefinition 注册 - BeanDefinitionRegistry\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"基于-XML-文件装载-Spring-IoC-容器配置元信息\"\u003e\u003ca href=\"#基于-XML-文件装载-Spring-IoC-容器配置元信息\" class=\"headerlink\" title=\"基于 XML 文件装载 Spring IoC 容器配置元信息\"\u003e\u003c/a\u003e基于 XML 文件装载 Spring IoC 容器配置元信息\u003c/h2\u003e\u003cp\u003eSpring IoC 容器相关 XML 配置\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e命名空间\u003c/th\u003e\n\u003cth\u003e所属模块\u003c/th\u003e\n\u003cth\u003eSchema 资源 URL\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003ebeans\u003c/td\u003e\n\u003ctd\u003espring-beans\u003c/td\u003e\n\u003ctd\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.springframework.org/schema/beans/spring-beans.xsd\"\u003ehttps://www.springframework.org/schema/beans/spring-beans.xsd\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003econtext\u003c/td\u003e\n\u003ctd\u003espring-context\u003c/td\u003e\n\u003ctd\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.springframework.org/schema/context/spring-context.xsd\"\u003ehttps://www.springframework.org/schema/context/spring-context.xsd\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eaop\u003c/td\u003e\n\u003ctd\u003espring-aop\u003c/td\u003e\n\u003ctd\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.springframework.org/schema/aop/spring-aop.xsd\"\u003ehttps://www.springframework.org/schema/aop/spring-aop.xsd\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003etx\u003c/td\u003e\n\u003ctd\u003espring-tx\u003c/td\u003e\n\u003ctd\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.springframework.org/schema/tx/spring-tx.xsd\"\u003ehttps://www.springframework.org/schema/tx/spring-tx.xsd\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eutil\u003c/td\u003e\n\u003ctd\u003espring-beans\u003c/td\u003e\n\u003ctd\u003ebeans \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.springframework.org/schema/util/spring-util.xsd\"\u003ehttps://www.springframework.org/schema/util/spring-util.xsd\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003etool\u003c/td\u003e\n\u003ctd\u003espring-beans\u003c/td\u003e\n\u003ctd\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.springframework.org/schema/tool/spring-tool.xsd\"\u003ehttps://www.springframework.org/schema/tool/spring-tool.xsd\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003ch2 id=\"基于-Java-注解装载-Spring-IoC-容器配置元信息\"\u003e\u003ca href=\"#基于-Java-注解装载-Spring-IoC-容器配置元信息\" class=\"headerlink\" title=\"基于 Java 注解装载 Spring IoC 容器配置元信息\"\u003e\u003c/a\u003e基于 Java 注解装载 Spring IoC 容器配置元信息\u003c/h2\u003e\u003cp\u003eSpring IoC 容器装配注解\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eSpring 注解\u003c/th\u003e\n\u003cth\u003e场景说明\u003c/th\u003e\n\u003cth\u003e起始版本\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003e@ImportResource\u003c/td\u003e\n\u003ctd\u003e替换 XML 元素 \u003ccode\u003e\u0026lt;import\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e3.0\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e@Import\u003c/td\u003e\n\u003ctd\u003e导入 Configuration Class\u003c/td\u003e\n\u003ctd\u003e3.0\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e@ComponentScan\u003c/td\u003e\n\u003ctd\u003e扫描指定 package 下标注 Spring 模式注解的类\u003c/td\u003e\n\u003ctd\u003e3.1\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003eSpring IoC 配属属性注解\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eSpring 注解\u003c/th\u003e\n\u003cth\u003e场景说明\u003c/th\u003e\n\u003cth\u003e起始版本\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003e@PropertySource\u003c/td\u003e\n\u003ctd\u003e配置属性抽象 PropertySource 注解\u003c/td\u003e\n\u003ctd\u003e3.1\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e@PropertySources\u003c/td\u003e\n\u003ctd\u003e@PropertySource 集合注解\u003c/td\u003e\n\u003ctd\u003e4.0\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003ch2 id=\"基于-Extensible-XML-authoring-扩展-SpringXML-元素\"\u003e\u003ca href=\"#基于-Extensible-XML-authoring-扩展-SpringXML-元素\" class=\"headerlink\" title=\"基于 Extensible XML authoring 扩展 SpringXML 元素\"\u003e\u003c/a\u003e基于 Extensible XML authoring 扩展 SpringXML 元素\u003c/h2\u003e\u003cp\u003eSpring XML 扩展\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e编写 XML Schema 文件：定义 XML 结构\u003c/li\u003e\n\u003cli\u003e自定义 NamespaceHandler 实现：命名空间绑定\u003c/li\u003e\n\u003cli\u003e自定义 BeanDefinitionParser 实现：XML 元素与 BeanDefinition 解析\u003c/li\u003e\n\u003cli\u003e注册 XML 扩展：命名空间与 XML Schema 映射\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"Extensible-XML-authoring-扩展原理\"\u003e\u003ca href=\"#Extensible-XML-authoring-扩展原理\" class=\"headerlink\" title=\"Extensible XML authoring 扩展原理\"\u003e\u003c/a\u003eExtensible XML authoring 扩展原理\u003c/h2\u003e\u003ch3 id=\"触发时机\"\u003e\u003ca href=\"#触发时机\" class=\"headerlink\" title=\"触发时机\"\u003e\u003c/a\u003e触发时机\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003eAbstractApplicationContext#obtainFreshBeanFactory\u003cul\u003e\n\u003cli\u003eAbstractRefreshableApplicationContext#refreshBeanFactory\u003cul\u003e\n\u003cli\u003eAbstractXmlApplicationContext#loadBeanDefinitions\u003cul\u003e\n\u003cli\u003e…\u003cul\u003e\n\u003cli\u003eXmlBeanDefinitionReader#doLoadBeanDefinitions\u003cul\u003e\n\u003cli\u003e…\u003cul\u003e\n\u003cli\u003eBeanDefinitionParserDelegate#parseCustomElement\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"核心流程\"\u003e\u003ca href=\"#核心流程\" class=\"headerlink\" title=\"核心流程\"\u003e\u003c/a\u003e核心流程\u003c/h3\u003e\u003cp\u003eBeanDefinitionParserDelegate#parseCustomElement(org.w3c.dom.Element, BeanDefinition)\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e获取 namespace\u003c/li\u003e\n\u003cli\u003e通过 namespace 解析 NamespaceHandler\u003c/li\u003e\n\u003cli\u003e构造 ParserContext\u003c/li\u003e\n\u003cli\u003e解析元素，获取 BeanDefinintion\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"基于-Properties-文件装载外部化配置\"\u003e\u003ca href=\"#基于-Properties-文件装载外部化配置\" class=\"headerlink\" title=\"基于 Properties 文件装载外部化配置\"\u003e\u003c/a\u003e基于 Properties 文件装载外部化配置\u003c/h2\u003e\u003cp\u003e注解驱动\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e@org.springframework.context.annotation.PropertySource\u003c/li\u003e\n\u003cli\u003e@org.springframework.context.annotation.PropertySources\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAPI 编程\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eorg.springframework.core.env.PropertySource\u003c/li\u003e\n\u003cli\u003eorg.springframework.core.env.PropertySources\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"基于-YAML-文件装载外部化配置\"\u003e\u003ca href=\"#基于-YAML-文件装载外部化配置\" class=\"headerlink\" title=\"基于 YAML 文件装载外部化配置\"\u003e\u003c/a\u003e基于 YAML 文件装载外部化配置\u003c/h2\u003e\u003cp\u003eAPI 编程\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eorg.springframework.beans.factory.config.YamlProcessor\u003cul\u003e\n\u003cli\u003eorg.springframework.beans.factory.config.YamlMapFactoryBean\u003c/li\u003e\n\u003cli\u003eorg.springframework.beans.factory.config.YamlPropertiesFactoryBean\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"问题\"\u003e\u003ca href=\"#问题\" class=\"headerlink\" title=\"问题\"\u003e\u003c/a\u003e问题\u003c/h2\u003e\u003cp\u003e\u003cstrong\u003eSpring 內建 XML Schema 常见有哪些\u003c/strong\u003e？\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e命名空间\u003c/th\u003e\n\u003cth\u003e所属模块\u003c/th\u003e\n\u003cth\u003eSchema 资源 URL\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003ebeans\u003c/td\u003e\n\u003ctd\u003espring-beans\u003c/td\u003e\n\u003ctd\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.springframework.org/schema/beans/spring-beans.xsd\"\u003ehttps://www.springframework.org/schema/beans/spring-beans.xsd\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003econtext\u003c/td\u003e\n\u003ctd\u003espring-context\u003c/td\u003e\n\u003ctd\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.springframework.org/schema/context/spring-context.xsd\"\u003ehttps://www.springframework.org/schema/context/spring-context.xsd\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eaop\u003c/td\u003e\n\u003ctd\u003espring-aop\u003c/td\u003e\n\u003ctd\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.springframework.org/schema/aop/spring-aop.xsd\"\u003ehttps://www.springframework.org/schema/aop/spring-aop.xsd\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003etx\u003c/td\u003e\n\u003ctd\u003espring-tx\u003c/td\u003e\n\u003ctd\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.springframework.org/schema/tx/spring-tx.xsd\"\u003ehttps://www.springframework.org/schema/tx/spring-tx.xsd\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eutil\u003c/td\u003e\n\u003ctd\u003espring-beans\u003c/td\u003e\n\u003ctd\u003ebeans \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.springframework.org/schema/util/spring-util.xsd\"\u003ehttps://www.springframework.org/schema/util/spring-util.xsd\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003etool\u003c/td\u003e\n\u003ctd\u003espring-beans\u003c/td\u003e\n\u003ctd\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.springframework.org/schema/tool/spring-tool.xsd\"\u003ehttps://www.springframework.org/schema/tool/spring-tool.xsd\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003e\u003cstrong\u003eSpring 配置元信息具体有哪些\u003c/strong\u003e？\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eBean 配置元信息：通过媒介（如 XML、Proeprties 等），解析 BeanDefinition\u003c/li\u003e\n\u003cli\u003eIoC 容器配置元信息：通过媒介（如 XML、Proeprties 等），控制 IoC 容器行为，比如注解驱动、AOP 等\u003c/li\u003e\n\u003cli\u003e外部化配置：通过资源抽象（如 Proeprties、YAML 等），控制 PropertySource\u003c/li\u003e\n\u003cli\u003eSpring Profile：通过外部化配置，提供条件分支流程\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eExtensible XML authoring 的缺点\u003c/strong\u003e？\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e高复杂度：开发人员需要熟悉 XML Schema，spring.handlers，spring.schemas 以及 Spring API\u003c/li\u003e\n\u003cli\u003e嵌套元素支持较弱：通常需要使用方法递归或者其嵌套解析的方式处理嵌套（子）元素\u003c/li\u003e\n\u003cli\u003eXML 处理性能较差：Spring XML 基于 DOM Level 3 API 实现，该 API 便于理解，然而性能较差\u003c/li\u003e\n\u003cli\u003eXML 框架移植性差：很难适配高性能和便利性的 XML 框架，如 JAXB\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"参考资料\"\u003e\u003ca href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"\u003e\u003c/a\u003e参考资料\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#beans\"\u003eSpring 官方文档之 Core Technologies\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://time.geekbang.org/course/intro/265\"\u003e《小马哥讲 Spring 核心编程思想》\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n    \u003c/div\u003e",
  "Date": "2022-12-21T11:49:48Z",
  "Author": "钝悟 ◾ Dunwu"
}