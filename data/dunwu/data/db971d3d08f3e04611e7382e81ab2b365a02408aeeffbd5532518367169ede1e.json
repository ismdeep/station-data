{
  "Source": "dunwu",
  "Title": "Mysql é¢è¯•",
  "Link": "https://dunwu.github.io/blog/pages/7b0caf/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003ch1 id=\"Mysql-é¢è¯•\"\u003e\u003ca href=\"#Mysql-é¢è¯•\" class=\"headerlink\" title=\"Mysql é¢è¯•\"\u003e\u003c/a\u003eMysql é¢è¯•\u003c/h1\u003e\u003ch2 id=\"åŸºç¡€\"\u003e\u003ca href=\"#åŸºç¡€\" class=\"headerlink\" title=\"åŸºç¡€\"\u003e\u003c/a\u003eåŸºç¡€\u003c/h2\u003e\u003ch3 id=\"EXISTS-å’Œ-IN-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"\u003e\u003ca href=\"#EXISTS-å’Œ-IN-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"EXISTS å’Œ IN æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"\u003e\u003c/a\u003eEXISTS å’Œ IN æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eEXISTS\u003c/code\u003e - å…ˆå¯¹å¤–è¡¨è¿›è¡Œå¾ªç¯æŸ¥è¯¢ï¼Œå†å°†æŸ¥è¯¢ç»“æœæ”¾å…¥ \u003ccode\u003eEXISTS\u003c/code\u003e çš„å­æŸ¥è¯¢ä¸­è¿›è¡Œæ¡ä»¶æ¯”è¾ƒï¼Œç¡®å®šå¤–å±‚æŸ¥è¯¢æ•°æ®æ˜¯å¦ä¿ç•™ï¼›\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eIN\u003c/code\u003e - å…ˆæŸ¥è¯¢å†…è¡¨ï¼Œå°†å†…è¡¨çš„æŸ¥è¯¢ç»“æœä½œä¸ºæ¡ä»¶ï¼Œæä¾›ç»™å¤–è¡¨æŸ¥è¯¢è¯­å¥è¿›è¡Œæ¯”è¾ƒï¼›\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eç´¢å¼•æ˜¯ä¸ªå‰æï¼Œå…¶å®é€‰æ‹©ä¸å¦è¿˜æ˜¯è¦çœ‹è¡¨çš„å¤§å°ã€‚ä½ å¯ä»¥å°†é€‰æ‹©çš„æ ‡å‡†ç†è§£ä¸ºå°è¡¨é©±åŠ¨å¤§è¡¨ã€‚åœ¨è¿™ç§æ–¹å¼ä¸‹æ•ˆç‡æ˜¯æœ€é«˜çš„ã€‚\u003c/p\u003e\n\u003cp\u003eæ¯”å¦‚ä¸‹é¢è¿™æ ·ï¼š\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e A \u003cspan class=\"keyword\"\u003eWHERE\u003c/span\u003e cc \u003cspan class=\"keyword\"\u003eIN\u003c/span\u003e (\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e cc \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e B)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e A \u003cspan class=\"keyword\"\u003eWHERE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eEXISTS\u003c/span\u003e (\u003cspan class=\"keyword\"\u003eSELECT\u003c/span\u003e cc \u003cspan class=\"keyword\"\u003eFROM\u003c/span\u003e B \u003cspan class=\"keyword\"\u003eWHERE\u003c/span\u003e B.cc\u003cspan class=\"operator\"\u003e=\u003c/span\u003eA.cc)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003eå½“ A å°äº B æ—¶ï¼Œç”¨ \u003ccode\u003eEXISTS\u003c/code\u003eã€‚å› ä¸º \u003ccode\u003eEXISTS\u003c/code\u003e çš„å®ç°ï¼Œç›¸å½“äºå¤–è¡¨å¾ªç¯ï¼Œå®ç°çš„é€»è¾‘ç±»ä¼¼äºï¼š\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e A\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003efor\u003c/span\u003e j \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e B\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        if j.cc \u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"operator\"\u003e=\u003c/span\u003e i.cc \u003cspan class=\"keyword\"\u003ethen\u003c/span\u003e ...\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003eå½“ B å°äº A æ—¶ç”¨ \u003ccode\u003eIN\u003c/code\u003eï¼Œå› ä¸ºå®ç°çš„é€»è¾‘ç±»ä¼¼äºï¼š\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e B\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003efor\u003c/span\u003e j \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e A\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        if j.cc \u003cspan class=\"operator\"\u003e=\u003c/span\u003e\u003cspan class=\"operator\"\u003e=\u003c/span\u003e i.cc \u003cspan class=\"keyword\"\u003ethen\u003c/span\u003e ...\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003eå“ªä¸ªè¡¨å°å°±ç”¨å“ªä¸ªè¡¨æ¥é©±åŠ¨ï¼ŒA è¡¨å°å°±ç”¨ \u003ccode\u003eEXISTS\u003c/code\u003eï¼ŒB è¡¨å°å°±ç”¨ \u003ccode\u003eIN\u003c/code\u003eï¼›å¦‚æœä¸¤ä¸ªè¡¨å¤§å°ç›¸å½“ï¼Œåˆ™ä½¿ç”¨ \u003ccode\u003eEXISTS\u003c/code\u003e å’Œ \u003ccode\u003eIN\u003c/code\u003e çš„åŒºåˆ«ä¸å¤§ã€‚\u003c/p\u003e\n\u003ch3 id=\"UNION-å’Œ-UNION-ALL-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"\u003e\u003ca href=\"#UNION-å’Œ-UNION-ALL-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"UNION å’Œ UNION ALL æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"\u003e\u003c/a\u003eUNION å’Œ UNION ALL æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\u003c/h3\u003e\u003cp\u003e\u003ccode\u003eUNION\u003c/code\u003e å’Œ \u003ccode\u003eUNION ALL\u003c/code\u003e éƒ½æ˜¯å°†ä¸¤ä¸ªç»“æœé›†åˆå¹¶ä¸ºä¸€ä¸ªï¼Œ\u003cstrong\u003eä¸¤ä¸ªè¦è”åˆçš„ SQL è¯­å¥å­—æ®µä¸ªæ•°å¿…é¡»ä¸€æ ·ï¼Œè€Œä¸”å­—æ®µç±»å‹è¦â€œç›¸å®¹â€ï¼ˆä¸€è‡´ï¼‰\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eUNION\u003c/code\u003e éœ€è¦è¿›è¡Œå»é‡æ‰«æï¼Œå› æ­¤æ¶ˆæ¯è¾ƒä½ï¼›è€Œ \u003ccode\u003eUNION ALL\u003c/code\u003e ä¸ä¼šè¿›è¡Œå»é‡ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eUNION\u003c/code\u003e ä¼šæŒ‰ç…§å­—æ®µçš„é¡ºåºè¿›è¡Œæ’åºï¼›è€Œ \u003ccode\u003eUNION ALL\u003c/code\u003e åªæ˜¯ç®€å•çš„å°†ä¸¤ä¸ªç»“æœåˆå¹¶å°±è¿”å›ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"JOIN-æœ‰å“ªäº›ç±»å‹ï¼Ÿ\"\u003e\u003ca href=\"#JOIN-æœ‰å“ªäº›ç±»å‹ï¼Ÿ\" class=\"headerlink\" title=\"JOIN æœ‰å“ªäº›ç±»å‹ï¼Ÿ\"\u003e\u003c/a\u003eJOIN æœ‰å“ªäº›ç±»å‹ï¼Ÿ\u003c/h3\u003e\u003cp\u003e**åœ¨ SELECT, UPDATE å’Œ DELETE è¯­å¥ä¸­ï¼Œâ€œè¿æ¥â€å¯ä»¥ç”¨äºè”åˆå¤šè¡¨æŸ¥è¯¢ã€‚è¿æ¥ä½¿ç”¨ \u003ccode\u003eJOIN\u003c/code\u003e å…³é”®å­—ï¼Œå¹¶ä¸”æ¡ä»¶è¯­å¥ä½¿ç”¨ \u003ccode\u003eON\u003c/code\u003e è€Œä¸æ˜¯ \u003ccode\u003eWHERE\u003c/code\u003e**ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eè¿æ¥å¯ä»¥æ›¿æ¢å­æŸ¥è¯¢ï¼Œå¹¶ä¸”ä¸€èˆ¬æ¯”å­æŸ¥è¯¢çš„æ•ˆç‡æ›´å¿«\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eJOIN\u003c/code\u003e æœ‰ä»¥ä¸‹ç±»å‹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå†…è¿æ¥ - å†…è¿æ¥åˆç§°ç­‰å€¼è¿æ¥ï¼Œç”¨äºè·å–ä¸¤ä¸ªè¡¨ä¸­å­—æ®µåŒ¹é…å…³ç³»çš„è®°å½•ï¼Œ\u003cstrong\u003eä½¿ç”¨ \u003ccode\u003eINNER JOIN\u003c/code\u003e å…³é”®å­—\u003c/strong\u003eã€‚åœ¨æ²¡æœ‰æ¡ä»¶è¯­å¥çš„æƒ…å†µä¸‹\u003cstrong\u003eè¿”å›ç¬›å¡å°”ç§¯\u003c/strong\u003eã€‚\u003cul\u003e\n\u003cli\u003eç¬›å¡å°”ç§¯ - \u003cstrong\u003eâ€œç¬›å¡å°”ç§¯â€ä¹Ÿç§°ä¸ºäº¤å‰è¿æ¥ï¼ˆ\u003ccode\u003eCROSS JOIN\u003c/code\u003eï¼‰ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å¯ä»¥æŠŠä»»æ„è¡¨è¿›è¡Œè¿æ¥ï¼Œå³ä½¿è¿™ä¸¤å¼ è¡¨ä¸ç›¸å…³\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003eè‡ªè¿æ¥ï¼ˆ=ï¼‰ - \u003cstrong\u003eâ€œè‡ªè¿æ¥ï¼ˆ=ï¼‰â€å¯ä»¥çœ‹æˆå†…è¿æ¥çš„ä¸€ç§ï¼Œåªæ˜¯è¿æ¥çš„è¡¨æ˜¯è‡ªèº«è€Œå·²\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003eè‡ªç„¶è¿æ¥ï¼ˆNATURAL JOINï¼‰ - \u003cstrong\u003eâ€œè‡ªç„¶è¿æ¥â€ä¼šè‡ªåŠ¨è¿æ¥æ‰€æœ‰åŒååˆ—\u003c/strong\u003eã€‚è‡ªç„¶è¿æ¥ä½¿ç”¨ \u003ccode\u003eNATURAL JOIN\u003c/code\u003e å…³é”®å­—ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eå¤–è¿æ¥\u003cul\u003e\n\u003cli\u003eå·¦è¿æ¥ï¼ˆLEFT JOINï¼‰ - \u003cstrong\u003eâ€œå·¦å¤–è¿æ¥â€ä¼šè·å–å·¦è¡¨æ‰€æœ‰è®°å½•ï¼Œå³ä½¿å³è¡¨æ²¡æœ‰å¯¹åº”åŒ¹é…çš„è®°å½•\u003c/strong\u003eã€‚å·¦å¤–è¿æ¥ä½¿ç”¨ \u003ccode\u003eLEFT JOIN\u003c/code\u003e å…³é”®å­—ã€‚\u003c/li\u003e\n\u003cli\u003eå³è¿æ¥ï¼ˆRIGHT JOINï¼‰ - \u003cstrong\u003eâ€œå³å¤–è¿æ¥â€ä¼šè·å–å³è¡¨æ‰€æœ‰è®°å½•ï¼Œå³ä½¿å·¦è¡¨æ²¡æœ‰å¯¹åº”åŒ¹é…çš„è®°å½•\u003c/strong\u003eã€‚å³å¤–è¿æ¥ä½¿ç”¨ \u003ccode\u003eRIGHT JOIN\u003c/code\u003e å…³é”®å­—ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/cs/database/mysql/sql-join.png\" alt=\"SQL JOIN\"/\u003e\u003c/p\u003e\n\u003ch3 id=\"CHAR-å’Œ-VARCHAR-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"\u003e\u003ca href=\"#CHAR-å’Œ-VARCHAR-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"CHAR å’Œ VARCHAR çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\"\u003e\u003c/a\u003eCHAR å’Œ VARCHAR çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\u003c/h3\u003e\u003cp\u003eCHAR å’Œ VARCHAR çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼š\u003cstrong\u003eCHAR æ˜¯å®šé•¿å­—ç¬¦ä¸²ï¼ŒVARCHAR æ˜¯å˜é•¿å­—ç¬¦ä¸²ã€‚\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCHAR åœ¨å­˜å‚¨æ—¶ä¼šåœ¨å³è¾¹å¡«å……ç©ºæ ¼ä»¥è¾¾åˆ°æŒ‡å®šçš„é•¿åº¦ï¼Œæ£€ç´¢æ—¶ä¼šå»æ‰ç©ºæ ¼ï¼›VARCHAR åœ¨å­˜å‚¨æ—¶éœ€è¦ä½¿ç”¨ 1 æˆ– 2 ä¸ªé¢å¤–å­—èŠ‚è®°å½•å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œæ£€ç´¢æ—¶ä¸éœ€è¦å¤„ç†ã€‚\u003c/li\u003e\n\u003cli\u003eCHAR æ›´é€‚åˆå­˜å‚¨é•¿åº¦è¾ƒçŸ­æˆ–è€…é•¿åº¦éƒ½å·®ä¸å¤šçš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ Bcrypt ç®—æ³•ã€MD5 ç®—æ³•åŠ å¯†åçš„å¯†ç ã€èº«ä»½è¯å·ç ã€‚VARCHAR ç±»å‹é€‚åˆå­˜å‚¨é•¿åº¦ä¸ç¡®å®šæˆ–è€…å·®å¼‚è¾ƒå¤§çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ç”¨æˆ·æ˜µç§°ã€æ–‡ç« æ ‡é¢˜ç­‰ã€‚\u003c/li\u003e\n\u003cli\u003eCHAR(M) å’Œ VARCHAR(M) çš„ M éƒ½ä»£è¡¨èƒ½å¤Ÿä¿å­˜çš„å­—ç¬¦æ•°çš„æœ€å¤§å€¼ï¼Œæ— è®ºæ˜¯å­—æ¯ã€æ•°å­—è¿˜æ˜¯ä¸­æ–‡ï¼Œæ¯ä¸ªéƒ½åªå ç”¨ä¸€ä¸ªå­—ç¬¦ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"é‡‘é’±ç›¸å…³çš„æ•°æ®ç”¨ä»€ä¹ˆç±»å‹å­˜å‚¨ï¼Ÿ\"\u003e\u003ca href=\"#é‡‘é’±ç›¸å…³çš„æ•°æ®ç”¨ä»€ä¹ˆç±»å‹å­˜å‚¨ï¼Ÿ\" class=\"headerlink\" title=\"é‡‘é’±ç›¸å…³çš„æ•°æ®ç”¨ä»€ä¹ˆç±»å‹å­˜å‚¨ï¼Ÿ\"\u003e\u003c/a\u003eé‡‘é’±ç›¸å…³çš„æ•°æ®ç”¨ä»€ä¹ˆç±»å‹å­˜å‚¨ï¼Ÿ\u003c/h3\u003e\u003cp\u003eMySQL ä¸­æœ‰ 3 ç§ç±»å‹å¯ä»¥è¡¨ç¤ºæµ®ç‚¹æ•°ï¼Œåˆ†åˆ«æ˜¯ \u003ccode\u003efloat\u003c/code\u003eã€\u003ccode\u003edouble\u003c/code\u003e å’Œ \u003ccode\u003edecimal\u003c/code\u003eã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003efloat å’Œ double ä¸ºä»€ä¹ˆä¼šä¸¢å¤±ç²¾åº¦ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eé‡‡ç”¨ float å’Œ double ç±»å‹ä¼šä¸¢å¤±ç²¾åº¦\u003c/strong\u003eã€‚æ•°æ®çš„ç²¾ç¡®åº¦å–å†³äºåˆ†é…ç»™æ¯ç§æ•°æ®ç±»å‹çš„å­˜å‚¨é•¿åº¦ã€‚ç”±äºè®¡ç®—æœºåªèƒ½å­˜å‚¨äºŒè¿›åˆ¶ï¼Œæ‰€ä»¥æµ®ç‚¹å‹æ•°æ®åœ¨å­˜å‚¨çš„æ—¶å€™ï¼Œå¿…é¡»è½¬åŒ–æˆäºŒè¿›åˆ¶ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå•ç²¾åº¦ç±»å‹ float å­˜å‚¨ç©ºé—´ä¸º 4 å­—èŠ‚ï¼Œå³ 32 ä½ã€‚\u003c/li\u003e\n\u003cli\u003eåŒç²¾åº¦ç±»å‹ double å­˜å‚¨ç©ºé—´ä¸º 8 å­—èŠ‚ï¼Œå³ 64 ä½ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eå¦‚æœå­˜å‚¨çš„æ•°æ®è½¬ä¸ºäºŒè¿›åˆ¶åï¼Œè¶…è¿‡å­˜å‚¨çš„ä½æ•°ï¼Œæ•°æ®å°±è¢«æˆªæ–­ï¼Œå› æ­¤å­˜åœ¨ä¸¢å¤±ç²¾åº¦çš„å¯èƒ½ã€‚\u003c/p\u003e\n\u003cp\u003eã€ç¤ºä¾‹ã€‘ä¸¢å¤±ç²¾åº¦æ¡ˆä¾‹\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e-- åˆ›å»ºè¡¨\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTABLE\u003c/span\u003e `test` (\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  `\u003cspan class=\"keyword\"\u003evalue\u003c/span\u003e` \u003cspan class=\"type\"\u003efloat\u003c/span\u003e(\u003cspan class=\"number\"\u003e10\u003c/span\u003e,\u003cspan class=\"number\"\u003e2\u003c/span\u003e) \u003cspan class=\"keyword\"\u003eDEFAULT\u003c/span\u003e \u003cspan class=\"keyword\"\u003eNULL\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysql\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"keyword\"\u003einsert\u003c/span\u003e \u003cspan class=\"keyword\"\u003einto\u003c/span\u003e test \u003cspan class=\"keyword\"\u003evalue\u003c/span\u003e (\u003cspan class=\"number\"\u003e131072.32\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eQuery OK, \u003cspan class=\"number\"\u003e1\u003c/span\u003e \u003cspan class=\"type\"\u003erow\u003c/span\u003e affected (\u003cspan class=\"number\"\u003e0.01\u003c/span\u003e sec)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emysql\u003cspan class=\"operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"keyword\"\u003eselect\u003c/span\u003e \u003cspan class=\"operator\"\u003e*\u003c/span\u003e \u003cspan class=\"keyword\"\u003efrom\u003c/span\u003e test;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e-----------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e \u003cspan class=\"keyword\"\u003evalue\u003c/span\u003e     \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e-----------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e|\u003c/span\u003e \u003cspan class=\"number\"\u003e131072.31\u003c/span\u003e \u003cspan class=\"operator\"\u003e|\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"operator\"\u003e+\u003c/span\u003e\u003cspan class=\"comment\"\u003e-----------+\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"number\"\u003e1\u003c/span\u003e \u003cspan class=\"type\"\u003erow\u003c/span\u003e \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"keyword\"\u003eset\u003c/span\u003e (\u003cspan class=\"number\"\u003e0.02\u003c/span\u003e sec)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003eè¯´æ˜ï¼šç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨ float ç±»å‹ï¼Œæ˜æ˜ä¿ç•™äº†ä¸¤ä½å°æ•°ã€‚ä½†æ˜¯å†™å…¥çš„æ•°æ®å´ä» \u003ccode\u003e131072.32\u003c/code\u003e å˜æˆäº† \u003ccode\u003e131072.31\u003c/code\u003e ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eé€‰æ‹©ä»€ä¹ˆç±»å‹å¯ä»¥ä¸ä¸¢å¤±ç²¾åº¦ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ccode\u003edecimal\u003c/code\u003e ç±»å‹æ˜¯ MySQL å®˜æ–¹å”¯ä¸€æŒ‡å®šèƒ½ç²¾ç¡®å­˜å‚¨çš„ç±»å‹ã€‚å› æ­¤ï¼Œå¯¹äºä¸å…è®¸ä¸¢å¤±ç²¾åº¦çš„åœºæ™¯ï¼ˆå¦‚é‡‘é’±ç›¸å…³çš„ä¸šåŠ¡ï¼‰ï¼Œè¯·åŠ¡å¿…ä½¿ç”¨ \u003ccode\u003edecimal\u003c/code\u003e ç±»å‹ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæ‰©å±•é˜…è¯»ï¼š\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://blog.leanote.com/post/weibo-007/mysql_float_double_decimal\"\u003eMySQL å¦‚ä½•é€‰æ‹© float, double, decimal\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"å¦‚ä½•å­˜å‚¨-emoji-ğŸ˜ƒï¼Ÿ\"\u003e\u003ca href=\"#å¦‚ä½•å­˜å‚¨-emoji-ğŸ˜ƒï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•å­˜å‚¨ emoji ğŸ˜ƒï¼Ÿ\"\u003e\u003c/a\u003eå¦‚ä½•å­˜å‚¨ emoji ğŸ˜ƒï¼Ÿ\u003c/h3\u003e\u003cp\u003eMysql ä¸­çš„é»˜è®¤å­—ç¬¦é›†ä¸º utf8ï¼Œæ— æ³•å­˜å‚¨ emojiï¼Œå¦‚æœè¦å­˜å‚¨ emojiï¼Œå¿…é¡»ä½¿ç”¨ utf8mb4 å­—ç¬¦é›†ã€‚\u003c/p\u003e\n\u003cp\u003eè®¾ç½® utf8mb4 å­—ç¬¦é›†æ–¹æ³•å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cfigure class=\"highlight sql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eALTER\u003c/span\u003e \u003cspan class=\"keyword\"\u003eTABLE\u003c/span\u003e test\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eDEFAULT\u003c/span\u003e \u003cspan class=\"type\"\u003eCHARACTER\u003c/span\u003e \u003cspan class=\"keyword\"\u003eSET\u003c/span\u003e utf8mb4 \u003cspan class=\"keyword\"\u003eCOLLATE\u003c/span\u003e utf8mb4_unicode_ci;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"ä»€ä¹ˆæ˜¯èŒƒå¼ï¼Ÿä»€ä¹ˆæ˜¯åèŒƒå¼ï¼Ÿ\"\u003e\u003ca href=\"#ä»€ä¹ˆæ˜¯èŒƒå¼ï¼Ÿä»€ä¹ˆæ˜¯åèŒƒå¼ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯èŒƒå¼ï¼Ÿä»€ä¹ˆæ˜¯åèŒƒå¼ï¼Ÿ\"\u003e\u003c/a\u003eä»€ä¹ˆæ˜¯èŒƒå¼ï¼Ÿä»€ä¹ˆæ˜¯åèŒƒå¼ï¼Ÿ\u003c/h3\u003e\u003cblockquote\u003e\n\u003cp\u003eä»€ä¹ˆæ˜¯èŒƒå¼ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eæ•°æ®åº“è§„èŒƒåŒ–ï¼Œåˆç§°â€œ\u003cstrong\u003eèŒƒå¼\u003c/strong\u003eâ€ï¼Œæ˜¯æ•°æ®åº“è®¾è®¡çš„æŒ‡å¯¼ç†è®ºã€‚\u003cstrong\u003eèŒƒå¼çš„ç›®æ ‡æ˜¯ï¼šä½¿æ•°æ®åº“ç»“æ„æ›´åˆç†ï¼Œæ¶ˆé™¤å­˜å‚¨å¼‚å¸¸ï¼Œä½¿æ•°æ®å†—ä½™å°½é‡å°ï¼Œå¢è¿›æ•°æ®çš„ä¸€è‡´æ€§\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eæ ¹æ®çº¦æŸç¨‹åº¦ä»ä½åˆ°é«˜æœ‰ï¼šç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ã€ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ã€ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰ã€å·´æ–¯-ç§‘å¾·èŒƒå¼ï¼ˆBCNFï¼‰ç­‰ç­‰ã€‚ç°ä»£æ•°æ®åº“è®¾è®¡ï¼Œä¸€èˆ¬æœ€å¤šæ»¡è¶³ 3NFâ€”â€”èŒƒå¼è¿‡é«˜ï¼Œè™½ç„¶å…·æœ‰å¯¹æ•°æ®å…³ç³»æ›´å¥½çš„çº¦æŸæ€§ï¼Œä½†ä¹Ÿå¯¼è‡´æ•°æ®å…³ç³»è¡¨å¢åŠ è€Œä»¤æ•°æ®åº“ IO æ›´ç¹å¿™ã€‚å› æ­¤ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæœ¬æ¥å¯ä»¥äº¤ç”±æ•°æ®åº“å¤„ç†çš„å…³ç³»çº¦æŸï¼Œå¾ˆå¤šéƒ½æ˜¯åœ¨æ•°æ®åº“ä½¿ç”¨ç¨‹åºä¸­å®Œæˆçš„ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/202311030715177.png\"/\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eä»€ä¹ˆæ˜¯ä¸‰å¤§èŒƒå¼ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eä¸‰å¤§èŒƒå¼ï¼Œä»ä½åˆ°é«˜ï¼Œä¾æ¬¡ä¸ºï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e1NF è¦æ±‚å±æ€§å…·æœ‰åŸå­æ€§ï¼Œä¸å¯å†åˆ†è§£ã€‚\u003c/li\u003e\n\u003cli\u003e2NF è¦æ±‚è®°å½•æœ‰å”¯ä¸€æ ‡è¯†ï¼Œå³å®ä½“çš„å”¯ä¸€æ€§ï¼Œå³\u003cstrong\u003eä¸å­˜åœ¨éƒ¨åˆ†ä¾èµ–\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003e3NF æ˜¯å¯¹å­—æ®µçš„\u003cstrong\u003eå†—ä½™æ€§\u003c/strong\u003eï¼Œè¦æ±‚ä»»ä½•å­—æ®µä¸èƒ½ç”±å…¶ä»–å­—æ®µæ´¾ç”Ÿå‡ºæ¥ï¼Œå®ƒè¦æ±‚å­—æ®µæ²¡æœ‰å†—ä½™ï¼Œå³\u003cstrong\u003eä¸å­˜åœ¨ä¼ é€’ä¾èµ–\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eç°ä»£æ•°æ®åº“è®¾è®¡ï¼Œä¸€èˆ¬æœ€å¤šæ»¡è¶³ 3NFâ€”â€”èŒƒå¼è¿‡é«˜ï¼Œè™½ç„¶å…·æœ‰å¯¹æ•°æ®å…³ç³»æ›´å¥½çš„çº¦æŸæ€§ï¼Œä½†ä¹Ÿå¯¼è‡´æ•°æ®å…³ç³»è¡¨å¢åŠ è€Œä»¤æ•°æ®åº“ IO æ›´ç¹å¿™ã€‚å› æ­¤ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæœ¬æ¥å¯ä»¥äº¤ç”±æ•°æ®åº“å¤„ç†çš„å…³ç³»çº¦æŸï¼Œå¾ˆå¤šéƒ½æ˜¯åœ¨æ•°æ®åº“ä½¿ç”¨ç¨‹åºä¸­å®Œæˆçš„ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eä»€ä¹ˆæ˜¯åèŒƒå¼ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eèŒƒå¼å’ŒåèŒƒå¼ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eèŒƒå¼ - æ¶ˆé™¤å†—ä½™\u003c/li\u003e\n\u003cli\u003eåèŒƒå¼ - é€‚å½“å†—ä½™æ•°æ®ï¼Œä»¥æé«˜æŸ¥è¯¢æ•ˆç‡â€”â€”ç©ºé—´æ¢æ—¶é—´\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"æ¶æ„\"\u003e\u003ca href=\"#æ¶æ„\" class=\"headerlink\" title=\"æ¶æ„\"\u003e\u003c/a\u003eæ¶æ„\u003c/h2\u003e\u003ch3 id=\"ä¸€æ¡-SQL-æŸ¥è¯¢è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ\"\u003e\u003ca href=\"#ä¸€æ¡-SQL-æŸ¥è¯¢è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ\" class=\"headerlink\" title=\"ä¸€æ¡ SQL æŸ¥è¯¢è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ\"\u003e\u003c/a\u003eä¸€æ¡ SQL æŸ¥è¯¢è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ\u003c/h3\u003e\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/202311030712357.png\"/\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eè¿æ¥å™¨\u003c/strong\u003eï¼šè¿æ¥å™¨è´Ÿè´£è·Ÿå®¢æˆ·ç«¯å»ºç«‹è¿æ¥ã€è·å–æƒé™ã€ç»´æŒå’Œç®¡ç†è¿æ¥ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæŸ¥è¯¢ç¼“å­˜\u003c/strong\u003eï¼šå‘½ä¸­ç¼“å­˜ï¼Œåˆ™ç›´æ¥è¿”å›ç»“æœã€‚å¼Šå¤§äºåˆ©ï¼Œå› ä¸ºå¤±æ•ˆéå¸¸é¢‘ç¹â€”â€”ä»»ä½•æ›´æ–°éƒ½ä¼šæ¸…ç©ºæŸ¥è¯¢ç¼“å­˜ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eåˆ†æå™¨\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè¯æ³•åˆ†æ\u003c/strong\u003eï¼šè§£æ SQL å…³é”®å­—\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eè¯­æ³•åˆ†æ\u003c/strong\u003eï¼šç”Ÿæˆä¸€é¢—å¯¹åº”çš„è¯­æ³•è§£ææ ‘\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eä¼˜åŒ–å™¨\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003eæ ¹æ®è¯­æ³•æ ‘\u003cstrong\u003eç”Ÿæˆå¤šç§æ‰§è¡Œè®¡åˆ’\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç´¢å¼•é€‰æ‹©\u003c/strong\u003eï¼šæ ¹æ®ç­–ç•¥é€‰æ‹©æœ€ä¼˜æ–¹å¼\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ‰§è¡Œå™¨\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003eæ ¡éªŒè¯»å†™æƒé™\u003c/li\u003e\n\u003cli\u003eæ ¹æ®æ‰§è¡Œè®¡åˆ’ï¼Œè°ƒç”¨å­˜å‚¨å¼•æ“çš„ API æ¥æ‰§è¡ŒæŸ¥è¯¢\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå­˜å‚¨å¼•æ“\u003c/strong\u003eï¼šå­˜å‚¨æ•°æ®ï¼Œæä¾›è¯»å†™æ¥å£\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"ä¸€æ¡-SQL-æ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ\"\u003e\u003ca href=\"#ä¸€æ¡-SQL-æ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ\" class=\"headerlink\" title=\"ä¸€æ¡ SQL æ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ\"\u003e\u003c/a\u003eä¸€æ¡ SQL æ›´æ–°è¯­å¥æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ\u003c/h3\u003e\u003cp\u003eæ›´æ–°æµç¨‹å’ŒæŸ¥è¯¢çš„æµç¨‹å¤§è‡´ç›¸åŒï¼Œä¸åŒä¹‹å¤„åœ¨äºï¼šæ›´æ–°æµç¨‹è¿˜æ¶‰åŠä¸¤ä¸ªé‡è¦çš„æ—¥å¿—æ¨¡å—ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eredo logï¼ˆé‡åšæ—¥å¿—ï¼‰\u003cul\u003e\n\u003cli\u003eInnoDB å­˜å‚¨å¼•æ“ç‹¬æœ‰çš„æ—¥å¿—ï¼ˆç‰©ç†æ—¥å¿—ï¼‰\u003c/li\u003e\n\u003cli\u003eé‡‡ç”¨å¾ªç¯å†™å…¥\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003ebin logï¼ˆå½’æ¡£æ—¥å¿—ï¼‰\u003cul\u003e\n\u003cli\u003eMysql Server å±‚é€šç”¨æ—¥å¿—ï¼ˆé€»è¾‘æ—¥å¿—ï¼‰\u003c/li\u003e\n\u003cli\u003eé‡‡ç”¨è¿½åŠ å†™å…¥\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä¸ºäº†ä¿è¯ redo log å’Œ bin log çš„æ•°æ®ä¸€è‡´æ€§ï¼Œæ‰€ä»¥é‡‡ç”¨ä¸¤é˜¶æ®µæäº¤æ–¹å¼æ›´æ–°æ—¥å¿—ã€‚\u003c/p\u003e\n\u003ch3 id=\"ä¸€æ¡-SQL-æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåºæ˜¯æ€æ ·çš„ï¼Ÿ\"\u003e\u003ca href=\"#ä¸€æ¡-SQL-æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåºæ˜¯æ€æ ·çš„ï¼Ÿ\" class=\"headerlink\" title=\"ä¸€æ¡ SQL æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåºæ˜¯æ€æ ·çš„ï¼Ÿ\"\u003e\u003c/a\u003eä¸€æ¡ SQL æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåºæ˜¯æ€æ ·çš„ï¼Ÿ\u003c/h3\u003e\u003cp\u003eä¸€æ¡å®Œæ•´çš„ SELECT è¯­å¥å†…éƒ¨çš„æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eFROM\u003c/strong\u003e - å¯¹ FROM å­å¥ä¸­çš„å·¦è¡¨ \u003ccode\u003e\u0026lt;left_table\u0026gt;\u003c/code\u003e å’Œå³è¡¨ \u003ccode\u003e\u0026lt;right_table\u0026gt;\u003c/code\u003e æ‰§è¡Œç¬›å¡å„¿ç§¯ï¼ˆCartesianproductï¼‰ï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨ VT1\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eON\u003c/strong\u003e - å¯¹è™šæ‹Ÿè¡¨ VT1 åº”ç”¨ ON ç­›é€‰ï¼Œåªæœ‰é‚£äº›ç¬¦åˆ \u003ccode\u003e\u0026lt;join_condition\u0026gt;\u003c/code\u003e çš„è¡Œæ‰è¢«æ’å…¥è™šæ‹Ÿè¡¨ VT2 ä¸­\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eJOIN\u003c/strong\u003e - å¦‚æœæŒ‡å®šäº† OUTER JOINï¼ˆå¦‚ LEFT OUTER JOINã€RIGHT OUTER JOINï¼‰ï¼Œé‚£ä¹ˆä¿ç•™è¡¨ä¸­æœªåŒ¹é…çš„è¡Œä½œä¸ºå¤–éƒ¨è¡Œæ·»åŠ åˆ°è™šæ‹Ÿè¡¨ VT2 ä¸­ï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨ VT3ã€‚å¦‚æœ FROM å­å¥åŒ…å«ä¸¤ä¸ªä»¥ä¸Šè¡¨ï¼Œåˆ™å¯¹ä¸Šä¸€ä¸ªè¿æ¥ç”Ÿæˆçš„ç»“æœè¡¨ VT3 å’Œä¸‹ä¸€ä¸ªè¡¨é‡å¤æ‰§è¡Œæ­¥éª¤ 1ï¼‰ï½æ­¥éª¤ 3ï¼‰ï¼Œç›´åˆ°å¤„ç†å®Œæ‰€æœ‰çš„è¡¨ä¸ºæ­¢\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eWHERE\u003c/strong\u003e - å¯¹è™šæ‹Ÿè¡¨ VT3 åº”ç”¨ WHERE è¿‡æ»¤æ¡ä»¶ï¼Œåªæœ‰ç¬¦åˆ \u003ccode\u003e\u0026lt;where_condition\u0026gt;\u003c/code\u003e çš„è®°å½•æ‰è¢«æ’å…¥è™šæ‹Ÿè¡¨ VT4 ä¸­\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGROUP BY\u003c/strong\u003e - æ ¹æ® GROUP BY å­å¥ä¸­çš„åˆ—ï¼Œå¯¹ VT4 ä¸­çš„è®°å½•è¿›è¡Œåˆ†ç»„æ“ä½œï¼Œäº§ç”Ÿ VT5\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCUBE|ROLLUP\u003c/strong\u003e - å¯¹è¡¨ VT5 è¿›è¡Œ CUBE æˆ– ROLLUP æ“ä½œï¼Œäº§ç”Ÿè¡¨ VT6\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eHAVING\u003c/strong\u003e - å¯¹è™šæ‹Ÿè¡¨ VT6 åº”ç”¨ HAVING è¿‡æ»¤å™¨ï¼Œåªæœ‰ç¬¦åˆ \u003ccode\u003e\u0026lt;having_condition\u0026gt;\u003c/code\u003e çš„è®°å½•æ‰è¢«æ’å…¥è™šæ‹Ÿè¡¨ VT7 ä¸­ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSELECT\u003c/strong\u003e - ç¬¬äºŒæ¬¡æ‰§è¡Œ SELECT æ“ä½œï¼Œé€‰æ‹©æŒ‡å®šçš„åˆ—ï¼Œæ’å…¥åˆ°è™šæ‹Ÿè¡¨ VT8 ä¸­\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDISTINCT\u003c/strong\u003e - å»é™¤é‡å¤æ•°æ®ï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨ VT9\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eORDER BY\u003c/strong\u003e - å°†è™šæ‹Ÿè¡¨ VT9 ä¸­çš„è®°å½•æŒ‰ç…§ \u003ccode\u003e\u0026lt;order_by_list\u0026gt;\u003c/code\u003e è¿›è¡Œæ’åºæ“ä½œï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨ VT10ã€‚11ï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLIMIT\u003c/strong\u003e - å–å‡ºæŒ‡å®šè¡Œçš„è®°å½•ï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨ VT11ï¼Œå¹¶è¿”å›ç»™æŸ¥è¯¢ç”¨æˆ·\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"å­˜å‚¨å¼•æ“\"\u003e\u003ca href=\"#å­˜å‚¨å¼•æ“\" class=\"headerlink\" title=\"å­˜å‚¨å¼•æ“\"\u003e\u003c/a\u003eå­˜å‚¨å¼•æ“\u003c/h2\u003e\u003ch3 id=\"Mysql-æœ‰å“ªäº›å¸¸è§å­˜å‚¨å¼•æ“ï¼Ÿ\"\u003e\u003ca href=\"#Mysql-æœ‰å“ªäº›å¸¸è§å­˜å‚¨å¼•æ“ï¼Ÿ\" class=\"headerlink\" title=\"Mysql æœ‰å“ªäº›å¸¸è§å­˜å‚¨å¼•æ“ï¼Ÿ\"\u003e\u003c/a\u003eMysql æœ‰å“ªäº›å¸¸è§å­˜å‚¨å¼•æ“ï¼Ÿ\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eInnoDB\u003c/strong\u003e - Mysql çš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚æ”¯æŒäº‹åŠ¡ã€å¤–é”®ã€è¡¨çº§é”å’Œè¡Œçº§é”ã€è‡ªåŠ¨å´©æºƒæ¢å¤ã€‚ç´¢å¼•é‡‡ç”¨ B+ æ ‘èšç°‡ç´¢å¼•ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMyISAM\u003c/strong\u003e - Mysql 5.1 ç‰ˆæœ¬å‰çš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚ç‰¹æ€§ä¸°å¯Œï¼Œä½†ä¸æ”¯æŒäº‹åŠ¡ã€å¤–é”®ã€è¡Œçº§é”ã€è‡ªåŠ¨å´©æºƒæ¢å¤ã€‚ç´¢å¼•é‡‡ç”¨ B+ æ ‘éèšç°‡ç´¢å¼•ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMemory\u003c/strong\u003e - é€‚åˆå¿«é€Ÿè®¿é—®æ•°æ®ï¼Œä¸”æ•°æ®ä¸ä¼šè¢«ä¿®æ”¹ï¼Œé‡å¯ä¸¢å¤±ä¹Ÿæ²¡æœ‰å…³ç³»ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eArchive\u003c/strong\u003e - é€‚åˆå­˜å‚¨å½’æ¡£æ•°æ®ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eNDB\u003c/strong\u003e - ç”¨äº Mysql é›†ç¾¤åœºæ™¯ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCSV\u003c/strong\u003e - å¯ä»¥å°† CSV æ–‡ä»¶ä½œä¸º Mysql çš„è¡¨æ¥å¤„ç†ï¼Œä½†è¿™ç§è¡¨ä¸æ”¯æŒç´¢å¼•ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eMysql ä¸­åŒä¸€ä¸ªæ•°æ®åº“ä¸­çš„ä¸åŒè¡¨å¯ä»¥è®¾ç½®ä¸åŒçš„å­˜å‚¨å¼•æ“ã€‚\u003c/p\u003e\n\u003ch3 id=\"InnoDB-å’Œ-MyISAM-æœ‰å“ªäº›å·®å¼‚ï¼Ÿ\"\u003e\u003ca href=\"#InnoDB-å’Œ-MyISAM-æœ‰å“ªäº›å·®å¼‚ï¼Ÿ\" class=\"headerlink\" title=\"InnoDB å’Œ MyISAM æœ‰å“ªäº›å·®å¼‚ï¼Ÿ\"\u003e\u003c/a\u003eInnoDB å’Œ MyISAM æœ‰å“ªäº›å·®å¼‚ï¼Ÿ\u003c/h3\u003e\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eå¯¹æ¯”é¡¹\u003c/th\u003e\n\u003cth\u003eMyISAM\u003c/th\u003e\n\u003cth\u003eInnoDB\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003eä¸»å¤–é”®\u003c/td\u003e\n\u003ctd\u003eä¸æ”¯æŒ\u003c/td\u003e\n\u003ctd\u003eæ”¯æŒ\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eäº‹åŠ¡\u003c/td\u003e\n\u003ctd\u003eä¸æ”¯æŒ\u003c/td\u003e\n\u003ctd\u003eæ”¯æŒå››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eé”\u003c/td\u003e\n\u003ctd\u003eæ”¯æŒè¡¨çº§é”\u003c/td\u003e\n\u003ctd\u003eæ”¯æŒè¡¨çº§é”ã€è¡Œçº§é”\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eç´¢å¼•\u003c/td\u003e\n\u003ctd\u003eé‡‡ç”¨ B+ æ ‘ç´¢å¼•ï¼ˆéèšç°‡ç´¢å¼•ï¼‰\u003c/td\u003e\n\u003ctd\u003eé‡‡ç”¨ B+ æ ‘ç´¢å¼•ï¼ˆèšç°‡ç´¢å¼•ï¼‰\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eè¡¨ç©ºé—´\u003c/td\u003e\n\u003ctd\u003eå°\u003c/td\u003e\n\u003ctd\u003eå¤§\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eå…³æ³¨ç‚¹\u003c/td\u003e\n\u003ctd\u003eæ€§èƒ½\u003c/td\u003e\n\u003ctd\u003eäº‹åŠ¡\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eè®¡æ•°å™¨\u003c/td\u003e\n\u003ctd\u003eç»´æŠ¤äº†è®¡æ•°å™¨ï¼Œ\u003ccode\u003eSELECT COUNT(*)\u003c/code\u003e æ•ˆç‡ä¸º \u003ccode\u003eO(1)\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003eæ²¡æœ‰ç»´æŠ¤è®¡æ•°å™¨ï¼Œéœ€è¦å…¨è¡¨æ‰«æ\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eæ•…éšœæ¢å¤\u003c/td\u003e\n\u003ctd\u003eä¸æ”¯æŒ\u003c/td\u003e\n\u003ctd\u003eæ”¯æŒï¼ˆä¾èµ–äº redo logï¼‰\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003ch3 id=\"å¦‚ä½•é€‰æ‹©å­˜å‚¨å¼•æ“ï¼Ÿ\"\u003e\u003ca href=\"#å¦‚ä½•é€‰æ‹©å­˜å‚¨å¼•æ“ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•é€‰æ‹©å­˜å‚¨å¼•æ“ï¼Ÿ\"\u003e\u003c/a\u003eå¦‚ä½•é€‰æ‹©å­˜å‚¨å¼•æ“ï¼Ÿ\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003eå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨é»˜è®¤çš„ InnoDB å°±å¤Ÿäº†ã€‚å¦‚æœè¦æä¾›æäº¤ã€å›æ»šå’Œæ¢å¤çš„äº‹åŠ¡å®‰å…¨ï¼ˆACID å…¼å®¹ï¼‰èƒ½åŠ›ï¼Œå¹¶è¦æ±‚å®ç°å¹¶å‘æ§åˆ¶ï¼ŒInnoDB å°±æ˜¯æ¯”è¾ƒé å‰çš„é€‰æ‹©äº†ã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœæ•°æ®è¡¨ä¸»è¦ç”¨æ¥æ’å…¥å’ŒæŸ¥è¯¢è®°å½•ï¼Œåˆ™ MyISAM å¼•æ“æä¾›è¾ƒé«˜çš„å¤„ç†æ•ˆç‡ã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœåªæ˜¯ä¸´æ—¶å­˜æ”¾æ•°æ®ï¼Œæ•°æ®é‡ä¸å¤§ï¼Œå¹¶ä¸”ä¸éœ€è¦è¾ƒé«˜çš„æ•°æ®å®‰å…¨æ€§ï¼Œå¯ä»¥é€‰æ‹©å°†æ•°æ®ä¿å­˜åœ¨å†…å­˜çš„ MEMORY å¼•æ“ä¸­ï¼ŒMySQL ä¸­ä½¿ç”¨è¯¥å¼•æ“ä½œä¸ºä¸´æ—¶è¡¨ï¼Œå­˜æ”¾æŸ¥è¯¢çš„ä¸­é—´ç»“æœã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœå­˜å‚¨å½’æ¡£æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ ARCHIVE å¼•æ“ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä½¿ç”¨å“ªä¸€ç§å¼•æ“å¯ä»¥æ ¹æ®éœ€è¦çµæ´»é€‰æ‹©ï¼Œå› ä¸ºå­˜å‚¨å¼•æ“æ˜¯åŸºäºè¡¨çš„ï¼Œæ‰€ä»¥ä¸€ä¸ªæ•°æ®åº“ä¸­å¤šä¸ªè¡¨å¯ä»¥ä½¿ç”¨ä¸åŒçš„å¼•æ“ä»¥æ»¡è¶³å„ç§æ€§èƒ½å’Œå®é™…éœ€æ±‚ã€‚ä½¿ç”¨åˆé€‚çš„å­˜å‚¨å¼•æ“å°†ä¼šæé«˜æ•´ä¸ªæ•°æ®åº“çš„æ€§èƒ½ã€‚\u003c/p\u003e\n\u003ch2 id=\"æ—¥å¿—\"\u003e\u003ca href=\"#æ—¥å¿—\" class=\"headerlink\" title=\"æ—¥å¿—\"\u003e\u003c/a\u003eæ—¥å¿—\u003c/h2\u003e\u003ch3 id=\"MySQL-æœ‰å“ªäº›ç±»å‹çš„æ—¥å¿—ï¼Ÿ\"\u003e\u003ca href=\"#MySQL-æœ‰å“ªäº›ç±»å‹çš„æ—¥å¿—ï¼Ÿ\" class=\"headerlink\" title=\"MySQL æœ‰å“ªäº›ç±»å‹çš„æ—¥å¿—ï¼Ÿ\"\u003e\u003c/a\u003eMySQL æœ‰å“ªäº›ç±»å‹çš„æ—¥å¿—ï¼Ÿ\u003c/h3\u003e\u003cp\u003eMySQL æ—¥å¿—æ–‡ä»¶æœ‰å¾ˆå¤šï¼ŒåŒ…æ‹¬ ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eé”™è¯¯æ—¥å¿—\u003c/strong\u003eï¼ˆerror logï¼‰ï¼šé”™è¯¯æ—¥å¿—æ–‡ä»¶å¯¹ MySQL çš„å¯åŠ¨ã€è¿è¡Œã€å…³é—­è¿‡ç¨‹è¿›è¡Œäº†è®°å½•ï¼Œèƒ½å¸®åŠ©å®šä½ MySQL é—®é¢˜ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ…¢æŸ¥è¯¢æ—¥å¿—\u003c/strong\u003eï¼ˆslow query logï¼‰ï¼šæ…¢æŸ¥è¯¢æ—¥å¿—æ˜¯ç”¨æ¥è®°å½•æ‰§è¡Œæ—¶é—´è¶…è¿‡ long_query_time è¿™ä¸ªå˜é‡å®šä¹‰çš„æ—¶é•¿çš„æŸ¥è¯¢è¯­å¥ã€‚é€šè¿‡æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œå¯ä»¥æŸ¥æ‰¾å‡ºå“ªäº›æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œæ•ˆç‡å¾ˆä½ï¼Œä»¥ä¾¿è¿›è¡Œä¼˜åŒ–ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eä¸€èˆ¬æŸ¥è¯¢æ—¥å¿—\u003c/strong\u003eï¼ˆgeneral logï¼‰ï¼šä¸€èˆ¬æŸ¥è¯¢æ—¥å¿—è®°å½•äº†æ‰€æœ‰å¯¹ MySQL æ•°æ®åº“è¯·æ±‚çš„ä¿¡æ¯ï¼Œæ— è®ºè¯·æ±‚æ˜¯å¦æ­£ç¡®æ‰§è¡Œã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eäºŒè¿›åˆ¶æ—¥å¿—\u003c/strong\u003eï¼ˆbin logï¼‰ï¼šå…³äºäºŒè¿›åˆ¶æ—¥å¿—ï¼Œå®ƒè®°å½•äº†æ•°æ®åº“æ‰€æœ‰æ‰§è¡Œçš„ DDL å’Œ DML è¯­å¥ï¼ˆé™¤äº†æ•°æ®æŸ¥è¯¢è¯­å¥ selectã€show ç­‰ï¼‰ï¼Œä»¥äº‹ä»¶å½¢å¼è®°å½•å¹¶ä¿å­˜åœ¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eè¿˜æœ‰ä¸¤ä¸ª InnoDB å­˜å‚¨å¼•æ“ç‰¹æœ‰çš„æ—¥å¿—æ–‡ä»¶ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eé‡åšæ—¥å¿—\u003c/strong\u003eï¼ˆredo logï¼‰ï¼šé‡åšæ—¥å¿—è‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒä»¬è®°å½•äº†å¯¹äº InnoDB å­˜å‚¨å¼•æ“çš„äº‹åŠ¡æ—¥å¿—ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå›æ»šæ—¥å¿—\u003c/strong\u003eï¼ˆundo logï¼‰ï¼šå›æ»šæ—¥å¿—åŒæ ·ä¹Ÿæ˜¯ InnoDB å¼•æ“æä¾›çš„æ—¥å¿—ï¼Œé¡¾åæ€ä¹‰ï¼Œå›æ»šæ—¥å¿—çš„ä½œç”¨å°±æ˜¯å¯¹æ•°æ®è¿›è¡Œå›æ»šã€‚å½“äº‹åŠ¡å¯¹æ•°æ®åº“è¿›è¡Œä¿®æ”¹ï¼ŒInnoDB å¼•æ“ä¸ä»…ä¼šè®°å½• redo logï¼Œè¿˜ä¼šç”Ÿæˆå¯¹åº”çš„ undo log æ—¥å¿—ï¼›å¦‚æœäº‹åŠ¡æ‰§è¡Œå¤±è´¥æˆ–è°ƒç”¨äº† rollbackï¼Œå¯¼è‡´äº‹åŠ¡éœ€è¦å›æ»šï¼Œå°±å¯ä»¥åˆ©ç”¨ undo log ä¸­çš„ä¿¡æ¯å°†æ•°æ®å›æ»šåˆ°ä¿®æ”¹ä¹‹å‰çš„æ ·å­ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"bin-log-å’Œ-redo-log-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"\u003e\u003ca href=\"#bin-log-å’Œ-redo-log-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"bin log å’Œ redo log æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"\u003e\u003c/a\u003ebin log å’Œ redo log æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003ebin log ä¼šè®°å½•æ‰€æœ‰ä¸æ•°æ®åº“æœ‰å…³çš„æ—¥å¿—è®°å½•ï¼ŒåŒ…æ‹¬ InnoDBã€MyISAM ç­‰å­˜å‚¨å¼•æ“çš„æ—¥å¿—ï¼›è€Œ redo log åªè®° InnoDB å­˜å‚¨å¼•æ“çš„æ—¥å¿—ã€‚\u003c/li\u003e\n\u003cli\u003eè®°å½•çš„å†…å®¹ä¸åŒï¼Œbin log è®°å½•çš„æ˜¯å…³äºä¸€ä¸ªäº‹åŠ¡çš„å…·ä½“æ“ä½œå†…å®¹ï¼Œå³è¯¥æ—¥å¿—æ˜¯é€»è¾‘æ—¥å¿—ã€‚è€Œ redo log è®°å½•çš„æ˜¯å…³äºæ¯ä¸ªé¡µï¼ˆPageï¼‰çš„æ›´æ”¹çš„ç‰©ç†æƒ…å†µã€‚\u003c/li\u003e\n\u003cli\u003eå†™å…¥çš„æ—¶é—´ä¸åŒï¼Œbin log ä»…åœ¨äº‹åŠ¡æäº¤å‰è¿›è¡Œæäº¤ï¼Œä¹Ÿå°±æ˜¯åªå†™ç£ç›˜ä¸€æ¬¡ã€‚è€Œåœ¨äº‹åŠ¡è¿›è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå´ä¸æ–­æœ‰ redo ertry è¢«å†™å…¥ redo log ä¸­ã€‚\u003c/li\u003e\n\u003cli\u003eå†™å…¥çš„æ–¹å¼ä¹Ÿä¸ç›¸åŒï¼Œredo log æ˜¯å¾ªç¯å†™å…¥å’Œæ“¦é™¤ï¼Œbin log æ˜¯è¿½åŠ å†™å…¥ï¼Œä¸ä¼šè¦†ç›–å·²ç»å†™çš„æ–‡ä»¶ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"redo-log-å¦‚ä½•åˆ·ç›˜ï¼Ÿ\"\u003e\u003ca href=\"#redo-log-å¦‚ä½•åˆ·ç›˜ï¼Ÿ\" class=\"headerlink\" title=\"redo log å¦‚ä½•åˆ·ç›˜ï¼Ÿ\"\u003e\u003c/a\u003eredo log å¦‚ä½•åˆ·ç›˜ï¼Ÿ\u003c/h3\u003e\u003cp\u003eredo log çš„å†™å…¥ä¸æ˜¯ç›´æ¥è½åˆ°ç£ç›˜ï¼Œè€Œæ˜¯åœ¨å†…å­˜ä¸­è®¾ç½®äº†ä¸€ç‰‡ç§°ä¹‹ä¸º redo log buffer çš„è¿ç»­å†…å­˜ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯ redo æ—¥å¿—ç¼“å†²åŒºã€‚\u003c/p\u003e\n\u003cp\u003eåœ¨å¦‚ä¸‹çš„ä¸€äº›æƒ…å†µä¸­ï¼Œlog buffer çš„æ•°æ®ä¼šåˆ·å…¥ç£ç›˜ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003elog buffer ç©ºé—´ä¸è¶³æ—¶\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003elog buffer çš„å¤§å°æ˜¯æœ‰é™çš„ï¼Œå¦‚æœä¸åœçš„å¾€è¿™ä¸ªæœ‰é™å¤§å°çš„ log buffer é‡Œå¡å…¥æ—¥å¿—ï¼Œå¾ˆå¿«å®ƒå°±ä¼šè¢«å¡«æ»¡ã€‚å¦‚æœå½“å‰å†™å…¥ log buffer çš„ redo æ—¥å¿—é‡å·²ç»å æ»¡äº† log buffer æ€»å®¹é‡çš„å¤§çº¦\u003cstrong\u003eä¸€åŠ\u003c/strong\u003eå·¦å³ï¼Œå°±éœ€è¦æŠŠè¿™äº›æ—¥å¿—åˆ·æ–°åˆ°ç£ç›˜ä¸Šã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eäº‹åŠ¡æäº¤æ—¶\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eåœ¨äº‹åŠ¡æäº¤æ—¶ï¼Œä¸ºäº†ä¿è¯æŒä¹…æ€§ï¼Œä¼šæŠŠ log buffer ä¸­çš„æ—¥å¿—å…¨éƒ¨åˆ·åˆ°ç£ç›˜ã€‚æ³¨æ„ï¼Œè¿™æ—¶å€™ï¼Œé™¤äº†æœ¬äº‹åŠ¡çš„ï¼Œå¯èƒ½è¿˜ä¼šåˆ·å…¥å…¶å®ƒäº‹åŠ¡çš„æ—¥å¿—ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåå°çº¿ç¨‹è¾“å…¥\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæœ‰ä¸€ä¸ªåå°çº¿ç¨‹ï¼Œå¤§çº¦æ¯ç§’éƒ½ä¼šåˆ·æ–°ä¸€æ¬¡\u003ccode\u003elog buffer\u003c/code\u003eä¸­çš„\u003ccode\u003eredo log\u003c/code\u003eåˆ°ç£ç›˜ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæ­£å¸¸å…³é—­æœåŠ¡å™¨æ—¶\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eè§¦å‘ checkpoint è§„åˆ™\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eé‡åšæ—¥å¿—ç¼“å­˜ã€é‡åšæ—¥å¿—æ–‡ä»¶éƒ½æ˜¯ä»¥\u003cstrong\u003eå—ï¼ˆblockï¼‰**çš„æ–¹å¼è¿›è¡Œä¿å­˜çš„ï¼Œç§°ä¹‹ä¸º**é‡åšæ—¥å¿—å—ï¼ˆredo log blockï¼‰\u003c/strong\u003e,å—çš„å¤§å°æ˜¯å›ºå®šçš„ 512 å­—èŠ‚ã€‚æˆ‘ä»¬çš„ redo log å®ƒæ˜¯å›ºå®šå¤§å°çš„ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„ \u003cstrong\u003elog group\u003c/strong\u003eï¼Œç”±ä¸€å®šæ•°é‡çš„\u003cstrong\u003elog block\u003c/strong\u003e ç»„æˆã€‚\u003c/p\u003e\n\u003cp\u003eå®ƒçš„å†™å…¥æ–¹å¼æ˜¯ä»å¤´åˆ°å°¾å¼€å§‹å†™ï¼Œå†™åˆ°æœ«å°¾åˆå›åˆ°å¼€å¤´å¾ªç¯å†™ã€‚\u003c/p\u003e\n\u003cp\u003eå…¶ä¸­æœ‰ä¸¤ä¸ªæ ‡è®°ä½ç½®ï¼š\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ewrite pos\u003c/code\u003eæ˜¯å½“å‰è®°å½•çš„ä½ç½®ï¼Œä¸€è¾¹å†™ä¸€è¾¹åç§»ï¼Œå†™åˆ°ç¬¬ 3 å·æ–‡ä»¶æœ«å°¾åå°±å›åˆ° 0 å·æ–‡ä»¶å¼€å¤´ã€‚\u003ccode\u003echeckpoint\u003c/code\u003eæ˜¯å½“å‰è¦æ“¦é™¤çš„ä½ç½®ï¼Œä¹Ÿæ˜¯å¾€åæ¨ç§»å¹¶ä¸”å¾ªç¯çš„ï¼Œæ“¦é™¤è®°å½•å‰è¦æŠŠè®°å½•æ›´æ–°åˆ°ç£ç›˜ã€‚\u003c/p\u003e\n\u003cp\u003eå½“\u003ccode\u003ewrite_pos\u003c/code\u003eè¿½ä¸Š\u003ccode\u003echeckpoint\u003c/code\u003eæ—¶ï¼Œè¡¨ç¤º redo log æ—¥å¿—å·²ç»å†™æ»¡ã€‚è¿™æ—¶å€™å°±ä¸èƒ½æ¥ç€å¾€é‡Œå†™æ•°æ®äº†ï¼Œéœ€è¦æ‰§è¡Œ\u003ccode\u003echeckpoint\u003c/code\u003eè§„åˆ™è…¾å‡ºå¯å†™ç©ºé—´ã€‚\u003c/p\u003e\n\u003cp\u003eæ‰€è°“çš„\u003cstrong\u003echeckpoint è§„åˆ™\u003c/strong\u003eï¼Œå°±æ˜¯ checkpoint è§¦å‘åï¼Œå°† buffer ä¸­æ—¥å¿—é¡µéƒ½åˆ·åˆ°ç£ç›˜ã€‚\u003c/p\u003e\n\u003ch3 id=\"æ—¥å¿—ä¸ºä»€ä¹ˆè¦ä¸¤é˜¶æ®µæäº¤ï¼Ÿ\"\u003e\u003ca href=\"#æ—¥å¿—ä¸ºä»€ä¹ˆè¦ä¸¤é˜¶æ®µæäº¤ï¼Ÿ\" class=\"headerlink\" title=\"æ—¥å¿—ä¸ºä»€ä¹ˆè¦ä¸¤é˜¶æ®µæäº¤ï¼Ÿ\"\u003e\u003c/a\u003eæ—¥å¿—ä¸ºä»€ä¹ˆè¦ä¸¤é˜¶æ®µæäº¤ï¼Ÿ\u003c/h3\u003e\u003ch2 id=\"ç´¢å¼•\"\u003e\u003ca href=\"#ç´¢å¼•\" class=\"headerlink\" title=\"ç´¢å¼•\"\u003e\u003c/a\u003eç´¢å¼•\u003c/h2\u003e\u003ch3 id=\"ä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç´¢å¼•ï¼Ÿ\"\u003e\u003ca href=\"#ä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç´¢å¼•ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç´¢å¼•ï¼Ÿ\"\u003e\u003c/a\u003eä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç´¢å¼•ï¼Ÿ\u003c/h3\u003e\u003cp\u003e\u003cstrong\u003eâ€œç´¢å¼•â€æ˜¯æ•°æ®åº“ä¸ºäº†æé«˜æŸ¥æ‰¾æ•ˆç‡çš„ä¸€ç§æ•°æ®ç»“æ„\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eæ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ£€ç´¢ç›®å½•ï¼Œæ¥å¿«é€Ÿå®šä½ä¹¦æœ¬ä¸­çš„å†…å®¹ã€‚ç´¢å¼•å’Œæ•°æ®è¡¨ï¼Œå°±å¥½æ¯”ç›®å½•å’Œä¹¦ï¼Œæƒ³è¦é«˜æ•ˆæŸ¥è¯¢æ•°æ®è¡¨ï¼Œç´¢å¼•è‡³å…³é‡è¦ã€‚åœ¨æ•°æ®é‡å°ä¸”è´Ÿè½½è¾ƒä½æ—¶ï¼Œä¸æ°å½“çš„ç´¢å¼•å¯¹äºæ€§èƒ½çš„å½±å“å¯èƒ½è¿˜ä¸æ˜æ˜¾ï¼›ä½†éšç€æ•°æ®é‡é€æ¸å¢å¤§ï¼Œæ€§èƒ½åˆ™ä¼šæ€¥å‰§ä¸‹é™ã€‚å› æ­¤ï¼Œ\u003cstrong\u003eè®¾ç½®åˆç†çš„ç´¢å¼•æ˜¯æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–çš„æœ€æœ‰æ•ˆæ‰‹æ®µ\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003ch3 id=\"ç´¢å¼•çš„ä¼˜ç‚¹å’Œç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\"\u003e\u003ca href=\"#ç´¢å¼•çš„ä¼˜ç‚¹å’Œç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"ç´¢å¼•çš„ä¼˜ç‚¹å’Œç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\"\u003e\u003c/a\u003eç´¢å¼•çš„ä¼˜ç‚¹å’Œç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\u003c/h3\u003e\u003cp\u003eâœ”ï¸ï¸ï¸ï¸ï¸ï¸ï¸ ç´¢å¼•çš„ä¼˜ç‚¹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eç´¢å¼•å¤§å¤§å‡å°‘äº†æœåŠ¡å™¨éœ€è¦æ‰«æçš„æ•°æ®é‡\u003c/strong\u003eï¼Œä»è€ŒåŠ å¿«æ£€ç´¢é€Ÿåº¦ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç´¢å¼•å¯ä»¥å¸®åŠ©æœåŠ¡å™¨é¿å…æ’åºå’Œä¸´æ—¶è¡¨\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç´¢å¼•å¯ä»¥å°†éšæœº I/O å˜ä¸ºé¡ºåº I/O\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003eæ”¯æŒè¡Œçº§é”çš„æ•°æ®åº“ï¼Œå¦‚ InnoDB ä¼šåœ¨è®¿é—®è¡Œçš„æ—¶å€™åŠ é”ã€‚\u003cstrong\u003eä½¿ç”¨ç´¢å¼•å¯ä»¥å‡å°‘è®¿é—®çš„è¡Œæ•°ï¼Œä»è€Œå‡å°‘é”çš„ç«äº‰ï¼Œæé«˜å¹¶å‘\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003eå”¯ä¸€ç´¢å¼•å¯ä»¥ç¡®ä¿æ¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ€§ï¼Œé€šè¿‡ä½¿ç”¨ç´¢å¼•ï¼Œå¯ä»¥åœ¨æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­ä½¿ç”¨ä¼˜åŒ–éšè—å™¨ï¼Œæé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eâŒ ç´¢å¼•çš„ç¼ºç‚¹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eåˆ›å»ºå’Œç»´æŠ¤ç´¢å¼•è¦è€—è´¹æ—¶é—´\u003c/strong\u003eï¼Œè¿™ä¼šéšç€æ•°æ®é‡çš„å¢åŠ è€Œå¢åŠ ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç´¢å¼•éœ€è¦å ç”¨é¢å¤–çš„ç‰©ç†ç©ºé—´\u003c/strong\u003eï¼Œé™¤äº†æ•°æ®è¡¨å æ•°æ®ç©ºé—´ä¹‹å¤–ï¼Œæ¯ä¸€ä¸ªç´¢å¼•è¿˜è¦å ä¸€å®šçš„ç‰©ç†ç©ºé—´ï¼Œå¦‚æœè¦å»ºç«‹ç»„åˆç´¢å¼•é‚£ä¹ˆéœ€è¦çš„ç©ºé—´å°±ä¼šæ›´å¤§ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå†™æ“ä½œï¼ˆ\u003ccode\u003eINSERT\u003c/code\u003e/\u003ccode\u003eUPDATE\u003c/code\u003e/\u003ccode\u003eDELETE\u003c/code\u003eï¼‰æ—¶å¾ˆå¯èƒ½éœ€è¦æ›´æ–°ç´¢å¼•ï¼Œå¯¼è‡´æ•°æ®åº“çš„å†™æ“ä½œæ€§èƒ½é™ä½\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eåŸºäºä»¥ä¸Šï¼Œå¯ä»¥å½’çº³å‡ºç´¢å¼•çš„åŸºæœ¬ä½¿ç”¨è§„åˆ™ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eç´¢å¼•ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œä¸è¦ä¸ºæ‰€æœ‰åˆ—éƒ½åˆ›å»ºç´¢å¼•\u003c/li\u003e\n\u003cli\u003eè¦å°½é‡é¿å…å†—ä½™å’Œé‡å¤ç´¢å¼•\u003c/li\u003e\n\u003cli\u003eè¦è€ƒè™‘åˆ é™¤æœªä½¿ç”¨çš„ç´¢å¼•\u003c/li\u003e\n\u003cli\u003eå°½é‡çš„æ‰©å±•ç´¢å¼•ï¼Œä¸è¦æ–°å»ºç´¢å¼•\u003c/li\u003e\n\u003cli\u003eé¢‘ç¹ä½œä¸º \u003ccode\u003eWHERE\u003c/code\u003e è¿‡æ»¤æ¡ä»¶çš„åˆ—åº”è¯¥è€ƒè™‘æ·»åŠ ç´¢å¼•\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ä½•æ—¶é€‚ç”¨ç´¢å¼•ï¼Ÿä½•æ—¶ä¸é€‚ç”¨ç´¢å¼•ï¼Ÿ\"\u003e\u003ca href=\"#ä½•æ—¶é€‚ç”¨ç´¢å¼•ï¼Ÿä½•æ—¶ä¸é€‚ç”¨ç´¢å¼•ï¼Ÿ\" class=\"headerlink\" title=\"ä½•æ—¶é€‚ç”¨ç´¢å¼•ï¼Ÿä½•æ—¶ä¸é€‚ç”¨ç´¢å¼•ï¼Ÿ\"\u003e\u003c/a\u003eä½•æ—¶é€‚ç”¨ç´¢å¼•ï¼Ÿä½•æ—¶ä¸é€‚ç”¨ç´¢å¼•ï¼Ÿ\u003c/h3\u003e\u003cp\u003eâœ”ï¸ï¸ï¸ï¸ ä»€ä¹ˆæƒ…å†µ\u003cstrong\u003eé€‚ç”¨\u003c/strong\u003eç´¢å¼•ï¼Ÿ\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eå­—æ®µçš„æ•°å€¼æœ‰å”¯ä¸€æ€§çš„é™åˆ¶\u003c/strong\u003eï¼Œå¦‚ç”¨æˆ·åã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eé¢‘ç¹ä½œä¸º \u003ccode\u003eWHERE\u003c/code\u003e æ¡ä»¶æˆ– \u003ccode\u003eJOIN\u003c/code\u003e æ¡ä»¶çš„å­—æ®µï¼Œå°¤å…¶åœ¨æ•°æ®è¡¨å¤§çš„æƒ…å†µä¸‹\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eé¢‘ç¹ç”¨äº \u003ccode\u003eGROUP BY\u003c/code\u003e æˆ– \u003ccode\u003eORDER BY\u003c/code\u003e çš„å­—æ®µ\u003c/strong\u003eã€‚å°†è¯¥å­—æ®µä½œä¸ºç´¢å¼•ï¼ŒæŸ¥è¯¢æ—¶å°±æ— éœ€å†æ’åºäº†ï¼Œå› ä¸º B+ æ ‘æœ¬èº«å°±æ˜¯æŒ‰åºå­˜å‚¨çš„ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDISTINCT å­—æ®µéœ€è¦åˆ›å»ºç´¢å¼•\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eâŒ ä»€ä¹ˆæƒ…å†µ\u003cstrong\u003eä¸é€‚ç”¨\u003c/strong\u003eç´¢å¼•ï¼Ÿ\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eé¢‘ç¹å†™æ“ä½œ\u003c/strong\u003eï¼ˆ \u003ccode\u003eINSERT\u003c/code\u003e/\u003ccode\u003eUPDATE\u003c/code\u003e/\u003ccode\u003eDELETE\u003c/code\u003e ï¼‰ï¼Œä¹Ÿå°±æ„å‘³ç€éœ€è¦æ›´æ–°ç´¢å¼•ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå¾ˆå°‘ä½œä¸º \u003ccode\u003eWHERE\u003c/code\u003e æ¡ä»¶æˆ– \u003ccode\u003eJOIN\u003c/code\u003e æ¡ä»¶çš„å­—æ®µ\u003c/strong\u003eï¼Œä¹Ÿå°±æ„å‘³ç€ç´¢å¼•ä¼šç»å¸¸æ— æ³•å‘½ä¸­ï¼Œæ²¡æœ‰æ„ä¹‰ï¼Œè¿˜å¢åŠ ç©ºé—´å¼€é”€ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eéå¸¸å°çš„è¡¨\u003c/strong\u003eï¼Œå¯¹äºéå¸¸å°çš„è¡¨ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ç®€å•çš„å…¨è¡¨æ‰«ææ›´é«˜æ•ˆã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eç‰¹å¤§å‹çš„è¡¨\u003c/strong\u003eï¼Œå»ºç«‹å’Œä½¿ç”¨ç´¢å¼•çš„ä»£ä»·å°†éšä¹‹å¢é•¿ã€‚å¯ä»¥è€ƒè™‘ä½¿ç”¨åˆ†åŒºæŠ€æœ¯æˆ– Nosqlã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ç´¢å¼•å¦‚ä½•åˆ†ç±»ï¼Ÿ\"\u003e\u003ca href=\"#ç´¢å¼•å¦‚ä½•åˆ†ç±»ï¼Ÿ\" class=\"headerlink\" title=\"ç´¢å¼•å¦‚ä½•åˆ†ç±»ï¼Ÿ\"\u003e\u003c/a\u003eç´¢å¼•å¦‚ä½•åˆ†ç±»ï¼Ÿ\u003c/h3\u003e\u003cp\u003eç´¢å¼•å¯ä»¥ä»ä¸åŒç»´åº¦æ¥åˆ†ç±»ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæ•°æ®ç»“æ„\u003cul\u003e\n\u003cli\u003eB+tree ç´¢å¼•\u003c/li\u003e\n\u003cli\u003eHash ç´¢å¼•\u003c/li\u003e\n\u003cli\u003eFull-text ç´¢å¼•\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eç‰©ç†å­˜å‚¨\u003cul\u003e\n\u003cli\u003eèšç°‡ç´¢å¼•ï¼ˆä¸»é”®ç´¢å¼•ï¼‰\u003c/li\u003e\n\u003cli\u003eäºŒçº§ç´¢å¼•ï¼ˆè¾…åŠ©ç´¢å¼•ï¼‰\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eå­—æ®µç‰¹æ€§\u003cul\u003e\n\u003cli\u003eä¸»é”®ç´¢å¼•ï¼ˆ\u003ccode\u003ePRIMARY\u003c/code\u003eï¼‰\u003c/li\u003e\n\u003cli\u003eå”¯ä¸€ç´¢å¼•ï¼ˆ\u003ccode\u003eUNIQUE\u003c/code\u003eï¼‰\u003c/li\u003e\n\u003cli\u003eæ™®é€šç´¢å¼•ï¼ˆ\u003ccode\u003eINDEX\u003c/code\u003eï¼‰\u003c/li\u003e\n\u003cli\u003eå‰ç¼€ç´¢å¼•\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eå­—æ®µä¸ªæ•°\u003cul\u003e\n\u003cli\u003eå•åˆ—ç´¢å¼•\u003c/li\u003e\n\u003cli\u003eè”åˆç´¢å¼•\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ç´¢å¼•æœ‰å“ªäº›å¸¸è§æ•°æ®ç»“æ„ï¼Ÿ\"\u003e\u003ca href=\"#ç´¢å¼•æœ‰å“ªäº›å¸¸è§æ•°æ®ç»“æ„ï¼Ÿ\" class=\"headerlink\" title=\"ç´¢å¼•æœ‰å“ªäº›å¸¸è§æ•°æ®ç»“æ„ï¼Ÿ\"\u003e\u003c/a\u003eç´¢å¼•æœ‰å“ªäº›å¸¸è§æ•°æ®ç»“æ„ï¼Ÿ\u003c/h3\u003e\u003cp\u003eåœ¨ Mysql ä¸­ï¼Œ\u003cstrong\u003eç´¢å¼•æ˜¯åœ¨å­˜å‚¨å¼•æ“å±‚è€Œä¸æ˜¯æœåŠ¡å™¨å±‚å®ç°çš„\u003c/strong\u003eï¼Œæ‰€ä»¥ï¼Œå¹¶æ²¡æœ‰ç»Ÿä¸€çš„ç´¢å¼•æ ‡å‡†ã€‚ä¸åŒå­˜å‚¨å¼•æ“çš„ç´¢å¼•çš„æ•°æ®ç»“æ„ä¹Ÿä¸ç›¸åŒã€‚ä¸‹é¢æ˜¯ Mysql å¸¸ç”¨å­˜å‚¨å¼•æ“å¯¹ä¸€äº›ä¸»è¦ç´¢å¼•æ•°æ®ç»“æ„çš„æ”¯æŒï¼š\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eç´¢å¼•æ•°æ®ç»“æ„/å­˜å‚¨å¼•æ“\u003c/th\u003e\n\u003cth\u003eInnoDB å¼•æ“\u003c/th\u003e\n\u003cth\u003eMyISAM å¼•æ“\u003c/th\u003e\n\u003cth\u003eMemory å¼•æ“\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003e\u003cstrong\u003eB+ æ ‘ç´¢å¼•\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003eâœ”ï¸ï¸ï¸ï¸ï¸ï¸ï¸\u003c/td\u003e\n\u003ctd\u003eâœ”ï¸ï¸ï¸ï¸ï¸ï¸ï¸\u003c/td\u003e\n\u003ctd\u003eâœ”ï¸ï¸ï¸ï¸ï¸ï¸ï¸\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cstrong\u003eHash ç´¢å¼•\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003eâŒ\u003c/td\u003e\n\u003ctd\u003eâŒ\u003c/td\u003e\n\u003ctd\u003eâœ”ï¸ï¸ï¸ï¸ï¸ï¸ï¸\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cstrong\u003eFull Text ç´¢å¼•\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003eâœ”ï¸ï¸ï¸ï¸ï¸ï¸ï¸\u003c/td\u003e\n\u003ctd\u003eâœ”ï¸ï¸ï¸ï¸ï¸ï¸ï¸\u003c/td\u003e\n\u003ctd\u003eâŒ\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003eMysql ç´¢å¼•çš„å¸¸è§æ•°æ®ç»“æ„ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eå“ˆå¸Œç´¢å¼•\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003eå› ä¸ºç´¢å¼•æ•°æ®ç»“æ„ç´§å‡‘ï¼Œæ‰€ä»¥\u003cstrong\u003eæŸ¥è¯¢é€Ÿåº¦éå¸¸å¿«\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eåªæ”¯æŒç­‰å€¼æ¯”è¾ƒæŸ¥è¯¢\u003c/strong\u003e - åŒ…æ‹¬ \u003ccode\u003e=\u003c/code\u003eã€\u003ccode\u003eIN()\u003c/code\u003eã€\u003ccode\u003e\u0026lt;=\u0026gt;\u003c/code\u003eï¼›\u003cstrong\u003eä¸æ”¯æŒä»»ä½•èŒƒå›´æŸ¥è¯¢\u003c/strong\u003eï¼Œå¦‚ \u003ccode\u003eWHERE price \u0026gt; 100\u003c/code\u003eã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ— æ³•ç”¨äºæ’åº\u003c/strong\u003e - å› ä¸ºå“ˆå¸Œç´¢å¼•æ•°æ®ä¸æ˜¯æŒ‰ç…§ç´¢å¼•å€¼é¡ºåºå­˜å‚¨çš„ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eä¸æ”¯æŒéƒ¨åˆ†ç´¢å¼•åŒ¹é…æŸ¥æ‰¾\u003c/strong\u003e - å› ä¸ºå“ˆå¸Œç´¢å¼•æ—¶ä½¿ç”¨ç´¢å¼•åˆ—çš„å…¨éƒ¨å†…å®¹æ¥è¿›è¡Œå“ˆå¸Œè®¡ç®—çš„ã€‚å¦‚ï¼Œåœ¨æ•°æ®åˆ— (A,B) ä¸Šå»ºç«‹å“ˆå¸Œç´¢å¼•ï¼Œå¦‚æœæŸ¥è¯¢åªæœ‰æ•°æ®åˆ— Aï¼Œæ— æ³•ä½¿ç”¨è¯¥ç´¢å¼•ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eä¸èƒ½ç”¨ç´¢å¼•ä¸­çš„å€¼æ¥é¿å…è¯»å–è¡Œ\u003c/strong\u003e - å› ä¸ºå“ˆå¸Œç´¢å¼•åªåŒ…å«å“ˆå¸Œå€¼å’Œè¡ŒæŒ‡é’ˆï¼Œä¸å­˜å‚¨å­—æ®µï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨ç´¢å¼•ä¸­çš„å€¼æ¥é¿å…è¯»å–è¡Œã€‚ä¸è¿‡ï¼Œè®¿é—®å†…å­˜ä¸­çš„è¡Œçš„é€Ÿåº¦å¾ˆå¿«ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æƒ…å†µä¸‹è¿™ä¸€ç‚¹å¯¹æ€§èƒ½å½±å“ä¸å¤§ã€‚\u003c/li\u003e\n\u003cli\u003eå“ˆå¸Œç´¢å¼•æœ‰\u003cstrong\u003eå¯èƒ½å‡ºç°å“ˆå¸Œå†²çª\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003eå‡ºç°å“ˆå¸Œå†²çªæ—¶ï¼Œå¿…é¡»éå†é“¾è¡¨ä¸­æ‰€æœ‰çš„è¡ŒæŒ‡é’ˆï¼Œé€è¡Œæ¯”è¾ƒï¼Œç›´åˆ°æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„è¡Œã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœå“ˆå¸Œå†²çªå¤šçš„è¯ï¼Œç»´æŠ¤ç´¢å¼•çš„ä»£ä»·ä¼šå¾ˆé«˜ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eB æ ‘ç´¢å¼•\u003cul\u003e\n\u003cli\u003eé€‚ç”¨äº\u003cstrong\u003eå…¨é”®å€¼æŸ¥æ‰¾\u003c/strong\u003eã€\u003cstrong\u003eé”®å€¼èŒƒå›´æŸ¥æ‰¾\u003c/strong\u003eå’Œ\u003cstrong\u003eé”®å‰ç¼€æŸ¥æ‰¾\u003c/strong\u003eï¼Œå…¶ä¸­é”®å‰ç¼€æŸ¥æ‰¾åªé€‚ç”¨äºæœ€å·¦å‰ç¼€æŸ¥æ‰¾ã€‚\u003c/li\u003e\n\u003cli\u003eæ‰€æœ‰çš„å…³é”®å­—ï¼ˆå¯ä»¥ç†è§£ä¸ºæ•°æ®ï¼‰éƒ½å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ï¼Œéå¶å­èŠ‚ç‚¹å¹¶ä¸å­˜å‚¨çœŸæ­£çš„æ•°æ®ï¼Œæ‰€æœ‰è®°å½•èŠ‚ç‚¹éƒ½æ˜¯æŒ‰é”®å€¼å¤§å°é¡ºåºå­˜æ”¾åœ¨åŒä¸€å±‚å¶å­èŠ‚ç‚¹ä¸Šã€‚\u003c/li\u003e\n\u003cli\u003eæ‰€æœ‰çš„å¶å­èŠ‚ç‚¹ç”±æŒ‡é’ˆè¿æ¥ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ä¸ºä»€ä¹ˆ-InnoDB-ç´¢å¼•é‡‡ç”¨-B-æ ‘ï¼Ÿ\"\u003e\u003ca href=\"#ä¸ºä»€ä¹ˆ-InnoDB-ç´¢å¼•é‡‡ç”¨-B-æ ‘ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆ InnoDB ç´¢å¼•é‡‡ç”¨ B+ æ ‘ï¼Ÿ\"\u003e\u003c/a\u003eä¸ºä»€ä¹ˆ InnoDB ç´¢å¼•é‡‡ç”¨ B+ æ ‘ï¼Ÿ\u003c/h3\u003e\u003cblockquote\u003e\n\u003cp\u003eB+ æ ‘ vs B æ ‘\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003eB+ æ ‘åªåœ¨å¶å­èŠ‚ç‚¹å­˜å‚¨æ•°æ®ï¼Œè€Œ B æ ‘çš„éå¶å­èŠ‚ç‚¹ä¹Ÿè¦å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥ B+ æ ‘çš„å•ä¸ªèŠ‚ç‚¹çš„æ•°æ®é‡æ›´å°ï¼Œåœ¨ç›¸åŒçš„ç£ç›˜ I/O æ¬¡æ•°ä¸‹ï¼Œå°±èƒ½æŸ¥è¯¢æ›´å¤šçš„èŠ‚ç‚¹ã€‚\u003c/li\u003e\n\u003cli\u003eå¦å¤–ï¼ŒB+ æ ‘å¶å­èŠ‚ç‚¹é‡‡ç”¨çš„æ˜¯åŒé“¾è¡¨è¿æ¥ï¼Œé€‚åˆ MySQL ä¸­å¸¸è§çš„åŸºäºèŒƒå›´çš„é¡ºåºæŸ¥æ‰¾ï¼Œè€Œ B æ ‘æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eB+ æ ‘ vs äºŒå‰æ ‘\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003eå¯¹äºæœ‰ N ä¸ªå¶å­èŠ‚ç‚¹çš„ B+ æ ‘ï¼Œå…¶æœç´¢å¤æ‚åº¦ä¸º \u003ccode\u003eO(logdN)\u003c/code\u003eï¼Œå…¶ä¸­ d è¡¨ç¤ºèŠ‚ç‚¹å…è®¸çš„æœ€å¤§å­èŠ‚ç‚¹ä¸ªæ•°ä¸º d ä¸ªã€‚\u003c/li\u003e\n\u003cli\u003eåœ¨å®é™…çš„åº”ç”¨å½“ä¸­ï¼Œ d å€¼æ˜¯å¤§äº 100 çš„ï¼Œè¿™æ ·å°±ä¿è¯äº†ï¼Œå³ä½¿æ•°æ®è¾¾åˆ°åƒä¸‡çº§åˆ«æ—¶ï¼ŒB+ æ ‘çš„é«˜åº¦ä¾ç„¶ç»´æŒåœ¨ 1\u003cdel\u003e3 å±‚å·¦å³ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€æ¬¡æ•°æ®æŸ¥è¯¢æ“ä½œåªéœ€è¦åš 1\u003c/del\u003e3 æ¬¡çš„ç£ç›˜ I/O æ“ä½œå°±èƒ½æŸ¥è¯¢åˆ°ç›®æ ‡æ•°æ®ã€‚\u003c/li\u003e\n\u003cli\u003eè€ŒäºŒå‰æ ‘çš„æ¯ä¸ªçˆ¶èŠ‚ç‚¹çš„å„¿å­èŠ‚ç‚¹ä¸ªæ•°åªèƒ½æ˜¯ 2 ä¸ªï¼Œæ„å‘³ç€å…¶æœç´¢å¤æ‚åº¦ä¸º \u003ccode\u003eO(logN)\u003c/code\u003eï¼Œè¿™å·²ç»æ¯” B+ æ ‘é«˜å‡ºä¸å°‘ï¼Œå› æ­¤äºŒå‰æ ‘æ£€ç´¢åˆ°ç›®æ ‡æ•°æ®æ‰€ç»å†çš„ç£ç›˜ I/O æ¬¡æ•°è¦æ›´å¤šã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä¸€è¨€ä»¥è”½ä¹‹ï¼Œä½¿ç”¨ B+ æ ‘ï¼Œè€Œä¸æ˜¯äºŒå‰æ ‘ï¼Œæ˜¯ä¸ºäº†å‡å°‘æ ‘çš„é«˜åº¦ï¼Œä¹Ÿå°±æ˜¯ä¸ºäº†å‡å°‘ç£ç›˜ I/O æ¬¡æ•°ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eB+ æ ‘ç´¢å¼•å’Œ Hash ç´¢å¼•çš„å·®å¼‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eB+ æ ‘ç´¢å¼•æ”¯æŒèŒƒå›´æŸ¥è¯¢\u003c/strong\u003eï¼›Hash ç´¢å¼•ä¸æ”¯æŒã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eB+ æ ‘ç´¢å¼•æ”¯æŒè”åˆç´¢å¼•çš„æœ€å·¦åŒ¹é…åŸåˆ™\u003c/strong\u003eï¼›Hash ç´¢å¼•ä¸æ”¯æŒã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eB+ æ ‘ç´¢å¼•æ”¯æŒæ’åº\u003c/strong\u003eï¼›Hash ç´¢å¼•ä¸æ”¯æŒã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eB+ æ ‘ç´¢å¼•æ”¯æŒæ¨¡ç³ŠæŸ¥è¯¢\u003c/strong\u003eï¼›Hash ç´¢å¼•ä¸æ”¯æŒã€‚\u003c/li\u003e\n\u003cli\u003eHash ç´¢å¼•çš„ç­‰å€¼æŸ¥è¯¢æ¯” B+ æ ‘ç´¢å¼•æ•ˆç‡é«˜ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eç»¼ä¸Šï¼ŒHash ç´¢å¼•çš„åº”ç”¨åœºæ™¯å¾ˆè‹›åˆ»ï¼Œä¸é€‚ç”¨äºç»å¤§å¤šæ•°åœºæ™¯ã€‚\u003c/p\u003e\n\u003ch3 id=\"èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"\u003e\u003ca href=\"#èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"\u003e\u003c/a\u003eèšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\u003c/h3\u003e\u003cp\u003eæ ¹æ®å¶å­èŠ‚ç‚¹çš„å†…å®¹ï¼Œç´¢å¼•ç±»å‹åˆ†ä¸ºä¸»é”®ç´¢å¼•å’Œéä¸»é”®ç´¢å¼•ã€‚\u003c/p\u003e\n\u003cp\u003eä¸»é”®ç´¢å¼•åˆè¢«ç§°ä¸º\u003cstrong\u003eâ€œèšç°‡ç´¢å¼•ï¼ˆclustered indexï¼‰â€ï¼Œå…¶å¶å­èŠ‚ç‚¹å­˜çš„æ˜¯æ•´è¡Œæ•°æ®\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eèšç°‡è¡¨ç¤ºæ•°æ®è¡Œå’Œç›¸é‚»çš„é”®å€¼ç´§å‡‘åœ°å­˜å‚¨åœ¨ä¸€èµ·ï¼Œå› ä¸ºæ•°æ®ç´§å‡‘ï¼Œæ‰€ä»¥è®¿é—®å¿«ã€‚\u003c/li\u003e\n\u003cli\u003eå› ä¸ºæ— æ³•åŒæ—¶æŠŠæ•°æ®è¡Œå­˜æ”¾åœ¨ä¸¤ä¸ªä¸åŒçš„åœ°æ–¹ï¼Œæ‰€ä»¥\u003cstrong\u003eä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003eInnoDB çš„èšç°‡ç´¢å¼•å®é™…æ˜¯åœ¨åŒä¸€ä¸ªç»“æ„ä¸­ä¿å­˜äº† B æ ‘çš„ç´¢å¼•å’Œæ•°æ®è¡Œã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eéä¸»é”®ç´¢å¼•åˆè¢«ç§°ä¸º\u003cstrong\u003eâ€œäºŒçº§ç´¢å¼•ï¼ˆsecondary indexï¼‰â€ï¼Œå…¶å¶å­èŠ‚ç‚¹å­˜çš„æ˜¯ä¸»é”®çš„å€¼\u003c/strong\u003eã€‚æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªä½ç½®ï¼Œç´¢å¼•å­˜å‚¨åœ¨å¦ä¸€ä¸ªä½ç½®ï¼Œç´¢å¼•ä¸­åŒ…å«æŒ‡å‘æ•°æ®å­˜å‚¨ä½ç½®çš„æŒ‡é’ˆã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå¦‚æœè¯­å¥æ˜¯ \u003ccode\u003eselect * from T where ID=500\u003c/code\u003eï¼Œå³èšç°‡ç´¢å¼•æŸ¥è¯¢æ–¹å¼ï¼Œåˆ™åªéœ€è¦æœç´¢ä¸»é”®ç´¢å¼•æ ‘ï¼›\u003c/li\u003e\n\u003cli\u003eå¦‚æœè¯­å¥æ˜¯ \u003ccode\u003eselect * from T where k=5\u003c/code\u003eï¼Œå³éèšç°‡ç´¢å¼•æŸ¥è¯¢æ–¹å¼ï¼Œåˆ™éœ€è¦å…ˆæœç´¢ k ç´¢å¼•æ ‘ï¼Œå¾—åˆ° ID çš„å€¼ä¸º 500ï¼Œå†åˆ° ID ç´¢å¼•æ ‘æœç´¢ä¸€æ¬¡ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸º\u003cstrong\u003eå›è¡¨\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä¹Ÿå°±æ˜¯è¯´ï¼Œ\u003cstrong\u003eåŸºäºéèšç°‡ç´¢å¼•çš„æŸ¥è¯¢éœ€è¦å¤šæ‰«æä¸€æ£µç´¢å¼•æ ‘\u003c/strong\u003eã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨åº”ç”¨ä¸­åº”è¯¥å°½é‡ä½¿ç”¨ä¸»é”®æŸ¥è¯¢ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eæ˜¾ç„¶ï¼Œä¸»é”®é•¿åº¦è¶Šå°ï¼Œéèšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å°±è¶Šå°ï¼Œéèšç°‡ç´¢å¼•å ç”¨çš„ç©ºé—´ä¹Ÿå°±è¶Šå°ã€‚\u003c/strong\u003e\u003c/p\u003e\n\u003ch3 id=\"ç´¢å¼•æœ‰å“ªäº›ä¼˜åŒ–ç­–ç•¥ï¼Ÿ\"\u003e\u003ca href=\"#ç´¢å¼•æœ‰å“ªäº›ä¼˜åŒ–ç­–ç•¥ï¼Ÿ\" class=\"headerlink\" title=\"ç´¢å¼•æœ‰å“ªäº›ä¼˜åŒ–ç­–ç•¥ï¼Ÿ\"\u003e\u003c/a\u003eç´¢å¼•æœ‰å“ªäº›ä¼˜åŒ–ç­–ç•¥ï¼Ÿ\u003c/h3\u003e\u003ch4 id=\"ç´¢å¼•åŸºæœ¬åŸåˆ™\"\u003e\u003ca href=\"#ç´¢å¼•åŸºæœ¬åŸåˆ™\" class=\"headerlink\" title=\"ç´¢å¼•åŸºæœ¬åŸåˆ™\"\u003e\u003c/a\u003eç´¢å¼•åŸºæœ¬åŸåˆ™\u003c/h4\u003e\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eç´¢å¼•ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œä¸è¦ä¸ºæ‰€æœ‰åˆ—éƒ½åˆ›å»ºç´¢å¼•\u003c/strong\u003eã€‚è¦è€ƒè™‘åˆ°ç´¢å¼•çš„ç»´æŠ¤ä»£ä»·ã€ç©ºé—´å ç”¨å’ŒæŸ¥è¯¢æ—¶å›è¡¨çš„ä»£ä»·ã€‚ç´¢å¼•ä¸€å®šæ˜¯æŒ‰éœ€åˆ›å»ºçš„ï¼Œå¹¶ä¸”è¦å°½å¯èƒ½ç¡®ä¿è¶³å¤Ÿè½»é‡ã€‚ä¸€æ—¦åˆ›å»ºäº†å¤šå­—æ®µçš„è”åˆç´¢å¼•ï¼Œæˆ‘ä»¬è¦è€ƒè™‘å°½å¯èƒ½åˆ©ç”¨ç´¢å¼•æœ¬èº«å®Œæˆæ•°æ®æŸ¥è¯¢ï¼Œå‡å°‘å›è¡¨çš„æˆæœ¬ã€‚\u003c/li\u003e\n\u003cli\u003eè¦\u003cstrong\u003eå°½é‡é¿å…å†—ä½™å’Œé‡å¤ç´¢å¼•\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003eè¦\u003cstrong\u003eè€ƒè™‘åˆ é™¤æœªä½¿ç”¨çš„ç´¢å¼•\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå°½é‡çš„æ‰©å±•ç´¢å¼•ï¼Œä¸è¦æ–°å»ºç´¢å¼•\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eé¢‘ç¹ä½œä¸º \u003ccode\u003eWHERE\u003c/code\u003e è¿‡æ»¤æ¡ä»¶çš„åˆ—åº”è¯¥è€ƒè™‘æ·»åŠ ç´¢å¼•\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"è¦†ç›–ç´¢å¼•\"\u003e\u003ca href=\"#è¦†ç›–ç´¢å¼•\" class=\"headerlink\" title=\"è¦†ç›–ç´¢å¼•\"\u003e\u003c/a\u003eè¦†ç›–ç´¢å¼•\u003c/h4\u003e\u003cp\u003e\u003cstrong\u003eè¦†ç›–ç´¢å¼•æ˜¯æŒ‡ï¼šç´¢å¼•ä¸Šçš„ä¿¡æ¯è¶³å¤Ÿæ»¡è¶³æŸ¥è¯¢è¯·æ±‚ï¼Œä¸éœ€è¦å›è¡¨æŸ¥è¯¢æ•°æ®\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eç”±äºè¦†ç›–ç´¢å¼•å¯ä»¥å‡å°‘æ ‘çš„æœç´¢æ¬¡æ•°ï¼Œæ˜¾è‘—æå‡æŸ¥è¯¢æ€§èƒ½ï¼Œæ‰€ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003ch4 id=\"æœ€å·¦åŒ¹é…åŸåˆ™\"\u003e\u003ca href=\"#æœ€å·¦åŒ¹é…åŸåˆ™\" class=\"headerlink\" title=\"æœ€å·¦åŒ¹é…åŸåˆ™\"\u003e\u003c/a\u003eæœ€å·¦åŒ¹é…åŸåˆ™\u003c/h4\u003e\u003cp\u003e\u003cstrong\u003eè¿™é‡Œçš„æœ€å·¦å‰ç¼€ï¼Œå¯ä»¥æ˜¯è”åˆç´¢å¼•çš„æœ€å·¦ N ä¸ªå­—æ®µï¼Œä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ç´¢å¼•çš„æœ€å·¦ M ä¸ªå­—ç¬¦\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eå¦‚æœæ˜¯è”åˆç´¢å¼•ï¼Œé‚£ä¹ˆ key ä¹Ÿç”±å¤šä¸ªåˆ—ç»„æˆï¼ŒåŒæ—¶ï¼Œç´¢å¼•åªèƒ½ç”¨äºæŸ¥æ‰¾ key æ˜¯å¦\u003cstrong\u003eå­˜åœ¨ï¼ˆç›¸ç­‰ï¼‰\u003c/strong\u003eï¼Œé‡åˆ°èŒƒå›´æŸ¥è¯¢ (\u003ccode\u003e\u0026gt;\u003c/code\u003eã€\u003ccode\u003e\u0026lt;\u003c/code\u003eã€\u003ccode\u003eBETWEEN\u003c/code\u003eã€\u003ccode\u003eLIKE\u003c/code\u003e) å°±\u003cstrong\u003eä¸èƒ½è¿›ä¸€æ­¥åŒ¹é…\u003c/strong\u003eäº†ï¼Œåç»­é€€åŒ–ä¸ºçº¿æ€§æŸ¥æ‰¾ã€‚å› æ­¤ï¼Œ\u003cstrong\u003eåˆ—çš„æ’åˆ—é¡ºåºå†³å®šäº†å¯å‘½ä¸­ç´¢å¼•çš„åˆ—æ•°\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eåº”è¯¥å°†é€‰æ‹©æ€§é«˜çš„åˆ—æˆ–åŸºæ•°å¤§çš„åˆ—ä¼˜å…ˆæ’åœ¨å¤šåˆ—ç´¢å¼•æœ€å‰åˆ—\u003c/strong\u003eã€‚\u003cstrong\u003eâ€œç´¢å¼•çš„é€‰æ‹©æ€§â€æ˜¯æŒ‡ä¸é‡å¤çš„ç´¢å¼•å€¼å’Œè®°å½•æ€»æ•°çš„æ¯”å€¼\u003c/strong\u003eï¼Œé€‰æ‹©æ€§è¶Šé«˜ï¼ŒæŸ¥è¯¢æ•ˆç‡è¶Šé«˜ã€‚ä½†æœ‰æ—¶ï¼Œä¹Ÿéœ€è¦è€ƒè™‘ \u003ccode\u003eWHERE\u003c/code\u003e å­å¥ä¸­çš„æ’åºã€åˆ†ç»„å’ŒèŒƒå›´æ¡ä»¶ç­‰å› ç´ ï¼Œè¿™äº›å› ç´ ä¹Ÿä¼šå¯¹æŸ¥è¯¢æ€§èƒ½é€ æˆè¾ƒå¤§å½±å“ã€‚\u003c/p\u003e\n\u003ch4 id=\"å‰ç¼€ç´¢å¼•\"\u003e\u003ca href=\"#å‰ç¼€ç´¢å¼•\" class=\"headerlink\" title=\"å‰ç¼€ç´¢å¼•\"\u003e\u003c/a\u003eå‰ç¼€ç´¢å¼•\u003c/h4\u003e\u003cp\u003e\u003cstrong\u003eâ€œå‰ç¼€ç´¢å¼•â€æ˜¯æŒ‡ç´¢å¼•å¼€å§‹çš„éƒ¨åˆ†å­—ç¬¦\u003c/strong\u003eã€‚å¯¹äº \u003ccode\u003eBLOB\u003c/code\u003e/\u003ccode\u003eTEXT\u003c/code\u003e/\u003ccode\u003eVARCHAR\u003c/code\u003e è¿™ç§æ–‡æœ¬ç±»å‹çš„åˆ—ï¼Œå¿…é¡»ä½¿ç”¨å‰ç¼€ç´¢å¼•ï¼Œå› ä¸ºæ•°æ®åº“å¾€å¾€ä¸å…è®¸ç´¢å¼•è¿™äº›åˆ—çš„å®Œæ•´é•¿åº¦ã€‚\u003c/p\u003e\n\u003cp\u003eå‰ç¼€ç´¢å¼•çš„ä¼˜ç‚¹æ˜¯å¯ä»¥\u003cstrong\u003eå¤§å¤§èŠ‚çº¦ç´¢å¼•ç©ºé—´\u003c/strong\u003eï¼Œä»è€Œ\u003cstrong\u003eæé«˜ç´¢å¼•æ•ˆç‡\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eå‰ç¼€ç´¢å¼•çš„ç¼ºç‚¹æ˜¯\u003cstrong\u003eä¼šé™ä½ç´¢å¼•çš„åŒºåˆ†åº¦\u003c/strong\u003eã€‚æ­¤å¤–ï¼Œ**\u003ccode\u003eorder by\u003c/code\u003e æ— æ³•ä½¿ç”¨å‰ç¼€ç´¢å¼•ï¼Œæ— æ³•æŠŠå‰ç¼€ç´¢å¼•ç”¨ä½œè¦†ç›–ç´¢å¼•**ã€‚\u003c/p\u003e\n\u003ch4 id=\"ä½¿ç”¨ç´¢å¼•æ¥æ’åº\"\u003e\u003ca href=\"#ä½¿ç”¨ç´¢å¼•æ¥æ’åº\" class=\"headerlink\" title=\"ä½¿ç”¨ç´¢å¼•æ¥æ’åº\"\u003e\u003c/a\u003eä½¿ç”¨ç´¢å¼•æ¥æ’åº\u003c/h4\u003e\u003cp\u003eMysql æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥ç”Ÿæˆæ’åºç»“æœï¼šé€šè¿‡æ’åºæ“ä½œï¼›æˆ–è€…æŒ‰ç´¢å¼•é¡ºåºæ‰«æã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eç´¢å¼•æœ€å¥½æ—¢æ»¡è¶³æ’åºï¼Œåˆç”¨äºæŸ¥æ‰¾è¡Œ\u003c/strong\u003eã€‚è¿™æ ·ï¼Œå°±å¯ä»¥é€šè¿‡å‘½ä¸­è¦†ç›–ç´¢å¼•ç›´æ¥å°†ç»“æœæŸ¥å‡ºæ¥ï¼Œä¹Ÿå°±ä¸å†éœ€è¦æ’åºäº†ã€‚\u003c/p\u003e\n\u003cp\u003eè¿™æ ·æ•´ä¸ªæŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œæµç¨‹å°±å˜æˆäº†ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eä»ç´¢å¼• (city,name,age) æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³ city=â€™æ­å·â€™æ¡ä»¶çš„è®°å½•ï¼Œå–å‡ºå…¶ä¸­çš„ cityã€name å’Œ age è¿™ä¸‰ä¸ªå­—æ®µçš„å€¼ï¼Œä½œä¸ºç»“æœé›†çš„ä¸€éƒ¨åˆ†ç›´æ¥è¿”å›ï¼›\u003c/li\u003e\n\u003cli\u003eä»ç´¢å¼• (city,name,age) å–ä¸‹ä¸€ä¸ªè®°å½•ï¼ŒåŒæ ·å–å‡ºè¿™ä¸‰ä¸ªå­—æ®µçš„å€¼ï¼Œä½œä¸ºç»“æœé›†çš„ä¸€éƒ¨åˆ†ç›´æ¥è¿”å›ï¼›\u003c/li\u003e\n\u003cli\u003eé‡å¤æ‰§è¡Œæ­¥éª¤ 2ï¼Œç›´åˆ°æŸ¥åˆ°ç¬¬ 1000 æ¡è®°å½•ï¼Œæˆ–è€…æ˜¯ä¸æ»¡è¶³ city=â€™æ­å·â€™æ¡ä»¶æ—¶å¾ªç¯ç»“æŸã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch4 id=\"å’Œ-in-å¯ä»¥ä¹±åº\"\u003e\u003ca href=\"#å’Œ-in-å¯ä»¥ä¹±åº\" class=\"headerlink\" title=\"= å’Œ in å¯ä»¥ä¹±åº\"\u003e\u003c/a\u003e= å’Œ in å¯ä»¥ä¹±åº\u003c/h4\u003e\u003cp\u003e\u003cstrong\u003eä¸éœ€è¦è€ƒè™‘ \u003ccode\u003e=\u003c/code\u003eã€\u003ccode\u003eIN\u003c/code\u003e ç­‰çš„é¡ºåº\u003c/strong\u003eï¼ŒMysql ä¼šè‡ªåŠ¨ä¼˜åŒ–è¿™äº›æ¡ä»¶çš„é¡ºåºï¼Œä»¥åŒ¹é…å°½å¯èƒ½å¤šçš„ç´¢å¼•åˆ—ã€‚\u003c/p\u003e\n\u003cp\u003eã€ç¤ºä¾‹ã€‘å¦‚æœ‰ç´¢å¼• (a, b, c, d)ï¼ŒæŸ¥è¯¢æ¡ä»¶ \u003ccode\u003ec \u0026gt; 3 and b = 2 and a = 1 and d \u0026lt; 4\u003c/code\u003e ä¸ \u003ccode\u003ea = 1 and c \u0026gt; 3 and b = 2 and d \u0026lt; 4\u003c/code\u003e ç­‰é¡ºåºéƒ½æ˜¯å¯ä»¥çš„ï¼ŒMySQL ä¼šè‡ªåŠ¨ä¼˜åŒ–ä¸º a = 1 and b = 2 and c \u0026gt; 3 and d \u0026lt; 4ï¼Œä¾æ¬¡å‘½ä¸­ aã€bã€cã€dã€‚\u003c/p\u003e\n\u003ch3 id=\"å“ªäº›æƒ…å†µä¸‹ï¼Œç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ\"\u003e\u003ca href=\"#å“ªäº›æƒ…å†µä¸‹ï¼Œç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ\" class=\"headerlink\" title=\"å“ªäº›æƒ…å†µä¸‹ï¼Œç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ\"\u003e\u003c/a\u003eå“ªäº›æƒ…å†µä¸‹ï¼Œç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ\u003c/h3\u003e\u003cp\u003eå¯¼è‡´ç´¢å¼•å¤±æ•ˆçš„æƒ…å†µæœ‰ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå¯¹ç´¢å¼•ä½¿ç”¨å·¦æ¨¡ç³ŠåŒ¹é…\u003c/li\u003e\n\u003cli\u003eå¯¹ç´¢å¼•ä½¿ç”¨å‡½æ•°æˆ–è¡¨è¾¾å¼\u003c/li\u003e\n\u003cli\u003eå¯¹ç´¢å¼•éšå¼ç±»å‹è½¬æ¢\u003c/li\u003e\n\u003cli\u003eè”åˆç´¢å¼•ä¸éµå¾ªæœ€å·¦åŒ¹é…åŸåˆ™\u003c/li\u003e\n\u003cli\u003eç´¢å¼•åˆ—åˆ¤ç©º - ç´¢å¼•åˆ—ä¸ NULL æˆ–è€… NOT NULL è¿›è¡Œåˆ¤æ–­çš„æ—¶å€™ä¹Ÿä¼šå¤±æ•ˆ\u003c/li\u003e\n\u003cli\u003eWHERE å­å¥ä¸­çš„ OR\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"æ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•ï¼Œåº”è¯¥æ€ä¹ˆé€‰æ‹©ï¼Ÿ\"\u003e\u003ca href=\"#æ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•ï¼Œåº”è¯¥æ€ä¹ˆé€‰æ‹©ï¼Ÿ\" class=\"headerlink\" title=\"æ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•ï¼Œåº”è¯¥æ€ä¹ˆé€‰æ‹©ï¼Ÿ\"\u003e\u003c/a\u003eæ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•ï¼Œåº”è¯¥æ€ä¹ˆé€‰æ‹©ï¼Ÿ\u003c/h3\u003e\u003cp\u003eæ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•çš„\u003cstrong\u003eæŸ¥è¯¢æ€§èƒ½ç›¸å·®å¾®ä¹å…¶å¾®\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003ch2 id=\"äº‹åŠ¡\"\u003e\u003ca href=\"#äº‹åŠ¡\" class=\"headerlink\" title=\"äº‹åŠ¡\"\u003e\u003c/a\u003eäº‹åŠ¡\u003c/h2\u003e\u003ch3 id=\"ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Œä»€ä¹ˆæ˜¯-ACIDï¼Ÿ\"\u003e\u003ca href=\"#ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Œä»€ä¹ˆæ˜¯-ACIDï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Œä»€ä¹ˆæ˜¯ ACIDï¼Ÿ\"\u003e\u003c/a\u003eä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Œä»€ä¹ˆæ˜¯ ACIDï¼Ÿ\u003c/h3\u003e\u003cp\u003e\u003cstrong\u003eâ€œäº‹åŠ¡â€æŒ‡çš„æ˜¯æ»¡è¶³ ACID ç‰¹æ€§çš„ä¸€ç»„æ“ä½œ\u003c/strong\u003eã€‚äº‹åŠ¡å†…çš„ SQL è¯­å¥ï¼Œè¦ä¹ˆå…¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨æ‰§è¡Œå¤±è´¥ã€‚å¯ä»¥é€šè¿‡ \u003ccode\u003eCommit\u003c/code\u003e æäº¤ä¸€ä¸ªäº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ \u003ccode\u003eRollback\u003c/code\u003e è¿›è¡Œå›æ»šã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/202311030701337.png\"/\u003e\u003c/p\u003e\n\u003cp\u003eACID æ˜¯æ•°æ®åº“äº‹åŠ¡æ­£ç¡®æ‰§è¡Œçš„å››ä¸ªåŸºæœ¬è¦ç´ ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eåŸå­æ€§ï¼ˆAtomicityï¼‰\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003eäº‹åŠ¡è¢«è§†ä¸ºä¸å¯åˆ†å‰²çš„æœ€å°å•å…ƒï¼Œäº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨æäº¤æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šã€‚\u003c/li\u003e\n\u003cli\u003eå›æ»šå¯ä»¥ç”¨æ—¥å¿—æ¥å®ç°ï¼Œæ—¥å¿—è®°å½•ç€äº‹åŠ¡æ‰€æ‰§è¡Œçš„ä¿®æ”¹æ“ä½œï¼Œåœ¨å›æ»šæ—¶åå‘æ‰§è¡Œè¿™äº›ä¿®æ”¹æ“ä½œå³å¯ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eä¸€è‡´æ€§ï¼ˆConsistencyï¼‰\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003eæ•°æ®åº“åœ¨äº‹åŠ¡æ‰§è¡Œå‰åéƒ½ä¿æŒä¸€è‡´æ€§çŠ¶æ€ã€‚\u003c/li\u003e\n\u003cli\u003eåœ¨ä¸€è‡´æ€§çŠ¶æ€ä¸‹ï¼Œæ‰€æœ‰äº‹åŠ¡å¯¹ä¸€ä¸ªæ•°æ®çš„è¯»å–ç»“æœéƒ½æ˜¯ç›¸åŒçš„ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eéš”ç¦»æ€§ï¼ˆIsolationï¼‰\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003eä¸€ä¸ªäº‹åŠ¡æ‰€åšçš„ä¿®æ”¹åœ¨æœ€ç»ˆæäº¤ä»¥å‰ï¼Œå¯¹å…¶å®ƒäº‹åŠ¡æ˜¯ä¸å¯è§çš„ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæŒä¹…æ€§ï¼ˆDurabilityï¼‰\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003eä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œåˆ™å…¶æ‰€åšçš„ä¿®æ”¹å°†ä¼šæ°¸è¿œä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚å³ä½¿ç³»ç»Ÿå‘ç”Ÿå´©æºƒï¼Œäº‹åŠ¡æ‰§è¡Œçš„ç»“æœä¹Ÿä¸èƒ½ä¸¢å¤±ã€‚\u003c/li\u003e\n\u003cli\u003eå¯ä»¥é€šè¿‡æ•°æ®åº“å¤‡ä»½å’Œæ¢å¤æ¥å®ç°ï¼Œåœ¨ç³»ç»Ÿå‘ç”Ÿå¥”æºƒæ—¶ï¼Œä½¿ç”¨å¤‡ä»½çš„æ•°æ®åº“è¿›è¡Œæ•°æ®æ¢å¤ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä¸€ä¸ªæ”¯æŒäº‹åŠ¡ï¼ˆTransactionï¼‰ä¸­çš„æ•°æ®åº“ç³»ç»Ÿï¼Œå¿…éœ€è¦å…·æœ‰è¿™å››ç§ç‰¹æ€§ï¼Œå¦åˆ™åœ¨äº‹åŠ¡è¿‡ç¨‹ï¼ˆTransaction processingï¼‰å½“ä¸­æ— æ³•ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ã€‚\u003c/p\u003e\n\u003ch3 id=\"äº‹åŠ¡å­˜åœ¨å“ªäº›å¹¶å‘ä¸€è‡´æ€§é—®é¢˜ï¼Ÿ\"\u003e\u003ca href=\"#äº‹åŠ¡å­˜åœ¨å“ªäº›å¹¶å‘ä¸€è‡´æ€§é—®é¢˜ï¼Ÿ\" class=\"headerlink\" title=\"äº‹åŠ¡å­˜åœ¨å“ªäº›å¹¶å‘ä¸€è‡´æ€§é—®é¢˜ï¼Ÿ\"\u003e\u003c/a\u003eäº‹åŠ¡å­˜åœ¨å“ªäº›å¹¶å‘ä¸€è‡´æ€§é—®é¢˜ï¼Ÿ\u003c/h3\u003e\u003cp\u003eäº‹åŠ¡ä¸­å­˜åœ¨çš„å¹¶å‘ä¸€è‡´æ€§é—®é¢˜æœ‰ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä¸¢å¤±ä¿®æ”¹\u003c/li\u003e\n\u003cli\u003eè„è¯»\u003c/li\u003e\n\u003cli\u003eä¸å¯é‡å¤è¯»\u003c/li\u003e\n\u003cli\u003eå¹»è¯»\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eâ€œä¸¢å¤±ä¿®æ”¹â€æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡çš„æ›´æ–°æ“ä½œè¢«å¦å¤–ä¸€ä¸ªäº‹åŠ¡çš„æ›´æ–°æ“ä½œæ›¿æ¢\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒT\u003csub\u003e1\u003c/sub\u003e å’Œ T\u003csub\u003e2\u003c/sub\u003e ä¸¤ä¸ªäº‹åŠ¡å¯¹åŒä¸€ä¸ªæ•°æ®è¿›è¡Œä¿®æ”¹ï¼ŒT\u003csub\u003e1\u003c/sub\u003e å…ˆä¿®æ”¹ï¼ŒT\u003csub\u003e2\u003c/sub\u003e éšåä¿®æ”¹ï¼ŒT\u003csub\u003e2\u003c/sub\u003e çš„ä¿®æ”¹è¦†ç›–äº† T\u003csub\u003e1\u003c/sub\u003e çš„ä¿®æ”¹ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/202311030706586.png\"/\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eâ€œè„è¯»ï¼ˆdirty readï¼‰â€æ˜¯æŒ‡å½“å‰äº‹åŠ¡å¯ä»¥è¯»å–å…¶ä»–äº‹åŠ¡æœªæäº¤çš„æ•°æ®\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒT\u003csub\u003e1\u003c/sub\u003e ä¿®æ”¹ä¸€ä¸ªæ•°æ®ï¼ŒT\u003csub\u003e2\u003c/sub\u003e éšåè¯»å–è¿™ä¸ªæ•°æ®ã€‚å¦‚æœ T\u003csub\u003e1\u003c/sub\u003e æ’¤é”€äº†è¿™æ¬¡ä¿®æ”¹ï¼Œé‚£ä¹ˆ T\u003csub\u003e2\u003c/sub\u003e è¯»å–çš„æ•°æ®æ˜¯è„æ•°æ®ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/202311030706587.png\"/\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eâ€œä¸å¯é‡å¤è¯»ï¼ˆnon-repeatable readï¼‰â€æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œè¿‡ç¨‹ä¸­ï¼Œè¯¥æ•°æ®è¢«å…¶ä»–äº‹åŠ¡æ‰€ä¿®æ”¹ï¼Œå¯¼è‡´å½“å‰äº‹åŠ¡å¤šæ¬¡è¯»å–çš„æ•°æ®å¯èƒ½ä¸ä¸€è‡´\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒT\u003csub\u003e2\u003c/sub\u003e è¯»å–ä¸€ä¸ªæ•°æ®ï¼ŒT\u003csub\u003e1\u003c/sub\u003e å¯¹è¯¥æ•°æ®åšäº†ä¿®æ”¹ã€‚å¦‚æœ T\u003csub\u003e2\u003c/sub\u003e å†æ¬¡è¯»å–è¿™ä¸ªæ•°æ®ï¼Œæ­¤æ—¶è¯»å–çš„ç»“æœå’Œç¬¬ä¸€æ¬¡è¯»å–çš„ç»“æœä¸åŒã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/202311030706588.png\"/\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eâ€œå¹»è¯»ï¼ˆphantom readï¼‰â€æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»å–åŒä¸€èŒƒå›´çš„æ•°æ®ï¼Œè¿‡ç¨‹ä¸­ï¼Œå…¶ä»–äº‹åŠ¡åœ¨è¯¥æ•°æ®èŒƒå›´æ–°å¢äº†æ•°æ®ï¼Œå¯¼è‡´å½“å‰äº‹åŠ¡æœªå‘ç°æ–°å¢æ•°æ®\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eäº‹åŠ¡ T\u003csub\u003e1\u003c/sub\u003e è¯»å–æŸä¸ªèŒƒå›´å†…çš„è®°å½•æ—¶ï¼Œäº‹åŠ¡ T\u003csub\u003e2\u003c/sub\u003e åœ¨è¯¥èŒƒå›´å†…æ’å…¥äº†æ–°çš„è®°å½•ï¼ŒT\u003csub\u003e1\u003c/sub\u003e å†æ¬¡è¯»å–è¿™ä¸ªèŒƒå›´çš„æ•°æ®ï¼Œæ­¤æ—¶è¯»å–çš„ç»“æœå’Œå’Œç¬¬ä¸€æ¬¡è¯»å–çš„ç»“æœä¸åŒã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/202311030706589.png\"/\u003e\u003c/p\u003e\n\u003ch3 id=\"æœ‰å“ªäº›äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œåˆ†åˆ«è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ\"\u003e\u003ca href=\"#æœ‰å“ªäº›äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œåˆ†åˆ«è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ\" class=\"headerlink\" title=\"æœ‰å“ªäº›äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œåˆ†åˆ«è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ\"\u003e\u003c/a\u003eæœ‰å“ªäº›äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œåˆ†åˆ«è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ\u003c/h3\u003e\u003cp\u003eä¸ºäº†è§£å†³ä»¥ä¸Šæåˆ°çš„å¹¶å‘ä¸€è‡´æ€§é—®é¢˜ï¼ŒSQL æ ‡å‡†æå‡ºäº†å››ç§â€œäº‹åŠ¡éš”ç¦»çº§åˆ«â€æ¥åº”å¯¹è¿™äº›é—®é¢˜ã€‚äº‹åŠ¡éš”ç¦»çº§åˆ«ç­‰çº§è¶Šé«˜ï¼Œè¶Šèƒ½ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ï¼Œä½†æ˜¯æ‰§è¡Œæ•ˆç‡ä¹Ÿè¶Šä½ã€‚å› æ­¤ï¼Œè®¾ç½®æ•°æ®åº“çš„äº‹åŠ¡éš”ç¦»çº§åˆ«æ—¶éœ€è¦åšä¸€ä¸‹æƒè¡¡ã€‚\u003c/p\u003e\n\u003cp\u003eäº‹åŠ¡éš”ç¦»çº§åˆ«ä»ä½åˆ°é«˜åˆ†åˆ«æ˜¯ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eâ€œè¯»æœªæäº¤ï¼ˆread uncommittedï¼‰â€\u003c/strong\u003e - æ˜¯æŒ‡ï¼Œ\u003cstrong\u003eäº‹åŠ¡ä¸­çš„ä¿®æ”¹ï¼Œå³ä½¿æ²¡æœ‰æäº¤ï¼Œå¯¹å…¶å®ƒäº‹åŠ¡ä¹Ÿæ˜¯å¯è§çš„\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eâ€œè¯»å·²æäº¤ï¼ˆread committedï¼‰â€ ** - æ˜¯æŒ‡ï¼Œ\u003c/strong\u003eäº‹åŠ¡æäº¤åï¼Œå…¶ä»–äº‹åŠ¡æ‰èƒ½çœ‹åˆ°å®ƒçš„ä¿®æ”¹**ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªäº‹åŠ¡æ‰€åšçš„ä¿®æ”¹åœ¨æäº¤ä¹‹å‰å¯¹å…¶å®ƒäº‹åŠ¡æ˜¯ä¸å¯è§çš„ã€‚\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè¯»å·²æäº¤è§£å†³äº†è„è¯»çš„é—®é¢˜\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003eè¯»å·²æäº¤æ˜¯å¤§å¤šæ•°æ•°æ®åº“çš„é»˜è®¤äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œå¦‚ Oracleã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eâ€œå¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰â€\u003c/strong\u003e - æ˜¯æŒ‡ï¼š\u003cstrong\u003eä¿è¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒæ ·æ•°æ®çš„ç»“æœæ˜¯ä¸€æ ·çš„\u003c/strong\u003eã€‚\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eå¯é‡å¤è¯»è§£å†³äº†ä¸å¯é‡å¤è¯»é—®é¢˜\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå¯é‡å¤è¯»æ˜¯ InnoDB å­˜å‚¨å¼•æ“çš„é»˜è®¤äº‹åŠ¡éš”ç¦»çº§åˆ«\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eâ€œä¸²è¡ŒåŒ–ï¼ˆserializable ï¼‰â€\u003c/strong\u003e - æ˜¯æŒ‡ï¼Œ\u003cstrong\u003eå¼ºåˆ¶äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œ\u003c/strong\u003eï¼Œå¯¹äºåŒä¸€è¡Œè®°å½•ï¼ŒåŠ è¯»å†™é”ï¼Œä¸€æ—¦å‡ºç°é”å†²çªï¼Œå¿…é¡»ç­‰å‰é¢çš„äº‹åŠ¡é‡Šæ”¾é”ã€‚\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eä¸²è¡ŒåŒ–è§£å†³äº†å¹»è¯»é—®é¢˜\u003c/strong\u003eã€‚ç”±äºå¼ºåˆ¶äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œï¼Œè‡ªç„¶é¿å…äº†æ‰€æœ‰çš„å¹¶å‘é—®é¢˜ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eä¸²è¡ŒåŒ–ç­–ç•¥ä¼šåœ¨è¯»å–çš„æ¯ä¸€è¡Œæ•°æ®ä¸Šéƒ½åŠ é”\u003c/strong\u003eï¼Œè¿™å¯èƒ½å¯¼è‡´å¤§é‡çš„è¶…æ—¶å’Œé”ç«äº‰ã€‚è¿™å¯¹äºé«˜å¹¶å‘åº”ç”¨åŸºæœ¬ä¸Šæ˜¯ä¸å¯æ¥å—çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ä¼šé‡‡ç”¨è¿™ä¸ªçº§åˆ«ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eäº‹åŠ¡éš”ç¦»çº§åˆ«å¯¹å¹¶å‘ä¸€è‡´æ€§é—®é¢˜çš„è§£å†³æƒ…å†µï¼š\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth align=\"center\"\u003eéš”ç¦»çº§åˆ«\u003c/th\u003e\n\u003cth align=\"center\"\u003eä¸¢å¤±ä¿®æ”¹\u003c/th\u003e\n\u003cth align=\"center\"\u003eè„è¯»\u003c/th\u003e\n\u003cth align=\"center\"\u003eä¸å¯é‡å¤è¯»\u003c/th\u003e\n\u003cth align=\"center\"\u003eå¹»è¯»\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd align=\"center\"\u003eè¯»æœªæäº¤\u003c/td\u003e\n\u003ctd align=\"center\"\u003eâœ”ï¸ï¸ï¸\u003c/td\u003e\n\u003ctd align=\"center\"\u003eâŒ\u003c/td\u003e\n\u003ctd align=\"center\"\u003eâŒ\u003c/td\u003e\n\u003ctd align=\"center\"\u003eâŒ\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003eè¯»å·²æäº¤\u003c/td\u003e\n\u003ctd align=\"center\"\u003eâœ”ï¸ï¸ï¸\u003c/td\u003e\n\u003ctd align=\"center\"\u003eâœ”ï¸ï¸ï¸\u003c/td\u003e\n\u003ctd align=\"center\"\u003eâŒ\u003c/td\u003e\n\u003ctd align=\"center\"\u003eâŒ\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003eå¯é‡å¤è¯»\u003c/td\u003e\n\u003ctd align=\"center\"\u003eâœ”ï¸ï¸ï¸\u003c/td\u003e\n\u003ctd align=\"center\"\u003eâœ”ï¸ï¸ï¸\u003c/td\u003e\n\u003ctd align=\"center\"\u003eâœ”ï¸ï¸ï¸\u003c/td\u003e\n\u003ctd align=\"center\"\u003eâŒ\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003eå¯ä¸²è¡ŒåŒ–\u003c/td\u003e\n\u003ctd align=\"center\"\u003eâœ”ï¸ï¸ï¸\u003c/td\u003e\n\u003ctd align=\"center\"\u003eâœ”ï¸ï¸ï¸\u003c/td\u003e\n\u003ctd align=\"center\"\u003eâœ”ï¸ï¸ï¸\u003c/td\u003e\n\u003ctd align=\"center\"\u003eâœ”ï¸ï¸ï¸\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003ch3 id=\"å„äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ\"\u003e\u003ca href=\"#å„äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ\" class=\"headerlink\" title=\"å„äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ\"\u003e\u003c/a\u003eå„äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ\u003c/h3\u003e\u003cp\u003eMysql ä¸­çš„äº‹åŠ¡åŠŸèƒ½æ˜¯åœ¨å­˜å‚¨å¼•æ“å±‚å®ç°çš„ï¼Œ\u003cstrong\u003eå¹¶éæ‰€æœ‰å­˜å‚¨å¼•æ“éƒ½æ”¯æŒäº‹åŠ¡åŠŸèƒ½\u003c/strong\u003eã€‚InnoDB æ˜¯ Mysql çš„é¦–å…ˆäº‹åŠ¡å­˜å‚¨å¼•æ“ã€‚\u003c/p\u003e\n\u003cp\u003eå››ç§éš”ç¦»çº§åˆ«å…·ä½“æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eä»¥ InnoDB çš„äº‹åŠ¡å®ç°æ¥è¯´æ˜ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå¯¹äºâ€œè¯»æœªæäº¤â€éš”ç¦»çº§åˆ«çš„äº‹åŠ¡æ¥è¯´ï¼Œå› ä¸ºå¯ä»¥è¯»åˆ°æœªæäº¤äº‹åŠ¡ä¿®æ”¹çš„æ•°æ®ï¼Œæ‰€ä»¥ç›´æ¥è¯»å–æœ€æ–°çš„æ•°æ®å°±å¥½äº†ï¼›\u003c/li\u003e\n\u003cli\u003eå¯¹äºâ€œä¸²è¡ŒåŒ–â€éš”ç¦»çº§åˆ«çš„äº‹åŠ¡æ¥è¯´ï¼Œé€šè¿‡åŠ è¯»å†™é”çš„æ–¹å¼æ¥é¿å…å¹¶è¡Œè®¿é—®ï¼›\u003c/li\u003e\n\u003cli\u003eå¯¹äºâ€œè¯»æäº¤â€å’Œâ€œå¯é‡å¤è¯»â€éš”ç¦»çº§åˆ«çš„äº‹åŠ¡æ¥è¯´ï¼Œå®ƒä»¬éƒ½æ˜¯é€šè¿‡ ReadView æ¥å®ç°çš„ï¼ŒåŒºåˆ«ä»…åœ¨äºåˆ›å»º ReadView çš„æ—¶æœºä¸åŒã€‚ReadView å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ•°æ®å¿«ç…§ã€‚\u003cul\u003e\n\u003cli\u003eâ€œè¯»æäº¤â€éš”ç¦»çº§åˆ«æ˜¯åœ¨â€œæ¯ä¸ªè¯­å¥æ‰§è¡Œå‰â€éƒ½ä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ª ReadView\u003c/li\u003e\n\u003cli\u003eâ€œå¯é‡å¤è¯»â€éš”ç¦»çº§åˆ«æ˜¯åœ¨â€œå¯åŠ¨äº‹åŠ¡æ—¶â€ç”Ÿæˆä¸€ä¸ª ReadViewï¼Œç„¶åæ•´ä¸ªäº‹åŠ¡æœŸé—´éƒ½åœ¨ç”¨è¿™ä¸ª ReadViewã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ä»€ä¹ˆæ˜¯-MVCCï¼Ÿ\"\u003e\u003ca href=\"#ä»€ä¹ˆæ˜¯-MVCCï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ MVCCï¼Ÿ\"\u003e\u003c/a\u003eä»€ä¹ˆæ˜¯ MVCCï¼Ÿ\u003c/h3\u003e\u003cp\u003e\u003cstrong\u003eMVCC æ˜¯ Multi Version Concurrency Control çš„ç¼©å†™ï¼Œå³â€œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶â€\u003c/strong\u003eã€‚MVCC çš„è®¾è®¡ç›®æ ‡æ˜¯æé«˜æ•°æ®åº“çš„å¹¶å‘æ€§ï¼Œé‡‡ç”¨éé˜»å¡çš„æ–¹å¼å»å¤„ç†è¯»/å†™å¹¶å‘å†²çªï¼Œå¯ä»¥å°†å…¶çœ‹æˆä¸€ç§ä¹è§‚é”ã€‚\u003c/p\u003e\n\u003cp\u003eä¸ä»…æ˜¯ Mysqlï¼ŒåŒ…æ‹¬ Oracleã€PostgreSQL ç­‰å…¶ä»–å…³ç³»å‹æ•°æ®åº“éƒ½å®ç°äº†å„è‡ªçš„ MVCCï¼Œå®ç°æœºåˆ¶æ²¡æœ‰ç»Ÿä¸€æ ‡å‡†ã€‚\u003cstrong\u003eMVCC æ˜¯ InnoDB å­˜å‚¨å¼•æ“å®ç°äº‹åŠ¡éš”ç¦»çº§åˆ«çš„ä¸€ç§å…·ä½“æ–¹å¼\u003c/strong\u003eã€‚å…¶ä¸»è¦ç”¨äºå®ç°è¯»å·²æäº¤å’Œå¯é‡å¤è¯»è¿™ä¸¤ç§éš”ç¦»çº§åˆ«ã€‚è€Œæœªæäº¤è¯»éš”ç¦»çº§åˆ«æ€»æ˜¯è¯»å–æœ€æ–°çš„æ•°æ®è¡Œï¼Œè¦æ±‚å¾ˆä½ï¼Œæ— éœ€ä½¿ç”¨ MVCCã€‚å¯ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«éœ€è¦å¯¹æ‰€æœ‰è¯»å–çš„è¡Œéƒ½åŠ é”ï¼Œå•çº¯ä½¿ç”¨ MVCC æ— æ³•å®ç°ã€‚\u003c/p\u003e\n\u003ch3 id=\"MVCC-çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\"\u003e\u003ca href=\"#MVCC-çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"MVCC çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\"\u003e\u003c/a\u003eMVCC çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\u003c/h3\u003e\u003cp\u003eMVCC çš„å®ç°åŸç†ï¼Œä¸»è¦åŸºäºéšå¼å­—æ®µã€UndoLogã€ReadView æ¥å®ç°ã€‚\u003c/p\u003e\n\u003ch4 id=\"éšå¼å­—æ®µ\"\u003e\u003ca href=\"#éšå¼å­—æ®µ\" class=\"headerlink\" title=\"éšå¼å­—æ®µ\"\u003e\u003c/a\u003eéšå¼å­—æ®µ\u003c/h4\u003e\u003cp\u003eInnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œæ•°æ®è¡¨çš„æ¯è¡Œè®°å½•ï¼Œé™¤äº†ç”¨æˆ·æ˜¾ç¤ºå®šä¹‰çš„å­—æ®µä»¥å¤–ï¼Œè¿˜æœ‰å‡ ä¸ªæ•°æ®åº“éšå¼å®šä¹‰çš„å­—æ®µï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003erow_id\u003c/code\u003e - \u003cstrong\u003eéšè—çš„è‡ªå¢ ID\u003c/strong\u003eã€‚å¦‚æœæ•°æ®è¡¨æ²¡æœ‰æŒ‡å®šä¸»é”®ï¼ŒInnoDB ä¼šè‡ªåŠ¨åŸºäº \u003ccode\u003erow_id\u003c/code\u003e äº§ç”Ÿä¸€ä¸ªèšç°‡ç´¢å¼•ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etrx_id\u003c/code\u003e - \u003cstrong\u003eæœ€è¿‘ä¿®æ”¹çš„äº‹åŠ¡ ID\u003c/strong\u003eã€‚äº‹åŠ¡å¯¹æŸæ¡èšç°‡ç´¢å¼•è®°å½•è¿›è¡Œæ”¹åŠ¨æ—¶ï¼Œå°±ä¼šæŠŠè¯¥äº‹åŠ¡çš„äº‹åŠ¡ id è®°å½•åœ¨ trx_id éšè—åˆ—é‡Œï¼›\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eroll_pointer\u003c/code\u003e - \u003cstrong\u003eå›æ»šæŒ‡é’ˆ\u003c/strong\u003eï¼ŒæŒ‡å‘è¿™æ¡è®°å½•çš„ä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"UndoLog\"\u003e\u003ca href=\"#UndoLog\" class=\"headerlink\" title=\"UndoLog\"\u003e\u003c/a\u003eUndoLog\u003c/h4\u003e\u003cp\u003eMVCC çš„å¤šç‰ˆæœ¬æŒ‡çš„æ˜¯å¤šä¸ªç‰ˆæœ¬çš„å¿«ç…§ï¼Œå¿«ç…§å­˜å‚¨åœ¨ UndoLog ä¸­ã€‚è¯¥æ—¥å¿—é€šè¿‡å›æ»šæŒ‡é’ˆ \u003ccode\u003eroll_pointer\u003c/code\u003e æŠŠä¸€ä¸ªæ•°æ®è¡Œçš„æ‰€æœ‰å¿«ç…§é“¾æ¥èµ·æ¥ï¼Œæ„æˆä¸€ä¸ª\u003cstrong\u003eç‰ˆæœ¬é“¾\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/202311030708591.png\"/\u003e\u003c/p\u003e\n\u003ch4 id=\"ReadView\"\u003e\u003ca href=\"#ReadView\" class=\"headerlink\" title=\"ReadView\"\u003e\u003c/a\u003eReadView\u003c/h4\u003e\u003cp\u003e\u003cstrong\u003eReadView å°±æ˜¯äº‹åŠ¡è¿›è¡Œå¿«ç…§è¯»æ—¶äº§ç”Ÿçš„è¯»è§†å›¾ï¼ˆå¿«ç…§ï¼‰\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eReadView æœ‰å››ä¸ªé‡è¦çš„å­—æ®µï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003em_ids\u003c/code\u003e - æŒ‡çš„æ˜¯åœ¨åˆ›å»º ReadView æ—¶ï¼Œå½“å‰æ•°æ®åº“ä¸­â€œæ´»è·ƒäº‹åŠ¡â€çš„äº‹åŠ¡ ID åˆ—è¡¨ã€‚æ³¨æ„ï¼šè¿™æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œ\u003cstrong\u003eâ€œæ´»è·ƒäº‹åŠ¡â€æŒ‡çš„å°±æ˜¯ï¼Œå¯åŠ¨äº†ä½†è¿˜æ²¡æäº¤çš„äº‹åŠ¡\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emin_trx_id\u003c/code\u003e - æŒ‡çš„æ˜¯åœ¨åˆ›å»º ReadView æ—¶ï¼Œå½“å‰æ•°æ®åº“ä¸­â€œæ´»è·ƒäº‹åŠ¡â€ä¸­äº‹åŠ¡ id æœ€å°çš„äº‹åŠ¡ï¼Œä¹Ÿå°±æ˜¯ \u003ccode\u003em_ids\u003c/code\u003e çš„æœ€å°å€¼ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emax_trx_id\u003c/code\u003e - è¿™ä¸ªå¹¶ä¸æ˜¯ m_ids çš„æœ€å¤§å€¼ï¼Œè€Œæ˜¯æŒ‡åˆ›å»º ReadView æ—¶å½“å‰æ•°æ®åº“ä¸­åº”è¯¥ç»™ä¸‹ä¸€ä¸ªäº‹åŠ¡åˆ†é…çš„ ID å€¼ï¼Œä¹Ÿå°±æ˜¯å…¨å±€äº‹åŠ¡ä¸­æœ€å¤§çš„äº‹åŠ¡ ID å€¼ + 1ï¼›\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecreator_trx_id\u003c/code\u003e - æŒ‡çš„æ˜¯åˆ›å»ºè¯¥ ReadView çš„äº‹åŠ¡çš„äº‹åŠ¡ IDã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eåœ¨åˆ›å»º ReadView åï¼Œæˆ‘ä»¬å¯ä»¥å°†è®°å½•ä¸­çš„ trx_id åˆ’åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå·²æäº¤äº‹åŠ¡\u003c/li\u003e\n\u003cli\u003eå·²å¯åŠ¨ä½†æœªæäº¤çš„äº‹åŠ¡\u003c/li\u003e\n\u003cli\u003eæœªå¯åŠ¨çš„äº‹åŠ¡\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/202311030708265.png\"/\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eReadView å¦‚ä½•åˆ¤æ–­ç‰ˆæœ¬é“¾ä¸­å“ªä¸ªç‰ˆæœ¬å¯è§ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eä¸€ä¸ªäº‹åŠ¡å»è®¿é—®è®°å½•çš„æ—¶å€™ï¼Œé™¤äº†è‡ªå·±çš„æ›´æ–°è®°å½•æ€»æ˜¯å¯è§ä¹‹å¤–ï¼Œè¿˜æœ‰è¿™å‡ ç§æƒ…å†µï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003etrx_id == creator_trx_id\u003c/code\u003e - è¡¨ç¤º \u003ccode\u003etrx_id\u003c/code\u003e ç‰ˆæœ¬è®°å½•ç”± ReadView æ‰€ä»£è¡¨çš„å½“å‰äº‹åŠ¡äº§ç”Ÿï¼Œå½“ç„¶å¯ä»¥è®¿é—®ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etrx_id \u0026lt; min_trx_id\u003c/code\u003e - è¡¨ç¤º \u003ccode\u003etrx_id\u003c/code\u003e ç‰ˆæœ¬è®°å½•æ˜¯åœ¨åˆ›å»º ReadView ä¹‹å‰å·²æäº¤çš„äº‹åŠ¡ç”Ÿæˆçš„ï¼Œå½“å‰äº‹åŠ¡å¯ä»¥è®¿é—®ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etrx_id \u0026gt;= max_trx_id\u003c/code\u003e - è¡¨ç¤º \u003ccode\u003etrx_id\u003c/code\u003e ç‰ˆæœ¬è®°å½•æ˜¯åœ¨åˆ›å»º ReadView ä¹‹åæ‰å¯åŠ¨çš„äº‹åŠ¡ç”Ÿæˆçš„ï¼Œå½“å‰äº‹åŠ¡ä¸å¯ä»¥è®¿é—®ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emin_trx_id \u0026lt;= trx_id \u0026lt; max_trx_id\u003c/code\u003e - éœ€è¦åˆ¤æ–­ \u003ccode\u003etrx_id\u003c/code\u003e æ˜¯å¦åœ¨ \u003ccode\u003em_ids\u003c/code\u003e åˆ—è¡¨ä¸­\u003cul\u003e\n\u003cli\u003eå¦‚æœ \u003ccode\u003etrx_id\u003c/code\u003e åœ¨ \u003ccode\u003em_ids\u003c/code\u003e åˆ—è¡¨ä¸­ï¼Œè¡¨ç¤ºç”Ÿæˆ \u003ccode\u003etrx_id\u003c/code\u003e ç‰ˆæœ¬è®°å½•çš„äº‹åŠ¡ä¾ç„¶æ´»è·ƒï¼ˆæœªæäº¤äº‹åŠ¡ï¼‰ï¼Œå½“å‰äº‹åŠ¡ä¸å¯ä»¥è®¿é—®ã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœ \u003ccode\u003etrx_id\u003c/code\u003e ä¸åœ¨ \u003ccode\u003em_ids\u003c/code\u003e åˆ—è¡¨ä¸­ï¼Œè¡¨ç¤ºç”Ÿæˆ \u003ccode\u003etrx_id\u003c/code\u003e ç‰ˆæœ¬è®°å½•çš„äº‹åŠ¡å·²æäº¤ï¼Œå½“å‰äº‹åŠ¡å¯ä»¥è®¿é—®ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eè¿™ç§é€šè¿‡â€œç‰ˆæœ¬é“¾â€æ¥æ§åˆ¶å¹¶å‘äº‹åŠ¡è®¿é—®åŒä¸€ä¸ªè®°å½•æ—¶çš„è¡Œä¸ºå°±å« MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰ã€‚\u003c/p\u003e\n\u003ch3 id=\"MVCC-å®ç°äº†å“ªäº›éš”ç¦»çº§åˆ«ï¼Œå¦‚ä½•å®ç°çš„ï¼Ÿ\"\u003e\u003ca href=\"#MVCC-å®ç°äº†å“ªäº›éš”ç¦»çº§åˆ«ï¼Œå¦‚ä½•å®ç°çš„ï¼Ÿ\" class=\"headerlink\" title=\"MVCC å®ç°äº†å“ªäº›éš”ç¦»çº§åˆ«ï¼Œå¦‚ä½•å®ç°çš„ï¼Ÿ\"\u003e\u003c/a\u003eMVCC å®ç°äº†å“ªäº›éš”ç¦»çº§åˆ«ï¼Œå¦‚ä½•å®ç°çš„ï¼Ÿ\u003c/h3\u003e\u003cp\u003eå¯¹äºâ€œè¯»å·²æäº¤â€å’Œâ€œå¯é‡å¤è¯»â€éš”ç¦»çº§åˆ«çš„äº‹åŠ¡æ¥è¯´ï¼Œå®ƒä»¬éƒ½æ˜¯é€šè¿‡ MVCC çš„ ReadView æœºåˆ¶æ¥å®ç°çš„ï¼ŒåŒºåˆ«ä»…åœ¨äºåˆ›å»º ReadView çš„æ—¶æœºä¸åŒã€‚ReadView å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ•°æ®å¿«ç…§ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eMVCC å¦‚ä½•å®ç°å¯é‡å¤è¯»éš”ç¦»çº§åˆ«\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eå¯é‡å¤è¯»éš”ç¦»çº§åˆ«åªæœ‰åœ¨å¯åŠ¨äº‹åŠ¡æ—¶æ‰ä¼šåˆ›å»º ReadViewï¼Œç„¶åæ•´ä¸ªäº‹åŠ¡æœŸé—´éƒ½ä½¿ç”¨è¿™ä¸ª ReadView\u003c/strong\u003eã€‚è¿™æ ·å°±ä¿è¯äº†åœ¨äº‹åŠ¡æœŸé—´è¯»åˆ°çš„æ•°æ®éƒ½æ˜¯äº‹åŠ¡å¯åŠ¨å‰çš„è®°å½•ã€‚\u003c/p\u003e\n\u003cp\u003eä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æœ‰ä¸¤ä¸ªäº‹åŠ¡ä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåˆå§‹ï¼Œè¡¨ä¸­ id = 1 çš„ value åˆ—å€¼ä¸º 100ã€‚\u003c/li\u003e\n\u003cli\u003eäº‹åŠ¡ 2 è¯»å–æ•°æ®ï¼Œvalue ä¸º 100ï¼›\u003c/li\u003e\n\u003cli\u003eäº‹åŠ¡ 1 å°† value è®¾ä¸º 200ï¼›\u003c/li\u003e\n\u003cli\u003eäº‹åŠ¡ 2 è¯»å–æ•°æ®ï¼Œvalue ä¸º 100ï¼›\u003c/li\u003e\n\u003cli\u003eäº‹åŠ¡ 1 æäº¤äº‹åŠ¡ï¼›\u003c/li\u003e\n\u003cli\u003eäº‹åŠ¡ 2 è¯»å–æ•°æ®ï¼Œvalue ä¾æ—§ä¸º 100ï¼›\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä»¥ä¸Šæ“ä½œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚T2 äº‹åŠ¡åœ¨äº‹åŠ¡è¿‡ç¨‹ä¸­ï¼Œæ˜¯å¦å¯ä»¥çœ‹åˆ° T1 äº‹åŠ¡çš„ä¿®æ”¹ï¼Œå¯ä»¥æ ¹æ® \u003ca href=\"#ReadView\"\u003eReadView\u003c/a\u003e ä¸­æè¿°çš„è§„åˆ™å»åˆ¤æ–­ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/202311030709235.png\"/\u003e\u003c/p\u003e\n\u003cp\u003eä»å›¾ä¸­ä¸éš¾çœ‹å‡ºï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå¯¹äº \u003ccode\u003etrx_id = 100\u003c/code\u003e çš„ç‰ˆæœ¬è®°å½•ï¼Œæ¯”å¯¹ T2 äº‹åŠ¡ ReadView ï¼Œ\u003ccode\u003etrx_id \u0026lt; min_trx_id\u003c/code\u003eï¼Œå› æ­¤åœ¨ T2 äº‹åŠ¡ä¸­çš„ä»»æ„æ—¶åˆ»éƒ½å¯è§ï¼›\u003c/li\u003e\n\u003cli\u003eå¯¹äº \u003ccode\u003etrx_id = 101\u003c/code\u003e çš„ç‰ˆæœ¬è®°å½•ï¼Œæ¯”å¯¹ T2 äº‹åŠ¡ ReadView ï¼Œå¯ä»¥çœ‹å‡º \u003ccode\u003emin_trx_id \u0026lt;= trx_id \u0026lt; max_trx_id\u003c/code\u003e ï¼Œä¸” \u003ccode\u003etrx_id\u003c/code\u003e åœ¨ \u003ccode\u003em_ids\u003c/code\u003e ä¸­ï¼Œå› æ­¤ T2 äº‹åŠ¡ä¸­ä¸å¯è§ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eç»¼ä¸Šæ‰€è¿°ï¼Œåœ¨ T2 äº‹åŠ¡ä¸­ï¼Œè‡ªå§‹è‡³ç»ˆåªèƒ½çœ‹åˆ° \u003ccode\u003etrx_id = 100\u003c/code\u003e çš„ç‰ˆæœ¬è®°å½•ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eMVCC å¦‚ä½•å®ç°è¯»å·²æäº¤éš”ç¦»çº§åˆ«\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eè¯»å·²æäº¤éš”ç¦»çº§åˆ«æ¯æ¬¡è¯»å–æ•°æ®æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ª ReadView\u003c/strong\u003eã€‚è¿™æ„å‘³ç€ï¼Œäº‹åŠ¡æœŸé—´çš„å¤šæ¬¡è¯»å–åŒä¸€æ¡æ•°æ®ï¼Œå‰åè¯»å–çš„æ•°æ®å¯èƒ½ä¼šå‡ºç°ä¸ä¸€è‡´â€”â€”å› ä¸ºï¼Œè¿™æœŸé—´å¯èƒ½æœ‰å¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹äº†è¯¥è®°å½•ï¼Œå¹¶æäº¤äº†äº‹åŠ¡ã€‚\u003c/p\u003e\n\u003cp\u003eä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æœ‰ä¸¤ä¸ªäº‹åŠ¡ä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåˆå§‹ï¼Œè¡¨ä¸­ id = 1 çš„ value åˆ—å€¼ä¸º 100ã€‚\u003c/li\u003e\n\u003cli\u003eäº‹åŠ¡ 2 è¯»å–æ•°æ®ï¼ˆåˆ›å»º ReadViewï¼‰ï¼Œvalue ä¸º 0ï¼›\u003c/li\u003e\n\u003cli\u003eäº‹åŠ¡ 1 å°† value è®¾ä¸º 100ï¼›\u003c/li\u003e\n\u003cli\u003eäº‹åŠ¡ 2 è¯»å–æ•°æ®ï¼ˆåˆ›å»º ReadViewï¼‰ï¼Œvalue ä¸º 0ï¼›\u003c/li\u003e\n\u003cli\u003eäº‹åŠ¡ 1 æäº¤äº‹åŠ¡ï¼›\u003c/li\u003e\n\u003cli\u003eäº‹åŠ¡ 2 è¯»å–æ•°æ®ï¼ˆåˆ›å»º ReadViewï¼‰ï¼Œvalue ä¸º 100ï¼›\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä»¥ä¸Šæ“ä½œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒT2 äº‹åŠ¡åœ¨äº‹åŠ¡è¿‡ç¨‹ä¸­ï¼Œæ˜¯å¦å¯ä»¥çœ‹åˆ°å…¶ä»–äº‹åŠ¡çš„ä¿®æ”¹ï¼Œå¯ä»¥æ ¹æ® \u003ca href=\"#ReadView\"\u003eReadView\u003c/a\u003e ä¸­æè¿°çš„è§„åˆ™å»åˆ¤æ–­ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/202311030709986.png\"/\u003e\u003c/p\u003e\n\u003cp\u003eä»å›¾ä¸­ä¸éš¾çœ‹å‡ºï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå¯¹äº \u003ccode\u003etrx_id = 100\u003c/code\u003e çš„ç‰ˆæœ¬è®°å½•ï¼Œæ¯”å¯¹ T2 äº‹åŠ¡ ReadView ï¼Œ\u003ccode\u003etrx_id \u0026lt; min_trx_id\u003c/code\u003eï¼Œå› æ­¤åœ¨ T2 äº‹åŠ¡ä¸­çš„ä»»æ„æ—¶åˆ»éƒ½å¯è§ï¼›\u003c/li\u003e\n\u003cli\u003eå¯¹äº \u003ccode\u003etrx_id = 101\u003c/code\u003e çš„ç‰ˆæœ¬è®°å½•ï¼Œæ¯”å¯¹ T2 äº‹åŠ¡ ReadView ï¼Œå¯ä»¥çœ‹å‡ºç¬¬äºŒæ¬¡æŸ¥è¯¢æ—¶ï¼ˆT1 æ›´æ–°æœªæäº¤ï¼‰ï¼Œ\u003ccode\u003emin_trx_id \u0026lt;= trx_id \u0026lt; max_trx_id\u003c/code\u003e ï¼Œä¸” \u003ccode\u003etrx_id\u003c/code\u003e åœ¨ \u003ccode\u003em_ids\u003c/code\u003e ä¸­ï¼Œå› æ­¤ T2 äº‹åŠ¡ä¸­ä¸å¯è§ï¼›è€Œç¬¬ä¸‰æ¬¡æŸ¥è¯¢æ—¶ï¼ˆT1 æ›´æ–°å·²æäº¤ï¼‰ï¼Œ\u003ccode\u003etrx_id \u0026lt; min_trx_id\u003c/code\u003eï¼Œå› æ­¤åœ¨ T2 äº‹åŠ¡ä¸­å¯è§ï¼›\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eç»¼ä¸Šæ‰€è¿°ï¼Œåœ¨ T2 äº‹åŠ¡ä¸­ï¼Œå½“ T1 äº‹åŠ¡æäº¤å‰ï¼Œå¯è¯»å–åˆ°çš„æ˜¯ \u003ccode\u003etrx_id = 100\u003c/code\u003e çš„ç‰ˆæœ¬è®°å½•ï¼›å½“ T1 äº‹åŠ¡æäº¤åï¼Œå¯è¯»å–åˆ°çš„æ˜¯ \u003ccode\u003etrx_id = 101\u003c/code\u003e çš„ç‰ˆæœ¬è®°å½•ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eMVCC + Next-Key Lock å¦‚ä½•è§£å†³å¹»è¯»\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eMySQL InnoDB å¼•æ“çš„é»˜è®¤éš”ç¦»çº§åˆ«è™½ç„¶æ˜¯â€œå¯é‡å¤è¯»â€ï¼Œä½†æ˜¯å®ƒå¾ˆå¤§ç¨‹åº¦ä¸Šé¿å…å¹»è¯»ç°è±¡ï¼ˆå¹¶ä¸æ˜¯å®Œå…¨è§£å†³äº†ï¼‰ï¼Œè§£å†³çš„æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eé’ˆå¯¹\u003cstrong\u003eå¿«ç…§è¯»\u003c/strong\u003eï¼ˆæ™®é€š \u003ccode\u003eSELECT\u003c/code\u003e è¯­å¥ï¼‰ï¼Œ\u003cstrong\u003eé€šè¿‡ MVCC æ–¹å¼è§£å†³äº†å¹»è¯»\u003c/strong\u003eï¼Œå› ä¸ºå¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®ï¼Œä¸€ç›´è·Ÿè¿™ä¸ªäº‹åŠ¡å¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œå³ä½¿ä¸­é€”æœ‰å…¶ä»–äº‹åŠ¡æ’å…¥äº†ä¸€æ¡æ•°æ®ï¼Œæ˜¯æŸ¥è¯¢ä¸å‡ºæ¥è¿™æ¡æ•°æ®çš„ï¼Œæ‰€ä»¥å°±å¾ˆå¥½äº†é¿å…å¹»è¯»é—®é¢˜ã€‚\u003c/li\u003e\n\u003cli\u003eé’ˆå¯¹\u003cstrong\u003eå½“å‰è¯»\u003c/strong\u003eï¼ˆ\u003ccode\u003eSELECT ... FOR UPDATE\u003c/code\u003e ç­‰è¯­å¥ï¼‰ï¼Œ\u003cstrong\u003eé€šè¿‡ Next-Key Lockï¼ˆè®°å½•é”+é—´éš™é”ï¼‰æ–¹å¼è§£å†³äº†å¹»è¯»\u003c/strong\u003eï¼Œå› ä¸ºå½“æ‰§è¡Œ \u003ccode\u003eSELECT ... FOR UPDATE\u003c/code\u003e è¯­å¥çš„æ—¶å€™ï¼Œä¼šåŠ ä¸Š Next-Key Lockï¼Œå¦‚æœæœ‰å…¶ä»–äº‹åŠ¡åœ¨ Next-Key Lock é”èŒƒå›´å†…æ’å…¥äº†ä¸€æ¡è®°å½•ï¼Œé‚£ä¹ˆè¿™ä¸ªæ’å…¥è¯­å¥å°±ä¼šè¢«é˜»å¡ï¼Œæ— æ³•æˆåŠŸæ’å…¥ï¼Œæ‰€ä»¥å°±å¾ˆå¥½çš„é¿å…äº†å¹»è¯»é—®é¢˜ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"é”\"\u003e\u003ca href=\"#é”\" class=\"headerlink\" title=\"é”\"\u003e\u003c/a\u003eé”\u003c/h2\u003e\u003ch3 id=\"Mysql-ä¸­æœ‰å“ªäº›é”ï¼Ÿ\"\u003e\u003ca href=\"#Mysql-ä¸­æœ‰å“ªäº›é”ï¼Ÿ\" class=\"headerlink\" title=\"Mysql ä¸­æœ‰å“ªäº›é”ï¼Ÿ\"\u003e\u003c/a\u003eMysql ä¸­æœ‰å“ªäº›é”ï¼Ÿ\u003c/h3\u003e\u003cp\u003eä¸ºäº†è§£å†³å¹¶å‘ä¸€è‡´æ€§é—®é¢˜ï¼ŒMysql æ”¯æŒäº†å¾ˆå¤šç§é”æ¥å®ç°ä¸åŒç¨‹åº¦çš„éš”ç¦»æ€§ï¼Œä»¥ä¿è¯æ•°æ®çš„å®‰å…¨æ€§ã€‚\u003c/p\u003e\n\u003ch4 id=\"ç‹¬äº«é”å’Œå…±äº«é”\"\u003e\u003ca href=\"#ç‹¬äº«é”å’Œå…±äº«é”\" class=\"headerlink\" title=\"ç‹¬äº«é”å’Œå…±äº«é”\"\u003e\u003c/a\u003eç‹¬äº«é”å’Œå…±äº«é”\u003c/h4\u003e\u003cp\u003eInnoDB å®ç°æ ‡å‡†è¡Œçº§é”å®šï¼Œæ ¹æ®æ˜¯å¦ç‹¬äº«èµ„æºï¼Œå¯ä»¥æŠŠé”åˆ†ä¸ºä¸¤ç±»ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eç‹¬äº«é”ï¼ˆExclusiveï¼‰\u003c/strong\u003eï¼Œç®€å†™ä¸º X é”ï¼Œåˆç§°ä¸ºâ€œ\u003cstrong\u003eå†™é”\u003c/strong\u003eâ€ã€â€œ\u003cstrong\u003eæ’å®ƒé”\u003c/strong\u003eâ€ã€‚\u003cul\u003e\n\u003cli\u003eç‹¬äº«é”é”å®šçš„æ•°æ®åªå…è®¸è¿›è¡Œé”å®šæ“ä½œçš„äº‹åŠ¡ä½¿ç”¨ï¼Œå…¶ä»–äº‹åŠ¡æ— æ³•å¯¹å·²é”å®šçš„æ•°æ®è¿›è¡ŒæŸ¥è¯¢æˆ–ä¿®æ”¹ã€‚\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨æ–¹å¼ï¼š\u003ccode\u003eSELECT ... FOR UPDATE;\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå…±äº«é”ï¼ˆSharedï¼‰\u003c/strong\u003eï¼Œç®€å†™ä¸º S é”ï¼Œåˆç§°ä¸ºâ€œ\u003cstrong\u003eè¯»é”\u003c/strong\u003eâ€ã€‚\u003cul\u003e\n\u003cli\u003eå…±äº«é”é”å®šçš„èµ„æºå¯ä»¥è¢«å…¶ä»–ç”¨æˆ·è¯»å–ï¼Œä½†ä¸èƒ½ä¿®æ”¹ã€‚åœ¨è¿›è¡Œ \u003ccode\u003eSELECT\u003c/code\u003e çš„æ—¶å€™ï¼Œä¼šå°†å¯¹è±¡è¿›è¡Œå…±äº«é”é”å®šï¼Œå½“æ•°æ®è¯»å–å®Œæ¯•ä¹‹åï¼Œå°±ä¼šé‡Šæ”¾å…±äº«é”ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯æ•°æ®åœ¨è¯»å–æ—¶ä¸è¢«ä¿®æ”¹ã€‚\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨æ–¹å¼ï¼š\u003ccode\u003eSELECT ... LOCK IN SHARE MODE;\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eä¸ºä»€ä¹ˆè¦å¼•å…¥è¯»å†™é”æœºåˆ¶ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eå®é™…ä¸Šï¼Œè¯»å†™é”æ˜¯ä¸€ç§é€šç”¨çš„é”æœºåˆ¶ï¼Œå¹¶é Mysql çš„ä¸“åˆ©ã€‚åœ¨å¾ˆå¤šè½¯ä»¶é¢†åŸŸï¼Œéƒ½å­˜åœ¨è¯»å†™é”æœºåˆ¶ã€‚\u003c/p\u003e\n\u003cp\u003eå› ä¸ºè¯»æ“ä½œæœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œä¸€èˆ¬ä¸šåŠ¡å¾€å¾€åˆæ˜¯è¯»å¤šå†™å°‘çš„æƒ…å†µã€‚å› æ­¤ï¼Œå¦‚æœå¯¹è¯»æ“ä½œè¿›è¡Œäº’æ–¥ï¼Œæ˜¯ä¸å¿…è¦çš„ï¼Œå¹¶ä¸”ä¼šå¤§å¤§é™ä½å¹¶å‘è®¿é—®æ•ˆç‡ã€‚æ­£å¼ä¸ºäº†åº”å¯¹è¿™ç§é—®é¢˜ï¼Œäº§ç”Ÿäº†è¯»å†™é”æœºåˆ¶ã€‚\u003c/p\u003e\n\u003cp\u003eè¯»å†™é”çš„ç‰¹ç‚¹æ˜¯ï¼š\u003cstrong\u003eè¯»è¯»ä¸äº’æ–¥\u003c/strong\u003eã€\u003cstrong\u003eè¯»å†™äº’æ–¥\u003c/strong\u003eã€\u003cstrong\u003eå†™å†™äº’æ–¥\u003c/strong\u003eã€‚ç®€è¨€ä¹‹ï¼š\u003cstrong\u003eåªè¦å­˜åœ¨å†™é”ï¼Œå…¶ä»–äº‹åŠ¡å°±ä¸èƒ½åšä»»ä½•æ“ä½œ\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæ³¨ï¼šInnoDB ä¸‹çš„è¡Œé”ã€é—´éš™é”ã€next-key é”ç»Ÿç»Ÿå±äºç‹¬äº«é”ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"æ‚²è§‚é”å’Œä¹è§‚é”\"\u003e\u003ca href=\"#æ‚²è§‚é”å’Œä¹è§‚é”\" class=\"headerlink\" title=\"æ‚²è§‚é”å’Œä¹è§‚é”\"\u003e\u003c/a\u003eæ‚²è§‚é”å’Œä¹è§‚é”\u003c/h4\u003e\u003cp\u003eåŸºäºåŠ é”æ–¹å¼åˆ†ç±»ï¼ŒMysql å¯ä»¥åˆ†ä¸ºæ‚²è§‚é”å’Œä¹è§‚é”ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eæ‚²è§‚é”\u003c/strong\u003e - å‡å®šä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œå±è”½ä¸€åˆ‡å¯èƒ½è¿åæ•°æ®å®Œæ•´æ€§çš„æ“ä½œ\u003cul\u003e\n\u003cli\u003eåœ¨æŸ¥è¯¢å®Œæ•°æ®çš„æ—¶å€™å°±æŠŠäº‹åŠ¡é”èµ·æ¥ï¼Œç›´åˆ°æäº¤äº‹åŠ¡ï¼ˆ\u003ccode\u003eCOMMIT\u003c/code\u003eï¼‰\u003c/li\u003e\n\u003cli\u003eå®ç°æ–¹å¼ï¼š\u003cstrong\u003eä½¿ç”¨æ•°æ®åº“ä¸­çš„é”æœºåˆ¶\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eä¹è§‚é”\u003c/strong\u003e - å‡è®¾æœ€å¥½çš„æƒ…å†µâ€”â€”æ¯æ¬¡è®¿é—®æ•°æ®æ—¶ï¼Œéƒ½å‡è®¾æ•°æ®ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹ï¼Œä¸å¿…åŠ é”ã€‚åªåœ¨æ›´æ–°çš„æ—¶å€™ï¼Œåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´æ˜¯å¦æœ‰å…¶ä»–çº¿ç¨‹æ›´æ–°è¯¥æ•°æ®ã€‚\u003cul\u003e\n\u003cli\u003eå®ç°æ–¹å¼ï¼š\u003cstrong\u003eæ›´æ–°æ•°æ®æ—¶ï¼Œå…ˆä½¿ç”¨ç‰ˆæœ¬å·æœºåˆ¶æˆ– CAS ç®—æ³•æ£€æŸ¥æ•°æ®æ˜¯å¦è¢«ä¿®æ”¹\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä¸ºä»€ä¹ˆè¦å¼•å…¥ä¹è§‚é”ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eä¹è§‚é”ä¹Ÿæ˜¯ä¸€ç§é€šç”¨çš„é”æœºåˆ¶ï¼Œåœ¨å¾ˆå¤šè½¯ä»¶é¢†åŸŸï¼Œéƒ½å­˜åœ¨ä¹è§‚é”æœºåˆ¶ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eé”ï¼Œæ„å‘³ç€äº’æ–¥ï¼Œæ„å‘³ç€é˜»å¡ã€‚åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œé”è¶Šå¤šï¼Œé˜»å¡è¶Šå¤šï¼ŒåŠ¿å¿…ä¼šæ‹‰ä½å¹¶å‘æ€§èƒ½\u003c/strong\u003eã€‚é‚£ä¹ˆï¼Œä¸ºäº†æé«˜å¹¶å‘åº¦ï¼Œèƒ½ä¸èƒ½å°½é‡ä¸åŠ é”å‘¢ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eä¹è§‚é”ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å‡è®¾æœ€å¥½çš„æƒ…å†µâ€”â€”æ¯æ¬¡è®¿é—®æ•°æ®æ—¶ï¼Œéƒ½å‡è®¾æ•°æ®ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹ï¼Œä¸å¿…åŠ é”ã€‚è™½ç„¶ä¸åŠ é”ï¼Œä½†ä¸æ„å‘³ç€ä»€ä¹ˆéƒ½ä¸åšï¼Œè€Œæ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ï¼Œåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´æ˜¯å¦æœ‰å…¶ä»–çº¿ç¨‹æ›´æ–°è¯¥æ•°æ®ã€‚ä¹è§‚é”æœ€å¸¸è§çš„å®ç°æ–¹å¼ï¼Œæ˜¯ä½¿ç”¨ç‰ˆæœ¬å·æœºåˆ¶æˆ– CAS ç®—æ³•ï¼ˆCompare And Swapï¼‰å»å®ç°ã€‚\u003c/p\u003e\n\u003cp\u003eä¹è§‚é”çš„\u003cstrong\u003eä¼˜ç‚¹\u003c/strong\u003eæ˜¯ï¼šå‡å°‘é”ç«äº‰ï¼Œæé«˜å¹¶å‘åº¦ã€‚\u003c/p\u003e\n\u003cp\u003eä¹è§‚é”çš„\u003cstrong\u003eç¼ºç‚¹\u003c/strong\u003eæ˜¯ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eå­˜åœ¨ ABA é—®é¢˜\u003c/strong\u003eã€‚æ‰€è°“çš„ ABA é—®é¢˜æ˜¯æŒ‡åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œå¦‚æœä¸€ä¸ªå˜é‡åˆæ¬¡è¯»å–çš„æ—¶å€™æ˜¯ A å€¼ï¼Œå®ƒçš„å€¼è¢«æ”¹æˆäº† Bï¼Œç„¶ååˆå…¶ä»–çº¿ç¨‹æŠŠ B å€¼æ”¹æˆäº† Aï¼Œè€Œå¦ä¸€ä¸ªæ—©æœŸçº¿ç¨‹åœ¨å¯¹æ¯”å€¼æ—¶ä¼šè¯¯ä»¥ä¸ºæ­¤å€¼æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œä½†å…¶å®å·²ç»å‘ç”Ÿå˜åŒ–äº†\u003c/li\u003e\n\u003cli\u003eå¦‚æœä¹è§‚é”æ‰€æ£€æŸ¥çš„æ•°æ®å­˜åœ¨å¤§é‡é”ç«äº‰ï¼Œä¼šç”±äº\u003cstrong\u003eä¸æ–­å¾ªç¯é‡è¯•ï¼Œäº§ç”Ÿå¤§é‡çš„ CPU å¼€é”€\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"å…¨å±€é”ã€è¡¨çº§é”ã€è¡Œçº§é”\"\u003e\u003ca href=\"#å…¨å±€é”ã€è¡¨çº§é”ã€è¡Œçº§é”\" class=\"headerlink\" title=\"å…¨å±€é”ã€è¡¨çº§é”ã€è¡Œçº§é”\"\u003e\u003c/a\u003eå…¨å±€é”ã€è¡¨çº§é”ã€è¡Œçº§é”\u003c/h4\u003e\u003cp\u003eå‰æ–‡æåˆ°äº†ï¼Œ\u003cstrong\u003eé”ï¼Œæ„å‘³ç€äº’æ–¥ï¼Œæ„å‘³ç€é˜»å¡ã€‚åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œé”è¶Šå¤šï¼Œé˜»å¡è¶Šå¤šï¼ŒåŠ¿å¿…ä¼šæ‹‰ä½å¹¶å‘æ€§èƒ½\u003c/strong\u003eã€‚åœ¨ä¸å¾—ä¸åŠ é”çš„æƒ…å†µä¸‹ï¼Œæ˜¾ç„¶ï¼ŒåŠ é”çš„èŒƒå›´è¶Šå°ï¼Œé”ç«äº‰çš„å‘ç”Ÿé¢‘ç‡å°±è¶Šå°ï¼Œç³»ç»Ÿçš„å¹¶å‘ç¨‹åº¦å°±è¶Šé«˜ã€‚ä½†æ˜¯ï¼ŒåŠ é”ä¹Ÿéœ€è¦æ¶ˆè€—èµ„æºï¼Œé”çš„å„ç§æ“ä½œï¼ˆåŒ…æ‹¬è·å–é”ã€é‡Šæ”¾é”ã€ä»¥åŠæ£€æŸ¥é”çŠ¶æ€ï¼‰éƒ½ä¼šå¢åŠ ç³»ç»Ÿå¼€é”€ï¼Œ\u003cstrong\u003eé”ç²’åº¦è¶Šå°ï¼Œç³»ç»Ÿçš„é”æ“ä½œå¼€é”€å°±è¶Šå¤§\u003c/strong\u003eã€‚å› æ­¤ï¼Œåœ¨é€‰æ‹©é”ç²’åº¦æ—¶ï¼Œä¹Ÿéœ€è¦åœ¨é”å¼€é”€å’Œå¹¶å‘ç¨‹åº¦ä¹‹é—´åšä¸€ä¸ªæƒè¡¡ã€‚\u003c/p\u003e\n\u003cp\u003eæ ¹æ®åŠ é”çš„èŒƒå›´ï¼ŒMySQL çš„é”å¤§è‡´å¯ä»¥åˆ†ä¸ºï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eå…¨å±€é”\u003c/strong\u003e - \u003cstrong\u003eâ€œå…¨å±€é”â€ä¼šé”å®šæ•´ä¸ªæ•°æ®åº“\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eè¡¨çº§é”ï¼ˆtable lockï¼‰\u003c/strong\u003e - \u003cstrong\u003eâ€œè¡¨çº§é”â€é”å®šæ•´å¼ è¡¨\u003c/strong\u003eã€‚ç”¨æˆ·å¯¹è¡¨è¿›è¡Œå†™æ“ä½œå‰ï¼Œéœ€è¦å…ˆè·å¾—å†™é”ï¼Œè¿™ä¼šé˜»å¡å…¶ä»–ç”¨æˆ·å¯¹è¯¥è¡¨çš„æ‰€æœ‰è¯»å†™æ“ä½œã€‚åªæœ‰æ²¡æœ‰å†™é”æ—¶ï¼Œå…¶ä»–ç”¨æˆ·æ‰èƒ½è·å¾—è¯»é”ï¼Œè¯»é”ä¹‹é—´ä¸ä¼šç›¸äº’é˜»å¡ã€‚è¡¨çº§é”æœ‰ï¼š\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè¡¨é”\u003c/strong\u003e - è¡¨é”å°±æ˜¯å¯¹æ•°æ®è¡¨è¿›è¡Œé”å®šï¼Œé”å®šç²’åº¦å¾ˆå¤§ï¼ŒåŒæ—¶å‘ç”Ÿé”å†²çªçš„æ¦‚ç‡ä¹Ÿä¼šè¾ƒé«˜ï¼Œæ•°æ®è®¿é—®çš„å¹¶å‘åº¦ä½ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå…ƒæ•°æ®é”ï¼ˆMDLï¼‰\u003c/strong\u003e - MDL ä¸éœ€è¦æ˜¾å¼ä½¿ç”¨ï¼Œåœ¨è®¿é—®ä¸€ä¸ªè¡¨çš„æ—¶å€™ä¼šè¢«è‡ªåŠ¨åŠ ä¸Šã€‚\u003cul\u003e\n\u003cli\u003eå¢åˆ æ”¹æŸ¥ï¼ŒåŠ è¯»é”\u003c/li\u003e\n\u003cli\u003eç»“æ„å˜æ›´ï¼ŒåŠ å†™é”\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ„å‘é”ï¼ˆIntention Lockï¼‰\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eè‡ªå¢é”ï¼ˆAUTO-INCï¼‰\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eè¡Œçº§é”ï¼ˆrow lockï¼‰\u003c/strong\u003e - \u003cstrong\u003eâ€œè¡Œçº§é”â€é”å®šæŒ‡å®šçš„è¡Œè®°å½•\u003c/strong\u003eã€‚è¿™æ ·å…¶å®ƒçº¿ç¨‹è¿˜æ˜¯å¯ä»¥å¯¹åŒä¸€ä¸ªè¡¨ä¸­çš„å…¶å®ƒè¡Œè®°å½•è¿›è¡Œæ“ä½œã€‚è¡Œçº§é”æœ‰ï¼š\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè®°å½•é”ï¼ˆRecord Lockï¼‰\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eé—´éš™é”ï¼ˆGap Lockï¼‰\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eä¸´é”®é”ï¼ˆNext-Key Lockï¼‰\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ’å…¥æ„å‘é”\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä»¥ä¸Šå„ç§åŠ é”ç²’åº¦ï¼Œåœ¨ä¸åŒå­˜å‚¨å¼•æ“ä¸­çš„æ”¯æŒæƒ…å†µå¹¶ä¸ç›¸åŒã€‚å¦‚ï¼šInnoDB æ”¯æŒå…¨å±€é”ã€è¡¨çº§é”ã€è¡Œçº§é”ï¼›è€Œ MyISAM åªæ”¯æŒå…¨å±€é”ã€è¡¨çº§é”ã€‚\u003c/p\u003e\n\u003cp\u003eæ¯ä¸ªå±‚çº§çš„é”æ•°é‡æ˜¯æœ‰é™åˆ¶çš„ï¼Œå› ä¸ºé”ä¼šå ç”¨å†…å­˜ç©ºé—´ï¼Œé”ç©ºé—´çš„å¤§å°æ˜¯æœ‰é™çš„ã€‚å½“æŸä¸ªå±‚çº§çš„é”æ•°é‡è¶…è¿‡äº†è¿™ä¸ªå±‚çº§çš„é˜ˆå€¼æ—¶ï¼Œå°±ä¼šè¿›è¡Œé”å‡çº§ã€‚é”å‡çº§å°±æ˜¯ç”¨æ›´å¤§ç²’åº¦çš„é”æ›¿ä»£å¤šä¸ªæ›´å°ç²’åº¦çš„é”ï¼Œæ¯”å¦‚ InnoDB ä¸­è¡Œé”å‡çº§ä¸ºè¡¨é”ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯å ç”¨çš„é”ç©ºé—´é™ä½äº†ï¼Œä½†åŒæ—¶æ•°æ®çš„å¹¶å‘åº¦ä¹Ÿä¸‹é™äº†ã€‚\u003c/p\u003e\n\u003ch3 id=\"æ­»é”æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿ\"\u003e\u003ca href=\"#æ­»é”æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿ\" class=\"headerlink\" title=\"æ­»é”æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿ\"\u003e\u003c/a\u003eæ­»é”æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿ\u003c/h3\u003e\u003cp\u003e\u003cstrong\u003eâ€œæ­»é”â€æ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹åŠ¡ç«äº‰åŒä¸€èµ„æºï¼Œå¹¶è¯·æ±‚é”å®šå¯¹æ–¹å ç”¨çš„èµ„æºï¼Œä»è€Œå¯¼è‡´æ¶æ€§å¾ªç¯çš„ç°è±¡\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eäº§ç”Ÿæ­»é”çš„åœºæ™¯ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå½“å¤šä¸ªäº‹åŠ¡è¯•å›¾ä»¥ä¸åŒçš„é¡ºåºé”å®šèµ„æºæ—¶ï¼Œå°±å¯èƒ½ä¼šäº§ç”Ÿæ­»é”ã€‚\u003c/li\u003e\n\u003cli\u003eå¤šä¸ªäº‹åŠ¡åŒæ—¶é”å®šåŒä¸€ä¸ªèµ„æºæ—¶ï¼Œä¹Ÿä¼šäº§ç”Ÿæ­»é”ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"å¦‚ä½•é¿å…æ­»é”ï¼Ÿ\"\u003e\u003ca href=\"#å¦‚ä½•é¿å…æ­»é”ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•é¿å…æ­»é”ï¼Ÿ\"\u003e\u003c/a\u003eå¦‚ä½•é¿å…æ­»é”ï¼Ÿ\u003c/h3\u003e\u003cp\u003eæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ï¼š\u003cstrong\u003eäº’æ–¥ã€å æœ‰ä¸”ç­‰å¾…ã€ä¸å¯å¼ºå ç”¨ã€å¾ªç¯ç­‰å¾…\u003c/strong\u003eã€‚åªè¦ç³»ç»Ÿå‘ç”Ÿæ­»é”ï¼Œè¿™äº›æ¡ä»¶å¿…ç„¶æˆç«‹ï¼Œä½†æ˜¯åªè¦ç ´åä»»æ„ä¸€ä¸ªæ¡ä»¶å°±æ­»é”å°±ä¸ä¼šæˆç«‹ã€‚ç”±æ­¤å¯çŸ¥ï¼Œè¦æƒ³é¿å…æ­»é”ï¼Œå°±è¦ä»è¿™å‡ ä¸ªå¿…è¦æ¡ä»¶ä¸Šå»ç€æ‰‹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæ›´æ–°è¡¨æ—¶ï¼Œ\u003cstrong\u003eå°½é‡ä½¿ç”¨ä¸»é”®æ›´æ–°\u003c/strong\u003eï¼Œå‡å°‘å†²çªï¼›\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eé¿å…é•¿äº‹åŠ¡\u003c/strong\u003eï¼Œå°½é‡å°†é•¿äº‹åŠ¡æ‹†è§£ï¼Œå¯ä»¥é™ä½ä¸å…¶å®ƒäº‹åŠ¡å‘ç”Ÿå†²çªçš„æ¦‚ç‡ï¼›\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eè®¾ç½®åˆç†çš„é”ç­‰å¾…è¶…æ—¶å‚æ•°\u003c/strong\u003eï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ \u003ccode\u003einnodb_lock_wait_timeout\u003c/code\u003e è®¾ç½®åˆç†çš„ç­‰å¾…è¶…æ—¶é˜ˆå€¼ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸€äº›é«˜å¹¶å‘çš„ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°½é‡å°†è¯¥å€¼è®¾ç½®å¾—å°ä¸€äº›ï¼Œé¿å…å¤§é‡äº‹åŠ¡ç­‰å¾…ï¼Œå ç”¨ç³»ç»Ÿèµ„æºï¼Œé€ æˆä¸¥é‡çš„æ€§èƒ½å¼€é”€ã€‚\u003c/li\u003e\n\u003cli\u003eåœ¨ç¼–ç¨‹ä¸­\u003cstrong\u003eå°½é‡æŒ‰ç…§å›ºå®šçš„é¡ºåºæ¥å¤„ç†æ•°æ®åº“è®°å½•\u003c/strong\u003eï¼Œå‡è®¾æœ‰ä¸¤ä¸ªæ›´æ–°æ“ä½œï¼Œåˆ†åˆ«æ›´æ–°ä¸¤æ¡ç›¸åŒçš„è®°å½•ï¼Œä½†æ›´æ–°é¡ºåºä¸ä¸€æ ·ï¼Œæœ‰å¯èƒ½å¯¼è‡´æ­»é”ï¼›\u003c/li\u003e\n\u003cli\u003eåœ¨å…è®¸å¹»è¯»å’Œä¸å¯é‡å¤è¯»çš„æƒ…å†µä¸‹ï¼Œå°½é‡ä½¿ç”¨è¯»å·²æäº¤äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œå¯ä»¥é¿å… Gap Lock å¯¼è‡´çš„æ­»é”é—®é¢˜ï¼›\u003c/li\u003e\n\u003cli\u003eè¿˜å¯ä»¥ä½¿ç”¨å…¶å®ƒçš„æ–¹å¼æ¥ä»£æ›¿æ•°æ®åº“å®ç°å¹‚ç­‰æ€§æ ¡éªŒã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ Redis ä»¥åŠ ZooKeeper æ¥å®ç°ï¼Œè¿è¡Œæ•ˆç‡æ¯”æ•°æ®åº“æ›´ä½³ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"å¦‚ä½•è§£å†³æ­»é”ï¼Ÿ\"\u003e\u003ca href=\"#å¦‚ä½•è§£å†³æ­»é”ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•è§£å†³æ­»é”ï¼Ÿ\"\u003e\u003c/a\u003eå¦‚ä½•è§£å†³æ­»é”ï¼Ÿ\u003c/h3\u003e\u003cp\u003eå½“å‡ºç°æ­»é”ä»¥åï¼Œæœ‰ä¸¤ç§ç­–ç•¥ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eè®¾ç½®äº‹åŠ¡ç­‰å¾…é”çš„è¶…æ—¶æ—¶é—´\u003c/strong\u003eã€‚è¿™ä¸ªè¶…æ—¶æ—¶é—´å¯ä»¥é€šè¿‡å‚æ•° \u003ccode\u003einnodb_lock_wait_timeout\u003c/code\u003e æ¥è®¾ç½®ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå¼€å¯æ­»é”æ£€æµ‹\u003c/strong\u003eï¼Œå‘ç°æ­»é”åï¼Œä¸»åŠ¨å›æ»šæ­»é”é“¾æ¡ä¸­çš„æŸä¸€ä¸ªäº‹åŠ¡ï¼Œè®©å…¶ä»–äº‹åŠ¡å¾—ä»¥ç»§ç»­æ‰§è¡Œã€‚å°†å‚æ•° \u003ccode\u003einnodb_deadlock_detect\u003c/code\u003e è®¾ç½®ä¸º \u003ccode\u003eon\u003c/code\u003eï¼Œè¡¨ç¤ºå¼€å¯è¿™ä¸ªé€»è¾‘ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eåœ¨ InnoDB ä¸­ï¼Œ\u003ccode\u003einnodb_lock_wait_timeout\u003c/code\u003e çš„é»˜è®¤å€¼æ˜¯ 50sï¼Œæ„å‘³ç€å¦‚æœé‡‡ç”¨ç¬¬ä¸€ä¸ªç­–ç•¥ï¼Œå½“å‡ºç°æ­»é”ä»¥åï¼Œç¬¬ä¸€ä¸ªè¢«é”ä½çš„çº¿ç¨‹è¦è¿‡ 50s æ‰ä¼šè¶…æ—¶é€€å‡ºï¼Œç„¶åå…¶ä»–çº¿ç¨‹æ‰æœ‰å¯èƒ½ç»§ç»­æ‰§è¡Œã€‚å¯¹äºåœ¨çº¿æœåŠ¡æ¥è¯´ï¼Œè¿™ä¸ªç­‰å¾…æ—¶é—´å¾€å¾€æ˜¯æ— æ³•æ¥å—çš„ã€‚ä½†æ˜¯ï¼Œæˆ‘ç›´æ¥æŠŠè¿™ä¸ªæ—¶é—´è®¾ç½®æˆä¸€ä¸ªå¾ˆå°çš„å€¼ï¼Œæ¯”å¦‚ 1sï¼Œä¹Ÿæ˜¯ä¸å¯å–çš„ã€‚å½“å‡ºç°æ­»é”çš„æ—¶å€™ï¼Œç¡®å®å¾ˆå¿«å°±å¯ä»¥è§£å¼€ï¼Œä½†å¦‚æœä¸æ˜¯æ­»é”ï¼Œè€Œæ˜¯ç®€å•çš„é”ç­‰å¾…å‘¢ï¼Ÿæ‰€ä»¥ï¼Œè¶…æ—¶æ—¶é—´è®¾ç½®å¤ªçŸ­çš„è¯ï¼Œä¼šå‡ºç°å¾ˆå¤šè¯¯ä¼¤ã€‚\u003c/p\u003e\n\u003cp\u003eæ‰€ä»¥ï¼Œæ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬è¿˜æ˜¯è¦é‡‡ç”¨ç¬¬äºŒç§ç­–ç•¥ï¼Œå³ï¼šä¸»åŠ¨æ­»é”æ£€æµ‹ï¼Œè€Œä¸” \u003ccode\u003einnodb_deadlock_detect\u003c/code\u003e çš„é»˜è®¤å€¼æœ¬èº«å°±æ˜¯ onã€‚ä¸ºäº†è§£å†³æ­»é”é—®é¢˜ï¼Œä¸åŒæ•°æ®åº“å®ç°äº†å„è‡ªçš„æ­»é”æ£€æµ‹å’Œè¶…æ—¶æœºåˆ¶ã€‚InnoDB çš„å¤„ç†ç­–ç•¥æ˜¯ï¼š\u003cstrong\u003eå°†æŒæœ‰æœ€å°‘è¡Œçº§æ’å®ƒé”çš„äº‹åŠ¡è¿›è¡Œå›æ»š\u003c/strong\u003eã€‚ä¸»åŠ¨æ­»é”æ£€æµ‹åœ¨å‘ç”Ÿæ­»é”çš„æ—¶å€™ï¼Œæ˜¯èƒ½å¤Ÿå¿«é€Ÿå‘ç°å¹¶è¿›è¡Œå¤„ç†çš„ï¼Œä½†æ˜¯å®ƒä¹Ÿæ˜¯æœ‰é¢å¤–è´Ÿæ‹…çš„ï¼šæ¯å½“ä¸€ä¸ªäº‹åŠ¡è¢«é”çš„æ—¶å€™ï¼Œå°±è¦çœ‹çœ‹å®ƒæ‰€ä¾èµ–çš„çº¿ç¨‹æœ‰æ²¡æœ‰è¢«åˆ«äººé”ä½ï¼Œå¦‚æ­¤å¾ªç¯ï¼Œæœ€ååˆ¤æ–­æ˜¯å¦å‡ºç°äº†å¾ªç¯ç­‰å¾…ï¼Œä¹Ÿå°±æ˜¯æ­»é”ã€‚å› æ­¤ï¼Œæ­»é”æ£€æµ‹å¯èƒ½ä¼šè€—è´¹å¤§é‡çš„ CPUã€‚\u003c/p\u003e\n\u003ch2 id=\"ä¼˜åŒ–\"\u003e\u003ca href=\"#ä¼˜åŒ–\" class=\"headerlink\" title=\"ä¼˜åŒ–\"\u003e\u003c/a\u003eä¼˜åŒ–\u003c/h2\u003e\u003ch3 id=\"å¦‚ä½•å‘ç°æ…¢-SQLï¼Ÿ\"\u003e\u003ca href=\"#å¦‚ä½•å‘ç°æ…¢-SQLï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•å‘ç°æ…¢ SQLï¼Ÿ\"\u003e\u003c/a\u003eå¦‚ä½•å‘ç°æ…¢ SQLï¼Ÿ\u003c/h3\u003e\u003cp\u003eæ…¢ SQL çš„ç›‘æ§ä¸»è¦é€šè¿‡ä¸¤ä¸ªé€”å¾„ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eæ…¢æŸ¥è¯¢æ—¥å¿—\u003c/strong\u003eï¼šå¼€å¯ MySQL çš„æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œå†é€šè¿‡ä¸€äº›å·¥å…·æ¯”å¦‚ mysqldumpslow å»åˆ†æå¯¹åº”çš„æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œå½“ç„¶ç°åœ¨ä¸€èˆ¬çš„äº‘å‚å•†éƒ½æä¾›äº†å¯è§†åŒ–çš„å¹³å°ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæœåŠ¡ç›‘æ§\u003c/strong\u003eï¼šå¯ä»¥åœ¨ä¸šåŠ¡çš„åŸºå»ºä¸­åŠ å…¥å¯¹æ…¢ SQL çš„ç›‘æ§ï¼Œå¸¸è§çš„æ–¹æ¡ˆæœ‰å­—èŠ‚ç æ’æ¡©ã€è¿æ¥æ± æ‰©å±•ã€ORM æ¡†æ¶è¿‡ç¨‹ï¼Œå¯¹æœåŠ¡è¿è¡Œä¸­çš„æ…¢ SQL è¿›è¡Œç›‘æ§å’Œå‘Šè­¦ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ä»€ä¹ˆæ˜¯æ‰§è¡Œè®¡åˆ’ï¼Ÿ\"\u003e\u003ca href=\"#ä»€ä¹ˆæ˜¯æ‰§è¡Œè®¡åˆ’ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯æ‰§è¡Œè®¡åˆ’ï¼Ÿ\"\u003e\u003c/a\u003eä»€ä¹ˆæ˜¯æ‰§è¡Œè®¡åˆ’ï¼Ÿ\u003c/h3\u003e\u003ch3 id=\"å¦‚ä½•åˆ†ææ‰§è¡Œè®¡åˆ’ï¼Ÿ\"\u003e\u003ca href=\"#å¦‚ä½•åˆ†ææ‰§è¡Œè®¡åˆ’ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•åˆ†ææ‰§è¡Œè®¡åˆ’ï¼Ÿ\"\u003e\u003c/a\u003eå¦‚ä½•åˆ†ææ‰§è¡Œè®¡åˆ’ï¼Ÿ\u003c/h3\u003e\u003ch3 id=\"å¦‚ä½•ä¼˜åŒ–-SQL\"\u003e\u003ca href=\"#å¦‚ä½•ä¼˜åŒ–-SQL\" class=\"headerlink\" title=\"å¦‚ä½•ä¼˜åŒ– SQL\"\u003e\u003c/a\u003eå¦‚ä½•ä¼˜åŒ– SQL\u003c/h3\u003e\u003ch4 id=\"é¿å…ä¸å¿…è¦çš„åˆ—\"\u003e\u003ca href=\"#é¿å…ä¸å¿…è¦çš„åˆ—\" class=\"headerlink\" title=\"é¿å…ä¸å¿…è¦çš„åˆ—\"\u003e\u003c/a\u003eé¿å…ä¸å¿…è¦çš„åˆ—\u003c/h4\u003e\u003cp\u003eè¿™ä¸ªæ˜¯è€ç”Ÿå¸¸è°ˆï¼Œä½†è¿˜æ˜¯ç»å¸¸ä¼šå‡ºçš„æƒ…å†µï¼ŒSQL æŸ¥è¯¢çš„æ—¶å€™ï¼Œåº”è¯¥åªæŸ¥è¯¢éœ€è¦çš„åˆ—ï¼Œè€Œä¸è¦åŒ…å«é¢å¤–çš„åˆ—ï¼Œåƒ\u003ccode\u003eslect *\u003c/code\u003e è¿™ç§å†™æ³•åº”è¯¥å°½é‡é¿å…ã€‚\u003c/p\u003e\n\u003ch4 id=\"åˆ†é¡µä¼˜åŒ–\"\u003e\u003ca href=\"#åˆ†é¡µä¼˜åŒ–\" class=\"headerlink\" title=\"åˆ†é¡µä¼˜åŒ–\"\u003e\u003c/a\u003eåˆ†é¡µä¼˜åŒ–\u003c/h4\u003e\u003cp\u003eåœ¨æ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œåˆ†é¡µæ¯”è¾ƒæ·±çš„æƒ…å†µä¸‹ï¼Œéœ€è¦è€ƒè™‘åˆ†é¡µçš„ä¼˜åŒ–ã€‚\u003c/p\u003e\n\u003cp\u003eä¾‹å¦‚ï¼š\u003c/p\u003e\n\u003cfigure class=\"highlight text\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eselect * from table where type = 2 and level = 9 order by id asc limit 190289,10;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003eä¼˜åŒ–æ–¹æ¡ˆï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eå»¶è¿Ÿå…³è”\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eå…ˆé€šè¿‡ where æ¡ä»¶æå–å‡ºä¸»é”®ï¼Œåœ¨å°†è¯¥è¡¨ä¸åŸæ•°æ®è¡¨å…³è”ï¼Œé€šè¿‡ä¸»é”® id æå–æ•°æ®è¡Œï¼Œè€Œä¸æ˜¯é€šè¿‡åŸæ¥çš„äºŒçº§ç´¢å¼•æå–æ•°æ®è¡Œ\u003c/p\u003e\n\u003cp\u003eä¾‹å¦‚ï¼š\u003c/p\u003e\n\u003cfigure class=\"highlight text\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eselect a.* from table a,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e (select id from table where type = 2 and level = 9 order by id asc limit 190289,10 ) b\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e where a.id = b.id\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eä¹¦ç­¾æ–¹å¼\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä¹¦ç­¾æ–¹å¼å°±æ˜¯æ‰¾åˆ° limit ç¬¬ä¸€ä¸ªå‚æ•°å¯¹åº”çš„ä¸»é”®å€¼ï¼Œæ ¹æ®è¿™ä¸ªä¸»é”®å€¼å†å»è¿‡æ»¤å¹¶ limit\u003c/p\u003e\n\u003cp\u003eä¾‹å¦‚ï¼š\u003c/p\u003e\n\u003cfigure class=\"highlight text\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eselect * from table where id \u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(select * from table where type = 2 and level = 9 order by id asc limit 190\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"ç´¢å¼•ä¼˜åŒ–\"\u003e\u003ca href=\"#ç´¢å¼•ä¼˜åŒ–\" class=\"headerlink\" title=\"ç´¢å¼•ä¼˜åŒ–\"\u003e\u003c/a\u003eç´¢å¼•ä¼˜åŒ–\u003c/h4\u003e\u003cp\u003eåˆç†åœ°è®¾è®¡å’Œä½¿ç”¨ç´¢å¼•ï¼Œæ˜¯ä¼˜åŒ–æ…¢ SQL çš„åˆ©å™¨ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eåˆ©ç”¨è¦†ç›–ç´¢å¼•\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eInnoDB ä½¿ç”¨éä¸»é”®ç´¢å¼•æŸ¥è¯¢æ•°æ®æ—¶ä¼šå›è¡¨ï¼Œä½†æ˜¯å¦‚æœç´¢å¼•çš„å¶èŠ‚ç‚¹ä¸­å·²ç»åŒ…å«è¦æŸ¥è¯¢çš„å­—æ®µï¼Œé‚£å®ƒæ²¡æœ‰å¿…è¦å†å›è¡¨æŸ¥è¯¢äº†ï¼Œè¿™å°±å«è¦†ç›–ç´¢å¼•\u003c/p\u003e\n\u003cp\u003eä¾‹å¦‚å¯¹äºå¦‚ä¸‹æŸ¥è¯¢ï¼š\u003c/p\u003e\n\u003cfigure class=\"highlight text\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eselect name from test where city=\u0026#39;ä¸Šæµ·\u0026#39;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003eæˆ‘ä»¬å°†è¢«æŸ¥è¯¢çš„å­—æ®µå»ºç«‹åˆ°è”åˆç´¢å¼•ä¸­ï¼Œè¿™æ ·æŸ¥è¯¢ç»“æœå°±å¯ä»¥ç›´æ¥ä»ç´¢å¼•ä¸­è·å–\u003c/p\u003e\n\u003cfigure class=\"highlight text\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ealter table test add index idx_city_name (city, name);\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cstrong\u003eä½ç‰ˆæœ¬é¿å…ä½¿ç”¨ or æŸ¥è¯¢\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eåœ¨ MySQL 5.0 ä¹‹å‰çš„ç‰ˆæœ¬è¦å°½é‡é¿å…ä½¿ç”¨ or æŸ¥è¯¢ï¼Œå¯ä»¥ä½¿ç”¨ union æˆ–è€…å­æŸ¥è¯¢æ¥æ›¿ä»£ï¼Œå› ä¸ºæ—©æœŸçš„ MySQL ç‰ˆæœ¬ä½¿ç”¨ or æŸ¥è¯¢å¯èƒ½ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œé«˜ç‰ˆæœ¬å¼•å…¥äº†ç´¢å¼•åˆå¹¶ï¼Œè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eé¿å…ä½¿ç”¨ != æˆ–è€… \u0026lt;\u0026gt; æ“ä½œç¬¦\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eSQL ä¸­ï¼Œä¸ç­‰äºæ“ä½œç¬¦ä¼šå¯¼è‡´æŸ¥è¯¢å¼•æ“æ”¾å¼ƒæŸ¥è¯¢ç´¢å¼•ï¼Œå¼•èµ·å…¨è¡¨æ‰«æï¼Œå³ä½¿æ¯”è¾ƒçš„å­—æ®µä¸Šæœ‰ç´¢å¼•\u003c/p\u003e\n\u003cp\u003eè§£å†³æ–¹æ³•ï¼šé€šè¿‡æŠŠä¸ç­‰äºæ“ä½œç¬¦æ”¹æˆ orï¼Œå¯ä»¥ä½¿ç”¨ç´¢å¼•ï¼Œé¿å…å…¨è¡¨æ‰«æ\u003c/p\u003e\n\u003cp\u003eä¾‹å¦‚ï¼ŒæŠŠ\u003ccode\u003ecolumn\u0026lt;\u0026gt;â€™aaaâ€™ï¼Œæ”¹æˆcolumn\u0026gt;â€™aaaâ€™ or column\u0026lt;â€™aaaâ€™\u003c/code\u003eï¼Œå°±å¯ä»¥ä½¿ç”¨ç´¢å¼•äº†\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eé€‚å½“ä½¿ç”¨å‰ç¼€ç´¢å¼•\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eé€‚å½“åœ°ä½¿ç”¨å‰ç¼€æ‰€äº‘ï¼Œå¯ä»¥é™ä½ç´¢å¼•çš„ç©ºé—´å ç”¨ï¼Œæé«˜ç´¢å¼•çš„æŸ¥è¯¢æ•ˆç‡ã€‚\u003c/p\u003e\n\u003cp\u003eæ¯”å¦‚ï¼Œé‚®ç®±çš„åç¼€éƒ½æ˜¯å›ºå®šçš„â€œ\u003ccode\u003e@xxx.com\u003c/code\u003eâ€ï¼Œé‚£ä¹ˆç±»ä¼¼è¿™ç§åé¢å‡ ä½ä¸ºå›ºå®šå€¼çš„å­—æ®µå°±éå¸¸é€‚åˆå®šä¹‰ä¸ºå‰ç¼€ç´¢å¼•\u003c/p\u003e\n\u003cfigure class=\"highlight text\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ealter table test add index index2(email(6));\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003ePS:éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‰ç¼€ç´¢å¼•ä¹Ÿå­˜åœ¨ç¼ºç‚¹ï¼ŒMySQL æ— æ³•åˆ©ç”¨å‰ç¼€ç´¢å¼•åš order by å’Œ group by æ“ä½œï¼Œä¹Ÿæ— æ³•ä½œä¸ºè¦†ç›–ç´¢å¼•\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eé¿å…åˆ—ä¸Šå‡½æ•°è¿ç®—\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eè¦é¿å…åœ¨åˆ—å­—æ®µä¸Šè¿›è¡Œç®—æœ¯è¿ç®—æˆ–å…¶ä»–è¡¨è¾¾å¼è¿ç®—ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´å­˜å‚¨å¼•æ“æ— æ³•æ­£ç¡®ä½¿ç”¨ç´¢å¼•ï¼Œä»è€Œå½±å“äº†æŸ¥è¯¢çš„æ•ˆç‡\u003c/p\u003e\n\u003cfigure class=\"highlight text\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eselect * from test where id + 1 = 50;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eselect * from test where month(updateTime) = 7;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cstrong\u003eæ­£ç¡®ä½¿ç”¨è”åˆç´¢å¼•\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eä½¿ç”¨è”åˆç´¢å¼•çš„æ—¶å€™ï¼Œæ³¨æ„æœ€å·¦åŒ¹é…åŸåˆ™ã€‚\u003c/p\u003e\n\u003ch4 id=\"JOIN-ä¼˜åŒ–\"\u003e\u003ca href=\"#JOIN-ä¼˜åŒ–\" class=\"headerlink\" title=\"JOIN ä¼˜åŒ–\"\u003e\u003c/a\u003eJOIN ä¼˜åŒ–\u003c/h4\u003e\u003cp\u003e\u003cstrong\u003eä¼˜åŒ–å­æŸ¥è¯¢\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eå°½é‡ä½¿ç”¨ Join è¯­å¥æ¥æ›¿ä»£å­æŸ¥è¯¢ï¼Œå› ä¸ºå­æŸ¥è¯¢æ˜¯åµŒå¥—æŸ¥è¯¢ï¼Œè€ŒåµŒå¥—æŸ¥è¯¢ä¼šæ–°åˆ›å»ºä¸€å¼ ä¸´æ—¶è¡¨ï¼Œè€Œä¸´æ—¶è¡¨çš„åˆ›å»ºä¸é”€æ¯ä¼šå ç”¨ä¸€å®šçš„ç³»ç»Ÿèµ„æºä»¥åŠèŠ±è´¹ä¸€å®šçš„æ—¶é—´ï¼ŒåŒæ—¶å¯¹äºè¿”å›ç»“æœé›†æ¯”è¾ƒå¤§çš„å­æŸ¥è¯¢ï¼Œå…¶å¯¹æŸ¥è¯¢æ€§èƒ½çš„å½±å“æ›´å¤§\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eå°è¡¨é©±åŠ¨å¤§è¡¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eå…³è”æŸ¥è¯¢çš„æ—¶å€™è¦æ‹¿å°è¡¨å»é©±åŠ¨å¤§è¡¨ï¼Œå› ä¸ºå…³è”çš„æ—¶å€™ï¼ŒMySQL å†…éƒ¨ä¼šéå†é©±åŠ¨è¡¨ï¼Œå†å»è¿æ¥è¢«é©±åŠ¨è¡¨ã€‚\u003c/p\u003e\n\u003cp\u003eæ¯”å¦‚ left joinï¼Œå·¦è¡¨å°±æ˜¯é©±åŠ¨è¡¨ï¼ŒA è¡¨å°äº B è¡¨ï¼Œå»ºç«‹è¿æ¥çš„æ¬¡æ•°å°±å°‘ï¼ŒæŸ¥è¯¢é€Ÿåº¦å°±è¢«åŠ å¿«äº†ã€‚\u003c/p\u003e\n\u003cfigure class=\"highlight text\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eselect name from A left join B ;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cstrong\u003eé€‚å½“å¢åŠ å†—ä½™å­—æ®µ\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eå¢åŠ å†—ä½™å­—æ®µå¯ä»¥å‡å°‘å¤§é‡çš„è¿è¡¨æŸ¥è¯¢ï¼Œå› ä¸ºå¤šå¼ è¡¨çš„è¿è¡¨æŸ¥è¯¢æ€§èƒ½å¾ˆä½ï¼Œæ‰€æœ‰å¯ä»¥é€‚å½“çš„å¢åŠ å†—ä½™å­—æ®µï¼Œä»¥å‡å°‘å¤šå¼ è¡¨çš„å…³è”æŸ¥è¯¢ï¼Œè¿™æ˜¯ä»¥ç©ºé—´æ¢æ—¶é—´çš„ä¼˜åŒ–ç­–ç•¥\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eé¿å…ä½¿ç”¨ JOIN å…³è”å¤ªå¤šçš„è¡¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eã€Šé˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œã€‹è§„å®šä¸è¦ join è¶…è¿‡ä¸‰å¼ è¡¨ï¼Œç¬¬ä¸€ join å¤ªå¤šé™ä½æŸ¥è¯¢çš„é€Ÿåº¦ï¼Œç¬¬äºŒ join çš„ buffer ä¼šå ç”¨æ›´å¤šçš„å†…å­˜ã€‚\u003c/p\u003e\n\u003cp\u003eå¦‚æœä¸å¯é¿å…è¦ join å¤šå¼ è¡¨ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨æ•°æ®å¼‚æ„çš„æ–¹å¼å¼‚æ„åˆ° ES ä¸­æŸ¥è¯¢ã€‚\u003c/p\u003e\n\u003ch4 id=\"æ’åºä¼˜åŒ–\"\u003e\u003ca href=\"#æ’åºä¼˜åŒ–\" class=\"headerlink\" title=\"æ’åºä¼˜åŒ–\"\u003e\u003c/a\u003eæ’åºä¼˜åŒ–\u003c/h4\u003e\u003cp\u003e\u003cstrong\u003eåˆ©ç”¨ç´¢å¼•æ‰«æåšæ’åº\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eMySQL æœ‰ä¸¤ç§æ–¹å¼ç”Ÿæˆæœ‰åºç»“æœï¼šå…¶ä¸€æ˜¯å¯¹ç»“æœé›†è¿›è¡Œæ’åºçš„æ“ä½œï¼Œå…¶äºŒæ˜¯æŒ‰ç…§ç´¢å¼•é¡ºåºæ‰«æå¾—å‡ºçš„ç»“æœè‡ªç„¶æ˜¯æœ‰åºçš„\u003c/p\u003e\n\u003cp\u003eä½†æ˜¯å¦‚æœç´¢å¼•ä¸èƒ½è¦†ç›–æŸ¥è¯¢æ‰€éœ€åˆ—ï¼Œå°±ä¸å¾—ä¸æ¯æ‰«æä¸€æ¡è®°å½•å›è¡¨æŸ¥è¯¢ä¸€æ¬¡ï¼Œè¿™ä¸ªè¯»æ“ä½œæ˜¯éšæœº IOï¼Œé€šå¸¸ä¼šæ¯”é¡ºåºå…¨è¡¨æ‰«æè¿˜æ…¢\u003c/p\u003e\n\u003cp\u003eå› æ­¤ï¼Œåœ¨è®¾è®¡ç´¢å¼•æ—¶ï¼Œå°½å¯èƒ½ä½¿ç”¨åŒä¸€ä¸ªç´¢å¼•æ—¢æ»¡è¶³æ’åºåˆç”¨äºæŸ¥æ‰¾è¡Œ\u003c/p\u003e\n\u003cp\u003eä¾‹å¦‚ï¼š\u003c/p\u003e\n\u003cfigure class=\"highlight text\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e--å»ºç«‹ç´¢å¼•ï¼ˆdate,staff_id,customer_idï¼‰\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eselect staff_id, customer_id from test where date = \u0026#39;2010-01-01\u0026#39; order by staff_id,customer_id;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003eåªæœ‰å½“ç´¢å¼•çš„åˆ—é¡ºåºå’Œ ORDER BY å­å¥çš„é¡ºåºå®Œå…¨ä¸€è‡´ï¼Œå¹¶ä¸”æ‰€æœ‰åˆ—çš„æ’åºæ–¹å‘éƒ½ä¸€æ ·æ—¶ï¼Œæ‰èƒ½å¤Ÿä½¿ç”¨ç´¢å¼•æ¥å¯¹ç»“æœåšæ’åº\u003c/p\u003e\n\u003ch4 id=\"UNION-ä¼˜åŒ–\"\u003e\u003ca href=\"#UNION-ä¼˜åŒ–\" class=\"headerlink\" title=\"UNION ä¼˜åŒ–\"\u003e\u003c/a\u003eUNION ä¼˜åŒ–\u003c/h4\u003e\u003cp\u003e\u003cstrong\u003eæ¡ä»¶ä¸‹æ¨\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eMySQL å¤„ç† union çš„ç­–ç•¥æ˜¯å…ˆåˆ›å»ºä¸´æ—¶è¡¨ï¼Œç„¶åå°†å„ä¸ªæŸ¥è¯¢ç»“æœå¡«å……åˆ°ä¸´æ—¶è¡¨ä¸­æœ€åå†æ¥åšæŸ¥è¯¢ï¼Œå¾ˆå¤šä¼˜åŒ–ç­–ç•¥åœ¨ union æŸ¥è¯¢ä¸­éƒ½ä¼šå¤±æ•ˆï¼Œå› ä¸ºå®ƒæ— æ³•åˆ©ç”¨ç´¢å¼•\u003c/p\u003e\n\u003cp\u003eæœ€å¥½æ‰‹å·¥å°† whereã€limit ç­‰å­å¥ä¸‹æ¨åˆ° union çš„å„ä¸ªå­æŸ¥è¯¢ä¸­ï¼Œä»¥ä¾¿ä¼˜åŒ–å™¨å¯ä»¥å……åˆ†åˆ©ç”¨è¿™äº›æ¡ä»¶è¿›è¡Œä¼˜åŒ–\u003c/p\u003e\n\u003cp\u003eæ­¤å¤–ï¼Œé™¤éç¡®å®éœ€è¦æœåŠ¡å™¨å»é‡ï¼Œä¸€å®šè¦ä½¿ç”¨ union allï¼Œå¦‚æœä¸åŠ  all å…³é”®å­—ï¼ŒMySQL ä¼šç»™ä¸´æ—¶è¡¨åŠ ä¸Š distinct é€‰é¡¹ï¼Œè¿™ä¼šå¯¼è‡´å¯¹æ•´ä¸ªä¸´æ—¶è¡¨åšå”¯ä¸€æ€§æ£€æŸ¥ï¼Œä»£ä»·å¾ˆé«˜ã€‚\u003c/p\u003e\n\u003ch3 id=\"å“ªç§-COUNT-æ€§èƒ½æœ€å¥½ï¼Ÿ\"\u003e\u003ca href=\"#å“ªç§-COUNT-æ€§èƒ½æœ€å¥½ï¼Ÿ\" class=\"headerlink\" title=\"å“ªç§ COUNT æ€§èƒ½æœ€å¥½ï¼Ÿ\"\u003e\u003c/a\u003eå“ªç§ COUNT æ€§èƒ½æœ€å¥½ï¼Ÿ\u003c/h3\u003e\u003cblockquote\u003e\n\u003cp\u003eå…ˆè¯´ç»“è®ºï¼šæŒ‰ç…§æ•ˆç‡æ’åºçš„è¯ï¼Œ\u003ccode\u003eCOUNT(å­—æ®µ)\u003c/code\u003e \u0026lt; \u003ccode\u003eCOUNT(ä¸»é”® id)\u003c/code\u003e \u0026lt; \u003ccode\u003eCOUNT(1)\u003c/code\u003e â‰ˆ \u003ccode\u003eCOUNT(*)\u003c/code\u003eã€‚\u003cstrong\u003eæ¨èé‡‡ç”¨ \u003ccode\u003eCOUNT(*)\u003c/code\u003e\u003c/strong\u003e ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003eå¯¹äº \u003ccode\u003eCOUNT(ä¸»é”® id)\u003c/code\u003e æ¥è¯´\u003c/strong\u003eï¼ŒInnoDB å¼•æ“ä¼šéå†æ•´å¼ è¡¨ï¼ŒæŠŠæ¯ä¸€è¡Œçš„ id å€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™ server å±‚ã€‚server å±‚æ‹¿åˆ° id åï¼Œåˆ¤æ–­æ˜¯ä¸å¯èƒ½ä¸ºç©ºçš„ï¼Œå°±æŒ‰è¡Œç´¯åŠ ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003eå¯¹äº \u003ccode\u003eCOUNT(1)\u003c/code\u003e æ¥è¯´\u003c/strong\u003eï¼ŒInnoDB å¼•æ“éå†æ•´å¼ è¡¨ï¼Œä½†ä¸å–å€¼ã€‚server å±‚å¯¹äºè¿”å›çš„æ¯ä¸€è¡Œï¼Œæ”¾ä¸€ä¸ªæ•°å­—â€œ1â€è¿›å»ï¼Œåˆ¤æ–­æ˜¯ä¸å¯èƒ½ä¸ºç©ºçš„ï¼ŒæŒ‰è¡Œç´¯åŠ ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eå•çœ‹è¿™ä¸¤ä¸ªç”¨æ³•çš„å·®åˆ«çš„è¯ï¼Œä½ èƒ½å¯¹æ¯”å‡ºæ¥ï¼Œ\u003ccode\u003eCOUNT(1)\u003c/code\u003e æ‰§è¡Œå¾—è¦æ¯” \u003ccode\u003eCOUNT(ä¸»é”® id)\u003c/code\u003e å¿«ã€‚å› ä¸ºä»å¼•æ“è¿”å› id ä¼šæ¶‰åŠåˆ°è§£ææ•°æ®è¡Œï¼Œä»¥åŠæ‹·è´å­—æ®µå€¼çš„æ“ä½œã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003eå¯¹äº \u003ccode\u003eCOUNT(å­—æ®µ)\u003c/code\u003e æ¥è¯´\u003c/strong\u003eï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€æ˜¯å®šä¹‰ä¸º \u003ccode\u003enot null\u003c/code\u003e çš„è¯ï¼Œä¸€è¡Œè¡Œåœ°ä»è®°å½•é‡Œé¢è¯»å‡ºè¿™ä¸ªå­—æ®µï¼Œåˆ¤æ–­ä¸èƒ½ä¸º \u003ccode\u003enull\u003c/code\u003eï¼ŒæŒ‰è¡Œç´¯åŠ ï¼›\u003c/li\u003e\n\u003cli\u003eå¦‚æœè¿™ä¸ªâ€œå­—æ®µâ€å®šä¹‰å…è®¸ä¸º \u003ccode\u003enull\u003c/code\u003eï¼Œé‚£ä¹ˆæ‰§è¡Œçš„æ—¶å€™ï¼Œåˆ¤æ–­åˆ°æœ‰å¯èƒ½æ˜¯ \u003ccode\u003enull\u003c/code\u003eï¼Œè¿˜è¦æŠŠå€¼å–å‡ºæ¥å†åˆ¤æ–­ä¸€ä¸‹ï¼Œä¸æ˜¯ \u003ccode\u003enull\u003c/code\u003e æ‰ç´¯åŠ ã€‚\u003c/li\u003e\n\u003cli\u003eä¹Ÿå°±æ˜¯å‰é¢çš„ç¬¬ä¸€æ¡åŸåˆ™ï¼Œserver å±‚è¦ä»€ä¹ˆå­—æ®µï¼ŒInnoDB å°±è¿”å›ä»€ä¹ˆå­—æ®µã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eä½†æ˜¯ \u003ccode\u003eCOUNT(*)\u003c/code\u003e æ˜¯ä¾‹å¤–\u003c/strong\u003eï¼Œå¹¶ä¸ä¼šæŠŠå…¨éƒ¨å­—æ®µå–å‡ºæ¥ï¼Œè€Œæ˜¯ä¸“é—¨åšäº†ä¼˜åŒ–ï¼Œä¸å–å€¼ã€‚\u003ccode\u003eCOUNT(*)\u003c/code\u003e è‚¯å®šä¸æ˜¯ \u003ccode\u003enull\u003c/code\u003eï¼ŒæŒ‰è¡Œç´¯åŠ ã€‚\u003c/p\u003e\n\u003cp\u003eä¸åŒçš„ MySQL å¼•æ“ä¸­ï¼Œ\u003ccode\u003eCOUNT(*)\u003c/code\u003e æœ‰ä¸åŒçš„å®ç°æ–¹å¼ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMyISAM å¼•æ“æŠŠä¸€ä¸ªè¡¨çš„æ€»è¡Œæ•°å­˜åœ¨äº†ç£ç›˜ä¸Šï¼Œå› æ­¤æ‰§è¡Œ \u003ccode\u003eCOUNT(*)\u003c/code\u003e çš„æ—¶å€™ä¼šç›´æ¥è¿”å›è¿™ä¸ªæ•°ï¼Œæ•ˆç‡å¾ˆé«˜ï¼›\u003c/li\u003e\n\u003cli\u003eè€Œ InnoDB å¼•æ“å°±éº»çƒ¦äº†ï¼Œå®ƒæ‰§è¡Œ \u003ccode\u003eCOUNT(*)\u003c/code\u003e çš„æ—¶å€™ï¼Œéœ€è¦æŠŠæ•°æ®ä¸€è¡Œä¸€è¡Œåœ°ä»å¼•æ“é‡Œé¢è¯»å‡ºæ¥ï¼Œç„¶åç´¯ç§¯è®¡æ•°ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eä¸ºä»€ä¹ˆ InnoDB ä¸è·Ÿ MyISAM ä¸€æ ·ï¼Œä¹Ÿç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eå› ä¸ºå³ä½¿æ˜¯åœ¨åŒä¸€ä¸ªæ—¶åˆ»çš„å¤šä¸ªæŸ¥è¯¢ï¼Œç”±äºå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰çš„åŸå› ï¼ŒInnoDB è¡¨â€œåº”è¯¥è¿”å›å¤šå°‘è¡Œâ€ä¹Ÿæ˜¯ä¸ç¡®å®šçš„ã€‚\u003c/p\u003e\n\u003cp\u003eInnoDB æ˜¯ç´¢å¼•ç»„ç»‡è¡¨ï¼Œä¸»é”®ç´¢å¼•æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯æ•°æ®ï¼Œè€Œæ™®é€šç´¢å¼•æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯ä¸»é”®å€¼ã€‚æ‰€ä»¥ï¼Œæ™®é€šç´¢å¼•æ ‘æ¯”ä¸»é”®ç´¢å¼•æ ‘å°å¾ˆå¤šã€‚å¯¹äº \u003ccode\u003eCOUNT(*)\u003c/code\u003e è¿™æ ·çš„æ“ä½œï¼Œéå†å“ªä¸ªç´¢å¼•æ ‘å¾—åˆ°çš„ç»“æœé€»è¾‘ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ã€‚å› æ­¤ï¼ŒMySQL ä¼˜åŒ–å™¨ä¼šæ‰¾åˆ°æœ€å°çš„é‚£æ£µæ ‘æ¥éå†ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMyISAM è¡¨è™½ç„¶ \u003ccode\u003eCOUNT(*)\u003c/code\u003e å¾ˆå¿«ï¼Œä½†æ˜¯ä¸æ”¯æŒäº‹åŠ¡ï¼›\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eshow table status\u003c/code\u003e å‘½ä»¤è™½ç„¶è¿”å›å¾ˆå¿«ï¼Œä½†æ˜¯ä¸å‡†ç¡®ï¼›\u003c/li\u003e\n\u003cli\u003eInnoDB è¡¨ç›´æ¥ \u003ccode\u003eCOUNT(*)\u003c/code\u003e ä¼šéå†å…¨è¡¨ï¼Œè™½ç„¶ç»“æœå‡†ç¡®ï¼Œä½†ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eå¦‚ä½•ä¼˜åŒ–æŸ¥è¯¢è®¡æ•°ï¼Ÿ\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eå¯ä»¥ä½¿ç”¨ Redis ä¿å­˜è®¡æ•°ï¼Œä½†å­˜åœ¨ä¸¢å¤±æ›´æ–°ä¸€é›†æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚\u003c/p\u003e\n\u003cp\u003eå¯ä»¥ä½¿ç”¨æ•°æ®åº“å…¶ä»–è¡¨ä¿å­˜è®¡æ•°ï¼Œä½†è¦ç”¨äº‹åŠ¡è¿›è¡Œæ§åˆ¶ï¼Œå¢/åˆ æ•°æ®æ—¶ï¼ŒåŒæ­¥æ”¹å˜è®¡æ•°ã€‚\u003c/p\u003e\n\u003ch2 id=\"å‚è€ƒèµ„æ–™\"\u003e\u003ca href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"\u003e\u003c/a\u003eå‚è€ƒèµ„æ–™\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://book.douban.com/subject/23008813/\"\u003eã€Šé«˜æ€§èƒ½ MySQLã€‹\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://time.geekbang.org/column/intro/139\"\u003eMySQL å®æˆ˜ 45 è®²\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://xiaolincoding.com/mysql/\"\u003eå›¾è§£ MySQL ä»‹ç»\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n    \u003c/div\u003e",
  "Date": "2020-09-12T02:43:53Z",
  "Author": "é’æ‚Ÿ â—¾ Dunwu"
}