{
  "Source": "dunwu",
  "Title": "MongoDB 的 CRUD 操作",
  "Link": "https://dunwu.github.io/blog/pages/7efbac/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003ch1 id=\"MongoDB-的-CRUD-操作\"\u003e\u003ca href=\"#MongoDB-的-CRUD-操作\" class=\"headerlink\" title=\"MongoDB 的 CRUD 操作\"\u003e\u003c/a\u003eMongoDB 的 CRUD 操作\u003c/h1\u003e\u003ch2 id=\"一、基本-CRUD-操作\"\u003e\u003ca href=\"#一、基本-CRUD-操作\" class=\"headerlink\" title=\"一、基本 CRUD 操作\"\u003e\u003c/a\u003e一、基本 CRUD 操作\u003c/h2\u003e\u003cp\u003eMongoDB 的 CRUD 操作是针对 document 的读写操作。\u003c/p\u003e\n\u003ch3 id=\"Create-操作\"\u003e\u003ca href=\"#Create-操作\" class=\"headerlink\" title=\"Create 操作\"\u003e\u003c/a\u003eCreate 操作\u003c/h3\u003e\u003cp\u003eMongoDB 提供以下操作向一个 collection 插入 document\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.insertOne/#db.collection.insertOne\"\u003e\u003ccode\u003edb.collection.insertOne()\u003c/code\u003e\u003c/a\u003e：插入一条 document\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.insertMany/#db.collection.insertMany\"\u003e\u003ccode\u003edb.collection.insertMany()\u003c/code\u003e\u003c/a\u003e：插入多条 document\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003e注：以上操作都是原子操作。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/20200924112342.svg\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003cp\u003e插入操作的特性：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMongoDB 中的所有写操作都是单个文档级别的原子操作。\u003c/li\u003e\n\u003cli\u003e如果要插入的 collection 当前不存在，则插入操作会自动创建 collection。\u003c/li\u003e\n\u003cli\u003e在 MongoDB 中，存储在集合中的每个文档都需要一个唯一的 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/glossary/#term-id\"\u003e\u003ccode\u003e_id\u003c/code\u003e\u003c/a\u003e 字段作为主键。如果插入的文档省略 \u003ccode\u003e_id\u003c/code\u003e 字段，则 MongoDB 驱动程序会自动为 \u003ccode\u003e_id\u003c/code\u003e 字段生成 ObjectId。\u003c/li\u003e\n\u003cli\u003e可以 MongoDB 写入操作的确认级别来控制写入行为。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e【示例】插入一条 document 示例\u003c/p\u003e\n\u003cfigure class=\"highlight javascript\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003edb.\u003cspan class=\"property\"\u003einventory\u003c/span\u003e.\u003cspan class=\"title function_\"\u003einsertOne\u003c/span\u003e({\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;canvas\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: \u003cspan class=\"number\"\u003e100\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003etags\u003c/span\u003e: [\u003cspan class=\"string\"\u003e\u0026#39;cotton\u0026#39;\u003c/span\u003e],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003esize\u003c/span\u003e: { \u003cspan class=\"attr\"\u003eh\u003c/span\u003e: \u003cspan class=\"number\"\u003e28\u003c/span\u003e, \u003cspan class=\"attr\"\u003ew\u003c/span\u003e: \u003cspan class=\"number\"\u003e35.5\u003c/span\u003e, \u003cspan class=\"attr\"\u003euom\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;cm\u0026#39;\u003c/span\u003e }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e})\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e【示例】插入多条 document 示例\u003c/p\u003e\n\u003cfigure class=\"highlight javascript\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003edb.\u003cspan class=\"property\"\u003einventory\u003c/span\u003e.\u003cspan class=\"title function_\"\u003einsertMany\u003c/span\u003e([\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;journal\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: \u003cspan class=\"number\"\u003e25\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003etags\u003c/span\u003e: [\u003cspan class=\"string\"\u003e\u0026#39;blank\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;red\u0026#39;\u003c/span\u003e],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003esize\u003c/span\u003e: { \u003cspan class=\"attr\"\u003eh\u003c/span\u003e: \u003cspan class=\"number\"\u003e14\u003c/span\u003e, \u003cspan class=\"attr\"\u003ew\u003c/span\u003e: \u003cspan class=\"number\"\u003e21\u003c/span\u003e, \u003cspan class=\"attr\"\u003euom\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;cm\u0026#39;\u003c/span\u003e }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;mat\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: \u003cspan class=\"number\"\u003e85\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003etags\u003c/span\u003e: [\u003cspan class=\"string\"\u003e\u0026#39;gray\u0026#39;\u003c/span\u003e],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003esize\u003c/span\u003e: { \u003cspan class=\"attr\"\u003eh\u003c/span\u003e: \u003cspan class=\"number\"\u003e27.9\u003c/span\u003e, \u003cspan class=\"attr\"\u003ew\u003c/span\u003e: \u003cspan class=\"number\"\u003e35.5\u003c/span\u003e, \u003cspan class=\"attr\"\u003euom\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;cm\u0026#39;\u003c/span\u003e }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;mousepad\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: \u003cspan class=\"number\"\u003e25\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003etags\u003c/span\u003e: [\u003cspan class=\"string\"\u003e\u0026#39;gel\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;blue\u0026#39;\u003c/span\u003e],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003esize\u003c/span\u003e: { \u003cspan class=\"attr\"\u003eh\u003c/span\u003e: \u003cspan class=\"number\"\u003e19\u003c/span\u003e, \u003cspan class=\"attr\"\u003ew\u003c/span\u003e: \u003cspan class=\"number\"\u003e22.85\u003c/span\u003e, \u003cspan class=\"attr\"\u003euom\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;cm\u0026#39;\u003c/span\u003e }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e])\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"Read-操作\"\u003e\u003ca href=\"#Read-操作\" class=\"headerlink\" title=\"Read 操作\"\u003e\u003c/a\u003eRead 操作\u003c/h3\u003e\u003cp\u003eMongoDB 提供 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.find/#db.collection.find\"\u003e\u003ccode\u003edb.collection.find()\u003c/code\u003e\u003c/a\u003e 方法来检索 document。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/20200924113832.svg\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003ch3 id=\"Update-操作\"\u003e\u003ca href=\"#Update-操作\" class=\"headerlink\" title=\"Update 操作\"\u003e\u003c/a\u003eUpdate 操作\u003c/h3\u003e\u003cp\u003eMongoDB 提供以下操作来更新 collection 中的 document\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.updateOne/#db.collection.updateOne\"\u003e\u003ccode\u003edb.collection.updateOne()\u003c/code\u003e\u003c/a\u003e：更新一条 document\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.updateMany/#db.collection.updateMany\"\u003e\u003ccode\u003edb.collection.updateMany()\u003c/code\u003e\u003c/a\u003e：更新多条 document\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.replaceOne/#db.collection.replaceOne\"\u003e\u003ccode\u003edb.collection.replaceOne()\u003c/code\u003e\u003c/a\u003e：替换一条 document\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e语法格式：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.updateOne/#db.collection.updateOne\"\u003e\u003ccode\u003edb.collection.updateOne(\u0026lt;filter\u0026gt;, \u0026lt;update\u0026gt;, \u0026lt;options\u0026gt;)\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.updateMany/#db.collection.updateMany\"\u003e\u003ccode\u003edb.collection.updateMany(\u0026lt;filter\u0026gt;, \u0026lt;update\u0026gt;, \u0026lt;options\u0026gt;)\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.replaceOne/#db.collection.replaceOne\"\u003e\u003ccode\u003edb.collection.replaceOne(\u0026lt;filter\u0026gt;, \u0026lt;update\u0026gt;, \u0026lt;options\u0026gt;)\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/20200924114043.svg\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003cp\u003e【示例】插入测试数据\u003c/p\u003e\n\u003cfigure class=\"highlight javascript\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e35\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e36\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e37\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e38\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e39\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e40\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e41\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e42\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e43\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e44\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e45\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e46\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e47\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003edb.\u003cspan class=\"property\"\u003einventory\u003c/span\u003e.\u003cspan class=\"title function_\"\u003einsertMany\u003c/span\u003e([\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;canvas\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: \u003cspan class=\"number\"\u003e100\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003esize\u003c/span\u003e: { \u003cspan class=\"attr\"\u003eh\u003c/span\u003e: \u003cspan class=\"number\"\u003e28\u003c/span\u003e, \u003cspan class=\"attr\"\u003ew\u003c/span\u003e: \u003cspan class=\"number\"\u003e35.5\u003c/span\u003e, \u003cspan class=\"attr\"\u003euom\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;cm\u0026#39;\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;A\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  { \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;journal\u0026#39;\u003c/span\u003e, \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: \u003cspan class=\"number\"\u003e25\u003c/span\u003e, \u003cspan class=\"attr\"\u003esize\u003c/span\u003e: { \u003cspan class=\"attr\"\u003eh\u003c/span\u003e: \u003cspan class=\"number\"\u003e14\u003c/span\u003e, \u003cspan class=\"attr\"\u003ew\u003c/span\u003e: \u003cspan class=\"number\"\u003e21\u003c/span\u003e, \u003cspan class=\"attr\"\u003euom\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;cm\u0026#39;\u003c/span\u003e }, \u003cspan class=\"attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;A\u0026#39;\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  { \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;mat\u0026#39;\u003c/span\u003e, \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: \u003cspan class=\"number\"\u003e85\u003c/span\u003e, \u003cspan class=\"attr\"\u003esize\u003c/span\u003e: { \u003cspan class=\"attr\"\u003eh\u003c/span\u003e: \u003cspan class=\"number\"\u003e27.9\u003c/span\u003e, \u003cspan class=\"attr\"\u003ew\u003c/span\u003e: \u003cspan class=\"number\"\u003e35.5\u003c/span\u003e, \u003cspan class=\"attr\"\u003euom\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;cm\u0026#39;\u003c/span\u003e }, \u003cspan class=\"attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;A\u0026#39;\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;mousepad\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: \u003cspan class=\"number\"\u003e25\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003esize\u003c/span\u003e: { \u003cspan class=\"attr\"\u003eh\u003c/span\u003e: \u003cspan class=\"number\"\u003e19\u003c/span\u003e, \u003cspan class=\"attr\"\u003ew\u003c/span\u003e: \u003cspan class=\"number\"\u003e22.85\u003c/span\u003e, \u003cspan class=\"attr\"\u003euom\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;cm\u0026#39;\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;P\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;notebook\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: \u003cspan class=\"number\"\u003e50\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003esize\u003c/span\u003e: { \u003cspan class=\"attr\"\u003eh\u003c/span\u003e: \u003cspan class=\"number\"\u003e8.5\u003c/span\u003e, \u003cspan class=\"attr\"\u003ew\u003c/span\u003e: \u003cspan class=\"number\"\u003e11\u003c/span\u003e, \u003cspan class=\"attr\"\u003euom\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;in\u0026#39;\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;P\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  { \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;paper\u0026#39;\u003c/span\u003e, \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: \u003cspan class=\"number\"\u003e100\u003c/span\u003e, \u003cspan class=\"attr\"\u003esize\u003c/span\u003e: { \u003cspan class=\"attr\"\u003eh\u003c/span\u003e: \u003cspan class=\"number\"\u003e8.5\u003c/span\u003e, \u003cspan class=\"attr\"\u003ew\u003c/span\u003e: \u003cspan class=\"number\"\u003e11\u003c/span\u003e, \u003cspan class=\"attr\"\u003euom\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;in\u0026#39;\u003c/span\u003e }, \u003cspan class=\"attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;D\u0026#39;\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;planner\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: \u003cspan class=\"number\"\u003e75\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003esize\u003c/span\u003e: { \u003cspan class=\"attr\"\u003eh\u003c/span\u003e: \u003cspan class=\"number\"\u003e22.85\u003c/span\u003e, \u003cspan class=\"attr\"\u003ew\u003c/span\u003e: \u003cspan class=\"number\"\u003e30\u003c/span\u003e, \u003cspan class=\"attr\"\u003euom\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;cm\u0026#39;\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;D\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;postcard\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: \u003cspan class=\"number\"\u003e45\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003esize\u003c/span\u003e: { \u003cspan class=\"attr\"\u003eh\u003c/span\u003e: \u003cspan class=\"number\"\u003e10\u003c/span\u003e, \u003cspan class=\"attr\"\u003ew\u003c/span\u003e: \u003cspan class=\"number\"\u003e15.25\u003c/span\u003e, \u003cspan class=\"attr\"\u003euom\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;cm\u0026#39;\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;A\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;sketchbook\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: \u003cspan class=\"number\"\u003e80\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003esize\u003c/span\u003e: { \u003cspan class=\"attr\"\u003eh\u003c/span\u003e: \u003cspan class=\"number\"\u003e14\u003c/span\u003e, \u003cspan class=\"attr\"\u003ew\u003c/span\u003e: \u003cspan class=\"number\"\u003e21\u003c/span\u003e, \u003cspan class=\"attr\"\u003euom\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;cm\u0026#39;\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;A\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;sketch pad\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: \u003cspan class=\"number\"\u003e95\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003esize\u003c/span\u003e: { \u003cspan class=\"attr\"\u003eh\u003c/span\u003e: \u003cspan class=\"number\"\u003e22.85\u003c/span\u003e, \u003cspan class=\"attr\"\u003ew\u003c/span\u003e: \u003cspan class=\"number\"\u003e30.5\u003c/span\u003e, \u003cspan class=\"attr\"\u003euom\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;cm\u0026#39;\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;A\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e])\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e【示例】更新一条 document\u003c/p\u003e\n\u003cfigure class=\"highlight javascript\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003edb.\u003cspan class=\"property\"\u003einventory\u003c/span\u003e.\u003cspan class=\"title function_\"\u003eupdateOne\u003c/span\u003e(\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  { \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;paper\u0026#39;\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003e$set\u003c/span\u003e: { \u003cspan class=\"string\"\u003e\u0026#39;size.uom\u0026#39;\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;cm\u0026#39;\u003c/span\u003e, \u003cspan class=\"attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;P\u0026#39;\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003e$currentDate\u003c/span\u003e: { \u003cspan class=\"attr\"\u003elastModified\u003c/span\u003e: \u003cspan class=\"literal\"\u003etrue\u003c/span\u003e }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e【示例】更新多条 document\u003c/p\u003e\n\u003cfigure class=\"highlight javascript\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003edb.\u003cspan class=\"property\"\u003einventory\u003c/span\u003e.\u003cspan class=\"title function_\"\u003eupdateMany\u003c/span\u003e(\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  { \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: { \u003cspan class=\"attr\"\u003e$lt\u003c/span\u003e: \u003cspan class=\"number\"\u003e50\u003c/span\u003e } },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003e$set\u003c/span\u003e: { \u003cspan class=\"string\"\u003e\u0026#39;size.uom\u0026#39;\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;in\u0026#39;\u003c/span\u003e, \u003cspan class=\"attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;P\u0026#39;\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003e$currentDate\u003c/span\u003e: { \u003cspan class=\"attr\"\u003elastModified\u003c/span\u003e: \u003cspan class=\"literal\"\u003etrue\u003c/span\u003e }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e【示例】替换一条 document\u003c/p\u003e\n\u003cfigure class=\"highlight javascript\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003edb.\u003cspan class=\"property\"\u003einventory\u003c/span\u003e.\u003cspan class=\"title function_\"\u003ereplaceOne\u003c/span\u003e(\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  { \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;paper\u0026#39;\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003eitem\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;paper\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"attr\"\u003einstock\u003c/span\u003e: [\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      { \u003cspan class=\"attr\"\u003ewarehouse\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;A\u0026#39;\u003c/span\u003e, \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: \u003cspan class=\"number\"\u003e60\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      { \u003cspan class=\"attr\"\u003ewarehouse\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;B\u0026#39;\u003c/span\u003e, \u003cspan class=\"attr\"\u003eqty\u003c/span\u003e: \u003cspan class=\"number\"\u003e40\u003c/span\u003e }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    ]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e更新操作的特性：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMongoDB 中的所有写操作都是单个文档级别的原子操作。\u003c/li\u003e\n\u003cli\u003e一旦设置了，就无法更新或替换 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/glossary/#term-id\"\u003e\u003ccode\u003e_id\u003c/code\u003e\u003c/a\u003e 字段。\u003c/li\u003e\n\u003cli\u003e除以下情况外，MongoDB 会在执行写操作后保留文档字段的顺序：\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e_id\u003c/code\u003e 字段始终是文档中的第一个字段。\u003c/li\u003e\n\u003cli\u003e包括重命名字段名称的更新可能导致文档中字段的重新排序。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e如果更新操作中包含 \u003ccode\u003eupsert : true\u003c/code\u003e 并且没有 document 匹配过滤器，MongoDB 会新插入一个 document；如果有匹配的 document，MongoDB 会修改或替换这些 document。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"Delete-操作\"\u003e\u003ca href=\"#Delete-操作\" class=\"headerlink\" title=\"Delete 操作\"\u003e\u003c/a\u003eDelete 操作\u003c/h3\u003e\u003cp\u003eMongoDB 提供以下操作来删除 collection 中的 document\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.deleteOne/#db.collection.deleteOne\"\u003e\u003ccode\u003edb.collection.deleteOne()\u003c/code\u003e\u003c/a\u003e：删除一条 document\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.deleteMany/#db.collection.deleteMany\"\u003e\u003ccode\u003edb.collection.deleteMany()\u003c/code\u003e\u003c/a\u003e：删除多条 document\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/dunwu/images/master/snap/20200924120007.svg\" alt=\"img\"/\u003e\u003c/p\u003e\n\u003cp\u003e删除操作的特性：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMongoDB 中的所有写操作都是单个文档级别的原子操作。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"二、批量写操作\"\u003e\u003ca href=\"#二、批量写操作\" class=\"headerlink\" title=\"二、批量写操作\"\u003e\u003c/a\u003e二、批量写操作\u003c/h2\u003e\u003cp\u003eMongoDB 通过 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite\"\u003e\u003ccode\u003edb.collection.bulkWrite()\u003c/code\u003e\u003c/a\u003e 方法来支持批量写操作（包括批量插入、更新、删除）。\u003c/p\u003e\n\u003cp\u003e此外，\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.insertMany/#db.collection.insertMany\"\u003e\u003ccode\u003edb.collection.insertMany()\u003c/code\u003e\u003c/a\u003e 方法支持批量插入操作。\u003c/p\u003e\n\u003ch3 id=\"有序和无序的操作\"\u003e\u003ca href=\"#有序和无序的操作\" class=\"headerlink\" title=\"有序和无序的操作\"\u003e\u003c/a\u003e有序和无序的操作\u003c/h3\u003e\u003cp\u003e批量写操作可以有序或无序。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e对于有序列表，MongoDB 串行执行操作。如果在写操作的处理过程中发生错误，MongoDB 将不处理列表中剩余的写操作。\u003c/li\u003e\n\u003cli\u003e对于无序列表，MongoDB 可以并行执行操作，但是不能保证此行为。如果在写操作的处理过程中发生错误，MongoDB 将继续处理列表中剩余的写操作。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e在分片集合上执行操作的有序列表通常比执行无序列表要慢，因为对于有序列表，每个操作必须等待上一个操作完成。\u003c/p\u003e\n\u003cp\u003e默认情况下，\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite\"\u003e\u003ccode\u003ebulkWrite()\u003c/code\u003e\u003c/a\u003e 执行有序操作。要指定无序写操作，请在选项文档中设置 \u003ccode\u003eordered : false\u003c/code\u003e。\u003c/p\u003e\n\u003ch3 id=\"bulkWrite-方法\"\u003e\u003ca href=\"#bulkWrite-方法\" class=\"headerlink\" title=\"bulkWrite() 方法\"\u003e\u003c/a\u003ebulkWrite() 方法\u003c/h3\u003e\u003cp\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite\"\u003e\u003ccode\u003ebulkWrite()\u003c/code\u003e\u003c/a\u003e 支持以下写操作：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-insertone\"\u003einsertOne\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-updateonemany\"\u003eupdateOne\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-updateonemany\"\u003eupdateMany\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-replaceone\"\u003ereplaceOne\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-deleteonemany\"\u003edeleteOne\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#bulkwrite-write-operations-deleteonemany\"\u003edeleteMany\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e【示例】批量写操作示例\u003c/p\u003e\n\u003cfigure class=\"highlight javascript\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e35\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e36\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e37\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e38\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e39\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003etry\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  db.\u003cspan class=\"property\"\u003echaracters\u003c/span\u003e.\u003cspan class=\"title function_\"\u003ebulkWrite\u003c/span\u003e([\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      \u003cspan class=\"attr\"\u003einsertOne\u003c/span\u003e: {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"attr\"\u003edocument\u003c/span\u003e: {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e          \u003cspan class=\"attr\"\u003e_id\u003c/span\u003e: \u003cspan class=\"number\"\u003e4\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e          \u003cspan class=\"attr\"\u003echar\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;Dithras\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e          \u003cspan class=\"attr\"\u003eclass\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;barbarian\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e          \u003cspan class=\"attr\"\u003elvl\u003c/span\u003e: \u003cspan class=\"number\"\u003e4\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      \u003cspan class=\"attr\"\u003einsertOne\u003c/span\u003e: {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"attr\"\u003edocument\u003c/span\u003e: {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e          \u003cspan class=\"attr\"\u003e_id\u003c/span\u003e: \u003cspan class=\"number\"\u003e5\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e          \u003cspan class=\"attr\"\u003echar\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;Taeln\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e          \u003cspan class=\"attr\"\u003eclass\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;fighter\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e          \u003cspan class=\"attr\"\u003elvl\u003c/span\u003e: \u003cspan class=\"number\"\u003e3\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      \u003cspan class=\"attr\"\u003eupdateOne\u003c/span\u003e: {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"attr\"\u003efilter\u003c/span\u003e: { \u003cspan class=\"attr\"\u003echar\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;Eldon\u0026#39;\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"attr\"\u003eupdate\u003c/span\u003e: { \u003cspan class=\"attr\"\u003e$set\u003c/span\u003e: { \u003cspan class=\"attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;Critical Injury\u0026#39;\u003c/span\u003e } }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    { \u003cspan class=\"attr\"\u003edeleteOne\u003c/span\u003e: { \u003cspan class=\"attr\"\u003efilter\u003c/span\u003e: { \u003cspan class=\"attr\"\u003echar\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;Brisbane\u0026#39;\u003c/span\u003e } } },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      \u003cspan class=\"attr\"\u003ereplaceOne\u003c/span\u003e: {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"attr\"\u003efilter\u003c/span\u003e: { \u003cspan class=\"attr\"\u003echar\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;Meldane\u0026#39;\u003c/span\u003e },\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"attr\"\u003ereplacement\u003c/span\u003e: { \u003cspan class=\"attr\"\u003echar\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;Tanys\u0026#39;\u003c/span\u003e, \u003cspan class=\"attr\"\u003eclass\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#39;oracle\u0026#39;\u003c/span\u003e, \u003cspan class=\"attr\"\u003elvl\u003c/span\u003e: \u003cspan class=\"number\"\u003e4\u003c/span\u003e }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  ])\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e} \u003cspan class=\"keyword\"\u003ecatch\u003c/span\u003e (e) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"title function_\"\u003eprint\u003c/span\u003e(e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"批量写操作策略\"\u003e\u003ca href=\"#批量写操作策略\" class=\"headerlink\" title=\"批量写操作策略\"\u003e\u003c/a\u003e批量写操作策略\u003c/h3\u003e\u003cp\u003e大量的插入操作（包括初始数据插入或常规数据导入）可能会影响分片集群的性能。对于批量插入，请考虑以下策略：\u003c/p\u003e\n\u003ch4 id=\"预拆分-collection\"\u003e\u003ca href=\"#预拆分-collection\" class=\"headerlink\" title=\"预拆分 collection\"\u003e\u003c/a\u003e预拆分 collection\u003c/h4\u003e\u003cp\u003e如果分片集合为空，则该集合只有一个初始 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/glossary/#term-chunk\"\u003echunk\u003c/a\u003e，该 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/glossary/#term-chunk\"\u003echunk\u003c/a\u003e 位于单个分片上。然后，MongoDB 必须花一些时间来接收数据，创建拆分并将拆分的块分发到可用的分片。为了避免这种性能成本，您可以按照拆分群集中的拆分块中的说明预拆分 collection。\u003c/p\u003e\n\u003ch4 id=\"无序写操作\"\u003e\u003ca href=\"#无序写操作\" class=\"headerlink\" title=\"无序写操作\"\u003e\u003c/a\u003e无序写操作\u003c/h4\u003e\u003cp\u003e要提高对分片集群的写入性能，请使用 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite\"\u003e\u003ccode\u003ebulkWrite()\u003c/code\u003e\u003c/a\u003e，并将可选参数顺序设置为 false。\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/program/mongos/#bin.mongos\"\u003e\u003ccode\u003emongos\u003c/code\u003e\u003c/a\u003e 可以尝试同时将写入操作发送到多个分片。对于空集合，首先按照分片群集中的分割 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/glossary/#term-chunk\"\u003echunk\u003c/a\u003e 中的说明预拆分 collection。\u003c/p\u003e\n\u003ch4 id=\"避免单调节流\"\u003e\u003ca href=\"#避免单调节流\" class=\"headerlink\" title=\"避免单调节流\"\u003e\u003c/a\u003e避免单调节流\u003c/h4\u003e\u003cp\u003e如果在一次插入操作中，分片 key 单调递增，那么所有的插入数据都会存入 collection 的最后一个 chunk，也就是存入一个分片中。因此，集群的插入容量将永远不会超过该单个分片的插入容量。\u003c/p\u003e\n\u003cp\u003e如果插入量大于单个分片可以处理的插入量，并且无法避免单调递增的分片键，那么请考虑对应用程序进行以下修改：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e反转分片密钥的二进制位。这样可以保留信息，并避免将插入顺序与值序列的增加关联起来。\u003c/li\u003e\n\u003cli\u003e交换第一个和最后一个 16 位字以“随机”插入。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"SQL-和-MongoDB-对比\"\u003e\u003ca href=\"#SQL-和-MongoDB-对比\" class=\"headerlink\" title=\"SQL 和 MongoDB 对比\"\u003e\u003c/a\u003eSQL 和 MongoDB 对比\u003c/h2\u003e\u003ch3 id=\"术语和概念\"\u003e\u003ca href=\"#术语和概念\" class=\"headerlink\" title=\"术语和概念\"\u003e\u003c/a\u003e术语和概念\u003c/h3\u003e\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth align=\"left\"\u003eSQL 术语和概念\u003c/th\u003e\n\u003cth align=\"left\"\u003eMongoDB 术语和概念\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd align=\"left\"\u003edatabase\u003c/td\u003e\n\u003ctd align=\"left\"\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/glossary/#term-database\"\u003edatabase\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"left\"\u003etable\u003c/td\u003e\n\u003ctd align=\"left\"\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/glossary/#term-collection\"\u003ecollection\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"left\"\u003erow\u003c/td\u003e\n\u003ctd align=\"left\"\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/glossary/#term-document\"\u003edocument\u003c/a\u003e 或 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/glossary/#term-bson\"\u003eBSON\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"left\"\u003ecolumn\u003c/td\u003e\n\u003ctd align=\"left\"\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/glossary/#term-field\"\u003efield\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"left\"\u003eindex\u003c/td\u003e\n\u003ctd align=\"left\"\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/glossary/#term-index\"\u003eindex\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"left\"\u003etable joins\u003c/td\u003e\n\u003ctd align=\"left\"\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/#pipe._S_lookup\"\u003e\u003ccode\u003e$lookup\u003c/code\u003e\u003c/a\u003e、嵌入式文档\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"left\"\u003eprimary key\u003c/td\u003e\n\u003ctd align=\"left\"\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/glossary/#term-primary-key\"\u003eprimary key\u003c/a\u003e\u003cbr/\u003eMongoDB 中自动设置主键为 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/glossary/#term-id\"\u003e\u003ccode\u003e_id\u003c/code\u003e\u003c/a\u003e 字段\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"left\"\u003eaggregation (e.g. group by)\u003c/td\u003e\n\u003ctd align=\"left\"\u003eaggregation pipeline\u003cbr/\u003e参考 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/sql-aggregation-comparison/\"\u003eSQL to Aggregation Mapping Chart\u003c/a\u003e.\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"left\"\u003eSELECT INTO NEW_TABLE\u003c/td\u003e\n\u003ctd align=\"left\"\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/out/#pipe._S_out\"\u003e\u003ccode\u003e$out\u003c/code\u003e\u003c/a\u003e\u003cbr/\u003e参考 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/sql-aggregation-comparison/\"\u003eSQL to Aggregation Mapping Chart\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"left\"\u003eMERGE INTO TABLE\u003c/td\u003e\n\u003ctd align=\"left\"\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/merge/#pipe._S_merge\"\u003e\u003ccode\u003e$merge\u003c/code\u003e\u003c/a\u003e (MongoDB 4.2 开始支持)\u003cbr/\u003e参考 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/sql-aggregation-comparison/\"\u003eSQL to Aggregation Mapping Chart\u003c/a\u003e.\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"left\"\u003eUNION ALL\u003c/td\u003e\n\u003ctd align=\"left\"\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/unionWith/#pipe._S_unionWith\"\u003e\u003ccode\u003e$unionWith\u003c/code\u003e\u003c/a\u003e (MongoDB 4.4 开始支持)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"left\"\u003etransactions\u003c/td\u003e\n\u003ctd align=\"left\"\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.mongodb.com/manual/core/transactions/\"\u003etransactions\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003ch2 id=\"参考资料\"\u003e\u003ca href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"\u003e\u003c/a\u003e参考资料\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e官方\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.mongodb.com/\"\u003eMongoDB 官网\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/mongodb/mongo\"\u003eMongoDB Github\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://university.mongodb.com/\"\u003eMongoDB 官方免费教程\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e教程\u003c/strong\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.runoob.com/mongodb/mongodb-tutorial.html\"\u003eMongoDB 教程\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://time.geekbang.org/course/intro/100040001\"\u003eMongoDB 高手课\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n    \u003c/div\u003e",
  "Date": "2020-09-25T13:23:41Z",
  "Author": "钝悟 ◾ Dunwu"
}