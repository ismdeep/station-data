{
  "Source": "dunwu",
  "Title": "HDFS 运维",
  "Link": "https://dunwu.github.io/blog/pages/90aeb6/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003ch1 id=\"HDFS-运维\"\u003e\u003ca href=\"#HDFS-运维\" class=\"headerlink\" title=\"HDFS 运维\"\u003e\u003c/a\u003eHDFS 运维\u003c/h1\u003e\u003ch2 id=\"HDFS-命令\"\u003e\u003ca href=\"#HDFS-命令\" class=\"headerlink\" title=\"HDFS 命令\"\u003e\u003c/a\u003eHDFS 命令\u003c/h2\u003e\u003ch3 id=\"显示当前目录结构\"\u003e\u003ca href=\"#显示当前目录结构\" class=\"headerlink\" title=\"显示当前目录结构\"\u003e\u003c/a\u003e显示当前目录结构\u003c/h3\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e显示当前目录结构\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -ls \u0026lt;path\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e递归显示当前目录结构\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -ls -R \u0026lt;path\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e显示根目录下内容\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -ls /\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"创建目录\"\u003e\u003ca href=\"#创建目录\" class=\"headerlink\" title=\"创建目录\"\u003e\u003c/a\u003e创建目录\u003c/h3\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e创建目录\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -mkdir \u0026lt;path\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e递归创建目录\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -mkdir -p \u0026lt;path\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"删除操作\"\u003e\u003ca href=\"#删除操作\" class=\"headerlink\" title=\"删除操作\"\u003e\u003c/a\u003e删除操作\u003c/h3\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e删除文件\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -rm \u0026lt;path\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e递归删除目录和文件\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -rm -R \u0026lt;path\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"导入文件到-HDFS\"\u003e\u003ca href=\"#导入文件到-HDFS\" class=\"headerlink\" title=\"导入文件到 HDFS\"\u003e\u003c/a\u003e导入文件到 HDFS\u003c/h3\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e二选一执行即可\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -put [localsrc] [dst]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -copyFromLocal [localsrc] [dst]\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"从-HDFS-导出文件\"\u003e\u003ca href=\"#从-HDFS-导出文件\" class=\"headerlink\" title=\"从 HDFS 导出文件\"\u003e\u003c/a\u003e从 HDFS 导出文件\u003c/h3\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e二选一执行即可\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -get [dst] [localsrc]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -copyToLocal [dst] [localsrc]\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"查看文件内容\"\u003e\u003ca href=\"#查看文件内容\" class=\"headerlink\" title=\"查看文件内容\"\u003e\u003c/a\u003e查看文件内容\u003c/h3\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e二选一执行即可\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -text \u0026lt;path\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -cat \u0026lt;path\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"显示文件的最后一千字节\"\u003e\u003ca href=\"#显示文件的最后一千字节\" class=\"headerlink\" title=\"显示文件的最后一千字节\"\u003e\u003c/a\u003e显示文件的最后一千字节\u003c/h3\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ehdfs dfs -tail \u0026lt;path\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta prompt_\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e和Linux下一样，会持续监听文件内容变化 并显示文件的最后一千字节\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -tail -f \u0026lt;path\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"拷贝文件\"\u003e\u003ca href=\"#拷贝文件\" class=\"headerlink\" title=\"拷贝文件\"\u003e\u003c/a\u003e拷贝文件\u003c/h3\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ehdfs dfs -cp [src] [dst]\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"移动文件\"\u003e\u003ca href=\"#移动文件\" class=\"headerlink\" title=\"移动文件\"\u003e\u003c/a\u003e移动文件\u003c/h3\u003e\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ehdfs dfs -mv [src] [dst]\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"统计当前目录下各文件大小\"\u003e\u003ca href=\"#统计当前目录下各文件大小\" class=\"headerlink\" title=\"统计当前目录下各文件大小\"\u003e\u003c/a\u003e统计当前目录下各文件大小\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e默认单位字节\u003c/li\u003e\n\u003cli\u003e-s : 显示所有文件大小总和，\u003c/li\u003e\n\u003cli\u003e-h : 将以更友好的方式显示文件大小（例如 64.0m 而不是 67108864）\u003c/li\u003e\n\u003c/ul\u003e\n\u003cfigure class=\"highlight xml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ehdfs dfs -du \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003epath\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"合并下载多个文件\"\u003e\u003ca href=\"#合并下载多个文件\" class=\"headerlink\" title=\"合并下载多个文件\"\u003e\u003c/a\u003e合并下载多个文件\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e-nl 在每个文件的末尾添加换行符（LF）\u003c/li\u003e\n\u003cli\u003e-skip-empty-file 跳过空文件\u003c/li\u003e\n\u003c/ul\u003e\n\u003cfigure class=\"highlight pgsql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ehdfs dfs -getmerge\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e# 示例 将HDFS上的hbase-\u003cspan class=\"keyword\"\u003epolicy\u003c/span\u003e.xml和hbase-site.xml文件合并后下载到本地的/usr/test.xml\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -getmerge -nl  /test/hbase-\u003cspan class=\"keyword\"\u003epolicy\u003c/span\u003e.xml /test/hbase-site.xml /usr/test.xml\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"统计文件系统的可用空间信息\"\u003e\u003ca href=\"#统计文件系统的可用空间信息\" class=\"headerlink\" title=\"统计文件系统的可用空间信息\"\u003e\u003c/a\u003e统计文件系统的可用空间信息\u003c/h3\u003e\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ehdfs dfs -\u003cspan class=\"built_in\"\u003edf\u003c/span\u003e -h /\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"更改文件复制因子\"\u003e\u003ca href=\"#更改文件复制因子\" class=\"headerlink\" title=\"更改文件复制因子\"\u003e\u003c/a\u003e更改文件复制因子\u003c/h3\u003e\u003cfigure class=\"highlight xml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ehdfs dfs -setrep [-R] [-w] \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003enumReplicas\u003c/span\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003epath\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cul\u003e\n\u003cli\u003e更改文件的复制因子。如果 path 是目录，则更改其下所有文件的复制因子\u003c/li\u003e\n\u003cli\u003e-w : 请求命令是否等待复制完成\u003c/li\u003e\n\u003c/ul\u003e\n\u003cfigure class=\"highlight apache\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 示例\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003ehdfs\u003c/span\u003e dfs -setrep -w \u003cspan class=\"number\"\u003e3\u003c/span\u003e /user/hadoop/dir1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"权限控制\"\u003e\u003ca href=\"#权限控制\" class=\"headerlink\" title=\"权限控制\"\u003e\u003c/a\u003e权限控制\u003c/h3\u003e\u003cfigure class=\"highlight inform7\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e# 权限控制和Linux上使用方式一致\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e# 变更文件或目录的所属群组。 用户必须是文件的所有者或超级用户。\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -chgrp \u003cspan class=\"comment\"\u003e[-R]\u003c/span\u003e GROUP URI \u003cspan class=\"comment\"\u003e[URI ...]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e# 修改文件或目录的访问权限  用户必须是文件的所有者或超级用户。\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -chmod \u003cspan class=\"comment\"\u003e[-R]\u003c/span\u003e \u0026lt;MODE\u003cspan class=\"comment\"\u003e[,MODE]\u003c/span\u003e... | OCTALMODE\u0026gt; URI \u003cspan class=\"comment\"\u003e[URI ...]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e# 修改文件的拥有者  用户必须是超级用户。\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -chown \u003cspan class=\"comment\"\u003e[-R]\u003c/span\u003e \u003cspan class=\"comment\"\u003e[OWNER]\u003c/span\u003e\u003cspan class=\"comment\"\u003e[:\u003cspan class=\"comment\"\u003e[GROUP]\u003c/span\u003e]\u003c/span\u003e URI \u003cspan class=\"comment\"\u003e[URI ]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"文件检测\"\u003e\u003ca href=\"#文件检测\" class=\"headerlink\" title=\"文件检测\"\u003e\u003c/a\u003e文件检测\u003c/h3\u003e\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ehdfs dfs -\u003cspan class=\"built_in\"\u003etest\u003c/span\u003e - [defsz]  URI\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e可选选项：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e-d：如果路径是目录，返回 0。\u003c/li\u003e\n\u003cli\u003e-e：如果路径存在，则返回 0。\u003c/li\u003e\n\u003cli\u003e-f：如果路径是文件，则返回 0。\u003c/li\u003e\n\u003cli\u003e-s：如果路径不为空，则返回 0。\u003c/li\u003e\n\u003cli\u003e-r：如果路径存在且授予读权限，则返回 0。\u003c/li\u003e\n\u003cli\u003e-w：如果路径存在且授予写入权限，则返回 0。\u003c/li\u003e\n\u003cli\u003e-z：如果文件长度为零，则返回 0。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 示例\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehdfs dfs -\u003cspan class=\"built_in\"\u003etest\u003c/span\u003e -e filename\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"HDFS-安全模式\"\u003e\u003ca href=\"#HDFS-安全模式\" class=\"headerlink\" title=\"HDFS 安全模式\"\u003e\u003c/a\u003eHDFS 安全模式\u003c/h2\u003e\u003ch3 id=\"什么是安全模式？\"\u003e\u003ca href=\"#什么是安全模式？\" class=\"headerlink\" title=\"什么是安全模式？\"\u003e\u003c/a\u003e什么是安全模式？\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e安全模式是 HDFS 的一种特殊状态，在这种状态下，HDFS 只接收读数据请求，而不接收写入、删除、修改等变更请求。\u003c/li\u003e\n\u003cli\u003e安全模式是 HDFS 确保 Block 数据安全的一种保护机制。\u003c/li\u003e\n\u003cli\u003eActive NameNode 启动时，HDFS 会进入安全模式，DataNode 主动向 NameNode 汇报可用 Block 列表等信息，在系统达到安全标准前，HDFS 一直处于“只读”状态。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"何时正常离开安全模式\"\u003e\u003ca href=\"#何时正常离开安全模式\" class=\"headerlink\" title=\"何时正常离开安全模式\"\u003e\u003c/a\u003e何时正常离开安全模式\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003eBlock 上报率：DataNode 上报的可用 Block 个数 / NameNode 元数据记录的 Block 个数\u003c/li\u003e\n\u003cli\u003e当 Block 上报率 \u0026gt;= 阈值时，HDFS 才能离开安全模式，默认阈值为 0.999\u003c/li\u003e\n\u003cli\u003e不建议手动强制退出安全模式\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"触发安全模式的原因\"\u003e\u003ca href=\"#触发安全模式的原因\" class=\"headerlink\" title=\"触发安全模式的原因\"\u003e\u003c/a\u003e触发安全模式的原因\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003eNameNode 重启\u003c/li\u003e\n\u003cli\u003eNameNode 磁盘空间不足\u003c/li\u003e\n\u003cli\u003eBlock 上报率低于阈值\u003c/li\u003e\n\u003cli\u003eDataNode 无法正常启动\u003c/li\u003e\n\u003cli\u003e日志中出现严重异常\u003c/li\u003e\n\u003cli\u003e用户操作不当，如：\u003cstrong\u003e强制关机（特别注意！）\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"故障排查\"\u003e\u003ca href=\"#故障排查\" class=\"headerlink\" title=\"故障排查\"\u003e\u003c/a\u003e故障排查\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e找到 DataNode 不能正常启动的原因，重启 DataNode\u003c/li\u003e\n\u003cli\u003e清理 NameNode 磁盘\u003c/li\u003e\n\u003cli\u003e谨慎操作，有问题找星环，以免丢失数据\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"参考资料\"\u003e\u003ca href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"\u003e\u003c/a\u003e参考资料\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html\"\u003eHDFS 官方文档\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.cnblogs.com/caiyisen/p/7395843.html\"\u003eHDFS 知识点总结\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n    \u003c/div\u003e",
  "Date": "2020-02-24T13:14:47Z",
  "Author": "钝悟 ◾ Dunwu"
}