{
  "Source": "dunwu",
  "Title": "Arthas 快速入门",
  "Link": "https://dunwu.github.io/blog/pages/c689d1/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003ch1 id=\"Arthas-快速入门\"\u003e\u003ca href=\"#Arthas-快速入门\" class=\"headerlink\" title=\"Arthas 快速入门\"\u003e\u003c/a\u003eArthas 快速入门\u003c/h1\u003e\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003eArthas\u003c/code\u003e 是 Alibaba 开源的 Java 诊断工具 。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"简介\"\u003e\u003ca href=\"#简介\" class=\"headerlink\" title=\"简介\"\u003e\u003c/a\u003e简介\u003c/h2\u003e\u003cp\u003e\u003ccode\u003eArthas\u003c/code\u003e可以解决的问题：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e这个类从哪个 jar 包加载的？为什么会报各种类相关的 Exception？\u003c/li\u003e\n\u003cli\u003e我改的代码为什么没有执行到？难道是我没 commit？分支搞错了？\u003c/li\u003e\n\u003cli\u003e遇到问题无法在线上 debug，难道只能通过加日志再重新发布吗？\u003c/li\u003e\n\u003cli\u003e线上遇到某个用户的数据处理有问题，但线上同样无法 debug，线下无法重现！\u003c/li\u003e\n\u003cli\u003e是否有一个全局视角来查看系统的运行状况？\u003c/li\u003e\n\u003cli\u003e有什么办法可以监控到 JVM 的实时运行状态？\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003ccode\u003eArthas\u003c/code\u003e支持 JDK 6+，支持 Linux/Mac/Windows，采用命令行交互模式，同时提供丰富的 \u003ccode\u003eTab\u003c/code\u003e 自动补全功能，进一步方便进行问题的定位和诊断。\u003c/p\u003e\n\u003ch2 id=\"安装\"\u003e\u003ca href=\"#安装\" class=\"headerlink\" title=\"安装\"\u003e\u003c/a\u003e安装\u003c/h2\u003e\u003ch3 id=\"使用arthas-boot（推荐）\"\u003e\u003ca href=\"#使用arthas-boot（推荐）\" class=\"headerlink\" title=\"使用arthas-boot（推荐）\"\u003e\u003c/a\u003e使用\u003ccode\u003earthas-boot\u003c/code\u003e（推荐）\u003c/h3\u003e\u003cp\u003e下载\u003ccode\u003earthas-boot.jar\u003c/code\u003e，然后用\u003ccode\u003ejava -jar\u003c/code\u003e的方式启动：\u003c/p\u003e\n\u003cfigure class=\"highlight awk\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ewget https:\u003cspan class=\"regexp\"\u003e//\u003c/span\u003ealibaba.github.io\u003cspan class=\"regexp\"\u003e/arthas/\u003c/span\u003earthas-boot.jar\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ejava -jar arthas-boot.jar\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e打印帮助信息：\u003c/p\u003e\n\u003cfigure class=\"highlight mipsasm\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003ejava \u003c/span\u003e-\u003cspan class=\"keyword\"\u003ejar \u003c/span\u003earthas-\u003cspan class=\"keyword\"\u003eboot.jar \u003c/span\u003e-h\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e如果下载速度比较慢，可以使用 aliyun 的镜像：\u003c/p\u003e\n\u003cfigure class=\"highlight mipsasm\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003ejava \u003c/span\u003e-\u003cspan class=\"keyword\"\u003ejar \u003c/span\u003earthas-\u003cspan class=\"keyword\"\u003eboot.jar \u003c/span\u003e--repo-mirror aliyun --use-http\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e如果从 github 下载有问题，可以使用 gitee 镜像\u003c/p\u003e\n\u003cfigure class=\"highlight 1c\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ewget https:\u003cspan class=\"comment\"\u003e//arthas.gitee.io/arthas-boot.jar\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"使用as-sh\"\u003e\u003ca href=\"#使用as-sh\" class=\"headerlink\" title=\"使用as.sh\"\u003e\u003c/a\u003e使用\u003ccode\u003eas.sh\u003c/code\u003e\u003c/h3\u003e\u003cp\u003eArthas 支持在 Linux/Unix/Mac 等平台上一键安装，请复制以下内容，并粘贴到命令行中，敲 \u003ccode\u003e回车\u003c/code\u003e 执行即可：\u003c/p\u003e\n\u003cfigure class=\"highlight awk\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ecurl -L https:\u003cspan class=\"regexp\"\u003e//\u003c/span\u003ealibaba.github.io\u003cspan class=\"regexp\"\u003e/arthas/i\u003c/span\u003enstall.sh | sh\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e上述命令会下载启动脚本文件 \u003ccode\u003eas.sh\u003c/code\u003e 到当前目录，你可以放在任何地方或将其加入到 \u003ccode\u003e$PATH\u003c/code\u003e 中。\u003c/p\u003e\n\u003cp\u003e直接在 shell 下面执行\u003ccode\u003e./as.sh\u003c/code\u003e，就会进入交互界面。\u003c/p\u003e\n\u003cp\u003e也可以执行\u003ccode\u003e./as.sh -h\u003c/code\u003e来获取更多参数信息。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e如果从 github 下载有问题，可以使用 gitee 镜像\u003c/p\u003e\n\u003cfigure class=\"highlight nginx\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003ecurl\u003c/span\u003e -L https://arthas.gitee.io/install.sh | sh\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"全量安装\"\u003e\u003ca href=\"#全量安装\" class=\"headerlink\" title=\"全量安装\"\u003e\u003c/a\u003e全量安装\u003c/h3\u003e\u003cp\u003e最新版本，点击下载：\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://repository.sonatype.org/service/local/artifact/maven/redirect?r=central-proxy\u0026amp;g=com.taobao.arthas\u0026amp;a=arthas-packaging\u0026amp;e=zip\u0026amp;c=bin\u0026amp;v=LATEST\"\u003e下载地址\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e解压后，在文件夹里有\u003ccode\u003earthas-boot.jar\u003c/code\u003e，直接用\u003ccode\u003ejava -jar\u003c/code\u003e的方式启动：\u003c/p\u003e\n\u003cfigure class=\"highlight mipsasm\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003ejava \u003c/span\u003e-\u003cspan class=\"keyword\"\u003ejar \u003c/span\u003earthas-\u003cspan class=\"keyword\"\u003eboot.jar\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e打印帮助信息：\u003c/p\u003e\n\u003cfigure class=\"highlight mipsasm\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003ejava \u003c/span\u003e-\u003cspan class=\"keyword\"\u003ejar \u003c/span\u003earthas-\u003cspan class=\"keyword\"\u003eboot.jar \u003c/span\u003e-h\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"基础使用\"\u003e\u003ca href=\"#基础使用\" class=\"headerlink\" title=\"基础使用\"\u003e\u003c/a\u003e基础使用\u003c/h2\u003e\u003ch3 id=\"启动-Demo\"\u003e\u003ca href=\"#启动-Demo\" class=\"headerlink\" title=\"启动 Demo\"\u003e\u003c/a\u003e启动 Demo\u003c/h3\u003e\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ewget https://alibaba.github.io/arthas/arthas-demo.jar\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ejava -jar arthas-demo.jar\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003ccode\u003earthas-demo\u003c/code\u003e是一个简单的程序，每隔一秒生成一个随机数，再执行质因式分解，并打印出分解结果。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003earthas-demo\u003c/code\u003e源代码：\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/alibaba/arthas/blob/master/demo/src/main/java/demo/MathGame.java\"\u003e查看\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"启动-arthas\"\u003e\u003ca href=\"#启动-arthas\" class=\"headerlink\" title=\"启动 arthas\"\u003e\u003c/a\u003e启动 arthas\u003c/h3\u003e\u003cp\u003e在命令行下面执行（使用和目标进程一致的用户启动，否则可能 attach 失败）：\u003c/p\u003e\n\u003cfigure class=\"highlight awk\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ewget https:\u003cspan class=\"regexp\"\u003e//\u003c/span\u003ealibaba.github.io\u003cspan class=\"regexp\"\u003e/arthas/\u003c/span\u003earthas-boot.jar\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ejava -jar arthas-boot.jar\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cul\u003e\n\u003cli\u003e执行该程序的用户需要和目标进程具有相同的权限。比如以\u003ccode\u003eadmin\u003c/code\u003e用户来执行：\u003ccode\u003esudo su admin \u0026amp;\u0026amp; java -jar arthas-boot.jar\u003c/code\u003e 或 \u003ccode\u003esudo -u admin -EH java -jar arthas-boot.jar\u003c/code\u003e。\u003c/li\u003e\n\u003cli\u003e如果 attach 不上目标进程，可以查看\u003ccode\u003e~/logs/arthas/\u003c/code\u003e 目录下的日志。\u003c/li\u003e\n\u003cli\u003e如果下载速度比较慢，可以使用 aliyun 的镜像：\u003ccode\u003ejava -jar arthas-boot.jar --repo-mirror aliyun --use-http\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ejava -jar arthas-boot.jar -h\u003c/code\u003e 打印更多参数信息。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e选择应用 java 进程：\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ $ java -jar arthas-boot.jar\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e* [1]: 35542\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  [2]: 71560 arthas-demo.jar\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003eDemo 进程是第 2 个，则输入 2，再输入\u003ccode\u003e回车/enter\u003c/code\u003e。Arthas 会 attach 到目标进程上，并输出日志：\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e[INFO] Try to attach process 71560\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e[INFO] Attach process 71560 success.\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e[INFO] arthas-client connect 127.0.0.1 3658\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  ,---.  ,------. ,--------.,--.  ,--.  ,---.   ,---.\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e /  O  \\ |  .--. \u003cspan class=\"string\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e--.  .--\u003cspan class=\"string\"\u003e\u0026#39;|  \u0026#39;\u003c/span\u003e--\u003cspan class=\"string\"\u003e\u0026#39;  | /  O  \\ \u0026#39;\u003c/span\u003e   .-\u003cspan class=\"string\"\u003e\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"string\"\u003e|  .-.  ||  \u0026#39;\u003c/span\u003e--\u003cspan class=\"string\"\u003e\u0026#39;.\u0026#39;\u003c/span\u003e   |  |   |  .--.  ||  .-.  |`.  `-.\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e|  | |  ||  |\\  \\    |  |   |  |  |  ||  | |  |.-\u003cspan class=\"string\"\u003e\u0026#39;    |\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"string\"\u003e`--\u0026#39;\u003c/span\u003e `--\u003cspan class=\"string\"\u003e\u0026#39;`--\u0026#39;\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;--\u0026#39;\u003c/span\u003e   `--\u003cspan class=\"string\"\u003e\u0026#39;   `--\u0026#39;\u003c/span\u003e  `--\u003cspan class=\"string\"\u003e\u0026#39;`--\u0026#39;\u003c/span\u003e `--\u003cspan class=\"string\"\u003e\u0026#39;`-----\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ewiki: https://alibaba.github.io/arthas\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eversion: 3.0.5.20181127201536\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003epid: 71560\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003etime: 2018-11-28 19:16:24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"查看-dashboard\"\u003e\u003ca href=\"#查看-dashboard\" class=\"headerlink\" title=\"查看 dashboard\"\u003e\u003c/a\u003e查看 dashboard\u003c/h3\u003e\u003cp\u003e输入\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/dashboard.html\"\u003edashboard\u003c/a\u003e，按\u003ccode\u003e回车/enter\u003c/code\u003e，会展示当前进程的信息，按\u003ccode\u003ectrl+c\u003c/code\u003e可以中断执行。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ dashboard\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eID     NAME                   GROUP          PRIORI STATE  %CPU    TIME   INTERRU DAEMON\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17     pool-2-thread-1        system         5      WAITIN 67      0:0    \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e   \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27     Timer-for-arthas-dashb system         10     RUNNAB 32      0:0    \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e   \u003cspan class=\"literal\"\u003etrue\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11     AsyncAppender-Worker-a system         9      WAITIN 0       0:0    \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e   \u003cspan class=\"literal\"\u003etrue\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9      Attach Listener        system         9      RUNNAB 0       0:0    \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e   \u003cspan class=\"literal\"\u003etrue\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3      Finalizer              system         8      WAITIN 0       0:0    \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e   \u003cspan class=\"literal\"\u003etrue\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2      Reference Handler      system         10     WAITIN 0       0:0    \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e   \u003cspan class=\"literal\"\u003etrue\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4      Signal Dispatcher      system         9      RUNNAB 0       0:0    \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e   \u003cspan class=\"literal\"\u003etrue\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26     as-command-execute-dae system         10     TIMED_ 0       0:0    \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e   \u003cspan class=\"literal\"\u003etrue\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13     job-timeout            system         9      TIMED_ 0       0:0    \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e   \u003cspan class=\"literal\"\u003etrue\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1      main                   main           5      TIMED_ 0       0:0    \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e   \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14     nioEventLoopGroup-2-1  system         10     RUNNAB 0       0:0    \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e   \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18     nioEventLoopGroup-2-2  system         10     RUNNAB 0       0:0    \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e   \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23     nioEventLoopGroup-2-3  system         10     RUNNAB 0       0:0    \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e   \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15     nioEventLoopGroup-3-1  system         10     RUNNAB 0       0:0    \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e   \u003cspan class=\"literal\"\u003efalse\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eMemory             used   total max    usage GC\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eheap               32M    155M  1820M  1.77% gc.ps_scavenge.count  4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eps_eden_space      14M    65M   672M   2.21% gc.ps_scavenge.time(m 166\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eps_survivor_space  4M     5M    5M           s)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eps_old_gen         12M    85M   1365M  0.91% gc.ps_marksweep.count 0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003enonheap            20M    23M   -1           gc.ps_marksweep.time( 0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecode_cache         3M     5M    240M   1.32% ms)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eRuntime\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eos.name                Mac OS X\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eos.version             10.13.4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ejava.version           1.8.0_162\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ejava.home              /Library/Java/JavaVir\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                       tualMachines/jdk1.8.0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                       _162.jdk/Contents/Hom\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                       e/jre\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"通过-thread-命令来获取到arthas-demo进程的-Main-Class\"\u003e\u003ca href=\"#通过-thread-命令来获取到arthas-demo进程的-Main-Class\" class=\"headerlink\" title=\"通过 thread 命令来获取到arthas-demo进程的 Main Class\"\u003e\u003c/a\u003e通过 thread 命令来获取到\u003ccode\u003earthas-demo\u003c/code\u003e进程的 Main Class\u003c/h3\u003e\u003cp\u003e\u003ccode\u003ethread 1\u003c/code\u003e会打印线程 ID 1 的栈，通常是 main 函数的线程。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ thread 1 | grep \u003cspan class=\"string\"\u003e\u0026#39;main(\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    at demo.MathGame.main(MathGame.java:17)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"通过-jad-来反编译-Main-Class\"\u003e\u003ca href=\"#通过-jad-来反编译-Main-Class\" class=\"headerlink\" title=\"通过 jad 来反编译 Main Class\"\u003e\u003c/a\u003e通过 jad 来反编译 Main Class\u003c/h3\u003e\u003cfigure class=\"highlight java\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e35\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e36\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e37\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e38\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e39\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e40\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e41\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e42\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e43\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e44\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e45\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e46\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e47\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e48\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e49\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e50\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e51\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e52\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e53\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e54\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e55\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e56\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e57\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e58\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e59\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e60\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e61\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e62\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e63\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e64\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e65\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e66\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e67\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e68\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e69\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e70\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e71\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e72\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e73\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e74\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e75\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e76\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e77\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e78\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ jad demo.MathGame\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eClassLoader:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e+-sun.misc.Launcher$AppClassLoader@3d4eac69\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  +-sun.misc.Launcher$ExtClassLoader@66350f69\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLocation:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e/tmp/arthas-demo.jar\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e/*\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e * Decompiled with CFR 0_132.\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e */\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003epackage\u003c/span\u003e demo;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.io.PrintStream;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.util.ArrayList;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.util.Iterator;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.util.List;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.util.Random;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e java.util.concurrent.TimeUnit;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMathGame\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"type\"\u003eRandom\u003c/span\u003e \u003cspan class=\"variable\"\u003erandom\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eRandom\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"type\"\u003eint\u003c/span\u003e \u003cspan class=\"variable\"\u003eillegalArgumentCount\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"number\"\u003e0\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003emain\u003c/span\u003e\u003cspan class=\"params\"\u003e(String[] args)\u003c/span\u003e \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e InterruptedException {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eMathGame\u003c/span\u003e \u003cspan class=\"variable\"\u003egame\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eMathGame\u003c/span\u003e();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003edo\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            game.run();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            TimeUnit.SECONDS.sleep(\u003cspan class=\"number\"\u003e1L\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        } \u003cspan class=\"keyword\"\u003ewhile\u003c/span\u003e (\u003cspan class=\"literal\"\u003etrue\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003erun\u003c/span\u003e\u003cspan class=\"params\"\u003e()\u003c/span\u003e \u003cspan class=\"keyword\"\u003ethrows\u003c/span\u003e InterruptedException {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003etry\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            \u003cspan class=\"type\"\u003eint\u003c/span\u003e \u003cspan class=\"variable\"\u003enumber\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e random.nextInt();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            List\u0026lt;Integer\u0026gt; primeFactors = \u003cspan class=\"built_in\"\u003ethis\u003c/span\u003e.primeFactors(number);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            MathGame.print(number, primeFactors);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003ecatch\u003c/span\u003e (Exception e) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            System.out.println(String.format(\u003cspan class=\"string\"\u003e\u0026#34;illegalArgumentCount:%3d, \u0026#34;\u003c/span\u003e, \u003cspan class=\"built_in\"\u003ethis\u003c/span\u003e.illegalArgumentCount) + e.getMessage());\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"title function_\"\u003eprint\u003c/span\u003e\u003cspan class=\"params\"\u003e(\u003cspan class=\"type\"\u003eint\u003c/span\u003e number, List\u0026lt;Integer\u0026gt; primeFactors)\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eStringBuffer\u003c/span\u003e \u003cspan class=\"variable\"\u003esb\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eStringBuffer\u003c/span\u003e(\u003cspan class=\"string\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e + number + \u003cspan class=\"string\"\u003e\u0026#34;=\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        Iterator\u0026lt;Integer\u0026gt; iterator = primeFactors.iterator();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003ewhile\u003c/span\u003e (iterator.hasNext()) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            \u003cspan class=\"type\"\u003eint\u003c/span\u003e \u003cspan class=\"variable\"\u003efactor\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e iterator.next();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            sb.append(factor).append(\u003cspan class=\"string\"\u003e\u0026#39;*\u0026#39;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e (sb.charAt(sb.length() - \u003cspan class=\"number\"\u003e1\u003c/span\u003e) == \u003cspan class=\"string\"\u003e\u0026#39;*\u0026#39;\u003c/span\u003e) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            sb.deleteCharAt(sb.length() - \u003cspan class=\"number\"\u003e1\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        System.out.println(sb);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003epublic\u003c/span\u003e List\u0026lt;Integer\u0026gt; \u003cspan class=\"title function_\"\u003eprimeFactors\u003c/span\u003e\u003cspan class=\"params\"\u003e(\u003cspan class=\"type\"\u003eint\u003c/span\u003e number)\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e (number \u0026lt; \u003cspan class=\"number\"\u003e2\u003c/span\u003e) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            ++\u003cspan class=\"built_in\"\u003ethis\u003c/span\u003e.illegalArgumentCount;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            \u003cspan class=\"keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eIllegalArgumentException\u003c/span\u003e(\u003cspan class=\"string\"\u003e\u0026#34;number is: \u0026#34;\u003c/span\u003e + number + \u003cspan class=\"string\"\u003e\u0026#34;, need \u0026gt;= 2\u0026#34;\u003c/span\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        ArrayList\u0026lt;Integer\u0026gt; result = \u003cspan class=\"keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"title class_\"\u003eArrayList\u003c/span\u003e\u0026lt;Integer\u0026gt;();\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"type\"\u003eint\u003c/span\u003e \u003cspan class=\"variable\"\u003ei\u003c/span\u003e \u003cspan class=\"operator\"\u003e=\u003c/span\u003e \u003cspan class=\"number\"\u003e2\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003ewhile\u003c/span\u003e (i \u0026lt;= number) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e (number % i == \u003cspan class=\"number\"\u003e0\u003c/span\u003e) {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                result.add(i);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                number /= i;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                i = \u003cspan class=\"number\"\u003e2\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                \u003cspan class=\"keyword\"\u003econtinue\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            ++i;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e result;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eAffect(row-cnt:\u003cspan class=\"number\"\u003e1\u003c/span\u003e) cost in \u003cspan class=\"number\"\u003e970\u003c/span\u003e ms.\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"watch\"\u003e\u003ca href=\"#watch\" class=\"headerlink\" title=\"watch\"\u003e\u003c/a\u003ewatch\u003c/h3\u003e\u003cp\u003e通过\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/watch.html\"\u003ewatch\u003c/a\u003e命令来查看\u003ccode\u003edemo.MathGame#primeFactors\u003c/code\u003e函数的返回值：\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ watch demo.MathGame primeFactors returnObj\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ePress Ctrl+C to abort.\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eAffect(class-cnt:1 , method-cnt:1) cost \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e 107 ms.\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ets=2018-11-28 19:22:30; [cost=1.715367ms] result=null\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ets=2018-11-28 19:22:31; [cost=0.185203ms] result=null\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ets=2018-11-28 19:22:32; [cost=19.012416ms] result=@ArrayList[\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[5],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[47],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[2675531],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ets=2018-11-28 19:22:33; [cost=0.311395ms] result=@ArrayList[\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[2],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[5],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[317],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[503],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[887],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ets=2018-11-28 19:22:34; [cost=10.136007ms] result=@ArrayList[\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[2],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[2],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[3],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[3],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[31],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[717593],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ets=2018-11-28 19:22:35; [cost=29.969732ms] result=@ArrayList[\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[5],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[29],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    @Integer[7651739],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e]\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e更多的功能可以查看\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/advanced-use.html\"\u003e进阶使用\u003c/a\u003e。\u003c/p\u003e\n\u003ch3 id=\"退出-arthas\"\u003e\u003ca href=\"#退出-arthas\" class=\"headerlink\" title=\"退出 arthas\"\u003e\u003c/a\u003e退出 arthas\u003c/h3\u003e\u003cp\u003e如果只是退出当前的连接，可以用\u003ccode\u003equit\u003c/code\u003e或者\u003ccode\u003eexit\u003c/code\u003e命令。Attach 到目标进程上的 arthas 还会继续运行，端口会保持开放，下次连接时可以直接连接上。\u003c/p\u003e\n\u003cp\u003e如果想完全退出 arthas，可以执行\u003ccode\u003eshutdown\u003c/code\u003e命令。\u003c/p\u003e\n\u003ch2 id=\"进阶使用\"\u003e\u003ca href=\"#进阶使用\" class=\"headerlink\" title=\"进阶使用\"\u003e\u003c/a\u003e进阶使用\u003c/h2\u003e\u003ch3 id=\"基础命令\"\u003e\u003ca href=\"#基础命令\" class=\"headerlink\" title=\"基础命令\"\u003e\u003c/a\u003e基础命令\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003ehelp——查看命令帮助信息\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/cat.html\"\u003ecat\u003c/a\u003e——打印文件内容，和 linux 里的 cat 命令类似\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/pwd.html\"\u003epwd\u003c/a\u003e——返回当前的工作目录，和 linux 命令类似\u003c/li\u003e\n\u003cli\u003ecls——清空当前屏幕区域\u003c/li\u003e\n\u003cli\u003esession——查看当前会话的信息\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/reset.html\"\u003ereset\u003c/a\u003e——重置增强类，将被 Arthas 增强过的类全部还原，Arthas 服务端关闭时会重置所有增强过的类\u003c/li\u003e\n\u003cli\u003eversion——输出当前目标 Java 进程所加载的 Arthas 版本号\u003c/li\u003e\n\u003cli\u003ehistory——打印命令历史\u003c/li\u003e\n\u003cli\u003equit——退出当前 Arthas 客户端，其他 Arthas 客户端不受影响\u003c/li\u003e\n\u003cli\u003eshutdown——关闭 Arthas 服务端，所有 Arthas 客户端全部退出\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/keymap.html\"\u003ekeymap\u003c/a\u003e——Arthas 快捷键列表及自定义快捷键\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"jvm-相关\"\u003e\u003ca href=\"#jvm-相关\" class=\"headerlink\" title=\"jvm 相关\"\u003e\u003c/a\u003ejvm 相关\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/dashboard.html\"\u003edashboard\u003c/a\u003e——当前系统的实时数据面板\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/thread.html\"\u003ethread\u003c/a\u003e——查看当前 JVM 的线程堆栈信息\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/jvm.html\"\u003ejvm\u003c/a\u003e——查看当前 JVM 的信息\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/sysprop.html\"\u003esysprop\u003c/a\u003e——查看和修改 JVM 的系统属性\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/sysenv.html\"\u003esysenv\u003c/a\u003e——查看 JVM 的环境变量\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/vmoption.html\"\u003evmoption\u003c/a\u003e——查看和修改 JVM 里诊断相关的 option\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/logger.html\"\u003elogger\u003c/a\u003e——查看和修改 logger\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/getstatic.html\"\u003egetstatic\u003c/a\u003e——查看类的静态属性\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/ognl.html\"\u003eognl\u003c/a\u003e——执行 ognl 表达式\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/mbean.html\"\u003embean\u003c/a\u003e——查看 Mbean 的信息\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/heapdump.html\"\u003eheapdump\u003c/a\u003e——dump java heap, 类似 jmap 命令的 heap dump 功能\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"class-classloader-相关\"\u003e\u003ca href=\"#class-classloader-相关\" class=\"headerlink\" title=\"class/classloader 相关\"\u003e\u003c/a\u003eclass/classloader 相关\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/sc.html\"\u003esc\u003c/a\u003e——查看 JVM 已加载的类信息\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/sm.html\"\u003esm\u003c/a\u003e——查看已加载类的方法信息\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/jad.html\"\u003ejad\u003c/a\u003e——反编译指定已加载类的源码\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/mc.html\"\u003emc\u003c/a\u003e——内存编绎器，内存编绎\u003ccode\u003e.java\u003c/code\u003e文件为\u003ccode\u003e.class\u003c/code\u003e文件\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/redefine.html\"\u003eredefine\u003c/a\u003e——加载外部的\u003ccode\u003e.class\u003c/code\u003e文件，redefine 到 JVM 里\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/dump.html\"\u003edump\u003c/a\u003e——dump 已加载类的 byte code 到特定目录\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/classloader.html\"\u003eclassloader\u003c/a\u003e——查看 classloader 的继承树，urls，类加载信息，使用 classloader 去 getResource\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"monitor-watch-trace-相关\"\u003e\u003ca href=\"#monitor-watch-trace-相关\" class=\"headerlink\" title=\"monitor/watch/trace 相关\"\u003e\u003c/a\u003emonitor/watch/trace 相关\u003c/h3\u003e\u003cblockquote\u003e\n\u003cp\u003e请注意，这些命令，都通过字节码增强技术来实现的，会在指定类的方法中插入一些切面来实现数据统计和观测，因此在线上、预发使用时，请尽量明确需要观测的类、方法以及条件，诊断结束要执行 \u003ccode\u003eshutdown\u003c/code\u003e 或将增强过的类执行 \u003ccode\u003ereset\u003c/code\u003e 命令。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/monitor.html\"\u003emonitor\u003c/a\u003e——方法执行监控\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/watch.html\"\u003ewatch\u003c/a\u003e——方法执行数据观测\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/trace.html\"\u003etrace\u003c/a\u003e——方法内部调用路径，并输出方法路径上的每个节点上耗时\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/stack.html\"\u003estack\u003c/a\u003e——输出当前方法被调用的调用路径\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/tt.html\"\u003ett\u003c/a\u003e——方法执行数据的时空隧道，记录下指定方法每次调用的入参和返回信息，并能对这些不同的时间下调用进行观测\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"options\"\u003e\u003ca href=\"#options\" class=\"headerlink\" title=\"options\"\u003e\u003c/a\u003eoptions\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/options.html\"\u003eoptions\u003c/a\u003e——查看或设置 Arthas 全局开关\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"管道\"\u003e\u003ca href=\"#管道\" class=\"headerlink\" title=\"管道\"\u003e\u003c/a\u003e管道\u003c/h3\u003e\u003cp\u003eArthas 支持使用管道对上述命令的结果进行进一步的处理，如\u003ccode\u003esm java.lang.String * | grep \u0026#39;index\u0026#39;\u003c/code\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003egrep——搜索满足条件的 \b 结果\u003c/li\u003e\n\u003cli\u003eplaintext——将 \b 命令的结果去除 ANSI 颜色\u003c/li\u003e\n\u003cli\u003ewc——按行统计输出结果\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"后台异步任务\"\u003e\u003ca href=\"#后台异步任务\" class=\"headerlink\" title=\"后台异步任务\"\u003e\u003c/a\u003e后台异步任务\u003c/h3\u003e\u003cp\u003e当线上出现偶发的问题，比如需要 watch 某个条件，而这个条件一天可能才会出现一次时，异步后台任务就派上用场了，详情请参考\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/async.html\"\u003e这里\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e使用 \u0026gt; 将结果重写向到日志文件，使用 \u0026amp; 指定命令是后台运行，session 断开不影响任务执行（生命周期默认为 1 天）\u003c/li\u003e\n\u003cli\u003ejobs——列出所有 job\u003c/li\u003e\n\u003cli\u003ekill——强制终止任务\u003c/li\u003e\n\u003cli\u003efg——将暂停的任务拉到前台执行\u003c/li\u003e\n\u003cli\u003ebg——将暂停的任务放到后台执行\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"Web-Console\"\u003e\u003ca href=\"#Web-Console\" class=\"headerlink\" title=\"Web Console\"\u003e\u003c/a\u003eWeb Console\u003c/h3\u003e\u003cp\u003e通过 websocket 连接 Arthas。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/web-console.html\"\u003eWeb Console\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"用户数据回报\"\u003e\u003ca href=\"#用户数据回报\" class=\"headerlink\" title=\"用户数据回报\"\u003e\u003c/a\u003e用户数据回报\u003c/h3\u003e\u003cp\u003e在\u003ccode\u003e3.1.4\u003c/code\u003e版本后，增加了用户数据回报功能，方便统一做安全或者历史数据统计。\u003c/p\u003e\n\u003cp\u003e在启动时，指定\u003ccode\u003estat-url\u003c/code\u003e，就会回报执行的每一行命令，比如： \u003ccode\u003e./as.sh --stat-url \u0026#39;http://192.168.10.11:8080/api/stat\u0026#39;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e在 tunnel server 里有一个示例的回报代码，用户可以自己在服务器上实现。\u003c/p\u003e\n\u003cp\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/alibaba/arthas/blob/master/tunnel-server/src/main/java/com/alibaba/arthas/tunnel/server/app/web/StatController.java\"\u003eStatController.java\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"其他特性\"\u003e\u003ca href=\"#其他特性\" class=\"headerlink\" title=\"其他特性\"\u003e\u003c/a\u003e其他特性\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/async.html\"\u003e异步命令支持\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/save-log.html\"\u003e执行结果存日志\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/batch-support.html\"\u003e批处理的支持\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/alibaba/arthas/issues/11\"\u003eognl 表达式的用法说明\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"参考资料\"\u003e\u003ca href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"\u003e\u003c/a\u003e参考资料\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/alibaba/arthas\"\u003eArthas Github\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://alibaba.github.io/arthas/index.html\"\u003eArthas 用户文档\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.jianshu.com/p/4e34d0ab47d1\"\u003earthas 源码分析\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n    \u003c/div\u003e",
  "Date": "2020-02-07T15:04:47Z",
  "Author": "钝悟 ◾ Dunwu"
}