{
  "Source": "dunwu",
  "Title": "ZooKeeper命令",
  "Link": "https://dunwu.github.io/blog/pages/13c5e2/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\u003ch1 id=\"ZooKeeper-命令\"\u003e\u003ca href=\"#ZooKeeper-命令\" class=\"headerlink\" title=\"ZooKeeper 命令\"\u003e\u003c/a\u003eZooKeeper 命令\u003c/h1\u003e\u003cblockquote\u003e\n\u003cp\u003eZooKeeper 命令用于在 ZooKeeper 服务上执行操作。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"启动服务和启动命令行\"\u003e\u003ca href=\"#启动服务和启动命令行\" class=\"headerlink\" title=\"启动服务和启动命令行\"\u003e\u003c/a\u003e启动服务和启动命令行\u003c/h2\u003e\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 启动服务\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ebin/zkServer.sh start\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 启动命令行，不指定服务地址则默认连接到localhost:2181\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ebin/zkCli.sh -server hadoop001:2181\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"查看节点列表\"\u003e\u003ca href=\"#查看节点列表\" class=\"headerlink\" title=\"查看节点列表\"\u003e\u003c/a\u003e查看节点列表\u003c/h2\u003e\u003ch3 id=\"ls-命令\"\u003e\u003ca href=\"#ls-命令\" class=\"headerlink\" title=\"ls 命令\"\u003e\u003c/a\u003e\u003ccode\u003els\u003c/code\u003e 命令\u003c/h3\u003e\u003cp\u003e\u003ccode\u003els\u003c/code\u003e 命令用于查看某个路径下目录列表。\u003c/p\u003e\n\u003cp\u003e【语法】\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"built_in\"\u003els\u003c/span\u003e path\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e说明：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003epath\u003c/strong\u003e：代表路径。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e【示例】\u003c/p\u003e\n\u003cfigure class=\"highlight angelscript\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"string\"\u003e[zk: localhost:2181(CONNECTED) 0]\u003c/span\u003e ls /\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"string\"\u003e[cluster, controller_epoch, brokers, storm, zookeeper, admin,  ...]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"ls2-命令\"\u003e\u003ca href=\"#ls2-命令\" class=\"headerlink\" title=\"ls2 命令\"\u003e\u003c/a\u003e\u003ccode\u003els2\u003c/code\u003e 命令\u003c/h3\u003e\u003cp\u003e\u003ccode\u003els2\u003c/code\u003e 命令用于查看某个路径下目录列表，它比 ls 命令列出更多的详细信息。\u003c/p\u003e\n\u003cp\u003e【语法】\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003els2 path\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e说明：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003epath\u003c/strong\u003e：代表路径。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e【示例】\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 1] ls2 /\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e[cluster, controller_epoch, brokers, storm, zookeeper, admin, ....]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecZxid = 0x0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ectime = Thu Jan 01 08:00:00 CST 1970\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emZxid = 0x0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emtime = Thu Jan 01 08:00:00 CST 1970\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003epZxid = 0x130\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecversion = 19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003edataVersion = 0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eaclVersion = 0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eephemeralOwner = 0x0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003edataLength = 0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003enumChildren = 11\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"节点的增删改查\"\u003e\u003ca href=\"#节点的增删改查\" class=\"headerlink\" title=\"节点的增删改查\"\u003e\u003c/a\u003e节点的增删改查\u003c/h2\u003e\u003ch3 id=\"get-命令\"\u003e\u003ca href=\"#get-命令\" class=\"headerlink\" title=\"get 命令\"\u003e\u003c/a\u003e\u003ccode\u003eget\u003c/code\u003e 命令\u003c/h3\u003e\u003cp\u003e\u003ccode\u003eget\u003c/code\u003e 命令用于获取节点数据和状态信息。\u003c/p\u003e\n\u003cp\u003e【语法】\u003c/p\u003e\n\u003cfigure class=\"highlight pgsql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eget\u003c/span\u003e \u003cspan class=\"type\"\u003epath\u003c/span\u003e [watch]\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e说明：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003epath\u003c/strong\u003e：代表路径。\u003c/li\u003e\n\u003cli\u003e**[watch]**：对节点进行事件监听。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e【示例】\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 31] get /hadoop\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e123456   \u003cspan class=\"comment\"\u003e#节点数据\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecZxid = 0x14b\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ectime = Fri May 24 17:03:06 CST 2019\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emZxid = 0x14b\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emtime = Fri May 24 17:03:06 CST 2019\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003epZxid = 0x14b\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecversion = 0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003edataVersion = 0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eaclVersion = 0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eephemeralOwner = 0x0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003edataLength = 6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003enumChildren = 0\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e说明：\u003c/p\u003e\n\u003cp\u003e节点各个属性如下表。其中一个重要的概念是 Zxid(ZooKeeper Transaction Id)，ZooKeeper 节点的每一次更改都具有唯一的 Zxid，如果 Zxid1 小于 Zxid2，则 Zxid1 的更改发生在 Zxid2 更改之前。\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e\u003cstrong\u003e状态属性\u003c/strong\u003e\u003c/th\u003e\n\u003cth\u003e\u003cstrong\u003e说明\u003c/strong\u003e\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003ecZxid\u003c/td\u003e\n\u003ctd\u003e数据节点创建时的事务 ID\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ectime\u003c/td\u003e\n\u003ctd\u003e数据节点创建时的时间\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003emZxid\u003c/td\u003e\n\u003ctd\u003e数据节点最后一次更新时的事务 ID\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003emtime\u003c/td\u003e\n\u003ctd\u003e数据节点最后一次更新时的时间\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epZxid\u003c/td\u003e\n\u003ctd\u003e数据节点的子节点最后一次被修改时的事务 ID\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ecversion\u003c/td\u003e\n\u003ctd\u003e子节点的更改次数\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003edataVersion\u003c/td\u003e\n\u003ctd\u003e节点数据的更改次数\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eaclVersion\u003c/td\u003e\n\u003ctd\u003e节点的 ACL 的更改次数\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eephemeralOwner\u003c/td\u003e\n\u003ctd\u003e如果节点是临时节点，则表示创建该节点的会话的 SessionID；如果节点是持久节点，则该属性值为 0\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003edataLength\u003c/td\u003e\n\u003ctd\u003e数据内容的长度\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003enumChildren\u003c/td\u003e\n\u003ctd\u003e数据节点当前的子节点个数\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"stat-命令\"\u003e\u003ca href=\"#stat-命令\" class=\"headerlink\" title=\"stat 命令\"\u003e\u003c/a\u003e\u003ccode\u003estat\u003c/code\u003e 命令\u003c/h3\u003e\u003cp\u003e\u003ccode\u003estat\u003c/code\u003e 命令用于查看节点状态信息。它的返回值和 \u003ccode\u003eget\u003c/code\u003e 命令类似，但不会返回节点数据。\u003c/p\u003e\n\u003cp\u003e【语法】\u003c/p\u003e\n\u003cfigure class=\"highlight apache\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attribute\"\u003estat\u003c/span\u003e path\u003cspan class=\"meta\"\u003e [watch]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003epath\u003c/strong\u003e：代表路径。\u003c/li\u003e\n\u003cli\u003e**[watch]**：对节点进行事件监听。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e【示例】\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 32] \u003cspan class=\"built_in\"\u003estat\u003c/span\u003e /hadoop\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecZxid = 0x14b\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ectime = Fri May 24 17:03:06 CST 2019\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emZxid = 0x14b\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emtime = Fri May 24 17:03:06 CST 2019\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003epZxid = 0x14b\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecversion = 0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003edataVersion = 0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eaclVersion = 0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eephemeralOwner = 0x0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003edataLength = 6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003enumChildren = 0\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"create-命令\"\u003e\u003ca href=\"#create-命令\" class=\"headerlink\" title=\"create 命令\"\u003e\u003c/a\u003e\u003ccode\u003ecreate\u003c/code\u003e 命令\u003c/h3\u003e\u003cp\u003e\u003ccode\u003ecreate\u003c/code\u003e 命令用于创建节点并赋值。\u003c/p\u003e\n\u003cp\u003e【语法】\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ecreate [-s] [-e] path data acl\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e说明：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e**[-s][-e]**：-s 和 -e 都是可选的，-s 代表顺序节点，-e 代表临时节点，注意其中 -s 和 -e 可以同时使用的，并且临时节点不能再创建子节点。\u003cul\u003e\n\u003cli\u003e默认情况下，所有 znode 都是持久的。\u003c/li\u003e\n\u003cli\u003e顺序节点保证 znode 路径将是唯一的。\u003c/li\u003e\n\u003cli\u003e临时节点会在会话过期或客户端断开连接时被自动删除。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003epath\u003c/strong\u003e：指定要创建节点的路径，比如 \u003cstrong\u003e/hadoop\u003c/strong\u003e。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003edata\u003c/strong\u003e：要在此节点存储的数据。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eacl\u003c/strong\u003e：访问权限相关，默认是 world，相当于全世界都能访问。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e【示例】创建持久节点\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 4] create /hadoop 123456\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCreated /hadoop\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e【示例】创建有序节点，此时创建的节点名为指定节点名 + 自增序号：\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 23] create -s /a  \u003cspan class=\"string\"\u003e\u0026#34;aaa\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCreated /a0000000022\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 24] create -s /b  \u003cspan class=\"string\"\u003e\u0026#34;bbb\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCreated /b0000000023\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 25] create -s /c  \u003cspan class=\"string\"\u003e\u0026#34;ccc\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCreated /c0000000024\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e【示例】创建临时节点：\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 26] create -e /tmp  \u003cspan class=\"string\"\u003e\u0026#34;tmp\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCreated /tmp\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"set-命令\"\u003e\u003ca href=\"#set-命令\" class=\"headerlink\" title=\"set 命令\"\u003e\u003c/a\u003e\u003ccode\u003eset\u003c/code\u003e 命令\u003c/h3\u003e\u003cp\u003e\u003ccode\u003eset\u003c/code\u003e 命令用于修改节点存储的数据。\u003c/p\u003e\n\u003cp\u003e【语法】\u003c/p\u003e\n\u003cfigure class=\"highlight pgsql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eset\u003c/span\u003e \u003cspan class=\"type\"\u003epath\u003c/span\u003e data [\u003cspan class=\"keyword\"\u003eversion\u003c/span\u003e]\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e说明：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003epath\u003c/strong\u003e：节点路径。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003edata\u003c/strong\u003e：需要存储的数据。\u003c/li\u003e\n\u003cli\u003e**[version]**：可选项，版本号(可用作乐观锁)。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e【示例】\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 33] \u003cspan class=\"built_in\"\u003eset\u003c/span\u003e /hadoop 345\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecZxid = 0x14b\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ectime = Fri May 24 17:03:06 CST 2019\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emZxid = 0x14c\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emtime = Fri May 24 17:13:05 CST 2019\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003epZxid = 0x14b\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecversion = 0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003edataVersion = 1  \u003cspan class=\"comment\"\u003e# 注意更改后此时版本号为 1，默认创建时为 0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eaclVersion = 0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eephemeralOwner = 0x0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003edataLength = 3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003enumChildren = 0\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e也可以基于版本号进行更改，此时类似于乐观锁机制，当你传入的数据版本号 (dataVersion) 和当前节点的数据版本号不符合时，zookeeper 会拒绝本次修改：\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 34] \u003cspan class=\"built_in\"\u003eset\u003c/span\u003e /hadoop 678 0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eversion No is not valid : /hadoop    \u003cspan class=\"comment\"\u003e#无效的版本号\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"delete-命令\"\u003e\u003ca href=\"#delete-命令\" class=\"headerlink\" title=\"delete 命令\"\u003e\u003c/a\u003e\u003ccode\u003edelete\u003c/code\u003e 命令\u003c/h3\u003e\u003cp\u003e\u003ccode\u003edelete\u003c/code\u003e 命令用于删除某节点。\u003c/p\u003e\n\u003cp\u003e【语法】\u003c/p\u003e\n\u003cfigure class=\"highlight pgsql\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003edelete\u003c/span\u003e \u003cspan class=\"type\"\u003epath\u003c/span\u003e [\u003cspan class=\"keyword\"\u003eversion\u003c/span\u003e]\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e说明：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003epath\u003c/strong\u003e：节点路径。\u003c/li\u003e\n\u003cli\u003e**[version]**：可选项，版本号（同 set 命令）。和更新节点数据一样，也可以传入版本号，当你传入的数据版本号 (dataVersion) 和当前节点的数据版本号不符合时，zookeeper 不会执行删除操作。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e【示例】\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 36] delete /hadoop 0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eversion No is not valid : /hadoop   \u003cspan class=\"comment\"\u003e#无效的版本号\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 37] delete /hadoop 1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 38]\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003ccode\u003edelete\u003c/code\u003e 命令不能删除带有子节点的节点。如果想要删除节点及其子节点，可以使用 \u003ccode\u003edeleteall path\u003c/code\u003e\u003c/p\u003e\n\u003ch2 id=\"监听器\"\u003e\u003ca href=\"#监听器\" class=\"headerlink\" title=\"监听器\"\u003e\u003c/a\u003e监听器\u003c/h2\u003e\u003cp\u003e针对每个节点的操作，都会有一个监听者（watcher）。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e当监听的某个对象（znode）发生了变化，则触发监听事件。\u003c/li\u003e\n\u003cli\u003ezookeeper 中的监听事件是一次性的，触发后立即销毁。\u003c/li\u003e\n\u003cli\u003e父节点，子节点的增删改都能够触发其监听者（watcher）\u003c/li\u003e\n\u003cli\u003e针对不同类型的操作，触发的 watcher 事件也不同：\u003cul\u003e\n\u003cli\u003e父节点 Watcher 事件\u003cul\u003e\n\u003cli\u003e创建父节点触发：NodeCreated\u003c/li\u003e\n\u003cli\u003e修改节点数据触发：NodeDatachanged\u003c/li\u003e\n\u003cli\u003e删除节点数据触发：NodeDeleted\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e子节点 Watcher 事件\u003cul\u003e\n\u003cli\u003e创建子节点触发：NodeChildrenChanged\u003c/li\u003e\n\u003cli\u003e删除子节点触发：NodeChildrenChanged\u003c/li\u003e\n\u003cli\u003e修改子节点不触发事件\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"get-path\"\u003e\u003ca href=\"#get-path\" class=\"headerlink\" title=\"get path\"\u003e\u003c/a\u003eget path\u003c/h3\u003e\u003cp\u003e使用 \u003ccode\u003eget path -w\u003c/code\u003e 注册的监听器能够在节点内容发生改变的时候，向客户端发出通知。需要注意的是 zookeeper 的触发器是一次性的 (One-time trigger)，即触发一次后就会立即失效。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 4] get /hadoop -w\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 5] \u003cspan class=\"built_in\"\u003eset\u003c/span\u003e /hadoop 45678\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eWATCHER::\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eWatchedEvent state:SyncConnected \u003cspan class=\"built_in\"\u003etype\u003c/span\u003e:NodeDataChanged path:/hadoop  \u003cspan class=\"comment\"\u003e#节点值改变\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eget path [watch] 在当前版本已废弃\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"stat-path\"\u003e\u003ca href=\"#stat-path\" class=\"headerlink\" title=\"stat path\"\u003e\u003c/a\u003estat path\u003c/h3\u003e\u003cp\u003e使用 \u003ccode\u003estat path -w\u003c/code\u003e 注册的监听器能够在节点状态发生改变的时候，向客户端发出通知。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 7] \u003cspan class=\"built_in\"\u003estat\u003c/span\u003e path -w\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 8] \u003cspan class=\"built_in\"\u003eset\u003c/span\u003e /hadoop 112233\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eWATCHER::\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eWatchedEvent state:SyncConnected \u003cspan class=\"built_in\"\u003etype\u003c/span\u003e:NodeDataChanged path:/hadoop  \u003cspan class=\"comment\"\u003e#节点值改变\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003estat path [watch] 在当前版本已废弃\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"ls-ls2-path\"\u003e\u003ca href=\"#ls-ls2-path\" class=\"headerlink\" title=\"ls\\ls2 path\"\u003e\u003c/a\u003els\\ls2 path\u003c/h3\u003e\u003cp\u003e使用 \u003ccode\u003els path -w\u003c/code\u003e 或 \u003ccode\u003els2 path -w\u003c/code\u003e 注册的监听器能够监听该节点下所有\u003cstrong\u003e子节点\u003c/strong\u003e的增加和删除操作。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 9] \u003cspan class=\"built_in\"\u003els\u003c/span\u003e /hadoop -w\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e[]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e[zk: localhost:2181(CONNECTED) 10] create  /hadoop/yarn \u003cspan class=\"string\"\u003e\u0026#34;aaa\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eWATCHER::\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eWatchedEvent state:SyncConnected \u003cspan class=\"built_in\"\u003etype\u003c/span\u003e:NodeChildrenChanged path:/hadoop\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003els path [watch] 和 ls2 path [watch] 在当前版本已废弃\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"辅助命令\"\u003e\u003ca href=\"#辅助命令\" class=\"headerlink\" title=\"辅助命令\"\u003e\u003c/a\u003e辅助命令\u003c/h2\u003e\u003cp\u003e使用 \u003ccode\u003ehelp\u003c/code\u003e 可以查看所有命令帮助信息。\u003c/p\u003e\n\u003cp\u003e使用 \u003ccode\u003ehistory\u003c/code\u003e 可以查看最近 10 条历史记录。\u003c/p\u003e\n\u003ch2 id=\"zookeeper-四字命令\"\u003e\u003ca href=\"#zookeeper-四字命令\" class=\"headerlink\" title=\"zookeeper 四字命令\"\u003e\u003c/a\u003ezookeeper 四字命令\u003c/h2\u003e\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e命令\u003c/th\u003e\n\u003cth\u003e功能描述\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003econf\u003c/td\u003e\n\u003ctd\u003e打印服务配置的详细信息。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003econs\u003c/td\u003e\n\u003ctd\u003e列出连接到此服务器的所有客户端的完整连接/会话详细信息。包括接收/发送的数据包数量，会话 ID，操作延迟，上次执行的操作等信息。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003edump\u003c/td\u003e\n\u003ctd\u003e列出未完成的会话和临时节点。这只适用于 Leader 节点。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eenvi\u003c/td\u003e\n\u003ctd\u003e打印服务环境的详细信息。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eruok\u003c/td\u003e\n\u003ctd\u003e测试服务是否处于正确状态。如果正确则返回“imok”，否则不做任何相应。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003estat\u003c/td\u003e\n\u003ctd\u003e列出服务器和连接客户端的简要详细信息。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ewchs\u003c/td\u003e\n\u003ctd\u003e列出所有 watch 的简单信息。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ewchc\u003c/td\u003e\n\u003ctd\u003e按会话列出服务器 watch 的详细信息。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ewchp\u003c/td\u003e\n\u003ctd\u003e按路径列出服务器 watch 的详细信息。\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003cblockquote\u003e\n\u003cp\u003e更多四字命令可以参阅官方文档：\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://zookeeper.apache.org/doc/current/zookeeperAdmin.html\"\u003ehttps://zookeeper.apache.org/doc/current/zookeeperAdmin.html\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e使用前需要使用 \u003ccode\u003eyum install nc\u003c/code\u003e 安装 nc 命令，使用示例如下：\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e[root@hadoop001 bin]\u003cspan class=\"comment\"\u003e# echo stat | nc localhost 2181\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eZookeeper version: 3.4.13-2d71af4dbe22557fda74f9a9b4309b15a7487f03,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ebuilt on 06/29/2018 04:05 GMT\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eClients:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e /0:0:0:0:0:0:0:1:50584[1](queued=0,recved=371,sent=371)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e /0:0:0:0:0:0:0:1:50656[0](queued=0,recved=1,sent=0)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLatency min/avg/max: 0/0/19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eReceived: 372\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eSent: 371\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eConnections: 2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eOutstanding: 0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eZxid: 0x150\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eMode: standalone\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eNode count: 167\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"参考资料\"\u003e\u003ca href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"\u003e\u003c/a\u003e参考资料\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.runoob.com/w3cnote/zookeeper-bs-command.html\"\u003eZookeeper 客户端基础命令使用\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n    \u003c/div\u003e",
  "Date": "2022-02-19T05:27:21Z",
  "Author": "钝悟 ◾ Dunwu"
}