{
  "Source": "izsk.me",
  "Title": "Gitlab学习(CI中的变量)",
  "Link": "https://izsk.me/2020/04/15/gitlab-ci-variables/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n      \n\n      \n        \u003cp\u003e在使用gitlab做ci/cd发布时，变量是无法避免的话题，这次来聊一聊gitlab中各类级别的变量\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\n\n\u003cp\u003e首先, 变量大致可以分为以下几大类,优先级从高到低:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.gitlab.com/ee/ci/triggers/README.html#making-use-of-trigger-variables\"\u003eTrigger variables\u003c/a\u003e or \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.gitlab.com/ee/ci/pipelines/schedules.html#using-variables\"\u003escheduled pipeline variables\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003eProject-level \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.gitlab.com/ee/ci/variables/README.html#custom-environment-variables\"\u003evariables\u003c/a\u003e or \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.gitlab.com/ee/ci/variables/README.html#protect-a-custom-variable\"\u003eprotected variables\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003eGroup-level \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.gitlab.com/ee/ci/variables/README.html#group-level-environment-variables\"\u003evariables\u003c/a\u003e or \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.gitlab.com/ee/ci/variables/README.html#protect-a-custom-variable\"\u003eprotected variables\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003eYAML-defined \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.gitlab.com/ee/ci/yaml/README.html#variables\"\u003ejob-level variables\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003eYAML-defined \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.gitlab.com/ee/ci/yaml/README.html#variables\"\u003eglobal variables\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.gitlab.com/ee/ci/variables/README.html#deployment-environment-variables\"\u003eDeployment variables\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.gitlab.com/ee/ci/variables/predefined_variables.html\"\u003ePredefined environment variables\u003c/a\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e变量无非就是一种作用域跟优先级的问题，优先级高的会自动覆盖同名优先级的变量\u003c/p\u003e\n\u003cp\u003e我觉得最常用的有\u003ccode\u003eProject-level、Group-level、global、job\u003c/code\u003e\u003c/p\u003e\n\u003ch3 id=\"group-x2F-project\"\u003e\u003ca href=\"#group-x2F-project\" class=\"headerlink\" title=\"group/project\"\u003e\u003c/a\u003egroup/project\u003c/h3\u003e\u003cp\u003e这类的变量直接作用于整个组, 在gitlab的这个组下的所有project，都可以使用, 一般源代码管理都是以某一业务组区分，因此group级别的变量多用于整个组内共享\u003c/p\u003e\n\u003cp\u003eproject-level同理\u003c/p\u003e\n\u003cp\u003e设置方法\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003egroup --\u0026gt; setting --\u0026gt; ci/cd --\u0026gt; variables\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eproject --\u0026gt; setting --\u0026gt; ci/cd --\u0026gt; variables\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e这里以project变量为例:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/zhoushuke/BlogPhoto/master/githuboss/image-20200110161226067.png\"/\u003e\u003c/p\u003e\n\u003ch4 id=\"protected\"\u003e\u003ca href=\"#protected\" class=\"headerlink\" title=\"protected\"\u003e\u003c/a\u003eprotected\u003c/h4\u003e\u003cp\u003egitlab的原文如下:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eVariables can be protected. Whenever a variable is protected, it would only be securely passed to pipelines running on the protected branches or protected tags. The other pipelines would not get any protected variables.\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e翻译一下: 如果把变量选中为\u003ccode\u003eprotected\u003c/code\u003e的话，那么这个就是只会在\u003ccode\u003eprotected branches or protected tags\u003c/code\u003e上安全的传递，其它的情况将不会获取改变量.\u003c/p\u003e\n\u003cp\u003e但是从我测试的情况来看, 提交的分支为master, 没有设置\u003ccode\u003eprotected tag\u003c/code\u003e, 发现:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e如果某个变量被选中为\u003ccode\u003eprotected\u003c/code\u003e, commit触发pipeline时都可以获取该变量\u003c/li\u003e\n\u003cli\u003e但是如果commit时带上tag, 则该变量时为空，当取消\u003ccode\u003eprotected\u003c/code\u003e状态时, 执行正常\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e乍一看是不是感觉跟原文说的有点出路, 其实出现这种情况是正常的, gitlab默认情况下, master分支是受保护的，\u003c/p\u003e\n\u003ch5 id=\"protected-branches\"\u003e\u003ca href=\"#protected-branches\" class=\"headerlink\" title=\"protected branches\"\u003e\u003c/a\u003eprotected branches\u003c/h5\u003e\u003cp\u003e可以通过项目 \u003ccode\u003eSetting--\u0026gt;Repository --\u0026gt; CI/CD --\u0026gt; Protected Branchers\u003c/code\u003e中查看，如下图\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/zhoushuke/BlogPhoto/master/githuboss/20200514164539.png\"/\u003e\u003c/p\u003e\n\u003cp\u003e所以第1种情况能够正确获取\u003ccode\u003eprotected\u003c/code\u003e的变量是正常的,关于\u003ccode\u003eprotected branch\u003c/code\u003e官方说明在\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://gitlab.bj.sensetime.com/help/user/project/protected_branches\"\u003eprotected branch\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e第2种情况无法获取的原因是因为带上了tag, 而\u003ccode\u003eprotected\u003c/code\u003e的变量需要存在\u003ccode\u003eprotected tag\u003c/code\u003e配置才能使用\u003c/p\u003e\n\u003cp\u003e默认情况下是不设置的, 因此无法获取\u003c/p\u003e\n\u003ch5 id=\"protected-tags\"\u003e\u003ca href=\"#protected-tags\" class=\"headerlink\" title=\"protected tags\"\u003e\u003c/a\u003eprotected tags\u003c/h5\u003e\u003cp\u003e设置\u003ccode\u003eprotected tag\u003c/code\u003e也非常简单,官方说明\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://gitlab.bj.sensetime.com/help/user/project/protected_tags.md\"\u003eprotected tag\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e项目 \u003ccode\u003eSetting--\u0026gt;Repository --\u0026gt; CI/CD --\u0026gt; Protected Tags\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/zhoushuke/BlogPhoto/master/githuboss/20200514165413.png\"/\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eprotected branch\u003c/code\u003e跟\u003ccode\u003eprotected tags\u003c/code\u003e都是为了防止对源代码误操作的两种方式\u003c/p\u003e\n\u003ch4 id=\"Masked\"\u003e\u003ca href=\"#Masked\" class=\"headerlink\" title=\"Masked\"\u003e\u003c/a\u003eMasked\u003c/h4\u003e\u003cp\u003e而变量的\u003ccode\u003emasked\u003c/code\u003e则是为了保护变量不回显\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eprotected\u003c/code\u003e相当于对权限做了一次验证，但是它无法完全的把变量保护起来, 如果在CI中开启\u003ccode\u003eCI_DEBUG_TRACE: \u0026#39;true\u0026#39;\u003c/code\u003e还是能够看到变量的值的，而\u003ccode\u003emasked\u003c/code\u003e则完全在log中不打印变量, 一般用于比较敏感的信息\u003c/p\u003e\n\u003ch4 id=\"K8s-SECRET\"\u003e\u003ca href=\"#K8s-SECRET\" class=\"headerlink\" title=\"K8s_SECRET\"\u003e\u003c/a\u003eK8s_SECRET\u003c/h4\u003e\u003cp\u003e以\u003ccode\u003eK8S_SECRET_\u003c/code\u003e开头的变量都会转换成kubernetes的secret\u003c/p\u003e\n\u003cp\u003e​\t\t如定义了一个变量叫: K8S_SECRET_RAILS_MASTER_KEY\u003c/p\u003e\n\u003cp\u003e​\t\t最终会在k8s中的形态,在部署应用容器里会最终又被转换成环境变量,可直接通过$RAILS_MASTER_KEY:\u003c/p\u003e\n\u003cfigure class=\"highlight yaml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003eapiVersion:\u003c/span\u003e \u003cspan class=\"string\"\u003ev1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003edata:\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003eRAILS_MASTER_KEY:\u003c/span\u003e \u003cspan class=\"string\"\u003eMTIzNC10ZXN0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003ekind:\u003c/span\u003e \u003cspan class=\"string\"\u003eSecret\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003emetadata:\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003ecreationTimestamp:\u003c/span\u003e \u003cspan class=\"number\"\u003e2018-12-20T01:48:26Z\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"string\"\u003eproduction-secret\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003enamespace:\u003c/span\u003e \u003cspan class=\"string\"\u003eminimal-ruby-app-54\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003eresourceVersion:\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#34;429422\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003eselfLink:\u003c/span\u003e \u003cspan class=\"string\"\u003e/api/v1/namespaces/minimal-ruby-app-54/secrets/production-secret\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003euid:\u003c/span\u003e \u003cspan class=\"string\"\u003e57ac2bfd-03f9-11e9-b812-42010a9400e4\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"attr\"\u003etype:\u003c/span\u003e \u003cspan class=\"string\"\u003eOpaque\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e当然，在运行前pipeline时也可在UI指定环境变量，这些变量只对应某个project. 且只有这次有效\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/zhoushuke/BlogPhoto/master/githuboss/image-20200110164034852.png\"/\u003e\u003c/p\u003e\n\u003ch3 id=\"job\"\u003e\u003ca href=\"#job\" class=\"headerlink\" title=\"job\"\u003e\u003c/a\u003ejob\u003c/h3\u003e\u003cp\u003ejob级别的变量限定在只在某一具体的job内, 这也是用的最多的一种变量\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ejustupdateconfig:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  stage: \u003cspan class=\"built_in\"\u003etest\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  dependencies: []\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  variables:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    CI_DEBUG_TRACE: \u003cspan class=\"string\"\u003e\u0026#39;true // job-level\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\n\n\u003ch3 id=\"global\"\u003e\u003ca href=\"#global\" class=\"headerlink\" title=\"global\"\u003e\u003c/a\u003eglobal\u003c/h3\u003e\u003cp\u003e这里说到的global指的是在整个pipeline期间，该类变量都是可以使用的\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e.gitlab-ci.yml\u003c/code\u003e中定义全局变量\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003evariables:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  KUBERNETES_NS: \u003cspan class=\"string\"\u003e\u0026#39;stage\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  APP: \u003cspan class=\"string\"\u003e\u0026#39;p-expoter\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  PUSH_REPO: \u003cspan class=\"string\"\u003e\u0026#39;test\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  CONFIGPATH: \u003cspan class=\"string\"\u003e\u0026#39;config/config.yml\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e在pipeline执行期间都是可以直接引用的，\u003ccode\u003e$CONFIGPATH\u003c/code\u003e\u003c/p\u003e\n\u003ch3 id=\"predefined\"\u003e\u003ca href=\"#predefined\" class=\"headerlink\" title=\"predefined\"\u003e\u003c/a\u003epredefined\u003c/h3\u003e\u003cp\u003e同时, gitlab在执行时runner也会暴露出很多的自带的变量, 这些变量在做一些逻辑判断的时候非常有用, 比如判断是不是master分支, 当前路径等等\u003c/p\u003e\n\u003cp\u003e判断是否commit是否存在tag.\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eif\u003c/span\u003e [ \u003cspan class=\"string\"\u003e\u0026#34;\u003cspan class=\"variable\"\u003e$CI_COMMIT_TAG\u003c/span\u003e\u0026#34;\u003c/span\u003e = \u003cspan class=\"string\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e ]; \u003cspan class=\"keyword\"\u003ethen\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  COMMIT_TAG=\u003cspan class=\"string\"\u003e\u0026#34;\u003cspan class=\"variable\"\u003e$CI_COMMIT_REF_NAME\u003c/span\u003e-\u003cspan class=\"variable\"\u003e$CI_COMMIT_SHORT_SHA\u003c/span\u003e\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eelse\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  COMMIT_TAG=\u003cspan class=\"string\"\u003e\u0026#34;\u003cspan class=\"variable\"\u003e$CI_COMMIT_TAG\u003c/span\u003e-\u003cspan class=\"variable\"\u003e$CI_COMMIT_SHORT_SHA\u003c/span\u003e\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003efi\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e变量列表在\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://docs.gitlab.com/ee/ci/variables/predefined_variables.html\"\u003epredefined_variables\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003egitlab还支持将变量直接注入到部署的业务容器中, 这个还没有用到过, 有需要的同学可以参考官文.\u003c/p\u003e\n\u003ch3 id=\"常用变量\"\u003e\u003ca href=\"#常用变量\" class=\"headerlink\" title=\"常用变量\"\u003e\u003c/a\u003e常用变量\u003c/h3\u003e\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eCI_COMMIT_TAG  \u003cspan class=\"comment\"\u003e# commit tag\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCI_DEBUG_TRACE \u003cspan class=\"comment\"\u003e# 开启debug\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCI_MERGE_REQUEST_ID\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCI_JOB_TRIGGERED \u003cspan class=\"comment\"\u003e#是否由api触发\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCI_COMMIT_SHA \u003cspan class=\"comment\"\u003e#git commit产生的id 长格式\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCI_COMMIT_SHORT_SHA \u003cspan class=\"comment\"\u003e# 同上, 短格式\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCI_COMMIT_BRANCH \u003cspan class=\"comment\"\u003e# 提交分支\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCI_PROJECT_DIR \u003cspan class=\"comment\"\u003e# 当前路径\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCI_MERGE_REQUEST_SOURCE_BRANCH_NAME \u003cspan class=\"comment\"\u003e# mege request的源分支\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCI_MERGE_REQUEST_TARGET_BRANCH_NAME \u003cspan class=\"comment\"\u003e# merge request的目标分支\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\n\n\n\n\u003ch3 id=\"参考文章\"\u003e\u003ca href=\"#参考文章\" class=\"headerlink\" title=\"参考文章:\"\u003e\u003c/a\u003e\u003cstrong\u003e参考文章:\u003c/strong\u003e\u003c/h3\u003e\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://gitlab.bj.sensetime.com/help/user/project/protected_tags.md\"\u003ehttp://gitlab.bj.sensetime.com/help/user/project/protected_tags.md\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://gitlab.bj.sensetime.com/help/user/project/protected_branches\"\u003ehttp://gitlab.bj.sensetime.com/help/user/project/protected_branches\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://gitlab.bj.sensetime.com/help/ci/variables/README#variables\"\u003ehttp://gitlab.bj.sensetime.com/help/ci/variables/README#variables\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"转载请注明原作者-周淑科-https-izsk-me\"\u003e\u003ca href=\"#转载请注明原作者-周淑科-https-izsk-me\" class=\"headerlink\" title=\"转载请注明原作者: 周淑科(https://izsk.me)\"\u003e\u003c/a\u003e\u003cstrong\u003e转载请注明原作者: 周淑科(\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://izsk.me/\"\u003ehttps://izsk.me\u003c/a\u003e)\u003c/strong\u003e\u003c/h3\u003e\n      \n    \u003c/div\u003e",
  "Date": "2020-04-15T13:30:53+08:00",
  "Author": "Z.S.K."
}