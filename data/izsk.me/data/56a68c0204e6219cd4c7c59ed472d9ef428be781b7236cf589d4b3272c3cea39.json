{
  "Source": "izsk.me",
  "Title": "golang学习(数组及slice常用操作)",
  "Link": "https://izsk.me/2019/10/18/golang-array-slice-ops/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n      \n\n      \n        \u003cp\u003e这篇主要学习下golang中的数组及slice(切片)及常规操作, 主要是slice, 但是并不会涉及slice的底层原理, 这个范围比较大, 有必要单独拎出来.\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\n\n\u003ch3 id=\"数组-array\"\u003e\u003ca href=\"#数组-array\" class=\"headerlink\" title=\"数组(array)\"\u003e\u003c/a\u003e数组(array)\u003c/h3\u003e\u003ch4 id=\"定义\"\u003e\u003ca href=\"#定义\" class=\"headerlink\" title=\"定义\"\u003e\u003c/a\u003e定义\u003c/h4\u003e\u003cp\u003e数组是内置(build-in)类型,是一组同类型数据的集合，它是值类型，通过从0开始的下标索引访问元素值。在初始化后长度是固定的，无法修改其长度, \u003cstrong\u003e数组的大小是类型的一部分。因此[5]int和[25]int是不同的类型\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e数组的大小必须是常量表达式, 也就是说长度需要在编译阶段能够确认.\u003c/p\u003e\n\u003cfigure class=\"highlight go\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 数组有如下几种声明方式:\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"title\"\u003eArrayDemo\u003c/span\u003e\u003cspan class=\"params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\taRray := [...]\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"number\"\u003e3\u003c/span\u003e, \u003cspan class=\"number\"\u003e5\u003c/span\u003e, \u003cspan class=\"number\"\u003e7\u003c/span\u003e} \u003cspan class=\"comment\"\u003e//如果不填写个数则会由编译器自动算出\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\tbRray := [\u003cspan class=\"number\"\u003e2\u003c/span\u003e]\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"number\"\u003e2\u003c/span\u003e} \u003cspan class=\"comment\"\u003e//如果指定数据个数，则元素个数不能超过该值\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  cRray := [\u003cspan class=\"number\"\u003e3\u003c/span\u003e]\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e1\u003c/span\u003e:\u003cspan class=\"number\"\u003e10\u003c/span\u003e, \u003cspan class=\"number\"\u003e2\u003c/span\u003e:\u003cspan class=\"number\"\u003e20\u003c/span\u003e} \u003cspan class=\"comment\"\u003e//这里通过索引直接指定值\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  dRray := [\u003cspan class=\"number\"\u003e3\u003c/span\u003e]\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"number\"\u003e2\u003c/span\u003e} \u003cspan class=\"comment\"\u003e//在初始化时没有指定初值的元素将会赋值为其元素类型的默认值\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  eRray := [\u003cspan class=\"number\"\u003e2\u003c/span\u003e]\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"number\"\u003e2\u003c/span\u003e, \u003cspan class=\"number\"\u003e3\u003c/span\u003e} \u003cspan class=\"comment\"\u003e//报错, 元素长度大于2\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\t\u003cspan class=\"comment\"\u003e// var fRray []int 初始值为[], 注意，这个是slice\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\tfmt.Println(aRray, bRray, cRray, dRray)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 输出\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e[\u003cspan class=\"number\"\u003e1\u003c/span\u003e \u003cspan class=\"number\"\u003e3\u003c/span\u003e \u003cspan class=\"number\"\u003e5\u003c/span\u003e \u003cspan class=\"number\"\u003e7\u003c/span\u003e] [\u003cspan class=\"number\"\u003e1\u003c/span\u003e \u003cspan class=\"number\"\u003e2\u003c/span\u003e] [\u003cspan class=\"number\"\u003e0\u003c/span\u003e \u003cspan class=\"number\"\u003e10\u003c/span\u003e \u003cspan class=\"number\"\u003e20\u003c/span\u003e] [\u003cspan class=\"number\"\u003e1\u003c/span\u003e \u003cspan class=\"number\"\u003e2\u003c/span\u003e \u003cspan class=\"number\"\u003e0\u003c/span\u003e]\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e简单来说就是, 在定义数组时需要为数组指定长度, 或者使用[…], 如果未指定的即为slice\u003c/p\u003e\n\u003ch4 id=\"访问\"\u003e\u003ca href=\"#访问\" class=\"headerlink\" title=\"访问\"\u003e\u003c/a\u003e访问\u003c/h4\u003e\u003cfigure class=\"highlight go\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eaRray := [...]\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"number\"\u003e3\u003c/span\u003e, \u003cspan class=\"number\"\u003e5\u003c/span\u003e, \u003cspan class=\"number\"\u003e7\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eaRray[\u003cspan class=\"number\"\u003e0\u003c/span\u003e] \u003cspan class=\"comment\"\u003e// 1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eaRray[\u003cspan class=\"number\"\u003e5\u003c/span\u003e] \u003cspan class=\"comment\"\u003e// out of range\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"比较\"\u003e\u003ca href=\"#比较\" class=\"headerlink\" title=\"比较\"\u003e\u003c/a\u003e比较\u003c/h4\u003e\u003cp\u003e \u003cstrong\u003e数组的大小是类型的一部分。因此[5]int和[25]int是不同的类型\u003c/strong\u003e，只有在当数据的长度及类型完全一样时，该数据组才能比较\u003c/p\u003e\n\u003cfigure class=\"highlight go\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eaRray := [...]\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"number\"\u003e3\u003c/span\u003e, \u003cspan class=\"number\"\u003e5\u003c/span\u003e, \u003cspan class=\"number\"\u003e7\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ebRray := [...]\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"number\"\u003e2\u003c/span\u003e, \u003cspan class=\"number\"\u003e3\u003c/span\u003e, \u003cspan class=\"number\"\u003e4\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecRray := [\u003cspan class=\"number\"\u003e4\u003c/span\u003e]\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"number\"\u003e3\u003c/span\u003e, \u003cspan class=\"number\"\u003e5\u003c/span\u003e, \u003cspan class=\"number\"\u003e7\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003edRray := [\u003cspan class=\"number\"\u003e4\u003c/span\u003e]\u003cspan class=\"type\"\u003estring\u003c/span\u003e{\u003cspan class=\"string\"\u003e\u0026#34;1\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;5\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;7\u0026#34;\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efmt.Println(aRray == bRray) \u003cspan class=\"comment\"\u003e// false\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efmt.Println(aRray == cRray) \u003cspan class=\"comment\"\u003e//true\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efmt.Println(aRray == dRray) \u003cspan class=\"comment\"\u003e//invalid operation: eRray == fRray (mismatched types [4]int and [4]string)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efmt.Println(aRray == bRray) \u003cspan class=\"comment\"\u003e//invalid operation: aRray == bRray (mismatched types [4]int and [2]int)\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efmt.Printf(\u003cspan class=\"string\"\u003e\u0026#34;%p, %p\u0026#34;\u003c/span\u003e, \u0026amp;aRray, \u0026amp;cRray) \u003cspan class=\"comment\"\u003e// 虽然两个数组相等, 但是数组的地址是不一样的\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cstrong\u003e只有在当数组的长度及类型及元素值完全一样时，该数组才相等, 注意，相等并不相同.\u003c/strong\u003e\u003c/p\u003e\n\u003ch4 id=\"遍历\"\u003e\u003ca href=\"#遍历\" class=\"headerlink\" title=\"遍历\"\u003e\u003c/a\u003e遍历\u003c/h4\u003e\u003cfigure class=\"highlight go\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eaRray := [...]\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"number\"\u003e3\u003c/span\u003e, \u003cspan class=\"number\"\u003e5\u003c/span\u003e, \u003cspan class=\"number\"\u003e7\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// for\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\tl := \u003cspan class=\"built_in\"\u003elen\u003c/span\u003e(array)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\t\u003cspan class=\"keyword\"\u003efor\u003c/span\u003e i := \u003cspan class=\"number\"\u003e0\u003c/span\u003e; i \u0026lt; l; i++ {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\t\tfmt.Println(array[i])\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\t}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// for range\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003efor\u003c/span\u003e k, v := \u003cspan class=\"keyword\"\u003erange\u003c/span\u003e aRray {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\t\tfmt.Printf(\u003cspan class=\"string\"\u003e\u0026#34;k=%d, v=%d\\n\u0026#34;\u003c/span\u003e, k, v)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 这里需要注意的是, 如果把数组做为参数传递给函数, 如果不使用slice, 则在传递时需要明确数组的长度及类型处理.\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 当然一般都不会直接传递数组\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\n\n\u003ch3 id=\"slice\"\u003e\u003ca href=\"#slice\" class=\"headerlink\" title=\"slice\"\u003e\u003c/a\u003eslice\u003c/h3\u003e\u003cp\u003eslice表示一个拥有相同类型元素的可变长度的序列，slice是一种轻量的数据结构, 可以用来访问数组的部分或者全部元素,而这个元素称为slice的底层数组, 这里先只学习slice的常用操作,slice 底层结构原理会单独记录.\u003c/p\u003e\n\u003cp\u003e现在可以简单这样理解: \u003cstrong\u003eslice是底层数组的一层view\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003e**slice是由三部分组成: 第1个参数是指向底层数组的指针(ptr),这个指针指向真正存储数据的块, 第2个参数是长度(len), 第三个参数是容量(cap)\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/zhoushuke/BlogPhoto/master/githuboss/20200313151939.png\"/\u003e\u003c/p\u003e\n\u003ch4 id=\"定义-1\"\u003e\u003ca href=\"#定义-1\" class=\"headerlink\" title=\"定义\"\u003e\u003c/a\u003e定义\u003c/h4\u003e\u003cfigure class=\"highlight go\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 通过字面量创建\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003evar\u003c/span\u003e aSlice = []\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"number\"\u003e2\u003c/span\u003e, \u003cspan class=\"number\"\u003e3\u003c/span\u003e} \u003cspan class=\"comment\"\u003e//[1 2 3]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ebSlice := []\u003cspan class=\"type\"\u003estring\u003c/span\u003e{\u003cspan class=\"string\"\u003e\u0026#34;a\u0026#34;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#34;b\u0026#34;\u003c/span\u003e} \u003cspan class=\"comment\"\u003e// [\u0026#34;a\u0026#34; \u0026#34;b\u0026#34;]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 通过make函数创建, 第一个参数是类型, 第2个参数是长度, 第三个长度是容量\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecSlice := \u003cspan class=\"built_in\"\u003emake\u003c/span\u003e([]\u003cspan class=\"type\"\u003eint\u003c/span\u003e, \u003cspan class=\"number\"\u003e2\u003c/span\u003e, \u003cspan class=\"number\"\u003e10\u003c/span\u003e) \u003cspan class=\"comment\"\u003e// [0 0]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"访问-1\"\u003e\u003ca href=\"#访问-1\" class=\"headerlink\" title=\"访问\"\u003e\u003c/a\u003e访问\u003c/h4\u003e\u003cfigure class=\"highlight go\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 下标是从0开始 ，按下标访问\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eaSlice = []\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"number\"\u003e2\u003c/span\u003e, \u003cspan class=\"number\"\u003e3\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eaSlice[\u003cspan class=\"number\"\u003e0\u003c/span\u003e] \u003cspan class=\"comment\"\u003e// 1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eaSlice[\u003cspan class=\"number\"\u003e10\u003c/span\u003e] \u003cspan class=\"comment\"\u003e// 运行时错误: panic: runtime error: index out of range [2] with length \u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"遍历-1\"\u003e\u003ca href=\"#遍历-1\" class=\"headerlink\" title=\"遍历\"\u003e\u003c/a\u003e遍历\u003c/h4\u003e\u003cfigure class=\"highlight go\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// slice的遍历方法写数组是一样的\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eaSlice := []\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"number\"\u003e2\u003c/span\u003e, \u003cspan class=\"number\"\u003e3\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\tl := \u003cspan class=\"built_in\"\u003elen\u003c/span\u003e(aSlice)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\t\u003cspan class=\"keyword\"\u003efor\u003c/span\u003e i := \u003cspan class=\"number\"\u003e0\u003c/span\u003e; i \u0026lt; l; i++ {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\t\tfmt.Println(aSlice[i])\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\t}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// for range\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003efor\u003c/span\u003e k, v := \u003cspan class=\"keyword\"\u003erange\u003c/span\u003e aSlice {\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\t\tfmt.Printf(\u003cspan class=\"string\"\u003e\u0026#34;k=%d, v=%d\\n\u0026#34;\u003c/span\u003e, k, v)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch4 id=\"方法\"\u003e\u003ca href=\"#方法\" class=\"headerlink\" title=\"方法\"\u003e\u003c/a\u003e方法\u003c/h4\u003e\u003cfigure class=\"highlight go\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eeSlice := [\u003cspan class=\"number\"\u003e10\u003c/span\u003e]\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"number\"\u003e2\u003c/span\u003e, \u003cspan class=\"number\"\u003e3\u003c/span\u003e, \u003cspan class=\"number\"\u003e4\u003c/span\u003e, \u003cspan class=\"number\"\u003e5\u003c/span\u003e} \u003cspan class=\"comment\"\u003e// [1 2 3 4 5 0 0 0 0 0]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehSlice := eSlice[:]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"built_in\"\u003elen\u003c/span\u003e(hSlice) \u003cspan class=\"comment\"\u003e// 10\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"built_in\"\u003ecap\u003c/span\u003e(hSlice) \u003cspan class=\"comment\"\u003e// 10\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch5 id=\"Reslice\"\u003e\u003ca href=\"#Reslice\" class=\"headerlink\" title=\"Reslice\"\u003e\u003c/a\u003eReslice\u003c/h5\u003e\u003cfigure class=\"highlight go\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 定义一个数组\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eeSlice := [\u003cspan class=\"number\"\u003e10\u003c/span\u003e]\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"number\"\u003e2\u003c/span\u003e, \u003cspan class=\"number\"\u003e3\u003c/span\u003e, \u003cspan class=\"number\"\u003e4\u003c/span\u003e, \u003cspan class=\"number\"\u003e5\u003c/span\u003e} \u003cspan class=\"comment\"\u003e// [1 2 3 4 5 0 0 0 0 0]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// slice\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efSlice := eSlice[\u003cspan class=\"number\"\u003e2\u003c/span\u003e:\u003cspan class=\"number\"\u003e4\u003c/span\u003e] \u003cspan class=\"comment\"\u003e// [3 4]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 越界访问\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003egSlice := fSlice[\u003cspan class=\"number\"\u003e3\u003c/span\u003e] \u003cspan class=\"comment\"\u003e// index out of range [3] with length 2\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// reslice\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003egSlice := fSlice[\u003cspan class=\"number\"\u003e1\u003c/span\u003e:\u003cspan class=\"number\"\u003e5\u003c/span\u003e] \u003cspan class=\"comment\"\u003e// [4 5 0 0]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// gSlice := fSlice[1:10] // slice bounds out of range [:10] with capacity 8\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003ccode\u003egSlice := fSlice[1:5]\u003c/code\u003e为何会输出\u003ccode\u003e[4 5 0 0 ]\u003c/code\u003e呢, gSlice的值为[3 4 ], 压根就没有[1: 5]，那它为何没有提示越界访问呢？这个其实就是对\u003cstrong\u003eslice是底层数组的一层view的说明\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eslice是支持向后扩展的, eSlice其实就是fSlice跟gSlice的底层数组, 只要不超过底层数组的cap,就可以反应在slice上\u003c/strong\u003e，这也是fSlice[1:5]不报错的原因\u003c/p\u003e\n\u003cp\u003efSlice[1:10]是由于gSlice本身有了2个元素, 整个只有8个元素,因此越界.\u003c/p\u003e\n\u003ch5 id=\"append\"\u003e\u003ca href=\"#append\" class=\"headerlink\" title=\"append\"\u003e\u003c/a\u003eappend\u003c/h5\u003e\u003cp\u003e向slice追加元素的时候需要注意存在修改底层数组及扩容的问题.\u003c/p\u003e\n\u003cfigure class=\"highlight go\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 修改底层数组\t\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eeSlice := [\u003cspan class=\"number\"\u003e10\u003c/span\u003e]\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"number\"\u003e2\u003c/span\u003e, \u003cspan class=\"number\"\u003e3\u003c/span\u003e, \u003cspan class=\"number\"\u003e4\u003c/span\u003e, \u003cspan class=\"number\"\u003e5\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehSlice := eSlice[\u003cspan class=\"number\"\u003e3\u003c/span\u003e:\u003cspan class=\"number\"\u003e5\u003c/span\u003e]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efmt.Println(eSlice, hSlice, \u003cspan class=\"built_in\"\u003elen\u003c/span\u003e(hSlice), \u003cspan class=\"built_in\"\u003ecap\u003c/span\u003e(hSlice)) \u003cspan class=\"comment\"\u003e//[1 2 3 4 5 0 0 0 0 0] [4 5] 2 7\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efmt.Printf(\u003cspan class=\"string\"\u003e\u0026#34;%p\\n\u0026#34;\u003c/span\u003e, \u0026amp;hSlice) \u003cspan class=\"comment\"\u003e//0xc0000c0020\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eiSlice := \u003cspan class=\"built_in\"\u003eappend\u003c/span\u003e(hSlice, \u003cspan class=\"number\"\u003e100\u003c/span\u003e) \u003cspan class=\"comment\"\u003e// iSlice修改了底层数组\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efmt.Println(eSlice, iSlice) \u003cspan class=\"comment\"\u003e//[1 2 3 4 5 100 0 0 0 0] [4 5 100]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efmt.Printf(\u003cspan class=\"string\"\u003e\u0026#34;%p\\n\u0026#34;\u003c/span\u003e, \u0026amp;iSlice)\t\u003cspan class=\"comment\"\u003e//0xc0000cc000\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 从这里可以看到eSlice的第5个元素被修改成了100, 上面都没有直接操作eSlice，为何值会变呢?\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 原因就在于hSlice与iSlice都是以eSlice为底层数组, 在对hSlice做追加操作时没有超过eSlice的cap大小, 因\t此修改都会反应在eSlice上.\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 扩容\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehSlice = \u003cspan class=\"built_in\"\u003eappend\u003c/span\u003e(hSlice, \u003cspan class=\"number\"\u003e11\u003c/span\u003e, \u003cspan class=\"number\"\u003e12\u003c/span\u003e, \u003cspan class=\"number\"\u003e13\u003c/span\u003e, \u003cspan class=\"number\"\u003e14\u003c/span\u003e, \u003cspan class=\"number\"\u003e15\u003c/span\u003e, \u003cspan class=\"number\"\u003e16\u003c/span\u003e, \u003cspan class=\"number\"\u003e17\u003c/span\u003e, \u003cspan class=\"number\"\u003e18\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efmt.Println(eSlice, hSlice)  \u003cspan class=\"comment\"\u003e//[1 2 3 4 5 100 0 0 0 0] [4 5 11 12 13 14 15 16 17 18]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efmt.Printf(\u003cspan class=\"string\"\u003e\u0026#34;%p\\n\u0026#34;\u003c/span\u003e, \u0026amp;hSlice)  \u003cspan class=\"comment\"\u003e//0xc0000c0020\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 如果追加的元素超过底层数组的cap大小，就会创建一个更大的底层数组，因此在追加那么多元素之后会发现eSlice没\t 有变化, 因为此是hSlice的底层数组已不再是eSlice, 对hSlice的修改不会影响eSlice.\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 从slice头追加\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 由于在夈追加会引起后面的元素向后移动，因此效率较差.\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehSlice = \u003cspan class=\"built_in\"\u003eappend\u003c/span\u003e([]\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e0\u003c/span\u003e}, hSlice...)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch5 id=\"delete-x2F-insert-x2F-replace\"\u003e\u003ca href=\"#delete-x2F-insert-x2F-replace\" class=\"headerlink\" title=\"delete/insert/replace\"\u003e\u003c/a\u003edelete/insert/replace\u003c/h5\u003e\u003cfigure class=\"highlight go\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 删除hSlice第二个元素5\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehSlice := []\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e0\u003c/span\u003e, \u003cspan class=\"number\"\u003e4\u003c/span\u003e, \u003cspan class=\"number\"\u003e5\u003c/span\u003e, \u003cspan class=\"number\"\u003e11\u003c/span\u003e, \u003cspan class=\"number\"\u003e12\u003c/span\u003e, \u003cspan class=\"number\"\u003e13\u003c/span\u003e, \u003cspan class=\"number\"\u003e14\u003c/span\u003e, \u003cspan class=\"number\"\u003e15\u003c/span\u003e, \u003cspan class=\"number\"\u003e16\u003c/span\u003e, \u003cspan class=\"number\"\u003e17\u003c/span\u003e, \u003cspan class=\"number\"\u003e18\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehSlice = \u003cspan class=\"built_in\"\u003eappend\u003c/span\u003e(hSlice[:\u003cspan class=\"number\"\u003e2\u003c/span\u003e], hSlice[\u003cspan class=\"number\"\u003e2\u003c/span\u003e+\u003cspan class=\"number\"\u003e1\u003c/span\u003e:]...)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 在hSlice的第3个元素后插入10\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehSlice = \u003cspan class=\"built_in\"\u003eappend\u003c/span\u003e(hSlice[:\u003cspan class=\"number\"\u003e3\u003c/span\u003e], \u003cspan class=\"built_in\"\u003eappend\u003c/span\u003e([]\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e10\u003c/span\u003e}, hSlice[\u003cspan class=\"number\"\u003e3\u003c/span\u003e:]...)...)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 把hSlice的第3个元素替换为10\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehSlice = \u003cspan class=\"built_in\"\u003eappend\u003c/span\u003e(hSlice[:\u003cspan class=\"number\"\u003e3\u003c/span\u003e], \u003cspan class=\"built_in\"\u003eappend\u003c/span\u003e([]\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e10\u003c/span\u003e}, hSlice[\u003cspan class=\"number\"\u003e4\u003c/span\u003e:]...)...)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch5 id=\"copy\"\u003e\u003ca href=\"#copy\" class=\"headerlink\" title=\"copy\"\u003e\u003c/a\u003ecopy\u003c/h5\u003e\u003cp\u003e内置函数 copy() 可以将一个数组切片复制到另一个数组切片中，如果加入的两个数组切片不一样大，就会按照其中较小的那个数组切片的元素个数进行复制\u003c/p\u003e\n\u003cfigure class=\"highlight go\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 常规的赋值\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehSlice := []\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e4\u003c/span\u003e, \u003cspan class=\"number\"\u003e5\u003c/span\u003e, \u003cspan class=\"number\"\u003e11\u003c/span\u003e, \u003cspan class=\"number\"\u003e12\u003c/span\u003e, \u003cspan class=\"number\"\u003e13\u003c/span\u003e, \u003cspan class=\"number\"\u003e14\u003c/span\u003e, \u003cspan class=\"number\"\u003e15\u003c/span\u003e, \u003cspan class=\"number\"\u003e16\u003c/span\u003e, \u003cspan class=\"number\"\u003e17\u003c/span\u003e, \u003cspan class=\"number\"\u003e18\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ejSlice := hSlice\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehSlice[\u003cspan class=\"number\"\u003e5\u003c/span\u003e] = \u003cspan class=\"number\"\u003e1000\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efmt.Println(hSlice, jSlice) \u003cspan class=\"comment\"\u003e// [4 5 11 12 13 1000 15 16 17 18] [4 5 11 12 13 1000 15 16 17 18]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efmt.Printf(\u003cspan class=\"string\"\u003e\u0026#34;%p, %p\\n\u0026#34;\u003c/span\u003e, \u0026amp;hSlice, \u0026amp;jSlice) \u003cspan class=\"comment\"\u003e//0xc0000ba020, 0xc00000c0c0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 可以看到, jSlice是hSlice的一个copy, 两者虽然地址是不一样, 修改其中一个的元素，都会影响另一个\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e//这也是因为slice的数据结构的第一个参数是个数据块指针, jSlice与hSlice共享这个数据块指针, 因此会相互影响\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ejSlice = \u003cspan class=\"built_in\"\u003eappend\u003c/span\u003e(jSlice, \u003cspan class=\"number\"\u003e20000\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efmt.Println(hSlice, jSlice) \u003cspan class=\"comment\"\u003e// [4 5 11 12 13 1000 15 16 17 18] [4 5 11 12 13 1000 15 16 17 18 20000]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efmt.Println(hSlice[\u003cspan class=\"number\"\u003e10\u003c/span\u003e], jSlice[\u003cspan class=\"number\"\u003e10\u003c/span\u003e]) \u003cspan class=\"comment\"\u003e// panic: runtime error: index out of range [10] with length 10\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// 虽然jSlice与hSlice共享这个数据块指针, 但两者的len及cap都是各自的, 在jSlice追加了一个元素之后, \t\t    len(jSlice）及cap(jSlice)发生了变化, 但这个变化并不会影响hSlice, 因此hSlice不存在hSlice[10]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// copy() 返回实际发生复制的元素个数, destSlice必须分配过空间, 以小的slice长度为准进行copy\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e// copy( destSlice, srcSlice []T) int\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehSlice := []\u003cspan class=\"type\"\u003eint\u003c/span\u003e{\u003cspan class=\"number\"\u003e4\u003c/span\u003e, \u003cspan class=\"number\"\u003e5\u003c/span\u003e, \u003cspan class=\"number\"\u003e11\u003c/span\u003e, \u003cspan class=\"number\"\u003e12\u003c/span\u003e, \u003cspan class=\"number\"\u003e13\u003c/span\u003e, \u003cspan class=\"number\"\u003e1000\u003c/span\u003e, \u003cspan class=\"number\"\u003e15\u003c/span\u003e, \u003cspan class=\"number\"\u003e16\u003c/span\u003e, \u003cspan class=\"number\"\u003e17\u003c/span\u003e, \u003cspan class=\"number\"\u003e18\u003c/span\u003e, \u003cspan class=\"number\"\u003e2000\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ejSlice := \u003cspan class=\"built_in\"\u003emake\u003c/span\u003e([]\u003cspan class=\"type\"\u003eint\u003c/span\u003e, \u003cspan class=\"number\"\u003e1\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003en := \u003cspan class=\"built_in\"\u003ecopy\u003c/span\u003e(jSlice, hSlice) \u003cspan class=\"comment\"\u003e// n = 1, jslice = [4]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ekSlice := \u003cspan class=\"built_in\"\u003emake\u003c/span\u003e([]\u003cspan class=\"type\"\u003eint\u003c/span\u003e, \u003cspan class=\"built_in\"\u003elen\u003c/span\u003e(hSlice))\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003en := \u003cspan class=\"built_in\"\u003ecopy\u003c/span\u003e(jSlice, hSlice)  \u003cspan class=\"comment\"\u003e// n = 11, jslice = [4 5 11 12 13 1000 15 16 17 18 20000]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003elSlice := \u003cspan class=\"built_in\"\u003emake\u003c/span\u003e([]\u003cspan class=\"type\"\u003eint\u003c/span\u003e, \u003cspan class=\"number\"\u003e15\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e n := \u003cspan class=\"built_in\"\u003ecopy\u003c/span\u003e(jSlice, hSlice) \u003cspan class=\"comment\"\u003e// n = 11, jslice = [4 5 11 12 13 1000 15 16 17 18 20000 0 0 0 0 0]\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\n\n\u003cp\u003e上面所有的例子都跟slice的底层数据结构有很大的关系, 后续会对slice底层原理写一个详文.\u003c/p\u003e\n\u003ch3 id=\"参考文章\"\u003e\u003ca href=\"#参考文章\" class=\"headerlink\" title=\"参考文章:\"\u003e\u003c/a\u003e\u003cstrong\u003e参考文章:\u003c/strong\u003e\u003c/h3\u003e\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.cnblogs.com/sparkdev/p/10704614.html\"\u003ehttps://www.cnblogs.com/sparkdev/p/10704614.html\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"转载请注明原作者-周淑科-https-izsk-me\"\u003e\u003ca href=\"#转载请注明原作者-周淑科-https-izsk-me\" class=\"headerlink\" title=\"转载请注明原作者: 周淑科(https://izsk.me)\"\u003e\u003c/a\u003e\u003cstrong\u003e转载请注明原作者: 周淑科(\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://izsk.me/\"\u003ehttps://izsk.me\u003c/a\u003e)\u003c/strong\u003e\u003c/h3\u003e\n      \n    \u003c/div\u003e",
  "Date": "2019-10-18T13:30:53+08:00",
  "Author": "Z.S.K."
}