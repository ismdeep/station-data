{
  "Source": "izsk.me",
  "Title": "Grafana学习(将数据存储从SQLite3迁移到mysql)",
  "Link": "https://izsk.me/2020/07/20/Grafana-migrate-sqlite-to-mysql/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n      \n\n      \n        \u003cp\u003e线上的Grafana一直都是直接将所有数据写本地的SQLite,就单独的一个db文件，随时dashboard加的越来越多，真怕随时都可能出现磁盘宕机的问题，拓展性也差， 因此将grafana的历史数据从sqlite3迁移到mysql中，也能够保证HA, 新测有效\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\n\n\u003ch3 id=\"mysql新建库及用户\"\u003e\u003ca href=\"#mysql新建库及用户\" class=\"headerlink\" title=\"mysql新建库及用户\"\u003e\u003c/a\u003emysql新建库及用户\u003c/h3\u003e\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ecreate database grafana;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eGRANT USAGE ON `grafana`.* to \u003cspan class=\"string\"\u003e\u0026#39;grafana\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;xxx\u0026#39;\u003c/span\u003e identified by \u003cspan class=\"string\"\u003e\u0026#39;xxx\u0026#39;\u003c/span\u003e;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eGRANT ALL PRIVILEGES ON `grafana`.* to \u003cspan class=\"string\"\u003e\u0026#39;grafana\u0026#39;\u003c/span\u003e@\u003cspan class=\"string\"\u003e\u0026#39;xxx\u0026#39;\u003c/span\u003e with grant option;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eflush privileges;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\n\n\u003ch3 id=\"导出SQLite3历史数据\"\u003e\u003ca href=\"#导出SQLite3历史数据\" class=\"headerlink\" title=\"导出SQLite3历史数据\"\u003e\u003c/a\u003e导出SQLite3历史数据\u003c/h3\u003e\u003cp\u003e导出历史数据前需要先将grafana停止，以防新数据写入\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003esystemctl stop grafana\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e使用以下脚本将数据导出\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e#!/bin/bash\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eDB=\u003cspan class=\"variable\"\u003e$1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eTABLES=$(sqlite3 \u003cspan class=\"variable\"\u003e$DB\u003c/span\u003e .tables | sed -r \u003cspan class=\"string\"\u003e\u0026#39;s/(\\S+)\\s+(\\S)/\\1\\n\\2/g\u0026#39;\u003c/span\u003e | grep -v migration_log)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003efor\u003c/span\u003e t \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"variable\"\u003e$TABLES\u003c/span\u003e; \u003cspan class=\"keyword\"\u003edo\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#34;TRUNCATE TABLE \u003cspan class=\"variable\"\u003e$t\u003c/span\u003e;\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003edone\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003efor\u003c/span\u003e t \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"variable\"\u003e$TABLES\u003c/span\u003e; \u003cspan class=\"keyword\"\u003edo\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e -e \u003cspan class=\"string\"\u003e\u0026#34;.mode insert \u003cspan class=\"variable\"\u003e$t\u003c/span\u003e\\nselect * from \u003cspan class=\"variable\"\u003e$t\u003c/span\u003e;\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003edone\u003c/span\u003e | sqlite3 \u003cspan class=\"variable\"\u003e$DB\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e执行 \u003ccode\u003e./export_sqlite.sh grafana.db \u0026gt; grafana.sql\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e**grafana.db为grafana本地存储的db文件， 执行完成之后即可在当前目录下生成mysql 文件\u003c/p\u003e\n\u003ch3 id=\"修改grafana配置文件使用mysql\"\u003e\u003ca href=\"#修改grafana配置文件使用mysql\" class=\"headerlink\" title=\"修改grafana配置文件使用mysql\"\u003e\u003c/a\u003e修改grafana配置文件使用mysql\u003c/h3\u003e\u003cp\u003e因为我这里是将grafana部署在k8s中的，因此直接在容器中定义环境变量的形式\u003c/p\u003e\n\u003cp\u003e注意: 环境变量的规则是以\u003ccode\u003eGF_\u0026lt;SectionName\u0026gt;_\u0026lt;KeyName\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esectionName为grafana配置文件中的分区部分，比如database,就为GF_DATABASE_xxx\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esmtp就为GF_SMTF_xxx\u003c/code\u003e 请\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://grafana.com/docs/grafana/latest/administration/configuration\"\u003e参考\u003c/a\u003e\u003c/p\u003e\n\u003cfigure class=\"highlight yaml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"string\"\u003eGF_DATABASE_TYPE\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003evalue:\u003c/span\u003e \u003cspan class=\"string\"\u003emysql\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"string\"\u003eGF_DATABASE_HOST\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003evalue:\u003c/span\u003e \u003cspan class=\"number\"\u003e127.0\u003c/span\u003e\u003cspan class=\"number\"\u003e.0\u003c/span\u003e\u003cspan class=\"number\"\u003e.1\u003c/span\u003e\u003cspan class=\"string\"\u003e:3306\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"string\"\u003eGF_DATABASE_NAME\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003evalue:\u003c/span\u003e \u003cspan class=\"string\"\u003egrafana\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"string\"\u003eGF_DATABASE_USER\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003evalue:\u003c/span\u003e \u003cspan class=\"string\"\u003egrafana\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"string\"\u003eGF_DATABASE_PASSWORD\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003evalue:\u003c/span\u003e \u003cspan class=\"string\"\u003exxx\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"string\"\u003eGF_DATABASE_URL\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"attr\"\u003evalue:\u003c/span\u003e \u003cspan class=\"string\"\u003emysql://xxx:\u003ca href=\"/cdn-cgi/l/email-protection\" class=\"__cf_email__\" data-cfemail=\"2b5353536b1a191c051b051b051a\"\u003e[email protected]\u003c/a\u003e:3306/grafana\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e如果是实体机部署的是，则在配置文件中使用\u003c/p\u003e\n\u003cfigure class=\"highlight yaml\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e[\u003cspan class=\"string\"\u003edatabase\u003c/span\u003e]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# You can configure the database connection by specifying type, host, name, user and password\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# as separate properties or as on string using the url properties.\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"string\"\u003etype\u003c/span\u003e \u003cspan class=\"string\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003emysql\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"string\"\u003ehost\u003c/span\u003e \u003cspan class=\"string\"\u003e=\u003c/span\u003e \u003cspan class=\"number\"\u003e127.0\u003c/span\u003e\u003cspan class=\"number\"\u003e.0\u003c/span\u003e\u003cspan class=\"number\"\u003e.1\u003c/span\u003e\u003cspan class=\"string\"\u003e:3306\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"string\"\u003ename\u003c/span\u003e \u003cspan class=\"string\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003egrafana\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"string\"\u003euser\u003c/span\u003e \u003cspan class=\"string\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003exxx\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"string\"\u003epassword\u003c/span\u003e \u003cspan class=\"string\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003exxx\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"string\"\u003eurl\u003c/span\u003e \u003cspan class=\"string\"\u003e=\u003c/span\u003e \u003cspan class=\"string\"\u003emysql://xxx:\u003ca href=\"/cdn-cgi/l/email-protection\" class=\"__cf_email__\" data-cfemail=\"4931313109787b7e677967796778\"\u003e[email protected]\u003c/a\u003e:3306/grafana\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e修改完成之后重启grafana, 这样grafana会连上mysql数据库, 自动生成所有的表\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003esystemctl restart grafana\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e当看到日志显示数据库migration已经做完了之后，就可以再次停用grafana，然后把数据导进去\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003esystemctl stop grafana\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\n\n\u003ch3 id=\"导入数据\"\u003e\u003ca href=\"#导入数据\" class=\"headerlink\" title=\"导入数据\"\u003e\u003c/a\u003e导入数据\u003c/h3\u003e\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql -u xxx -p xxx -P3306 -D grafana \u0026lt; grafana.sql\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e导完之后再次启动grafana\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003esystemctl start grafana\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\n\n\u003ch3 id=\"验证\"\u003e\u003ca href=\"#验证\" class=\"headerlink\" title=\"验证\"\u003e\u003c/a\u003e验证\u003c/h3\u003e\u003cp\u003e当grafana启动之后，登录grafana，所有的数据都在，迁移成功.\u003c/p\u003e\n\u003ch3 id=\"问题\"\u003e\u003ca href=\"#问题\" class=\"headerlink\" title=\"问题\"\u003e\u003c/a\u003e问题\u003c/h3\u003e\u003col\u003e\n\u003cli\u003e\u003cp\u003e导入数据时提示以下错误\u003c/p\u003e\n\u003cfigure class=\"highlight plaintext\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emysql: [Warning] Using a password on the command line interface can be insecure.\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eERROR 1136 (21S01) at line 277: Column count doesn\u0026#39;t match value count at row 1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e原因: 插入的数据字段与表中的字段不一致，由于这个grafana使用期间升级过一次版本, 因此，当连接到mysql后会以新版本的sql进行建表操作，而导出的数据中有个表中的一个字段在新版本中已经没有了，因此字段个数对不上\u003c/p\u003e\n\u003cp\u003e解决: 按照新的表结构直接将导出数据不存在的字段去除.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"参考文章\"\u003e\u003ca href=\"#参考文章\" class=\"headerlink\" title=\"参考文章:\"\u003e\u003c/a\u003e\u003cstrong\u003e参考文章:\u003c/strong\u003e\u003c/h3\u003e\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://grafana.com/docs/grafana/latest/administration/configuration\"\u003ehttps://grafana.com/docs/grafana/latest/administration/configuration\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://jiajunhuang.com/articles/2019_10_15-grafana_moved_to_mysql.md.html\"\u003ehttps://jiajunhuang.com/articles/2019_10_15-grafana_moved_to_mysql.md.html\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://community.grafana.com/t/migrating-grafana-data-to-new-database/2454/20\"\u003ehttps://community.grafana.com/t/migrating-grafana-data-to-new-database/2454/20\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"转载请注明原作者-周淑科-https-izsk-me\"\u003e\u003ca href=\"#转载请注明原作者-周淑科-https-izsk-me\" class=\"headerlink\" title=\"转载请注明原作者: 周淑科(https://izsk.me)\"\u003e\u003c/a\u003e\u003cstrong\u003e转载请注明原作者: 周淑科(\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://izsk.me/\"\u003ehttps://izsk.me\u003c/a\u003e)\u003c/strong\u003e\u003c/h3\u003e\n      \n    \u003c/div\u003e",
  "Date": "2020-07-20T16:30:53+08:00",
  "Author": "Z.S.K."
}