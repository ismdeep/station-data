{
  "Source": "izsk.me",
  "Title": "Kubernetes学习(volume挂载情况汇总)",
  "Link": "https://izsk.me/2020/02/04/Kubernetes-Volumes-Mount/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n      \n\n      \n        \u003cp\u003e在kubernetes中, 如果某个pod需要使用到volume, 且要将该volume挂载到宿主机上, 则需要注意存在被覆盖的情况，在这做一个汇总.\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003cp\u003e当挂载一个文件或者目录，宿主机或者容器存在与否, 所有情况如下:\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e\u003cstrong\u003e宿主机\u003c/strong\u003e\u003c/th\u003e\n\u003cth\u003e\u003cstrong\u003e容器\u003c/strong\u003e\u003c/th\u003e\n\u003cth\u003e\u003cstrong\u003e运行结果\u003c/strong\u003e\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003e文件存在\u003c/td\u003e\n\u003ctd\u003e文件不存在\u003c/td\u003e\n\u003ctd\u003e挂载成功，容器中新建文件\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e目录存在\u003c/td\u003e\n\u003ctd\u003e目录不存在\u003c/td\u003e\n\u003ctd\u003e挂载成功，容器中新建目录\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e文件不存在\u003c/td\u003e\n\u003ctd\u003e文件存在\u003c/td\u003e\n\u003ctd\u003e挂载成功，宿主机新建该文件，容器中的文件被覆盖为空\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e文件存在\u003c/td\u003e\n\u003ctd\u003e文件存在\u003c/td\u003e\n\u003ctd\u003e挂载成功，容器内的文件内容被覆盖\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e目录存在\u003c/td\u003e\n\u003ctd\u003e目录存在\u003c/td\u003e\n\u003ctd\u003e挂载成功，容器内目录内容被覆盖\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e——\u003c/td\u003e\n\u003ctd\u003e——\u003c/td\u003e\n\u003ctd\u003e——\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e文件存在\u003c/td\u003e\n\u003ctd\u003e目录存在\u003c/td\u003e\n\u003ctd\u003e容器启动失败\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e目录存在\u003c/td\u003e\n\u003ctd\u003e文件存在\u003c/td\u003e\n\u003ctd\u003e容器启动失败\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e——\u003c/td\u003e\n\u003ctd\u003e——\u003c/td\u003e\n\u003ctd\u003e——\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e目录不存在\u003c/td\u003e\n\u003ctd\u003e目录不存在\u003c/td\u003e\n\u003ctd\u003e挂载成功，docker会自动在宿主机和容器内新建此目录\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e目录不存在\u003c/td\u003e\n\u003ctd\u003e文件存在\u003c/td\u003e\n\u003ctd\u003e容器启动失败\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e目录不存在\u003c/td\u003e\n\u003ctd\u003e目录存在\u003c/td\u003e\n\u003ctd\u003e挂载成功，容器内目录内容被覆盖（空）\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003e除了使用volume之外，还经常使用到cofigmap对象，需要特别注意的是，如果使用configmap提示以下错误，\u003c/p\u003e\n\u003cp\u003e说明这次的挂载将一个路径挂载到了一个文件中, 这里需要使用subpath.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/zhoushuke/BlogPhoto/master/githuboss/2060F5C5-4E0F-4EC6-A4CD-1CF7AC3CCBAA.png\"/\u003e\u003c/p\u003e\n\u003ch3 id=\"参考文章\"\u003e\u003ca href=\"#参考文章\" class=\"headerlink\" title=\"参考文章:\"\u003e\u003c/a\u003e\u003cstrong\u003e参考文章:\u003c/strong\u003e\u003c/h3\u003e\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://kubernetes.io/\"\u003eKubernetes.io\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"转载请注明原作者-周淑科-https-izsk-me\"\u003e\u003ca href=\"#转载请注明原作者-周淑科-https-izsk-me\" class=\"headerlink\" title=\"转载请注明原作者: 周淑科(https://izsk.me)\"\u003e\u003c/a\u003e\u003cstrong\u003e转载请注明原作者: 周淑科(\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://izsk.me/\"\u003ehttps://izsk.me\u003c/a\u003e)\u003c/strong\u003e\u003c/h3\u003e\n      \n    \u003c/div\u003e",
  "Date": "2020-02-04T10:30:53+08:00",
  "Author": "Z.S.K."
}