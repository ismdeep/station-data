{
  "Source": "leovan.me",
  "Title": "åˆ©ç”¨ Flask å’Œ Google App Engine éƒ¨ç½²æ¨¡å‹æœåŠ¡",
  "Link": "https://leovan.me/cn/2018/10/serving-models-with-flask-and-gae/",
  "Content": "\u003carticle class=\"main\"\u003e\n    \u003cheader class=\"content-title\"\u003e\n    \n\u003ch1 class=\"title\"\u003e\n  \n  åˆ©ç”¨ Flask å’Œ Google App Engine éƒ¨ç½²æ¨¡å‹æœåŠ¡\n  \n\u003c/h1\u003e\n\n\n\n\n\n\n\n\u003ch2 class=\"author-date\"\u003eèŒƒå¶äº® / \n2018-10-19\u003c/h2\u003e\n\n\n\n\u003ch3 class=\"post-meta\"\u003e\n\n\n\u003cstrong\u003eåˆ†ç±»: \u003c/strong\u003e\n\u003ca href=\"/categories/%E7%BC%96%E7%A8%8B\"\u003eç¼–ç¨‹\u003c/a\u003e, \u003ca href=\"/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0\"\u003eæœºå™¨å­¦ä¹ \u003c/a\u003e, \u003ca href=\"/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0\"\u003eæ·±åº¦å­¦ä¹ \u003c/a\u003e\n\n\n\n\n/\n\n\n\n\n\u003cstrong\u003eæ ‡ç­¾: \u003c/strong\u003e\n\u003cspan\u003eFlask\u003c/span\u003e, \u003cspan\u003eGoogle App Engine\u003c/span\u003e, \u003cspan\u003eGAE\u003c/span\u003e, \u003cspan\u003eRESTful\u003c/span\u003e, \u003cspan\u003eæ¨¡å‹éƒ¨ç½²\u003c/span\u003e, \u003cspan\u003eæ¨¡å‹æœåŠ¡\u003c/span\u003e\n\n\n\n\n/\n\n\n\u003cstrong\u003eå­—æ•°: \u003c/strong\u003e\n4357\n\u003c/h3\u003e\n\n\n\n\u003chr/\u003e\n\n\n\n    \n    \n    \u003cins class=\"adsbygoogle\" style=\"display:block; text-align:center;\" data-ad-layout=\"in-article\" data-ad-format=\"fluid\" data-ad-client=\"ca-pub-2608165017777396\" data-ad-slot=\"1261604535\"\u003e\u003c/ins\u003e\n    \u003cscript\u003e\n    (adsbygoogle = window.adsbygoogle || []).push({});\n    \u003c/script\u003e\n    \n    \n    \u003c/header\u003e\n\n\n\n\n\u003clink rel=\"stylesheet\" href=\"/css/admonition.css\"/\u003e\n\u003cdiv class=\"admonition admonition-note  kai\"\u003e\n  \u003cdiv class=\"admonition-content\"\u003eæœ¬æ–‡çš„é…å¥—ä»£ç è¯·å‚è§ \u003ca href=\"https://github.com/leovan/model-serving-demo\"\u003eè¿™é‡Œ\u003c/a\u003eï¼Œå»ºè®®é…åˆä»£ç é˜…è¯»æœ¬æ–‡ã€‚\u003c/div\u003e\n\u003c/div\u003e\n\u003ch1 id=\"æ¨¡å‹éƒ¨ç½²å’ŒæœåŠ¡è°ƒç”¨\"\u003eæ¨¡å‹éƒ¨ç½²å’ŒæœåŠ¡è°ƒç”¨\u003c/h1\u003e\n\u003cp\u003eå¯¹äºåšç®—æ³•çš„åŒå­¦ï¼Œå¤§å®¶æˆ–å¤šæˆ–å°‘çš„æ›´å…³å¿ƒæ¨¡å‹çš„æ€§èƒ½æŒ‡æ ‡å¤šäº›ï¼Œå¯¹äºä¸€äº›å·¥ç¨‹æ€§é—®é¢˜è€ƒè™‘çš„è¾ƒå°‘ã€‚æ¨¡å‹çš„éƒ¨ç½²æ˜¯è¿™äº›å·¥ç¨‹æ€§é—®é¢˜ä¸­é‡è¦çš„ä¸€ä¸ªï¼Œå®ƒç›´æ¥å…³ç³»åˆ°æ¨¡å‹åœ¨ç”Ÿäº§ç³»ç»Ÿçš„ä½¿ç”¨ã€‚ä¸€äº›æˆç†Ÿçš„æœºå™¨å­¦ä¹ æ¡†æ¶ä¼šæä¾›è‡ªå·±çš„è§£å†³æ–¹æ¡ˆï¼Œä¾‹å¦‚ \u003ca href=\"https://www.tensorflow.org\"\u003eTensorflow\u003c/a\u003e æä¾›çš„ \u003ca href=\"https://www.tensorflow.org/serving/\"\u003eServing\u003c/a\u003e æœåŠ¡ç­‰ã€‚ä½†å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬æ„å»ºçš„å·¥ç¨‹å¯èƒ½ä¸åªä½¿ç”¨äº†ä¸€ç§æ¡†æ¶ï¼Œå› æ­¤ä¸€ä¸ªæ¡†æ¶è‡ªèº«çš„éƒ¨ç½²å·¥å…·å¯èƒ½å°±å¾ˆéš¾æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚äº†ã€‚\u003c/p\u003e\n\u003cp\u003eé’ˆå¯¹æ­¤ç±»æƒ…å†µï¼Œæœ¬æ–‡ä»‹ç»ä¸€ä¸ª \u003cstrong\u003eç®€å•\u003c/strong\u003e çš„ \u003cstrong\u003eå‡†ç”Ÿäº§\u003c/strong\u003e æ¨¡å‹éƒ¨ç½²æ–¹æ¡ˆã€‚ç®€å•æ˜¯æŒ‡é™¤äº†æ¨¡å‹ç›¸å…³ä»£ç ä¹‹å¤–çš„å·¥ç¨‹æ€§ä»£ç é‡ä¸å¤§ï¼Œè¿™å¾—ç›Šäºå°†è¦ä½¿ç”¨çš„ \u003ca href=\"http://flask.pocoo.org/\"\u003eFlask\u003c/a\u003e æ¡†æ¶ã€‚å‡†ç”Ÿäº§æ˜¯æŒ‡è¿™ç§éƒ¨ç½²æ–¹æ¡ˆåº”å¯¹ä¸€èˆ¬çš„ç”Ÿäº§ç¯å¢ƒé—®é¢˜ä¸å¤§ï¼Œå¯¹äºé«˜å¹¶å‘çš„åœºæ™¯å¯ä»¥é€šè¿‡æ¨ªå‘æ‰©å®¹å¹¶è¿›è¡Œè´Ÿè½½å‡è¡¡è§£å†³ï¼Œä½†å¯¹äºå•æ¬¡è°ƒç”¨æ—¶æ•ˆæ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯åˆ™éœ€è¦å¦å¯»å…¶ä»–è§£å†³æ–¹æ¡ˆã€‚\u003c/p\u003e\n\u003cp\u003eæœ¬æ–‡æ–¹æ¡ˆçš„æ¨¡å‹éƒ¨ç½²å’ŒæœåŠ¡è°ƒç”¨æ¡†æ¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/cn/2018-10-19-serving-models-with-flask-and-gae/model-serving.png\" alt=\"Model-Serving\"/\u003e\u003c/p\u003e\n\u003cp\u003eå…¶ä¸»è¦ç‰¹æ€§å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eæœåŠ¡ç«¯é‡‡ç”¨ Python çš„ Flask æ¡†æ¶æ„å»ºï¼Œæ— éœ€ä½¿ç”¨å…¶ä»–å¤–éƒ¨æœåŠ¡ã€‚Flask æ¡†æ¶çš„ \u003ca href=\"https://zh.wikipedia.org/zh/%E5%BE%AE%E6%9C%8D%E5%8A%A1\"\u003eå¾®æœåŠ¡\u003c/a\u003e (Microframework) ç‰¹æ€§ä½¿å¾—æœåŠ¡ç«¯ä»£ç ç®€æ´é«˜æ•ˆã€‚\u003c/li\u003e\n\u003cli\u003eåˆ©ç”¨ \u003ca href=\"https://gunicorn.org/\"\u003eGunicorn\u003c/a\u003e æä¾›çš„é«˜æ€§èƒ½ Python WSGI HTTP UNIX Serverï¼Œæ–¹ä¾¿åœ¨æœåŠ¡ç«¯è¿è¡Œ Flask åº”ç”¨ã€‚\u003c/li\u003e\n\u003cli\u003eå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´é‡‡ç”¨ \u003ca href=\"https://zh.wikipedia.org/zh/%E8%A1%A8%E7%8E%B0%E5%B1%82%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2\"\u003eRESTful API\u003c/a\u003e è°ƒç”¨æ–¹å¼ï¼Œå°½ç®¡åœ¨æ€§èƒ½ä¸Šå¯èƒ½ä¸åŠå…¶ä»–ä¸€äº›æ–¹æ¡ˆ (ä¾‹å¦‚ï¼šåŸºäº RPC çš„è§£å†³æ–¹æ¡ˆç­‰)ï¼Œä½†å…¶è¾ƒå¥½åœ°è§£å†³äº†è·¨è¯­è¨€äº¤äº’çš„é—®é¢˜ï¼Œä¸åŒè¯­è¨€ä¹‹é—´äº¤äº’ä»…éœ€ä½¿ç”¨ HTTP åè®®å’Œ JSON æ•°æ®æ ¼å¼å³å¯ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1 id=\"flask-æœåŠ¡å’Œ-ajax-è°ƒç”¨\"\u003eFlask æœåŠ¡å’Œ AJAX è°ƒç”¨\u003c/h1\u003e\n\u003ch2 id=\"flask-æœåŠ¡å°è£…\"\u003eFlask æœåŠ¡å°è£…\u003c/h2\u003e\n\u003cp\u003eä¸ºäº†å°†æ¨¡å‹ä»£ç å’Œ Flask æœåŠ¡è¿›è¡Œæ•´åˆï¼Œé¦–å…ˆå‡è®¾ä½ å·²ç»å¯¹æ¨¡å‹éƒ¨åˆ†ä»£ç åšäº†å®Œç¾çš„å°è£… ğŸ˜ï¼Œæ•´ä¸ªå·¥ç¨‹å…ˆå«åš \u003ccode\u003emodel-serving-demo\u003c/code\u003e å§ã€‚æ•´ç†ä¸€ä¸‹ä»£ç çš„ç›®å½•ç»“æ„ï¼Œç»™ä¸€ä¸ªæˆ‘ä¸­æ„çš„ Python ç›®å½•ç»“æ„é£æ ¼ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003emodel-serving-demo/                # å·¥ç¨‹æ ¹ç›®å½•\nâ”œâ”€â”€ bin/                           # å¯æ‰§è¡Œå‘½ä»¤ç›®å½•\n|   â”œâ”€ start.sh                    # å¯åŠ¨è„šæœ¬\n|   â”œâ”€ stop.sh                     # åœæ­¢è„šæœ¬\n|   â””â”€ ...\nâ”œâ”€â”€ conf/                          # é…ç½®æ–‡ä»¶ç›®å½•\n|   â”œâ”€ logging.conf                # æ—¥å¿—é…ç½®æ–‡ä»¶\n|   â”œâ”€ xxx_model.conf              # XXX Model é…ç½®æ–‡ä»¶\n|   â””â”€ ...\nâ”œâ”€â”€ data/                          # æ•°æ®æ–‡ä»¶ç›®å½•\nâ”œâ”€â”€ docs/                          # æ–‡æ¡£ç›®å½•\nâ”œâ”€â”€ model_serving/                 # æ¨¡å—æ ¹ç›®å½•\n|   â”œâ”€ models/                     # æ¨¡å‹ä»£ç ç›®å½•\n|   |   â”œâ”€ __init__.py\n|   |   â”œâ”€ xxx_model.py            # XXX Model ä»£ç \n|   |   â””â”€ ...\n|   â”œâ”€ resources/                  # Flask RESTful Resources ä»£ç ç›®å½•\n|   |   â”œâ”€ __init__.py\n|   |   â”œâ”€ xxx_model_resource.py   # XXX Model Flask RESTful Resources ä»£ç \n|   |   â””â”€ ...\n|   â”œâ”€ tests/                      # æµ‹è¯•ä»£ç æ ¹ç›®å½•\n|   |   â”œâ”€ models                  # æ¨¡å‹æµ‹è¯•ä»£ç ç›®å½•\n|   |   |   â”œâ”€ __init__.py\n|   |   |   â”œâ”€ test_xxx_model.py   # XXX Model æµ‹è¯•ä»£ç \n|   |   |   â””â”€ ...\n|   |   â”œâ”€ __init__.py\n|   |   â””â”€ ...\n|   â”œâ”€ tmp/                        # ä¸´æ—¶ç›®å½•\n|   â””â”€ ...\nâ”œâ”€â”€ .gitignore                     # Git Ignore æ–‡ä»¶\nâ”œâ”€â”€ app.yaml                       # Google App Engine é…ç½®æ–‡ä»¶\nâ”œâ”€â”€ LICENSE                        # æˆæƒåè®®\nâ”œâ”€â”€ main.py                        # ä¸»ç¨‹åºä»£ç \nâ”œâ”€â”€ README.md                      # è¯´æ˜æ–‡ä»¶\nâ””â”€â”€ requirements.txt               # ä¾èµ–åŒ…åˆ—è¡¨\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eæˆ‘ä»¬åˆ©ç”¨ä¸€ä¸ªæç®€çš„ç¤ºä¾‹ä»‹ç»æ•´ä¸ªæ¨¡å‹éƒ¨ç½²ï¼Œç›¸å…³çš„åº“ä¾èµ– \u003ccode\u003erequirements.txt\u003c/code\u003e å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eFlask==1.0.2\nFlask-RESTful==0.3.6\nFlask-Cors==3.0.6\njsonschema==2.6.0\ndocopt==0.6.2\n\n# æœ¬åœ°éƒ¨ç½²æ—¶éœ€ä¿ç•™ï¼ŒGAE éƒ¨ç½²æ—¶è¯·åˆ é™¤\n# gunicorn==19.9.0\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eå…¶ä¸­ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"http://flask.pocoo.org/\"\u003eFlask\u003c/a\u003e ç”¨äºæ„å»º Flask æœåŠ¡ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://flask-restful.readthedocs.io/\"\u003eFlask-RESTful\u003c/a\u003e ç”¨äºæ„å»º Flask RESTful APIã€‚\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://flask-cors.readthedocs.io/\"\u003eFlask-Cors\u003c/a\u003e ç”¨äºè§£å†³ AJAX è°ƒç”¨æ—¶çš„ \u003ca href=\"https://zh.wikipedia.org/zh/%E8%B7%A8%E4%BE%86%E6%BA%90%E8%B3%87%E6%BA%90%E5%85%B1%E4%BA%AB\"\u003eè·¨åŸŸé—®é¢˜\u003c/a\u003eã€‚\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://python-jsonschema.readthedocs.io/\"\u003ejsonschema\u003c/a\u003e ç”¨äºå¯¹è¯·æ±‚æ•°æ®çš„ JSON æ ¼å¼è¿›è¡Œæ ¡éªŒã€‚\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://docopt.org/\"\u003edocopt\u003c/a\u003e ç”¨äºä»ä»£ç æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆå‘½ä»¤è¡Œå‚æ•°è§£æå™¨ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://gunicorn.org/\"\u003egunicorn\u003c/a\u003e ç”¨äºæä¾›çš„é«˜æ€§èƒ½ Python WSGI HTTP UNIX Serverã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eXXX Model çš„ä»£ç  \u003ccode\u003exxx_model.py\u003c/code\u003e å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003efrom ..utils.log_utils import XXXModel_LOGGER\n\n\nLOGGER = XXXModel_LOGGER\n\n\nclass XXXModel():\n    def __init__(self):\n        LOGGER.info(\u0026#39;Initializing XXX Model ...\u0026#39;)\n\n        LOGGER.info(\u0026#39;XXX Model Initialized.\u0026#39;)\n\n    def hello(self, name:str) -\u0026gt; str:\n        return \u0026#39;Hello, {name}!\u0026#39;.format(name=name)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eå…¶ä¸­ \u003ccode\u003ehello()\u003c/code\u003e ä¸ºæœåŠ¡ä½¿ç”¨çš„æ–¹æ³•ï¼Œå…¶æ¥å—ä¸€ä¸ªç±»å‹ä¸º \u003ccode\u003estr\u003c/code\u003e çš„å‚æ•° \u003ccode\u003ename\u003c/code\u003eï¼Œå¹¶è¿”å›ä¸€ä¸ªç±»å‹ä¸º \u003ccode\u003estr\u003c/code\u003e çš„ç»“æœã€‚\u003c/p\u003e\n\u003cp\u003eXXX Model çš„ Flask RESTful Resource ä»£ç  \u003ccode\u003exxx_model_resource.py\u003c/code\u003e å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003efrom flask_restful import Resource, request\n\nfrom ..models.xxx_model import XXXModel\nfrom ..utils.validation_utils import validate_json\n\n\nxxx_model_instance = XXXModel()\nxxx_model_schema = {\n    \u0026#39;type\u0026#39;: \u0026#39;object\u0026#39;,\n    \u0026#39;properties\u0026#39;: {\n        \u0026#39;name\u0026#39;: {\u0026#39;type\u0026#39;: \u0026#39;string\u0026#39;}\n    },\n    \u0026#39;required\u0026#39;: [\u0026#39;name\u0026#39;]\n}\n\n\nclass XXXModelResource(Resource):\n    @validate_json(xxx_model_schema)\n    def post(self):\n        json = request.json\n\n        return {\u0026#39;result\u0026#39;: xxx_model_instance.hello(json[\u0026#39;name\u0026#39;])}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eæˆ‘ä»¬éœ€è¦ä» Flask RESTful çš„ \u003ccode\u003eResource\u003c/code\u003e ç±»ç»§æ‰¿ä¸€ä¸ªæ–°çš„ç±» \u003ccode\u003eXXXModelResource\u003c/code\u003e ç”¨äºå¤„ç† XXX Model çš„æœåŠ¡è¯·æ±‚ã€‚å¦‚ä¸Šæ–‡ä»‹ç»ï¼Œæˆ‘ä»¬åœ¨æ•´ä¸ªæ¨¡å‹æœåŠ¡è°ƒç”¨ä¸­ä½¿ç”¨ POST è¯·æ±‚æ–¹å¼å’Œ JSON æ•°æ®æ ¼å¼ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨ç±» \u003ccode\u003eXXXModelResource\u003c/code\u003e ä¸­å®ç° \u003ccode\u003epost()\u003c/code\u003e æ–¹æ³•ï¼ŒåŒæ—¶å¯¹äºä¼ å…¥æ•°æ®çš„ JSON æ ¼å¼è¿›è¡Œæ ¡éªŒã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003epost()\u003c/code\u003e æ–¹æ³•ç”¨äºå¤„ç†æ•´ä¸ªæ¨¡å‹çš„æœåŠ¡è¯·æ±‚ï¼Œ\u003ccode\u003exxx_model_instance\u003c/code\u003e æ¨¡å‹å®ä¾‹åœ¨ç±» \u003ccode\u003eXXXModelResource\u003c/code\u003e å¤–éƒ¨è¿›è¡Œå®ä¾‹åŒ–ï¼Œé¿å…æ¯æ¬¡å¤„ç†è¯·æ±‚æ—¶éƒ½è¿›è¡Œåˆå§‹åŒ–ã€‚\u003ccode\u003epost()\u003c/code\u003e çš„è¿”å›ç»“æœæ— éœ€å¤„ç†æˆ JSON æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œä»…éœ€è¿”å›è¯å…¸æ•°æ®å³å¯ï¼ŒFlask RESTful ä¼šè‡ªåŠ¨å¯¹å…¶è¿›è¡Œè½¬æ¢ã€‚\u003c/p\u003e\n\u003cp\u003eä¸ºäº†æ–¹ä¾¿å¯¹è¯·æ±‚æ•°æ®çš„ JSON æ ¼å¼è¿›è¡Œæ ¡éªŒï¼Œæˆ‘ä»¬å°†å¯¹ JSON æ ¼å¼çš„æ ¡éªŒå°è£…æˆä¸€ä¸ªä¿®é¥°å™¨ã€‚ä½¿ç”¨æ—¶å¦‚ä¸Šæ–‡ä»£ç ä¸­æ‰€ç¤ºï¼Œåœ¨ \u003ccode\u003epost()\u003c/code\u003e æ–¹æ³•ä¸Šæ–¹æ·»åŠ  \u003ccode\u003e@validate_json(xxx_model_schema)\u003c/code\u003e å³å¯ï¼Œå…¶ä¸­ \u003ccode\u003exxx_model_schema\u003c/code\u003e ä¸ºä¸€ä¸ªç¬¦åˆ \u003ca href=\"https://python-jsonschema.readthedocs.io/\"\u003ejsonschema\u003c/a\u003e è¦æ±‚çš„ JSON Schemaã€‚ç¤ºä¾‹ä»£ç ä¸­è¦æ±‚ä¼ å…¥çš„ JSON æ•°æ® \u003cstrong\u003eå¿…é¡»\u003c/strong\u003e åŒ…å«ä¸€ä¸ªåä¸º \u003ccode\u003ename\u003c/code\u003e ç±»å‹ä¸º \u003ccode\u003estring\u003c/code\u003e çš„å­—æ®µã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003evalidate_json\u003c/code\u003e ä¿®é¥°å™¨çš„ä»£ç  \u003ccode\u003evalidation_utils.py\u003c/code\u003e å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003efrom functools import wraps\nfrom jsonschema import validate, ValidationError\nfrom flask_restful import request\n\n\ndef validate_json(schema, force=False):\n    def decorator(f):\n        @wraps(f)\n        def wrapper(*args, **kwargs):\n            json_body = request.get_json(force=force)\n\n            if json_body is None:\n                return {\u0026#39;message\u0026#39;: \u0026#39;No JSON object\u0026#39;}, 400\n\n            try:\n                validate(json_body, schema)\n            except ValidationError as e:\n                return {\u0026#39;message\u0026#39;: e.message}, 400\n\n            return f(*args, **kwargs)\n        return wrapper\n    return decorator\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eé¦–å…ˆæˆ‘ä»¬éœ€è¦éªŒè¯è¯·æ±‚åŒ…å«ä¸€ä¸ª JSON è¯·æ±‚ä½“ï¼ŒåŒæ—¶ JSON è¯·æ±‚ä½“çš„å†…å®¹éœ€æ»¡è¶³ \u003ccode\u003eschema\u003c/code\u003e çš„è¦æ±‚ã€‚å¦‚æœä¸æ»¡è¶³è¿™äº›æ¡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦è¿”å›å¯¹åº”çš„é”™è¯¯ä¿¡æ¯ \u003ccode\u003emessage\u003c/code\u003eï¼ŒåŒæ—¶è¿”å›åˆç†çš„ \u003ca href=\"https://zh.wikipedia.org/zh/HTTP%E7%8A%B6%E6%80%81%E7%A0%81\"\u003eHTTP çŠ¶æ€ç \u003c/a\u003e (ä¾‹å¦‚ï¼š\u003ccode\u003e400\u003c/code\u003e) ç”¨äºè¡¨ç¤ºæ— æ³•å¤„ç†é”™è¯¯çš„è¯·æ±‚ã€‚å¯¹äºæ­£å¸¸çš„è¯·æ±‚å“åº” (å³ HTTP çŠ¶æ€ç ä¸º 200 çš„æƒ…å†µ)ï¼ŒçŠ¶æ€ç å¯ä»¥çœç•¥ä¸å†™ã€‚\u003c/p\u003e\n\u003cp\u003eæ„å»ºå®Œ XXX Model çš„ Flask RESTful Resource åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„å»º Flask çš„ä¸»æœåŠ¡äº†ï¼Œä¸»ç¨‹åºä»£ç  \u003ccode\u003emain.py\u003c/code\u003e å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e\u0026#34;\u0026#34;\u0026#34;\nModel Serving Demo\n\nUsage:\n    main.py [--host \u0026lt;host\u0026gt;] [--port \u0026lt;port\u0026gt;] [--debug]\n    main.py (-h | --help)\n    main.py --version\n\nOptions:\n    --host \u0026lt;host\u0026gt;                     ç»‘å®šçš„ Host [default: 0.0.0.0]\n    --port \u0026lt;port\u0026gt;                     ç»‘å®šçš„ Port [default: 9999]\n    --debug                           æ˜¯å¦å¼€å¯ Debug [default: False]\n    -h --help                         æ˜¾ç¤ºå¸®åŠ©\n    -v --version                      æ˜¾ç¤ºç‰ˆæœ¬\n\n\u0026#34;\u0026#34;\u0026#34;\n\nfrom docopt import docopt\n\nfrom flask import Flask\nfrom flask_cors import CORS\nfrom flask_restful import Api\n\nfrom model_serving.resources.xxx_model_resource import XXXModelResource\n\n\napp = Flask(__name__)\nCORS(app)\n\napi = Api(app)\napi.add_resource(XXXModelResource, \u0026#39;/v1/XXXModel\u0026#39;)\n\n\nif __name__ == \u0026#39;__main__\u0026#39;:\n    args = docopt(__doc__, version=\u0026#39;Model Serving Demo v1.0.0\u0026#39;)\n    app.run(host=args[\u0026#39;--host\u0026#39;], port=args[\u0026#39;--port\u0026#39;], debug=args[\u0026#39;--debug\u0026#39;])\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003edocopt\u003c/code\u003e åº“ç”¨äºä»ä»£ç æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆå‘½ä»¤è¡Œå‚æ•°è§£æå™¨ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•è¯·å‚è§ \u003ca href=\"http://docopt.org/\"\u003eå®˜æ–¹æ–‡æ¡£\u003c/a\u003eã€‚æ•´ä¸ª Flask ä¸»æœåŠ¡çš„æ„å»ºæ¯”è¾ƒç®€å•ï¼Œæµç¨‹å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eæ„å»º Flask ä¸»ç¨‹åºï¼Œ\u003ccode\u003eapp = Flask(__name__)\u003c/code\u003eã€‚\u003c/li\u003e\n\u003cli\u003eè§£å†³ AJAX è°ƒç”¨çš„è·¨åŸŸé—®é¢˜ï¼Œ \u003ccode\u003eCORS(app)\u003c/code\u003eã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬ä¸åŠ ä»»ä½•å‚æ•°ï¼Œå…è®¸ä»»æ„æ¥æºçš„è¯·æ±‚ï¼Œè¯¦ç»†çš„ä½¿ç”¨æ–¹å¼è¯·å‚è§ \u003ca href=\"https://flask-cors.readthedocs.io/\"\u003eå®˜æ–¹æ–‡æ¡£\u003c/a\u003eã€‚\u003c/li\u003e\n\u003cli\u003eæ„å»º Flask RESTful APIï¼Œ\u003ccode\u003eapi = Api(app)\u003c/code\u003eã€‚\u003c/li\u003e\n\u003cli\u003eå°†æ„å»ºå¥½çš„ XXX Model çš„ Flask RESTful Resource æ·»åŠ åˆ° API ä¸­ï¼Œ\u003ccode\u003eapi.add_resource(XXXModelResource, \u0026#39;/v1/XXXModel\u0026#39;)\u003c/code\u003eã€‚\nå…¶ä¸­ç¬¬äºŒä¸ªå‚æ•°ä¸ºè¯·æ±‚çš„ URLï¼Œå¯¹äºè¿™ä¸ª URL çš„å»ºè®®å°†åœ¨åç»­å°èŠ‚ä¸­è¯¦ç»†è¯´æ˜ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eFlask ä¸»ç¨‹åºé…ç½®å®Œæ¯•åï¼Œæˆ‘ä»¬é€šè¿‡ \u003ccode\u003eapp.run()\u003c/code\u003e åœ¨æœ¬åœ°å¯åŠ¨ Flask æœåŠ¡ï¼ŒåŒæ—¶å¯ä»¥æŒ‡å®šç»‘å®šçš„ä¸»æœºåï¼Œç«¯å£ï¼Œä»¥åŠæ˜¯å¦å¼€å¯è°ƒè¯•æ¨¡å¼ç­‰ã€‚é€šè¿‡ \u003ccode\u003epython main.py\u003c/code\u003e å¯åŠ¨ Flask æœåŠ¡åï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œçœ‹åˆ°å¦‚ä¸‹ç±»ä¼¼çš„æ—¥å¿—ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e[2018/10/21 00:00:00] - [INFO] - [XXXModel] - Initializing XXX Model ...\n[2018/10/21 00:00:00] - [INFO] - [XXXModel] - XXX Model Initialized.\n * Serving Flask app \u0026#34;main\u0026#34; (lazy loading)\n * Environment: production\n   WARNING: Do not use the development server in a production environment.\n   Use a production WSGI server instead.\n * Debug mode: off\n[2018/10/21 00:00:00] - [INFO] - [werkzeug] -  * Running on http://0.0.0.0:9999/ (Press CTRL+C to quit)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eç°åœ¨å°±å¯ä»¥æµ‹è¯•è°ƒç”¨æœåŠ¡äº†ï¼Œæˆ‘ä»¬ç”¨ \u003ccode\u003ecurl\u003c/code\u003e å‘½ä»¤è¿›è¡Œç®€å•çš„æµ‹è¯•ï¼Œç›¸å…³ä»£ç  \u003ccode\u003erequest-demo.sh\u003c/code\u003e å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003ehost=0.0.0.0\nport=9999\nurl=/v1/XXXModel\ncurl_url=http://${host}:${port}${url}\n\ninvalid_json=\u0026#39;{}\u0026#39;\nvalid_json=\u0026#39;{\u0026#34;name\u0026#34;: \u0026#34;Leo\u0026#34;}\u0026#39;\n\n# No JSON object\ncurl --request POST --url ${curl_url} --verbose\n\n# Invalid JSON object\ncurl --header \u0026#39;Content-Type: application/json; charset=UTF-8\u0026#39; \\\n    --request POST --data ${invalid_json} --url ${curl_url} --verbose\n\n# Valid JSON object\ncurl --header \u0026#39;Content-Type: application/json; charset=UTF-8\u0026#39; \\\n    --request POST --data ${valid_json} --url ${curl_url} --verbose\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eä¸‰ç§ä¸åŒçš„è¯·æ±‚è¿”å›çš„ HTTP çŠ¶æ€ç å’Œç»“æœå¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eHTTP/1.0 400 BAD REQUEST\n{\u0026#34;message\u0026#34;: \u0026#34;No JSON object\u0026#34;}\n\nHTTP/1.0 400 BAD REQUEST\n{\u0026#34;message\u0026#34;: \u0026#34;\u0026#39;name\u0026#39; is a required property\u0026#34;}\n\nHTTP/1.0 200 OK\n{\u0026#34;result\u0026#34;: \u0026#34;Hello, Leo!\u0026#34;}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ \u003ccode\u003epython main.py\u003c/code\u003e åˆ©ç”¨å†…ç½®çš„ Server å¯åŠ¨äº† Flask æœåŠ¡ï¼Œå¯åŠ¨åæ—¥å¿—ä¸­æ‰“å°å‡ºæ¥ä¸€æ¡è­¦å‘Šä¿¡æ¯ï¼Œå‘Šè¯‰ä½¿ç”¨è€…ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å†…ç½®çš„ Serverã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æˆ‘ä»¬å¯ä»¥åˆ©ç”¨é«˜æ€§èƒ½ Python WSGI HTTP UNIX Server \u003ca href=\"https://gunicorn.org/\"\u003egunicorn\u003c/a\u003e æ¥å¯åŠ¨ Flask æœåŠ¡ã€‚\u003c/p\u003e\n\u003cp\u003eæœåŠ¡å¯åŠ¨ (\u003ccode\u003estart.sh\u003c/code\u003e) è„šæœ¬ä»£ç å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecd `dirname $0`\ncd ..\n\nbase_dir=`pwd`\ntmp_dir=${base_dir}/tmp\npid_file_path=${tmp_dir}/model-serving-demo.pid\nlog_file_path=${tmp_dir}/model-serving-demo.log\n\nbind_host=0.0.0.0\nbind_port=9999\nworkers=2\n\nnohup gunicorn -b ${bind_host}:${bind_port} \\\n  -w ${workers} -p ${pid_file_path} \\\n  main:app \u0026gt; ${log_file_path} 2\u0026gt;\u0026amp;1 \u0026amp;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eæœåŠ¡åœæ­¢ (\u003ccode\u003estop.sh\u003c/code\u003e) è„šæœ¬ä»£ç å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003ecd `dirname $0`\ncd ..\n\nbase_dir=`pwd`\ntmp_dir=${base_dir}/tmp\npid_file_path=${tmp_dir}/model-serving-demo.pid\n\nkill -TERM `echo ${pid_file_path}`\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003egunicorn çš„è¯¦ç»†å‚æ•°é…ç½®å’Œä½¿ç”¨æ•™ç¨‹è¯·å‚è§ \u003ca href=\"https://docs.gunicorn.org/en/stable/\"\u003eå®˜æ–¹æ–‡æ¡£\u003c/a\u003eã€‚\u003c/p\u003e\n\u003ch2 id=\"restful-api-è®¾è®¡\"\u003eRESTful API è®¾è®¡\u003c/h2\u003e\n\u003cp\u003eRESTful API æ˜¯ä¸€ç§ç¬¦åˆ REST(Representational State Transferï¼Œè¡¨ç°å±‚çŠ¶æ€è½¬æ¢) åŸåˆ™çš„æ¡†æ¶ï¼Œè¯¥æ¡†æ¶æ˜¯ç”± Fielding åœ¨å…¶åšå£«è®ºæ–‡ \u003csup id=\"fnref:1\"\u003e\u003ca href=\"#fn:1\" class=\"footnote-ref\" role=\"doc-noteref\"\u003e1\u003c/a\u003e\u003c/sup\u003e ä¸­æå‡ºã€‚ç›¸å…³çš„æ ¸å¿ƒæ¦‚å¿µå¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eèµ„æº (Resources)\u003c/strong\u003eï¼Œå³ç½‘ç»œä¸­çš„ä¸€ä¸ªå®ä½“ (æ–‡æœ¬ï¼Œå›¾ç‰‡ï¼ŒæœåŠ¡ç­‰)ï¼Œä½¿ç”¨ä¸€ä¸ª URL è¿›è¡Œè¡¨ç¤ºã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eè¡¨ç°å±‚ (Representation)\u003c/strong\u003eï¼Œèµ„æºå…·ä½“çš„å‘ˆç°å½¢å¼å³ä¸ºè¡¨ç°å±‚ï¼Œä¾‹å¦‚å›¾ç‰‡å¯ä»¥è¡¨ç¤ºä¸º PNG æ–‡ä»¶ï¼ŒéŸ³ä¹å¯ä»¥è¡¨ç¤ºä¸º MP3 æ–‡ä»¶ï¼Œè¿˜æœ‰æœ¬æ–‡ä½¿ç”¨çš„æ•°æ®æ ¼å¼ JSON ç­‰ã€‚HTTP è¯·æ±‚çš„å¤´ä¿¡æ¯ä¸­ç”¨ Accept å’Œ Content-Type å­—æ®µå¯¹è¡¨ç°å±‚è¿›è¡Œæè¿°ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eçŠ¶æ€è½¬æ¢ (State Transfer)\u003c/strong\u003eï¼Œäº’è”ç½‘é€šä¿¡åè®® HTTP åè®®æ˜¯ä¸€ä¸ªæ— çŠ¶æ€åè®®ï¼Œæ‰€æœ‰çš„çŠ¶æ€éƒ½ä¿å­˜åœ¨æœåŠ¡ç«¯ã€‚å› æ­¤å¦‚æœå®¢æˆ·ç«¯æƒ³è¦æ“ä½œæœåŠ¡å™¨ï¼Œå¿…é¡»é€šè¿‡æŸç§æ‰‹æ®µè®©æœåŠ¡å™¨ç«¯å‘ç”Ÿ \u003cstrong\u003eçŠ¶æ€è½¬æ¢\u003c/strong\u003eã€‚å®¢æˆ·ç«¯åˆ©ç”¨ HTTP åè®®ä¸­çš„åŠ¨ä½œå¯¹æœåŠ¡å™¨è¿›è¡Œæ“ä½œï¼Œä¾‹å¦‚ï¼šGETï¼ŒPOSTï¼ŒPUTï¼ŒDELETE ç­‰ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eåˆ©ç”¨ RESTful API æ„å»ºæ¨¡å‹æœåŠ¡æ—¶ï¼Œéœ€è¦æ³¨æ„å¦‚ä¸‹å‡ ç‚¹ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eä¸ºæ¨¡å‹æœåŠ¡è®¾ç½®ä¸“ç”¨åŸŸåï¼Œä¾‹å¦‚ï¼š\u003ccode\u003ehttps://api.example.com\u003c/code\u003eï¼Œå¹¶é…ä»¥è´Ÿè½½å‡è¡¡ã€‚\u003c/li\u003e\n\u003cli\u003eå°† API çš„ç‰ˆæœ¬å·å†™å…¥ URL ä¸­ï¼Œä¾‹å¦‚ï¼š\u003ccode\u003ehttps://api.example.com/v1\u003c/code\u003eã€‚\u003c/li\u003e\n\u003cli\u003eRESTful æ¡†æ¶ä¸­æ¯ä¸ª URL è¡¨ç¤ºä¸€ç§èµ„æºï¼Œå› æ­¤å¯ä»¥å°†æ¨¡å‹çš„åç§°ä½œä¸º URL çš„ç»ˆç‚¹ (Endpoint)ï¼Œä¾‹å¦‚ï¼š\u003ccode\u003ehttps://api.example.com/v1/XXXModel\u003c/code\u003eã€‚\u003c/li\u003e\n\u003cli\u003eå¯¹äºæ“ä½œèµ„æºçš„ HTTP æ–¹å¼æœ‰å¤šç§ï¼Œç»¼åˆè€ƒè™‘å»ºè®®é€‰ç”¨ POST æ–¹å¼ï¼ŒåŒæ—¶å»ºè®®ä½¿ç”¨ JSON æ•°æ®æ ¼å¼ã€‚\u003c/li\u003e\n\u003cli\u003eä¸ºè¯·æ±‚å“åº”è®¾ç½®åˆç†çš„çŠ¶æ€ç ï¼Œä¾‹å¦‚ï¼š200 OK è¡¨ç¤ºæ­£å¸¸è¿”å›ï¼Œ400 INVALID REQUEST è¡¨ç¤ºæ— æ³•å¤„ç†å®¢æˆ·ç«¯çš„é”™è¯¯è¯·æ±‚ç­‰ã€‚\u003c/li\u003e\n\u003cli\u003eå¯¹äºé”™è¯¯ç ä¸º 4xx çš„æƒ…å†µï¼Œå»ºè®®åœ¨è¿”å›ä¸­æ·»åŠ é”®åä¸º \u003ccode\u003emessage\u003c/code\u003e çš„é”™è¯¯ä¿¡æ¯ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"ajax-è°ƒç”¨\"\u003eAJAX è°ƒç”¨\u003c/h2\u003e\n\u003cp\u003eå¯¹äºåŠ¨æ€ç½‘é¡µï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„åœ¨åç«¯æœåŠ¡ä¸­å‘èµ· POST è¯·æ±‚è°ƒç”¨æ¨¡å‹æœåŠ¡ï¼Œç„¶åå°†ç»“æœåœ¨å‰ç«¯è¿›è¡Œæ¸²æŸ“ã€‚å¯¹äºé™æ€ç½‘é¡µï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ AJAX è¿›è¡Œç›¸å…³æ“ä½œï¼Œå®ç°ç»†èŠ‚è¯·å‚è§ \u003ca href=\"https://github.com/leovan/model-serving-demo/tree/master/client/xxx-model-ajax-client.html\"\u003eç¤ºä¾‹ä»£ç \u003c/a\u003eã€‚\u003c/p\u003e\n\u003cp\u003eAJAX æœåŠ¡è¯·æ±‚ä»£ç çš„æ ¸å¿ƒéƒ¨åˆ†å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e$(document).ready(function() {\n    $(\u0026#34;#submit\u0026#34;).click(function() {\n        $.ajax({\n            url: \u0026#34;http://0.0.0.0:9999/v1/XXXModel\u0026#34;,\n            method: \u0026#34;POST\u0026#34;,\n            contentType: \u0026#34;application/json; charset=UTF-8\u0026#34;,\n            data: JSON.stringify({\u0026#34;name\u0026#34;: $(\u0026#34;#name\u0026#34;).val()}),\n            timeout: 3000,\n\n            success: function (data, textStatus, jqXHR) {\n                $(\u0026#34;#result\u0026#34;).html(data.result);\n            },\n            error: function (jqXHR, textStatus, errorThrown) {\n                $(\u0026#34;#result\u0026#34;).html(errorThrown);\n            }\n        });\n    });\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eä»£ç ä½¿ç”¨äº† \u003ca href=\"https://jquery.com/\"\u003ejQuery\u003c/a\u003e çš„ç›¸å…³å‡½æ•°ã€‚\u003ccode\u003eJSON.stringify({\u0026#34;name\u0026#34;: $(\u0026#34;#name\u0026#34;).val()})\u003c/code\u003e è·å– ID ä¸º \u003ccode\u003ename\u003c/code\u003e çš„å…ƒç´ çš„å€¼ï¼Œå¹¶å°†å…¶è½¬æ¢æˆç¬¦åˆæœåŠ¡ç«¯è¦æ±‚çš„ JSON æ ¼å¼ã€‚é€šè¿‡ AJAX å‘è¿œç¨‹å‘å‡ºè¯·æ±‚åï¼Œå¦‚æœè¯·æ±‚æˆåŠŸåˆ™å°†è¿”å›æ•°æ® \u003ccode\u003edata\u003c/code\u003e ä¸­å¯¹åº”çš„ç»“æœ \u003ccode\u003eresult\u003c/code\u003e å¡«å……åˆ° ID ä¸º \u003ccode\u003eresult\u003c/code\u003e çš„å…ƒç´ ä¸­ï¼Œå¦åˆ™å¡«å…¥è¿”å›çš„é”™è¯¯ä¿¡æ¯ã€‚\u003c/p\u003e\n\u003ch1 id=\"google-app-engine-éƒ¨ç½²\"\u003eGoogle App Engine éƒ¨ç½²\u003c/h1\u003e\n\u003cp\u003eä¸Šæ–‡ä¸­å·²ç»ä»‹ç»äº†å¦‚ä½•åœ¨æœ¬åœ°åˆ©ç”¨ Flask éƒ¨ç½²æ¨¡å‹æœåŠ¡å’Œç›¸å…³è°ƒç”¨æ–¹æ³•ï¼Œä½†å¦‚æœå¸Œæœ›åœ¨è‡ªå·±çš„ç½‘ç«™ä¸­è°ƒç”¨æ—¶ï¼Œåˆ™åˆ©ç”¨ SaaS æ¥éƒ¨ç½²ç¬¦åˆä¼šæ˜¯ä¸€ä¸ªä¸äºŒä¹‹é€‰ã€‚å›½å†…å¤–å¤šä¸ªå‚å•†å‡æä¾›äº†ç›¸åº”çš„ SaaS äº§å“ï¼Œä¾‹å¦‚ \u003ca href=\"https://cloud.google.com/appengine/\"\u003eGoogle\u003c/a\u003eï¼Œ\u003ca href=\"https://aws.amazon.com/partners/saas-on-aws/\"\u003eAmazon\u003c/a\u003eï¼Œ\u003ca href=\"https://azure.microsoft.com/en-us/solutions/saas/\"\u003eMicrosoft\u003c/a\u003e ç­‰ã€‚Google App Engine (GAE) æä¾›äº†ä¸€ä¸ª \u003ca href=\"https://cloud.google.com/free/docs/always-free-usage-limits\"\u003eå§‹ç»ˆå…è´¹\u003c/a\u003e æ–¹æ¡ˆï¼Œè™½ç„¶éƒ¨ç½²é˜¶æ®µä¼šå—åˆ° GFW çš„å½±å“ï¼Œä½†è°ƒç”¨é˜¶æ®µæµ‹è¯•å½±å“å¹¶ä¸æ˜¯å¾ˆå¤§ (ä¸åŒåœ°åŒºå’ŒæœåŠ¡æä¾›å•†ä¼šæœ‰å·®å¼‚)ã€‚ç»¼åˆè€ƒè™‘ï¼Œæœ¬æ–‡é€‰æ‹© GAE ä½œä¸º SaaS å¹³å°éƒ¨ç½²æœåŠ¡ï¼Œå„ä½çœ‹å®˜è¯·è‡ªå¤‡æ¢¯å­ã€‚\u003c/p\u003e\n\u003ch2 id=\"ç¯å¢ƒå‡†å¤‡\"\u003eç¯å¢ƒå‡†å¤‡\u003c/h2\u003e\n\u003cp\u003eé¦–å…ˆï¼Œåœ¨ \u003ca href=\"https://console.cloud.google.com/projectcreate\"\u003eGoogle Cloud Platform Console\u003c/a\u003e ä¸­å»ºç«‹ä¸€ä¸ªæ–°çš„ Projectï¼Œå‡è®¾é¡¹ç›®åä¸º \u003ccode\u003eYOUR_PROJECT_ID\u003c/code\u003eã€‚\u003c/p\u003e\n\u003cp\u003eå…¶æ¬¡ï¼Œæ ¹æ® \u003ca href=\"https://cloud.google.com/sdk/docs/\"\u003eGoogle Cloud SDK æ–‡æ¡£\u003c/a\u003e åœ¨æœ¬åœ°å®‰è£…ç›¸åº”ç‰ˆæœ¬çš„ Google Cloud SDKã€‚MacOS ä¸‹å»ºè®®é€šè¿‡ \u003ccode\u003ebrew cask install google-cloud-sdk\u003c/code\u003e æ–¹å¼å®‰è£…ï¼Œå®‰è£…å®Œæ¯•åç¡®è®¤åœ¨å‘½ä»¤è¡Œä¸­å¯ä»¥è¿è¡Œ \u003ccode\u003egcloud\u003c/code\u003e å‘½ä»¤ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e$ gcloud version\nGoogle Cloud SDK 221.0.0\nbq 2.0.35\ncore 2018.10.12\ngsutil 4.34\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"æ„å»º-gae-å·¥ç¨‹\"\u003eæ„å»º GAE å·¥ç¨‹\u003c/h2\u003e\n\u003cp\u003eæ¨¡å‹æœåŠ¡ä»…ä½œä¸ºåç«¯åº”ç”¨ï¼Œå› æ­¤æœ¬èŠ‚ä¸ä»‹ç»å‰ç«¯é¡µé¢å¼€å‘çš„ç›¸å…³éƒ¨åˆ†ï¼Œæœ‰å…´è¶£çš„åŒå­¦è¯·å‚è§ \u003ca href=\"https://cloud.google.com/appengine/docs/standard/python3/quickstart\"\u003eå®˜æ–¹æ–‡æ¡£\u003c/a\u003eã€‚GAE éƒ¨ç½² Python Web åº”ç”¨é‡‡ç”¨äº† \u003ca href=\"https://wsgi.readthedocs.io/en/latest/\"\u003eWSGI æ ‡å‡†\u003c/a\u003eï¼Œæˆ‘ä»¬æ„å»ºçš„æœ¬åœ°éƒ¨ç½²ç‰ˆæœ¬å®Œå…¨æ»¡è¶³è¿™ä¸ªè¦æ±‚ï¼Œå› æ­¤ä»…éœ€ä¸ºé¡¹ç›®åœ¨æ ¹ç›®å½•æ·»åŠ ä¸€ä¸ª GAE é…ç½®æ–‡ä»¶ \u003ccode\u003eapp.yaml\u003c/code\u003e å³å¯ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-yaml\"\u003eruntime: python37\n\nhandlers:\n  - url: /.*\n    script: main.app\n\nskip_files:\n  - .idea/\n  - .vscode/\n  - __pycache__/\n  - .hypothesis/\n  - .pytest_cache/\n  - bin/\n  - ^(.*/)?.*\\.py[cod]$\n  - ^(.*/)?.*\\$py\\.class$\n  - ^(.*/)?.*\\.log$\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eå…¶ä¸­ï¼Œ\u003ccode\u003eruntime\u003c/code\u003e æŒ‡å®šäº†æœåŠ¡è¿è¡Œçš„ç¯å¢ƒï¼Œ\u003ccode\u003ehandlers\u003c/code\u003e æŒ‡å®šäº†ä¸åŒçš„ URL å¯¹åº”çš„å¤„ç†ç¨‹åºï¼Œåœ¨æ­¤æ‰€æœ‰çš„ URL å‡ç”± \u003ccode\u003emain.py\u003c/code\u003e ä¸­çš„ \u003ccode\u003eapp\u003c/code\u003e è¿›è¡Œå¤„ç†ï¼Œ\u003ccode\u003eskip_files\u003c/code\u003e ç”¨äºè¿‡æ»¤ä¸éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶ã€‚æ›´å¤šå…³äº \u003ccode\u003eapp.yaml\u003c/code\u003e çš„è®¾ç½®ä¿¡æ¯ï¼Œè¯·å‚è§ \u003ca href=\"https://cloud.google.com/appengine/docs/standard/python3/config/appref\"\u003eå®˜æ–¹æ–‡æ¡£\u003c/a\u003eã€‚\u003c/p\u003e\n\u003ch2 id=\"éƒ¨ç½²-gae-å·¥ç¨‹\"\u003eéƒ¨ç½² GAE å·¥ç¨‹\u003c/h2\u003e\n\u003cp\u003eåœ¨éƒ¨ç½² GAE å·¥ç¨‹ä¹‹å‰æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æœ¬åœ°çš„å¼€å‘ç¯å¢ƒå¯¹å…¶è¿›è¡Œæµ‹è¯•ï¼Œæµ‹è¯•æ— è¯¯åï¼Œå³å¯è¿è¡Œå¦‚ä¸‹å‘½ä»¤å°†å…¶éƒ¨ç½²åˆ° GAE ä¸Šï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003egcloud app deploy --project [YOUR_PROJECT_ID]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eç„¶åæ ¹æ®å‘½ä»¤è¡Œæç¤ºå®Œæˆæ•´ä¸ªéƒ¨ç½²æµç¨‹ï¼Œéƒ¨ç½²å®Œæˆçš„è¿œç¨‹æœåŠ¡ URL ä¸º \u003ccode\u003ehttps://YOUR_PROJECT_ID.appspot.com\u003c/code\u003eï¼Œæ›´å¤šçš„æµ‹è¯•å’Œéƒ¨ç½²ç»†èŠ‚è¯·å‚è§ \u003ca href=\"https://cloud.google.com/appengine/docs/standard/python3/testing-and-deploying-your-app\"\u003eå®˜æ–¹æ–‡æ¡£\u003c/a\u003eã€‚\u003c/p\u003e\n\u003cp\u003eéƒ¨ç½²åçš„ GAE æœåŠ¡ä½¿ç”¨äº†å…¶è‡ªå¸¦çš„åŸŸå \u003ccode\u003eappspot.com\u003c/code\u003eã€‚å¦‚æœä½ æ‹¥æœ‰è‡ªå·±çš„åŸŸåï¼Œå¯ä»¥æ ¹æ®å®˜æ–¹æ–‡æ¡£ \u003ca href=\"https://cloud.google.com/appengine/docs/standard/python3/mapping-custom-domains\"\u003eè®¾ç½®è‡ªå·±çš„åŸŸå\u003c/a\u003e å¹¶ \u003ca href=\"https://cloud.google.com/appengine/docs/standard/python3/secURLng-custom-domains-with-ssl\"\u003eå¼€å¯ SSL\u003c/a\u003eã€‚\u003c/p\u003e\n\u003cdiv class=\"admonition admonition-note  kai\"\u003e\n  \u003cdiv class=\"admonition-content\"\u003eæœ¬æ–‡éƒ¨åˆ†å†…å®¹å‚è€ƒäº† Genthial çš„åšå®¢ \u003ca href=\"https://guillaumegenthial.github.io/serving.html\"\u003eServing a model with Flask\u003c/a\u003e å’Œé˜®ä¸€å³°çš„åšå®¢ \u003ca href=\"https://www.ruanyifeng.com/blog/2011/09/restful.html\"\u003eç†è§£RESTfulæ¶æ„\u003c/a\u003e å’Œ \u003ca href=\"https://www.ruanyifeng.com/blog/2014/05/restful_api.html\"\u003eRESTful API è®¾è®¡æŒ‡å—\u003c/a\u003eã€‚\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"footnotes\" role=\"doc-endnotes\"\u003e\n\u003chr/\u003e\n\u003col\u003e\n\u003cli id=\"fn:1\"\u003e\n\u003cp\u003eFielding, Roy T., and Richard N. Taylor. \u003cem\u003eArchitectural styles and the design of network-based software architectures.\u003c/em\u003e Vol. 7. Doctoral dissertation: University of California, Irvine, 2000.Â \u003ca href=\"#fnref:1\" class=\"footnote-backref\" role=\"doc-backlink\"\u003eâ†©ï¸\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\n\n\n\n\n\u003cdiv class=\"donate\"\u003e\n  \u003cdiv class=\"donate-header\"\u003e\u003c/div\u003e\n  \u003cdiv class=\"donate-slug\" id=\"donate-slug\"\u003eserving-models-with-flask-and-gae\u003c/div\u003e\n  \u003cbutton class=\"donate-button\"\u003eèµ èµ\u003c/button\u003e\n  \u003cdiv class=\"donate-footer\"\u003eã€ŒçœŸè¯šèµèµï¼Œæ‰‹ç•™ä½™é¦™ã€\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"donate-modal-wrapper\"\u003e\n  \u003cdiv class=\"donate-modal\"\u003e\n    \u003cdiv class=\"donate-box\"\u003e\n      \u003cdiv class=\"donate-box-content\"\u003e\n        \u003cdiv class=\"donate-box-content-inner\"\u003e\n          \u003cdiv class=\"donate-box-header\"\u003eã€ŒçœŸè¯šèµèµï¼Œæ‰‹ç•™ä½™é¦™ã€\u003c/div\u003e\n          \u003cdiv class=\"donate-box-body\"\u003e\n            \u003cdiv class=\"donate-box-money\"\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-2\" data-v=\"2\" data-unchecked=\"ï¿¥ 2\" data-checked=\"2 å…ƒ\"\u003eï¿¥ 2\u003c/button\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-5\" data-v=\"5\" data-unchecked=\"ï¿¥ 5\" data-checked=\"5 å…ƒ\"\u003eï¿¥ 5\u003c/button\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-10\" data-v=\"10\" data-unchecked=\"ï¿¥ 10\" data-checked=\"10 å…ƒ\"\u003eï¿¥ 10\u003c/button\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-50\" data-v=\"50\" data-unchecked=\"ï¿¥ 50\" data-checked=\"50 å…ƒ\"\u003eï¿¥ 50\u003c/button\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-100\" data-v=\"100\" data-unchecked=\"ï¿¥ 100\" data-checked=\"100 å…ƒ\"\u003eï¿¥ 100\u003c/button\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-custom\" data-v=\"custom\" data-unchecked=\"ä»»æ„é‡‘é¢\" data-checked=\"ä»»æ„é‡‘é¢\"\u003eä»»æ„é‡‘é¢\u003c/button\u003e\n            \u003c/div\u003e\n            \u003cdiv class=\"donate-box-pay\"\u003e\n              \u003cimg class=\"donate-box-pay-qrcode\" id=\"donate-box-pay-qrcode\" src=\"\"/\u003e\n            \u003c/div\u003e\n          \u003c/div\u003e\n          \u003cdiv class=\"donate-box-footer\"\u003e\n            \u003cdiv class=\"donate-box-pay-method donate-box-pay-method-checked\" data-v=\"wechat-pay\"\u003e\n              \u003cimg class=\"donate-box-pay-method-image\" id=\"donate-box-pay-method-image-wechat-pay\" src=\"\"/\u003e\n            \u003c/div\u003e\n            \u003cdiv class=\"donate-box-pay-method\" data-v=\"alipay\"\u003e\n              \u003cimg class=\"donate-box-pay-method-image\" id=\"donate-box-pay-method-image-alipay\" src=\"\"/\u003e\n            \u003c/div\u003e\n          \u003c/div\u003e\n        \u003c/div\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n    \u003cbutton type=\"button\" class=\"donate-box-close-button\"\u003e\n      \u003csvg class=\"donate-box-close-button-icon\" fill=\"#fff\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"\u003e\u003cpath d=\"M13.486 12l5.208-5.207a1.048 1.048 0 0 0-.006-1.483 1.046 1.046 0 0 0-1.482-.005L12 10.514 6.793 5.305a1.048 1.048 0 0 0-1.483.005 1.046 1.046 0 0 0-.005 1.483L10.514 12l-5.208 5.207a1.048 1.048 0 0 0 .006 1.483 1.046 1.046 0 0 0 1.482.005L12 13.486l5.207 5.208a1.048 1.048 0 0 0 1.483-.006 1.046 1.046 0 0 0 .005-1.482L13.486 12z\" fill-rule=\"evenodd\"\u003e\u003c/path\u003e\u003c/svg\u003e\n    \u003c/button\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cscript type=\"text/javascript\" src=\"/js/donate.js\"\u003e\u003c/script\u003e\n\n\n  \u003cfooter\u003e\n  \n\u003cnav class=\"post-nav\"\u003e\n  \u003cspan class=\"nav-prev\"\u003eâ† \u003ca href=\"/cn/2018/10/seq2seq-and-attention-machanism/\"\u003eåºåˆ—åˆ°åºåˆ— (Seq2Seq) å’Œæ³¨æ„åŠ›æœºåˆ¶ (Attention Machanism)\u003c/a\u003e\u003c/span\u003e\n  \u003cspan class=\"nav-next\"\u003e\u003ca href=\"/cn/2018/11/computational-complexity-and-dynamic-programming/\"\u003eè®¡ç®—å¤æ‚æ€§ (Computational Complexity) ä¸åŠ¨æ€è§„åˆ’ (Dynamic Programming)\u003c/a\u003e â†’\u003c/span\u003e\n\u003c/nav\u003e\n\n\n\n\n\u003cins class=\"adsbygoogle\" style=\"display:block; text-align:center;\" data-ad-layout=\"in-article\" data-ad-format=\"fluid\" data-ad-client=\"ca-pub-2608165017777396\" data-ad-slot=\"8302038603\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n  (adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\n\n\u003cscript src=\"//cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"/js/toggle-theme.js\"\u003e\u003c/script\u003e\n\n\n\u003cscript src=\"/js/no-highlight.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"/js/math-code.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"/js/heading-anchor.js\"\u003e\u003c/script\u003e\n\n\n\n\u003csection class=\"comments\"\u003e\n\u003cscript src=\"https://giscus.app/client.js\" data-repo=\"leovan/leovan.me\" data-repo-id=\"MDEwOlJlcG9zaXRvcnkxMTMxOTY0Mjc=\" data-category=\"Comments\" data-category-id=\"DIC_kwDOBr89i84CT-R7\" data-mapping=\"pathname\" data-strict=\"1\" data-reactions-enabled=\"1\" data-emit-metadata=\"0\" data-input-position=\"top\" data-theme=\"preferred_color_scheme\" data-lang=\"zh-CN\" data-loading=\"lazy\" crossorigin=\"anonymous\" defer=\"\"\u003e\n\u003c/script\u003e\n\u003c/section\u003e\n\n\n\u003cscript src=\"//cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"//cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"//cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"//cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/toolbar/prism-toolbar.min.js\"\u003e\u003c/script\u003e\n\u003cscript\u003e\n  (function() {\n    if (!self.Prism) {\n      return;\n    }\n\n    \n    Prism.languages.dos = Prism.languages.powershell;\n    Prism.languages.gremlin = Prism.languages.groovy;\n\n    let languages = {\n      'r': 'R', 'python': 'Python', 'xml': 'XML', 'html': 'HTML',\n      'yaml': 'YAML', 'latex': 'LaTeX', 'tex': 'TeX',\n      'powershell': 'PowerShell', 'javascript': 'JavaScript',\n      'dos': 'DOS', 'qml': 'QML', 'json': 'JSON', 'bash': 'Bash',\n      'text': 'Text', 'txt': 'Text', 'sparql': 'SPARQL',\n      'gremlin': 'Gremlin', 'cypher': 'Cypher', 'ngql': 'nGQL',\n      'shell': 'Shell', 'sql': 'SQL', 'apacheconf': 'Apache Configuration', 'c': 'C', 'css': 'CSS'\n    };\n\n    Prism.hooks.add('before-highlight', function(env) {\n      if (env.language !== 'plain') {\n        let language = languages[env.language] || env.language;\n        env.element.setAttribute('data-language', language);\n      }\n    });\n\n    \n    let ClipboardJS = window.ClipboardJS || undefined;\n\n    Prism.plugins.toolbar.registerButton('copy-to-clipboard', function(env) {\n      let linkCopy = document.createElement('button');\n      linkCopy.classList.add('prism-button-copy');\n\n      registerClipboard();\n\n      return linkCopy;\n\n      function registerClipboard() {\n        let clip = new ClipboardJS(linkCopy, {\n          'text': function () {\n            return env.code;\n          }\n        });\n\n        clip.on('success', function() {\n          linkCopy.classList.add('prism-button-copy-success');\n          resetText();\n        });\n        clip.on('error', function () {\n          linkCopy.classList.add('prism-button-copy-error');\n          resetText();\n        });\n      }\n\n      function resetText() {\n        setTimeout(function () {\n          linkCopy.classList.remove('prism-button-copy-success');\n          linkCopy.classList.remove('prism-button-copy-error');\n        }, 1600);\n      }\n    });\n  })();\n\u003c/script\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003cscript async=\"\" src=\"/js/center-img.js\"\u003e\u003c/script\u003e\n\u003cscript async=\"\" src=\"/js/right-quote.js\"\u003e\u003c/script\u003e\n\u003cscript async=\"\" src=\"/js/external-link.js\"\u003e\u003c/script\u003e\n\u003cscript async=\"\" src=\"/js/alt-title.js\"\u003e\u003c/script\u003e\n\u003cscript async=\"\" src=\"/js/figure.js\"\u003e\u003c/script\u003e\n\n\n\n\u003cscript src=\"//cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js\"\u003e\u003c/script\u003e\n\n\n\u003cscript src=\"//cdn.jsdelivr.net/npm/vanilla-back-to-top@latest/dist/vanilla-back-to-top.min.js\"\u003e\u003c/script\u003e\n\u003cscript\u003e\naddBackToTop({\n  diameter: 48\n});\n\u003c/script\u003e\n\n  \u003chr/\u003e\n  \u003cdiv class=\"copyright no-border-bottom\"\u003e\n    \u003cdiv class=\"copyright-author-year\"\u003e\n      \u003cspan\u003eCopyright Â© 2017-2024 \u003ca href=\"/\"\u003eèŒƒå¶äº® | Leo Van\u003c/a\u003e\u003c/span\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e\n  \u003c/footer\u003e\n  \u003c/article\u003e",
  "Date": "2018-10-19T00:00:00Z",
  "Author": "èŒƒå¶äº®"
}