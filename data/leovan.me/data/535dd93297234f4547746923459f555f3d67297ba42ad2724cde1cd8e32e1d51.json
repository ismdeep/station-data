{
  "Source": "leovan.me",
  "Title": "在 Windows 下利用 WSL2 和 Ubuntu 配置 GPU 机器学习环境 (GPU Machine Leanring Environment Configuration under Windows with WSL2 and Ubuntu)",
  "Link": "https://leovan.me/cn/2023/03/gpu-machine-learning-environment-configuration-under-windows-with-wsl2-and-ubuntu/",
  "Content": "\u003carticle class=\"main\"\u003e\n    \u003cheader class=\"content-title\"\u003e\n    \n\u003ch1 class=\"title\"\u003e\n  \n  在 Windows 下利用 WSL2 和 Ubuntu 配置 GPU 机器学习环境 (GPU Machine Leanring Environment Configuration under Windows with WSL2 and Ubuntu)\n  \n\u003c/h1\u003e\n\n\n\n\n\n\n\n\u003ch2 class=\"author-date\"\u003e范叶亮 / \n2023-03-19\u003c/h2\u003e\n\n\n\n\u003ch3 class=\"post-meta\"\u003e\n\n\n\u003cstrong\u003e分类: \u003c/strong\u003e\n\u003ca href=\"/categories/tech101\"\u003eTech101\u003c/a\u003e, \u003ca href=\"/categories/%E7%BC%96%E7%A8%8B\"\u003e编程\u003c/a\u003e\n\n\n\n\n/\n\n\n\n\n\u003cstrong\u003e标签: \u003c/strong\u003e\n\u003cspan\u003eGPU\u003c/span\u003e, \u003cspan\u003eWSL\u003c/span\u003e, \u003cspan\u003eWSL2\u003c/span\u003e, \u003cspan\u003eUbuntu\u003c/span\u003e, \u003cspan\u003e机器学习\u003c/span\u003e, \u003cspan\u003e深度学习\u003c/span\u003e, \u003cspan\u003eCUDA\u003c/span\u003e, \u003cspan\u003ecuDNN\u003c/span\u003e, \u003cspan\u003ePyTorch\u003c/span\u003e, \u003cspan\u003eTensorflow\u003c/span\u003e\n\n\n\n\n/\n\n\n\u003cstrong\u003e字数: \u003c/strong\u003e\n1409\n\u003c/h3\u003e\n\n\n\n\u003chr/\u003e\n\n\n\n    \n    \n    \u003cins class=\"adsbygoogle\" style=\"display:block; text-align:center;\" data-ad-layout=\"in-article\" data-ad-format=\"fluid\" data-ad-client=\"ca-pub-2608165017777396\" data-ad-slot=\"1261604535\"\u003e\u003c/ins\u003e\n    \u003cscript\u003e\n    (adsbygoogle = window.adsbygoogle || []).push({});\n    \u003c/script\u003e\n    \n    \n    \u003c/header\u003e\n\n\n\n\n\u003cblockquote\u003e\n\u003cp\u003e本文主要面向希望在游戏空闲时段将显卡用于科学事业的朋友们😎。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003e本文以 Windows 11 22H2 版本为例，不确保在其他版本系统下完全适用。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch1 id=\"终端\"\u003e终端\u003c/h1\u003e\n\u003cp\u003e工欲善其事必先利其器，开发离不开那个黑框框，所以我们需要把这个黑框框变得更好看更好用些。Windows 终端是一个新的支持 PowerShell 和 WSL bash 的应用，通过\u003ca href=\"https://aka.ms/terminal\"\u003e应用商店\u003c/a\u003e 直接进行安装。\u003c/p\u003e\n\u003cp\u003e建议安装最新版的 PowerShell 作为命令行环境，相关下载和配置详见\u003ca href=\"https://learn.microsoft.com/zh-cn/powershell/\"\u003e官网\u003c/a\u003e。\u003c/p\u003e\n\u003cp\u003e为了更好的在终端中显示中英文和图标，推荐使用 \u003ca href=\"https://github.com/laishulu/Sarasa-Term-SC-Nerd\"\u003eSarasa Term SC Nerd\u003c/a\u003e 作为终端显示字体。\u003c/p\u003e\n\u003ch1 id=\"wsl\"\u003eWSL\u003c/h1\u003e\n\u003cp\u003e以管理员模式打开 PowerShell 或 Windows 命令提示符，输入如下命令，并重启计算机：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-powershell\"\u003ewsl --install\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e此命令会启用 WSL 并安装 Ubuntu 发行版 Linux。通过 \u003ccode\u003ewsl -l -o\u003c/code\u003e 可以查看所有 Linux 的发行版：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/cn/2023-03-19-gpu-machine-learning-environment-configuration-under-windows-with-wsl2-and-ubuntu/wsl-linux-distributions.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e通过 \u003ccode\u003ewsl --install \u0026lt;发行版名称\u0026gt;\u003c/code\u003e 可以安装其他发行版 Linux。通过 \u003ccode\u003ewsl -l -v\u003c/code\u003e 可以查看当前运行的 WSL 版本：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/cn/2023-03-19-gpu-machine-learning-environment-configuration-under-windows-with-wsl2-and-ubuntu/wsl-running.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e通过 \u003ccode\u003ewsl\u003c/code\u003e 新安装的 Linux 默认已经设置为 WSL 2。\u003c/p\u003e\n\u003cp\u003e进入 Ubuntu 命令行，输入如下命令安装必要的系统依赖：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003esudo apt install gcc\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e安装 zsh 作为 Ubuntu 默认的 Shell：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003esudo apt install zsh\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e安装 \u003ca href=\"https://ohmyz.sh/\"\u003eOh My Zsh\u003c/a\u003e 来提升 zsh 的易用性。\u003c/p\u003e\n\u003ch1 id=\"显卡\"\u003e显卡\u003c/h1\u003e\n\u003ch2 id=\"驱动\"\u003e驱动\u003c/h2\u003e\n\u003cp\u003e从 Nvidia 官网（\u003ca href=\"https://www.nvidia.cn/geforce/drivers\"\u003ehttps://www.nvidia.cn/geforce/drivers\u003c/a\u003e）下载适用于 Windows 的最新驱动并安装。进入 Windows 命令行，输入 \u003ccode\u003envidia-smi\u003c/code\u003e 命令查看显卡状态：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/cn/2023-03-19-gpu-machine-learning-environment-configuration-under-windows-with-wsl2-and-ubuntu/nvidia-smi-windows.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003eUbuntu 中不再需要额外安装显卡驱动，进入 Ubuntu 命令行，输入 \u003ccode\u003envidia-smi\u003c/code\u003e 命令查看显卡状态：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/cn/2023-03-19-gpu-machine-learning-environment-configuration-under-windows-with-wsl2-and-ubuntu/nvidia-smi-ubuntu.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e不难看出，出了 \u003ccode\u003envidia-smi\u003c/code\u003e 工具版本不同外，显卡驱动和 CUDA 版本均是相同的。\u003c/p\u003e\n\u003ch2 id=\"cuda\"\u003eCUDA\u003c/h2\u003e\n\u003cp\u003e从 Nvidia 官网（\u003ca href=\"https://developer.nvidia.com/cuda-toolkit-archive\"\u003ehttps://developer.nvidia.com/cuda-toolkit-archive\u003c/a\u003e）下载适用于 WSL Ubuntu 的 CUDA，在此选择的版本为 \u003ccode\u003e11.8.0\u003c/code\u003e（具体请参考例如 Tensorflow 等所需工具的依赖版本），相关平台选项如下：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eOperating System：Linux\u003c/li\u003e\n\u003cli\u003eArchitecture：x86_64\u003c/li\u003e\n\u003cli\u003eDistribution：WSL-Ubuntu\u003c/li\u003e\n\u003cli\u003eVersion：2.0\u003c/li\u003e\n\u003cli\u003eInstaller Type：runfile (local)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e下载完毕后运行如下命令进行安装：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003esudo sh cuda_11.8.0_520.61.05_linux.run --toolkit\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e其中 \u003ccode\u003e--toolkit\u003c/code\u003e 表示仅安装 CUDA 工具箱。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/cn/2023-03-19-gpu-machine-learning-environment-configuration-under-windows-with-wsl2-and-ubuntu/cuda-installation-eula.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e在弹出的 EULA 界面输入 \u003ccode\u003eaccept\u003c/code\u003e 进入安装选项界面：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/cn/2023-03-19-gpu-machine-learning-environment-configuration-under-windows-with-wsl2-and-ubuntu/cuda-installation-options.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e仅保留 \u003ccode\u003eCUDA Toolkit 11.8\u003c/code\u003e 即可，切换到 \u003ccode\u003eInstall\u003c/code\u003e 并按回车键进行安装。\u003c/p\u003e\n\u003cp\u003e将如下内容添加到 \u003ccode\u003e~/.bashrc\u003c/code\u003e 文件尾部：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003eexport PATH=/usr/local/cuda/bin:$PATH\nexport LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e通过 \u003ccode\u003esource ~/.bashrc\u003c/code\u003e 或 \u003ccode\u003esource ~/.zshrc\u003c/code\u003e 使路径立即生效。输入 \u003ccode\u003envcc -V\u003c/code\u003e 查看 CUDA 编译器驱动版本：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/cn/2023-03-19-gpu-machine-learning-environment-configuration-under-windows-with-wsl2-and-ubuntu/nvcc-version.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003ch2 id=\"cudnn\"\u003ecuDNN\u003c/h2\u003e\n\u003cp\u003e从 Nvidia 官网（\u003ca href=\"https://developer.nvidia.com/rdp/cudnn-archive\"\u003ehttps://developer.nvidia.com/rdp/cudnn-archive\u003c/a\u003e）下载适用于 Linux 和上述安装 CUDA 版本的 cuDNN，在此选择的版本为 \u003ccode\u003ev8.8.0 for CUDA 11.x\u003c/code\u003e，安装包格式为 \u003ccode\u003eLocal Installer for Linux x86_64 (Tar)\u003c/code\u003e。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e注意：cuDNN 需要注册账户后方可进行下载。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e下载完毕后运行如下命令进行解压：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003etar -xvf cudnn-linux-x86_64-8.8.0.121_cuda11-archive.tar.xz\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e运行如下命令将其移动到 CUDA 目录：\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003esudo mv cudnn-*-archive/include/cudnn*.h /usr/local/cuda/include\nsudo mv -P cudnn-*-archive/lib/libcudnn* /usr/local/cuda/lib64 \nsudo chmod a+r /usr/local/cuda/include/cudnn*.h /usr/local/cuda/lib64/libcudnn*\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1 id=\"机器学习环境\"\u003e机器学习环境\u003c/h1\u003e\n\u003ch2 id=\"python\"\u003ePython\u003c/h2\u003e\n\u003cp\u003eUbuntu 22.04 系统已经安装了 Python 3.10 版本，Python 3.10 在常用机器学习库上具有较好的兼容性。因此，以 Python 3.10 版本为例，使用 \u003ccode\u003evenv\u003c/code\u003e 创建机器学习虚拟环境。在系统层面安装 \u003ccode\u003evenv\u003c/code\u003e 并创建虚拟环境：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003esudo apt install python3.10-venv\nmkdir ~/sdk\npython3.10 -m venv ~/sdk/python310\nsource ~/sdk/python310/bin/activate\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"pytorch\"\u003ePyTorch\u003c/h2\u003e\n\u003cp\u003ePyTorch 的 2.0 版本支持的最高 CUDA 即为 11.8，输入如下命令安装 PyTorch：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003epip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e惊奇的发现 PyTorch 的安装包 \u003ccode\u003etorch-2.0.0+cu118-cp310-cp310-linux_x86_64.whl\u003c/code\u003e 竟然超过 2GB。安装完毕后发现 PyTorch 内嵌了 CUDA 和 cuDNN。内嵌的好处是可以做到安装即用，但如果和其他包依赖的系统 CUDA 和 cuDNN 版本不一致，容易出现各种意想不到的问题。在 Python 中运行如下命令验证 PyTorch 是否可以正常调用显卡：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eimport torch\n\n# PyTorch 版本\ntorch.__version__\n# 2.0.0+cu118\n\n# CUDA 是否可用\ntorch.cuda.is_available()\n# True\n\n# GPU 数量\ntorch.cuda.device_count()\n# 1\n\n# GPU 名称\ntorch.cuda.get_device_name(0)\n# NVIDIA GeForce RTX 3070 Ti\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"tensorflow\"\u003eTensorflow\u003c/h2\u003e\n\u003cp\u003e输入如下命令安装 Tensorflow：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003epip install tensorflow\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e在 Python 中运行如下命令验证 Tensorflow 是否可以正常调用显卡：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eimport tensorflow as tf\n\n# Tensorflow 版本\ntf.__version__\n# 2.11.0\n\n# CUDA 是否可用\ntf.test.is_gpu_available()\n# True\n\n# GPU 数量\nlen(tf.config.experimental.list_physical_devices(\u0026#39;GPU\u0026#39;))\n# 1\n\n# GPU 名称\ntf.test.gpu_device_name()\n# /device:GPU:0\n\u003c/code\u003e\u003c/pre\u003e\n\n\n\n\n\n\u003cdiv class=\"donate\"\u003e\n  \u003cdiv class=\"donate-header\"\u003e\u003c/div\u003e\n  \u003cdiv class=\"donate-slug\" id=\"donate-slug\"\u003egpu-machine-learning-environment-configuration-under-windows-with-wsl2-and-ubuntu\u003c/div\u003e\n  \u003cbutton class=\"donate-button\"\u003e赞 赏\u003c/button\u003e\n  \u003cdiv class=\"donate-footer\"\u003e「真诚赞赏，手留余香」\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"donate-modal-wrapper\"\u003e\n  \u003cdiv class=\"donate-modal\"\u003e\n    \u003cdiv class=\"donate-box\"\u003e\n      \u003cdiv class=\"donate-box-content\"\u003e\n        \u003cdiv class=\"donate-box-content-inner\"\u003e\n          \u003cdiv class=\"donate-box-header\"\u003e「真诚赞赏，手留余香」\u003c/div\u003e\n          \u003cdiv class=\"donate-box-body\"\u003e\n            \u003cdiv class=\"donate-box-money\"\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-2\" data-v=\"2\" data-unchecked=\"￥ 2\" data-checked=\"2 元\"\u003e￥ 2\u003c/button\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-5\" data-v=\"5\" data-unchecked=\"￥ 5\" data-checked=\"5 元\"\u003e￥ 5\u003c/button\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-10\" data-v=\"10\" data-unchecked=\"￥ 10\" data-checked=\"10 元\"\u003e￥ 10\u003c/button\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-50\" data-v=\"50\" data-unchecked=\"￥ 50\" data-checked=\"50 元\"\u003e￥ 50\u003c/button\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-100\" data-v=\"100\" data-unchecked=\"￥ 100\" data-checked=\"100 元\"\u003e￥ 100\u003c/button\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-custom\" data-v=\"custom\" data-unchecked=\"任意金额\" data-checked=\"任意金额\"\u003e任意金额\u003c/button\u003e\n            \u003c/div\u003e\n            \u003cdiv class=\"donate-box-pay\"\u003e\n              \u003cimg class=\"donate-box-pay-qrcode\" id=\"donate-box-pay-qrcode\" src=\"\"/\u003e\n            \u003c/div\u003e\n          \u003c/div\u003e\n          \u003cdiv class=\"donate-box-footer\"\u003e\n            \u003cdiv class=\"donate-box-pay-method donate-box-pay-method-checked\" data-v=\"wechat-pay\"\u003e\n              \u003cimg class=\"donate-box-pay-method-image\" id=\"donate-box-pay-method-image-wechat-pay\" src=\"\"/\u003e\n            \u003c/div\u003e\n            \u003cdiv class=\"donate-box-pay-method\" data-v=\"alipay\"\u003e\n              \u003cimg class=\"donate-box-pay-method-image\" id=\"donate-box-pay-method-image-alipay\" src=\"\"/\u003e\n            \u003c/div\u003e\n          \u003c/div\u003e\n        \u003c/div\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n    \u003cbutton type=\"button\" class=\"donate-box-close-button\"\u003e\n      \u003csvg class=\"donate-box-close-button-icon\" fill=\"#fff\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"\u003e\u003cpath d=\"M13.486 12l5.208-5.207a1.048 1.048 0 0 0-.006-1.483 1.046 1.046 0 0 0-1.482-.005L12 10.514 6.793 5.305a1.048 1.048 0 0 0-1.483.005 1.046 1.046 0 0 0-.005 1.483L10.514 12l-5.208 5.207a1.048 1.048 0 0 0 .006 1.483 1.046 1.046 0 0 0 1.482.005L12 13.486l5.207 5.208a1.048 1.048 0 0 0 1.483-.006 1.046 1.046 0 0 0 .005-1.482L13.486 12z\" fill-rule=\"evenodd\"\u003e\u003c/path\u003e\u003c/svg\u003e\n    \u003c/button\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cscript type=\"text/javascript\" src=\"/js/donate.js\"\u003e\u003c/script\u003e\n\n\n  \u003cfooter\u003e\n  \n\u003cnav class=\"post-nav\"\u003e\n  \u003cspan class=\"nav-prev\"\u003e← \u003ca href=\"/cn/2023/03/literate-programming-and-reproducible-research/\"\u003e文学编程和可重复性研究 (Literate Programming and Reproducible Research)\u003c/a\u003e\u003c/span\u003e\n  \u003cspan class=\"nav-next\"\u003e\u003ca href=\"/cn/2023/04/what-i-talk-about-when-i-talk-about-photo-retouching-colors-part-1/\"\u003e当我谈修图时，我谈些什么\u003c/a\u003e →\u003c/span\u003e\n\u003c/nav\u003e\n\n\n\n\n\u003cins class=\"adsbygoogle\" style=\"display:block; text-align:center;\" data-ad-layout=\"in-article\" data-ad-format=\"fluid\" data-ad-client=\"ca-pub-2608165017777396\" data-ad-slot=\"8302038603\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n  (adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\n\n\u003cscript src=\"//cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"/js/toggle-theme.js\"\u003e\u003c/script\u003e\n\n\n\u003cscript src=\"/js/no-highlight.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"/js/math-code.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"/js/heading-anchor.js\"\u003e\u003c/script\u003e\n\n\n\n\u003csection class=\"comments\"\u003e\n\u003cscript src=\"https://giscus.app/client.js\" data-repo=\"leovan/leovan.me\" data-repo-id=\"MDEwOlJlcG9zaXRvcnkxMTMxOTY0Mjc=\" data-category=\"Comments\" data-category-id=\"DIC_kwDOBr89i84CT-R7\" data-mapping=\"pathname\" data-strict=\"1\" data-reactions-enabled=\"1\" data-emit-metadata=\"0\" data-input-position=\"top\" data-theme=\"preferred_color_scheme\" data-lang=\"zh-CN\" data-loading=\"lazy\" crossorigin=\"anonymous\" defer=\"\"\u003e\n\u003c/script\u003e\n\u003c/section\u003e\n\n\n\u003cscript src=\"//cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"//cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"//cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"//cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/toolbar/prism-toolbar.min.js\"\u003e\u003c/script\u003e\n\u003cscript\u003e\n  (function() {\n    if (!self.Prism) {\n      return;\n    }\n\n    \n    Prism.languages.dos = Prism.languages.powershell;\n    Prism.languages.gremlin = Prism.languages.groovy;\n\n    let languages = {\n      'r': 'R', 'python': 'Python', 'xml': 'XML', 'html': 'HTML',\n      'yaml': 'YAML', 'latex': 'LaTeX', 'tex': 'TeX',\n      'powershell': 'PowerShell', 'javascript': 'JavaScript',\n      'dos': 'DOS', 'qml': 'QML', 'json': 'JSON', 'bash': 'Bash',\n      'text': 'Text', 'txt': 'Text', 'sparql': 'SPARQL',\n      'gremlin': 'Gremlin', 'cypher': 'Cypher', 'ngql': 'nGQL',\n      'shell': 'Shell', 'sql': 'SQL', 'apacheconf': 'Apache Configuration', 'c': 'C', 'css': 'CSS'\n    };\n\n    Prism.hooks.add('before-highlight', function(env) {\n      if (env.language !== 'plain') {\n        let language = languages[env.language] || env.language;\n        env.element.setAttribute('data-language', language);\n      }\n    });\n\n    \n    let ClipboardJS = window.ClipboardJS || undefined;\n\n    Prism.plugins.toolbar.registerButton('copy-to-clipboard', function(env) {\n      let linkCopy = document.createElement('button');\n      linkCopy.classList.add('prism-button-copy');\n\n      registerClipboard();\n\n      return linkCopy;\n\n      function registerClipboard() {\n        let clip = new ClipboardJS(linkCopy, {\n          'text': function () {\n            return env.code;\n          }\n        });\n\n        clip.on('success', function() {\n          linkCopy.classList.add('prism-button-copy-success');\n          resetText();\n        });\n        clip.on('error', function () {\n          linkCopy.classList.add('prism-button-copy-error');\n          resetText();\n        });\n      }\n\n      function resetText() {\n        setTimeout(function () {\n          linkCopy.classList.remove('prism-button-copy-success');\n          linkCopy.classList.remove('prism-button-copy-error');\n        }, 1600);\n      }\n    });\n  })();\n\u003c/script\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003cscript async=\"\" src=\"/js/center-img.js\"\u003e\u003c/script\u003e\n\u003cscript async=\"\" src=\"/js/right-quote.js\"\u003e\u003c/script\u003e\n\u003cscript async=\"\" src=\"/js/external-link.js\"\u003e\u003c/script\u003e\n\u003cscript async=\"\" src=\"/js/alt-title.js\"\u003e\u003c/script\u003e\n\u003cscript async=\"\" src=\"/js/figure.js\"\u003e\u003c/script\u003e\n\n\n\n\u003cscript src=\"//cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js\"\u003e\u003c/script\u003e\n\n\n\u003cscript src=\"//cdn.jsdelivr.net/npm/vanilla-back-to-top@latest/dist/vanilla-back-to-top.min.js\"\u003e\u003c/script\u003e\n\u003cscript\u003e\naddBackToTop({\n  diameter: 48\n});\n\u003c/script\u003e\n\n  \u003chr/\u003e\n  \u003cdiv class=\"copyright no-border-bottom\"\u003e\n    \u003cdiv class=\"copyright-author-year\"\u003e\n      \u003cspan\u003eCopyright © 2017-2024 \u003ca href=\"/\"\u003e范叶亮 | Leo Van\u003c/a\u003e\u003c/span\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e\n  \u003c/footer\u003e\n  \u003c/article\u003e",
  "Date": "2023-03-19T00:00:00Z",
  "Author": "范叶亮"
}