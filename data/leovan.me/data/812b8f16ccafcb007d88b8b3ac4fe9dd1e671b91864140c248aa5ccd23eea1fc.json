{
  "Source": "leovan.me",
  "Title": "虚拟环境准备 (Virtual Environment Preparation)",
  "Link": "https://leovan.me/cn/2021/06/virtual-env-preparation/",
  "Content": "\u003carticle class=\"main\"\u003e\n    \u003cheader class=\"content-title\"\u003e\n    \n\u003ch1 class=\"title\"\u003e\n  \n  虚拟环境准备 (Virtual Environment Preparation)\n  \n\u003c/h1\u003e\n\n\n\n\n\n\n\n\u003ch2 class=\"author-date\"\u003e范叶亮 / \n2021-06-12\u003c/h2\u003e\n\n\n\n\u003ch3 class=\"post-meta\"\u003e\n\n\n\u003cstrong\u003e分类: \u003c/strong\u003e\n\u003ca href=\"/categories/tech101\"\u003eTech101\u003c/a\u003e, \u003ca href=\"/categories/%E7%BC%96%E7%A8%8B\"\u003e编程\u003c/a\u003e\n\n\n\n\n/\n\n\n\n\n\u003cstrong\u003e标签: \u003c/strong\u003e\n\u003cspan\u003e虚拟环境\u003c/span\u003e, \u003cspan\u003eVirtualBox\u003c/span\u003e, \u003cspan\u003eUbuntu\u003c/span\u003e, \u003cspan\u003eUbuntu Server\u003c/span\u003e, \u003cspan\u003e虚拟机\u003c/span\u003e, \u003cspan\u003e固定 IP\u003c/span\u003e, \u003cspan\u003eHost-only Adapter\u003c/span\u003e, \u003cspan\u003eNAT\u003c/span\u003e, \u003cspan\u003eBridged\u003c/span\u003e, \u003cspan\u003e免密\u003c/span\u003e, \u003cspan\u003e免密码\u003c/span\u003e, \u003cspan\u003e免密登录\u003c/span\u003e, \u003cspan\u003eOpenSSH\u003c/span\u003e, \u003cspan\u003eSSH\u003c/span\u003e\n\n\n\n\n/\n\n\n\u003cstrong\u003e字数: \u003c/strong\u003e\n1365\n\u003c/h3\u003e\n\n\n\n\u003chr/\u003e\n\n\n\n    \n    \n    \u003cins class=\"adsbygoogle\" style=\"display:block; text-align:center;\" data-ad-layout=\"in-article\" data-ad-format=\"fluid\" data-ad-client=\"ca-pub-2608165017777396\" data-ad-slot=\"1261604535\"\u003e\u003c/ins\u003e\n    \u003cscript\u003e\n    (adsbygoogle = window.adsbygoogle || []).push({});\n    \u003c/script\u003e\n    \n    \n    \u003c/header\u003e\n\n\n\n\n\u003cp\u003e本文以 VirtualBox 和 Ubuntu Server 为例，介绍在 macOS 下搭建 3 台虚拟机集群过程。\u003c/p\u003e\n\u003ch1 id=\"安装-virtualbox\"\u003e安装 VirtualBox\u003c/h1\u003e\n\u003cp\u003e从\u003ca href=\"https://www.virtualbox.org/wiki/Downloads\"\u003e官网\u003c/a\u003e下载最新版本的 VirtualBox 和 VirtualBox Extension Pack，本文以 6.1.22 版本为例。根据安装向导安装 VirtualBox。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/install-virtualbox.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e双击下载好的 \u003ccode\u003e.vbox-extpack\u003c/code\u003e 安装文件安装 VirtualBox Extension Pack。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/install-virtualbox-extension-pack.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e通过 \u003ccode\u003eFile -\u0026gt; Host Network Manager...\u003c/code\u003e 为 VirtualBox 添加一块网卡。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/virtualbox-add-host-only-network.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003ch1 id=\"安装-ubuntu-server\"\u003e安装 Ubuntu Server\u003c/h1\u003e\n\u003ch2 id=\"虚拟机配置\"\u003e虚拟机配置\u003c/h2\u003e\n\u003cp\u003e从\u003ca href=\"https://ubuntu.com/download/server\"\u003e官网\u003c/a\u003e下载最新版本的 Ubuntu Server，本文以 20.04.2 LTS 版本为例。在 VirtualBox 通过 \u003ccode\u003eNew\u003c/code\u003e 按钮添加新的虚拟机，首先为虚拟机配置名称，存储路径和内存大小等基本信息：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/virtualbox-new-virtual-machine-1.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e单击 \u003ccode\u003eCreate\u003c/code\u003e 后为虚拟机配置磁盘类型和大小：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/virtualbox-new-virtual-machine-2.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e单击 \u003ccode\u003eCreate\u003c/code\u003e 完成创建。创建完毕后，在左侧列表中选择创建好的虚拟机，通过 \u003ccode\u003eSettings\u003c/code\u003e 按钮打开设置对话框，在 \u003ccode\u003eSystem - Motherboard\u003c/code\u003e 标签页去除掉软盘启动 \u003ccode\u003eBoot Order - Floppy\u003c/code\u003e，同时也可以再次调整内存大小：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/virtualbox-settings-system-motherboard.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e在 \u003ccode\u003eSystem - Processor\u003c/code\u003e 标签页可以调整虚拟机使用 CPU 的数量：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/virtualbox-settings-system-processor.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e在 \u003ccode\u003eDisplay - Acceleration\u003c/code\u003e 标签页可以调整使用的现存大小：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/virtualbox-settings-display-acceleration.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e在 \u003ccode\u003eNetwork - Adapter 1\u003c/code\u003e 标签页选择 \u003ccode\u003eNAT\u003c/code\u003e 网络类型，该网卡用于虚拟机连接外部网络：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/virtualbox-settings-network-adapter-1.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e在 \u003ccode\u003eNetwork - Adapter 2\u003c/code\u003e 标签页选择 \u003ccode\u003eHost-only Adapter\u003c/code\u003e 网络类型，名称选择上文 VirtualBox 配置的 \u003ccode\u003evboxnet0\u003c/code\u003e，该网卡用于虚拟机连接内部网络：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/virtualbox-settings-network-adapter-2.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e在 \u003ccode\u003eNetwork - Adapter 2\u003c/code\u003e 标签页为光驱选择挂载的磁盘镜像：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/virtualbox-settings-storage.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e添加下载好的 Ubuntu Server ISO 磁盘镜像：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/virtualbox-settings-storage-add-disk.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003ch2 id=\"ubuntu-server-安装配置\"\u003eUbuntu Server 安装配置\u003c/h2\u003e\n\u003cp\u003e单击 \u003ccode\u003eStart\u003c/code\u003e 按钮启动虚拟机，启动后等待片刻，在语言选择页面选择 \u003ccode\u003eEnglish\u003c/code\u003e：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/install-ubuntu-language.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e在键盘布局页面采用默认配置，\u003ccode\u003eDone\u003c/code\u003e 进入下一步：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/install-ubuntu-keyboard.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e在网络配置页面，上文中配置了两块网卡，在此我们需要对于 Host-only Adapter 网卡 \u003ccode\u003eenp0s8\u003c/code\u003e 进行配置，NAT 网卡 \u003ccode\u003eenp0s3\u003c/code\u003e 采用默认即可：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/install-ubuntu-network-before.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e进入配置后选择手动 \u003ccode\u003eNanual\u003c/code\u003e，在 Subnet 中输入 \u003ccode\u003e192.168.56.0/24\u003c/code\u003e（参考上文中 VirtualBox 添加的网卡设置），在 Address 中输入 \u003ccode\u003e192.168.56.1\u003c/code\u003e，在 Gateway 中输入 \u003ccode\u003e192.168.56.1\u003c/code\u003e，\u003ccode\u003eSave\u003c/code\u003e 进行保存：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/install-ubuntu-network-manual.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e配置完后，结果如下，\u003ccode\u003eDone\u003c/code\u003e 进入下一步：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/install-ubuntu-network-after.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e在镜像配置页面，根据实际情况选择一个合适的镜像地址，本文采用清华大学的镜像地址 \u003ccode\u003ehttps://mirrors.tuna.tsinghua.edu.cn/ubuntu/\u003c/code\u003e，\u003ccode\u003eDone\u003c/code\u003e 进入下一步：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/install-ubuntu-archive-mirror.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e在存储配置页面，为了方便起见选择使用整个磁盘，\u003ccode\u003eDone\u003c/code\u003e 进入下一步：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/install-ubuntu-storage-1.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e确认磁盘配置信息，\u003ccode\u003eDone\u003c/code\u003e 进入下一步：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/install-ubuntu-storage-2.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e在用户信息配置页面，输入用户名和密码等信息，\u003ccode\u003eDone\u003c/code\u003e 进入下一步：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/install-ubuntu-profile.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e在 SSH 配置页面，选择安装 OpenSSH server，\u003ccode\u003eDone\u003c/code\u003e 进入下一步：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/install-ubuntu-ssh.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e在软件包配置页面，跳过安装，\u003ccode\u003eDone\u003c/code\u003e 进入下一步：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/install-ubuntu-snaps.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e安装完毕后，\u003ccode\u003eReboot Now\u003c/code\u003e 重启虚拟机：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/install-ubuntu-complete.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003ch1 id=\"配置-ubuntu-server\"\u003e配置 Ubuntu Server\u003c/h1\u003e\n\u003ch2 id=\"克隆虚拟机\"\u003e克隆虚拟机\u003c/h2\u003e\n\u003cp\u003e重启后，输入用户名和密码即可进入系统：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/ubuntu-login.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e通过如下命令更新系统软件到最新版本：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003esudo apt update\nsudo apt upgrade\nsudo apt autoremove\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e输入以下命令进行关机：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003esudo shutdown now\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e右键单击虚拟机 Ubuntu Server 1，选择 \u003ccode\u003eClone\u003c/code\u003e 对虚拟机进行克隆，选择为所有网卡重新生成 MAC 地址，然后单击 \u003ccode\u003eContinue\u003c/code\u003e：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/clone-virtual-machine-1.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e选择 \u003ccode\u003eFull clone\u003c/code\u003e 模式，单击 \u003ccode\u003eContinue\u003c/code\u003e 完成克隆：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/tech101/2021-06-12-virtual-env-preparation/clone-virtual-machine-2.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003ch2 id=\"配置网络\"\u003e配置网络\u003c/h2\u003e\n\u003cp\u003e分别进入虚拟机 2 和 3，修改固定 IP 地址为 \u003ccode\u003e191.168.56.102\u003c/code\u003e 和 \u003ccode\u003e191.168.56.103\u003c/code\u003e。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003esudo vi /etc/netplan/00-installer-config.yaml\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"language-yaml\"\u003e# This is the network config written by \u0026#39;subiquity\u0026#39;\nnetwork:\n  ethernets:\n    enp0s3:\n      dhcp4:true\n    enp0s8:\n      addresses:\n      - 192.168.56.101/24\n      gateway4: 192.168.56.1\n      nameservers:\n        addresses: []\n        search: []\n  version: 2\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e将配置文件中 \u003ccode\u003e00-installer-config.yaml\u003c/code\u003e 的 \u003ccode\u003e192.168.56.101\u003c/code\u003e 修改为对应的 IP。然后执行：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003esudo netplan apply\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e让配置生效。\u003c/p\u003e\n\u003cp\u003e为三台虚拟机修改主机名为 \u003ccode\u003evm-01\u003c/code\u003e，\u003ccode\u003evm-02\u003c/code\u003e 和 \u003ccode\u003evm-03\u003c/code\u003e：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003esudo hostnamectl set-hostname vm-0x\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e为三台虚拟机设置 IP 和主机名映射：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003esudo vi /etc/hosts\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e在结尾添加：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-txt\"\u003e# VM\n192.168.56.101 vm-01\n192.168.56.102 vm-02\n192.168.56.103 vm-03\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"配置-ssh\"\u003e配置 SSH\u003c/h2\u003e\n\u003cp\u003e分别进入三台虚拟机并生成密钥：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003essh-keygen -t rsa\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e这会在 \u003ccode\u003e~/.ssh\u003c/code\u003e 目录生成一对密钥，其中 \u003ccode\u003eid_rsa\u003c/code\u003e 是私钥，\u003ccode\u003eid_rsa.pub\u003c/code\u003e 是公钥。\u003c/p\u003e\n\u003cp\u003e将三台机器中的 \u003ccode\u003eid_rsa.pub\u003c/code\u003e 导出合并到 \u003ccode\u003e~/.ssh/authorized_keys\u003c/code\u003e 文件中，为了方便可以将自己电脑的 \u003ccode\u003eid_rsa.pub\u003c/code\u003e 也合并到其中实现免密登录。\u003c/p\u003e\n\u003cp\u003e登录任意每台虚拟机，通过如下命令测试是否可以免密登录：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-shell\"\u003essh vm-01\nssh vm-02\nssh vm-03\n\u003c/code\u003e\u003c/pre\u003e\n\n\n\n\n\n\u003cdiv class=\"donate\"\u003e\n  \u003cdiv class=\"donate-header\"\u003e\u003c/div\u003e\n  \u003cdiv class=\"donate-slug\" id=\"donate-slug\"\u003evirtual-env-preparation\u003c/div\u003e\n  \u003cbutton class=\"donate-button\"\u003e赞 赏\u003c/button\u003e\n  \u003cdiv class=\"donate-footer\"\u003e「真诚赞赏，手留余香」\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"donate-modal-wrapper\"\u003e\n  \u003cdiv class=\"donate-modal\"\u003e\n    \u003cdiv class=\"donate-box\"\u003e\n      \u003cdiv class=\"donate-box-content\"\u003e\n        \u003cdiv class=\"donate-box-content-inner\"\u003e\n          \u003cdiv class=\"donate-box-header\"\u003e「真诚赞赏，手留余香」\u003c/div\u003e\n          \u003cdiv class=\"donate-box-body\"\u003e\n            \u003cdiv class=\"donate-box-money\"\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-2\" data-v=\"2\" data-unchecked=\"￥ 2\" data-checked=\"2 元\"\u003e￥ 2\u003c/button\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-5\" data-v=\"5\" data-unchecked=\"￥ 5\" data-checked=\"5 元\"\u003e￥ 5\u003c/button\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-10\" data-v=\"10\" data-unchecked=\"￥ 10\" data-checked=\"10 元\"\u003e￥ 10\u003c/button\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-50\" data-v=\"50\" data-unchecked=\"￥ 50\" data-checked=\"50 元\"\u003e￥ 50\u003c/button\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-100\" data-v=\"100\" data-unchecked=\"￥ 100\" data-checked=\"100 元\"\u003e￥ 100\u003c/button\u003e\n              \u003cbutton class=\"donate-box-money-button donate-box-money-button-unchecked\" id=\"donate-box-money-button-custom\" data-v=\"custom\" data-unchecked=\"任意金额\" data-checked=\"任意金额\"\u003e任意金额\u003c/button\u003e\n            \u003c/div\u003e\n            \u003cdiv class=\"donate-box-pay\"\u003e\n              \u003cimg class=\"donate-box-pay-qrcode\" id=\"donate-box-pay-qrcode\" src=\"\"/\u003e\n            \u003c/div\u003e\n          \u003c/div\u003e\n          \u003cdiv class=\"donate-box-footer\"\u003e\n            \u003cdiv class=\"donate-box-pay-method donate-box-pay-method-checked\" data-v=\"wechat-pay\"\u003e\n              \u003cimg class=\"donate-box-pay-method-image\" id=\"donate-box-pay-method-image-wechat-pay\" src=\"\"/\u003e\n            \u003c/div\u003e\n            \u003cdiv class=\"donate-box-pay-method\" data-v=\"alipay\"\u003e\n              \u003cimg class=\"donate-box-pay-method-image\" id=\"donate-box-pay-method-image-alipay\" src=\"\"/\u003e\n            \u003c/div\u003e\n          \u003c/div\u003e\n        \u003c/div\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n    \u003cbutton type=\"button\" class=\"donate-box-close-button\"\u003e\n      \u003csvg class=\"donate-box-close-button-icon\" fill=\"#fff\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"\u003e\u003cpath d=\"M13.486 12l5.208-5.207a1.048 1.048 0 0 0-.006-1.483 1.046 1.046 0 0 0-1.482-.005L12 10.514 6.793 5.305a1.048 1.048 0 0 0-1.483.005 1.046 1.046 0 0 0-.005 1.483L10.514 12l-5.208 5.207a1.048 1.048 0 0 0 .006 1.483 1.046 1.046 0 0 0 1.482.005L12 13.486l5.207 5.208a1.048 1.048 0 0 0 1.483-.006 1.046 1.046 0 0 0 .005-1.482L13.486 12z\" fill-rule=\"evenodd\"\u003e\u003c/path\u003e\u003c/svg\u003e\n    \u003c/button\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cscript type=\"text/javascript\" src=\"/js/donate.js\"\u003e\u003c/script\u003e\n\n\n  \u003cfooter\u003e\n  \n\u003cnav class=\"post-nav\"\u003e\n  \u003cspan class=\"nav-prev\"\u003e← \u003ca href=\"/cn/2021/05/big-data-sql-performance-tuning/\"\u003e大数据 SQL 性能调优 (Big Data SQL Performance Tuning)\u003c/a\u003e\u003c/span\u003e\n  \u003cspan class=\"nav-next\"\u003e\u003ca href=\"/cn/2021/06/hadoop-cluster-setup/\"\u003eHadoop 集群搭建 (Hadoop Cluster Setup)\u003c/a\u003e →\u003c/span\u003e\n\u003c/nav\u003e\n\n\n\n\n\u003cins class=\"adsbygoogle\" style=\"display:block; text-align:center;\" data-ad-layout=\"in-article\" data-ad-format=\"fluid\" data-ad-client=\"ca-pub-2608165017777396\" data-ad-slot=\"8302038603\"\u003e\u003c/ins\u003e\n\u003cscript\u003e\n  (adsbygoogle = window.adsbygoogle || []).push({});\n\u003c/script\u003e\n\n\n\n\u003cscript src=\"//cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"/js/toggle-theme.js\"\u003e\u003c/script\u003e\n\n\n\u003cscript src=\"/js/no-highlight.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"/js/math-code.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"/js/heading-anchor.js\"\u003e\u003c/script\u003e\n\n\n\n\u003csection class=\"comments\"\u003e\n\u003cscript src=\"https://giscus.app/client.js\" data-repo=\"leovan/leovan.me\" data-repo-id=\"MDEwOlJlcG9zaXRvcnkxMTMxOTY0Mjc=\" data-category=\"Comments\" data-category-id=\"DIC_kwDOBr89i84CT-R7\" data-mapping=\"pathname\" data-strict=\"1\" data-reactions-enabled=\"1\" data-emit-metadata=\"0\" data-input-position=\"top\" data-theme=\"preferred_color_scheme\" data-lang=\"zh-CN\" data-loading=\"lazy\" crossorigin=\"anonymous\" defer=\"\"\u003e\n\u003c/script\u003e\n\u003c/section\u003e\n\n\n\u003cscript src=\"//cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"//cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"//cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js\"\u003e\u003c/script\u003e\n\u003cscript src=\"//cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/toolbar/prism-toolbar.min.js\"\u003e\u003c/script\u003e\n\u003cscript\u003e\n  (function() {\n    if (!self.Prism) {\n      return;\n    }\n\n    \n    Prism.languages.dos = Prism.languages.powershell;\n    Prism.languages.gremlin = Prism.languages.groovy;\n\n    let languages = {\n      'r': 'R', 'python': 'Python', 'xml': 'XML', 'html': 'HTML',\n      'yaml': 'YAML', 'latex': 'LaTeX', 'tex': 'TeX',\n      'powershell': 'PowerShell', 'javascript': 'JavaScript',\n      'dos': 'DOS', 'qml': 'QML', 'json': 'JSON', 'bash': 'Bash',\n      'text': 'Text', 'txt': 'Text', 'sparql': 'SPARQL',\n      'gremlin': 'Gremlin', 'cypher': 'Cypher', 'ngql': 'nGQL',\n      'shell': 'Shell', 'sql': 'SQL', 'apacheconf': 'Apache Configuration', 'c': 'C', 'css': 'CSS'\n    };\n\n    Prism.hooks.add('before-highlight', function(env) {\n      if (env.language !== 'plain') {\n        let language = languages[env.language] || env.language;\n        env.element.setAttribute('data-language', language);\n      }\n    });\n\n    \n    let ClipboardJS = window.ClipboardJS || undefined;\n\n    Prism.plugins.toolbar.registerButton('copy-to-clipboard', function(env) {\n      let linkCopy = document.createElement('button');\n      linkCopy.classList.add('prism-button-copy');\n\n      registerClipboard();\n\n      return linkCopy;\n\n      function registerClipboard() {\n        let clip = new ClipboardJS(linkCopy, {\n          'text': function () {\n            return env.code;\n          }\n        });\n\n        clip.on('success', function() {\n          linkCopy.classList.add('prism-button-copy-success');\n          resetText();\n        });\n        clip.on('error', function () {\n          linkCopy.classList.add('prism-button-copy-error');\n          resetText();\n        });\n      }\n\n      function resetText() {\n        setTimeout(function () {\n          linkCopy.classList.remove('prism-button-copy-success');\n          linkCopy.classList.remove('prism-button-copy-error');\n        }, 1600);\n      }\n    });\n  })();\n\u003c/script\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003cscript async=\"\" src=\"/js/center-img.js\"\u003e\u003c/script\u003e\n\u003cscript async=\"\" src=\"/js/right-quote.js\"\u003e\u003c/script\u003e\n\u003cscript async=\"\" src=\"/js/external-link.js\"\u003e\u003c/script\u003e\n\u003cscript async=\"\" src=\"/js/alt-title.js\"\u003e\u003c/script\u003e\n\u003cscript async=\"\" src=\"/js/figure.js\"\u003e\u003c/script\u003e\n\n\n\n\u003cscript src=\"//cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js\"\u003e\u003c/script\u003e\n\n\n\u003cscript src=\"//cdn.jsdelivr.net/npm/vanilla-back-to-top@latest/dist/vanilla-back-to-top.min.js\"\u003e\u003c/script\u003e\n\u003cscript\u003e\naddBackToTop({\n  diameter: 48\n});\n\u003c/script\u003e\n\n  \u003chr/\u003e\n  \u003cdiv class=\"copyright no-border-bottom\"\u003e\n    \u003cdiv class=\"copyright-author-year\"\u003e\n      \u003cspan\u003eCopyright © 2017-2024 \u003ca href=\"/\"\u003e范叶亮 | Leo Van\u003c/a\u003e\u003c/span\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e\n  \u003c/footer\u003e\n  \u003c/article\u003e",
  "Date": "2021-06-12T00:00:00Z",
  "Author": "范叶亮"
}