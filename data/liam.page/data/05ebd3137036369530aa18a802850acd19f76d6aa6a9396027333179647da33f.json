{
  "Source": "liam.page",
  "Title": "使用 TikZ 给版面着色",
  "Link": "https://liam.page/2017/05/14/make-text-area-colored-by-TikZ/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003e有时候，我们需要给 LaTeX 添上一些背景颜色。讲道理，大多数情况，我们只需要给整个 paper 都染色就好了。此时，我们可以用\u003ca href=\"/2014/04/22/LaTeX-watermark/\"\u003e前文\u003c/a\u003e提到的方法来实现。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\watermark\u003c/span\u003e{0}{1}{\u003cspan class=\"keyword\"\u003e\\tikz\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\fill\u003c/span\u003e[cyan] (0,0) rectangle (\u003cspan class=\"keyword\"\u003e\\paperwidth\u003c/span\u003e, \u003cspan class=\"keyword\"\u003e\\paperheight\u003c/span\u003e);}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e但是，若希望只针对特定的区域着色——比如只给版芯着色，就需要额外的讨论了。\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003ch2 id=\"TeX-的版面尺寸\"\u003e\u003ca href=\"#TeX-的版面尺寸\" class=\"headerlink\" title=\"TeX 的版面尺寸\"\u003e\u003c/a\u003eTeX 的版面尺寸\u003c/h2\u003e\u003cp\u003e为了确定所需着色的区域，我们首先需要了解一下 TeX 的版面尺寸。在 LaTeX 中，我们可以使用 \u003ccode\u003elayout\u003c/code\u003e 宏包，打印当前的版面尺寸。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\documentclass\u003c/span\u003e{book}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{layout}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\layout\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e输出可见：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/uploads/images/LaTeX/book-layout-odd.png\"\u003e奇数页\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/uploads/images/LaTeX/book-layout-even.png\"\u003e偶数页\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e仔细观察不难发现，LaTeX 中四个基本的版面区域，都是由矩形框定的。而确定对角两点，就能确定一个矩形。我们以整个纸张的左下角为原点，试着来确定一下这四个区域的位置。\u003c/p\u003e\n\u003cp\u003e首先，LaTeX 区分奇数页和偶数页。对于奇偶页来说，它们的边距是不一样的。因此，我们有必要区分 \u003ccode\u003e\\oddsidemargin\u003c/code\u003e 和 \u003ccode\u003e\\evensidemargin\u003c/code\u003e。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e% RequirePackage ifoddpage\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\def\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\currentsidemargin\u003c/span\u003e{\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\ifoddpageoroneside\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003e\\oddsidemargin\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\else\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003e\\evensidemargin\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\fi\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e同理，对于奇偶页来说，边注放置的位置也是不一样的。因此，我们有必要确定边注区域左边线相对版芯左边线的位置。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e% RequirePackage ifoddpage\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\def\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\currentmarginoffset\u003c/span\u003e{\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\ifoddpageoroneside\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003e\\textwidth\u003c/span\u003e + \u003cspan class=\"keyword\"\u003e\\marginsep\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\else\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        -\u003cspan class=\"keyword\"\u003e\\marginsep\u003c/span\u003e - \u003cspan class=\"keyword\"\u003e\\marginparwidth\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\fi\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e这样一来，我们就统一了奇偶页的边距和边注的相对位置。\u003c/p\u003e\n\u003ch3 id=\"纸面\"\u003e\u003ca href=\"#纸面\" class=\"headerlink\" title=\"纸面\"\u003e\u003c/a\u003e纸面\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e左下角：\u003ccode\u003e(0, 0)\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e右上角：\u003ccode\u003e(\\paperwidth, \\paperheight)\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"版芯\"\u003e\u003ca href=\"#版芯\" class=\"headerlink\" title=\"版芯\"\u003e\u003c/a\u003e版芯\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e左下角：\u003ccode\u003e(1in + \\hoffset + \\currentsidemargin, \\paperheight - 1in - \\voffset - \\topmargin - \\headheight - \\headsep - \\textheight)\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e右上角：\u003ccode\u003e(1in + \\hoffset + \\currentsidemargin + \\textwidth, \\paperheight - 1in - \\voffset - \\topmargin - \\headheight - \\headsep)\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"页眉\"\u003e\u003ca href=\"#页眉\" class=\"headerlink\" title=\"页眉\"\u003e\u003c/a\u003e页眉\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e左下角：\u003ccode\u003e(1in + \\hoffset + \\currentsidemargin, \\paperheight - 1in - \\voffset - \\topmargin - \\headheight)\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e右上角：\u003ccode\u003e(1in + \\hoffset + \\currentsidemargin + \\textwidth, \\paperheight - 1in - \\voffset - \\topmargin)\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"页脚\"\u003e\u003ca href=\"#页脚\" class=\"headerlink\" title=\"页脚\"\u003e\u003c/a\u003e页脚\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e左下角：\u003ccode\u003e(1in + \\hoffset + \\currentsidemargin, \\paperheight - 1in - \\voffset - \\topmargin - \\headheight - \\headsep - \\textheight - \\footskip)\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e右上角：\u003ccode\u003e(1in + \\hoffset + \\currentsidemargin + \\textwidth, \\paperheight - 1in - \\voffset - \\topmargin - \\headheight - \\headsep - \\textheight - \\footskip + \\headheight)\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"边注区域\"\u003e\u003ca href=\"#边注区域\" class=\"headerlink\" title=\"边注区域\"\u003e\u003c/a\u003e边注区域\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e左下角：\u003ccode\u003e(1in + \\hoffset + \\currentsidemargin + \\currentmarginoffset, \\paperheight - 1in - \\voffset - \\topmargin - \\headheight - \\headsep - \\textheight)\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e右上角：\u003ccode\u003e(1in + \\hoffset + \\currentsidemargin + \\currentmarginoffset + \\marginparwidth, \\paperheight - 1in - \\voffset - \\topmargin - \\headheight - \\headsep)\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"在指定区域填充底色\"\u003e\u003ca href=\"#在指定区域填充底色\" class=\"headerlink\" title=\"在指定区域填充底色\"\u003e\u003c/a\u003e在指定区域填充底色\u003c/h2\u003e\u003cp\u003e有了四个区域的具体位置，我们就可以着手对相关区域进行填色了。比如你想要使用 TikZ 对它们进行填色，就需要就相关区域定义具体的 \u003ccode\u003enode\u003c/code\u003e。索性，\u003ccode\u003etikzpagenodes\u003c/code\u003e 宏包已经为我们妥善定义好了相关的区域。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ecurrent page\u003c/code\u003e: 整个纸张区域\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecurrent page text area\u003c/code\u003e: 整个版芯区域\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecurrent page header area\u003c/code\u003e: 整个页眉区域\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecurrent page footer area\u003c/code\u003e: 整个页脚区域\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecurrent page marginpar area\u003c/code\u003e: 整个边注区域\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e于是，如果你想要从版芯区域的左上角开始，一直用青色填充到版芯区域右下角至纸张右边的区域，就可以这样做了。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\documentclass\u003c/span\u003e{book}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{tikz}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{tikzpagenodes}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{xcolor}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\newcommand\u003c/span\u003e*{\u003cspan class=\"keyword\"\u003e\\ColorRectangle\u003c/span\u003e}[3]{\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\tikz\u003c/span\u003e[overlay, remember picture]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\fill\u003c/span\u003e[\u003cspan class=\"params\"\u003e#1\u003c/span\u003e] (\u003cspan class=\"params\"\u003e#2\u003c/span\u003e) rectangle (\u003cspan class=\"params\"\u003e#3\u003c/span\u003e);\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{blindtext}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\ColorRectangle\u003c/span\u003e{cyan}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"comment\"\u003e% left top anchor point\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  {current page text area.north west}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"comment\"\u003e% right bottom anchor point\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  {current page text area.south east -| current page.south east}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\blindtext\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/LaTeX/book-layout-fill.png\"/\u003e\u003c/p\u003e\n\n    \u003c/div\u003e",
  "Date": "2017-05-14T04:27:54Z",
  "Author": "Liam Huang"
}