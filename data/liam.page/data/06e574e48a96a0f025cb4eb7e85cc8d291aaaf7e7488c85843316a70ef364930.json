{
  "Source": "liam.page",
  "Title": "编写 iOS 越狱插件：安装 Theos",
  "Link": "https://liam.page/2023/01/19/Build-an-iOS-Jailbreak-Tweak-Install-Theos/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003eTheos 是一个使用 Perl 开发的跨平台构建系统。由于它最开始就是为了 iOS 越狱插件而开发的，所以非常适合用来做越狱插件的开发。我们也不标新利益，从 Theos 开始。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e你也可以直接参考官方英文文档：\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://theos.dev/docs/installation-macos\"\u003ehttps://theos.dev/docs/installation-macos\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003ch2 id=\"前置依赖\"\u003e\u003ca href=\"#前置依赖\" class=\"headerlink\" title=\"前置依赖\"\u003e\u003c/a\u003e前置依赖\u003c/h2\u003e\u003ch3 id=\"安装-XCode\"\u003e\u003ca href=\"#安装-XCode\" class=\"headerlink\" title=\"安装 XCode\"\u003e\u003c/a\u003e安装 XCode\u003c/h3\u003e\u003cp\u003e打开 MAS，搜索 XCode，安装/更新到最新。\u003c/p\u003e\n\u003ch3 id=\"安装-Homebrew\"\u003e\u003ca href=\"#安装-Homebrew\" class=\"headerlink\" title=\"安装 Homebrew\"\u003e\u003c/a\u003e安装 Homebrew\u003c/h3\u003e\u003cp\u003e打开 Terminal，执行下列命令（来自\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://brew.sh/\"\u003eHomebrew 官网\u003c/a\u003e）。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e/bin/bash -c \u003cspan class=\"string\"\u003e\u0026#34;\u003cspan class=\"subst\"\u003e$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\u003c/span\u003e\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"通过-brew-安装依赖库\"\u003e\u003ca href=\"#通过-brew-安装依赖库\" class=\"headerlink\" title=\"通过 brew 安装依赖库\"\u003e\u003c/a\u003e通过 brew 安装依赖库\u003c/h3\u003e\u003cp\u003e在 Terminal 中执行下列命令。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ebrew install ldid xz\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"下载和安装-Theos\"\u003e\u003ca href=\"#下载和安装-Theos\" class=\"headerlink\" title=\"下载和安装 Theos\"\u003e\u003c/a\u003e下载和安装 Theos\u003c/h2\u003e\u003ch3 id=\"设置环境变量\"\u003e\u003ca href=\"#设置环境变量\" class=\"headerlink\" title=\"设置环境变量\"\u003e\u003c/a\u003e设置环境变量\u003c/h3\u003e\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#34;export THEOS=~/theos\u0026#34;\u003c/span\u003e \u0026gt;\u0026gt; ~/.zprofile\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 早期的系统应该加至 ~/.profile\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"下载-Theos\"\u003e\u003ca href=\"#下载-Theos\" class=\"headerlink\" title=\"下载 Theos\"\u003e\u003c/a\u003e下载 Theos\u003c/h3\u003e\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003egit \u003cspan class=\"built_in\"\u003eclone\u003c/span\u003e --recursive https://github.com/theos/theos.git \u003cspan class=\"variable\"\u003e$THEOS\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e当然，你也可以将 \u003ccode\u003e$THEOS/bin/\u003c/code\u003e 加到环境变量 \u003ccode\u003e$PATH\u003c/code\u003e 中去。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"安装-SDK\"\u003e\u003ca href=\"#安装-SDK\" class=\"headerlink\" title=\"安装 SDK\"\u003e\u003c/a\u003e安装 SDK\u003c/h2\u003e\u003cp\u003e新版的 XCode 不提供插件可能使用到的私有框架，因此我们需要安装 Theos 维护的补丁版本。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ecurl -LO https://github.com/theos/sdks/archive/master.zip\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eTTT=$(\u003cspan class=\"built_in\"\u003emktemp\u003c/span\u003e -d)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eunzip master.zip -d \u003cspan class=\"variable\"\u003e$TTT\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"built_in\"\u003emv\u003c/span\u003e \u003cspan class=\"variable\"\u003e$TTT\u003c/span\u003e/sdks-master/*.sdk \u003cspan class=\"variable\"\u003e$THEOS\u003c/span\u003e/sdks\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"built_in\"\u003erm\u003c/span\u003e -r master.zip \u003cspan class=\"variable\"\u003e$TTT\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"built_in\"\u003eunset\u003c/span\u003e \u003cspan class=\"variable\"\u003e$TTT\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"更新-Theos\"\u003e\u003ca href=\"#更新-Theos\" class=\"headerlink\" title=\"更新 Theos\"\u003e\u003c/a\u003e更新 Theos\u003c/h2\u003e\u003cp\u003e将来需要更新 Theos 时，可以这样：\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"variable\"\u003e$THEOS\u003c/span\u003e/bin/update-theos\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n    \u003c/div\u003e",
  "Date": "2023-01-19T15:16:51Z",
  "Author": "Liam Huang"
}