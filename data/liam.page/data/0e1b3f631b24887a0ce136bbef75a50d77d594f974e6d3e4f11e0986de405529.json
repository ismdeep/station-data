{
  "Source": "liam.page",
  "Title": "LaTeX 黑魔法（四）：插入动画（animate 宏包教程）",
  "Link": "https://liam.page/2017/08/10/importing-animate-in-LaTeX/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003e在最初学习 LaTeX 插图的时候，我就发现，基本的 LaTeX 手段不支持 GIF 格式的动图。虽然一直保持对此的好奇，但是因为没有实际需要，再加上「论文等文稿不适合插入动画」的论调，所以一直没有去探究可行性和解决办法。\u003c/p\u003e\n\u003cp\u003e前段时间，因为制作一个幻灯片（\u003ca href=\"//liam.page/attachment/attachment/slides/convolutions.pdf\"\u003e离散卷积和卷积神经网络\u003c/a\u003e）的需要，不得不插入动画以演示「卷积」的过程和效果。于是就借此机会，摸索了如何在 LaTeX 中插入动画。此文是对上述过程的归纳总结。\u003c/p\u003e\n\u003cp\u003e本文主要介绍两部分内容\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e如何在 LaTeX 中插入 GIF 格式的动图；\u003c/li\u003e\n\u003cli\u003e如何在 LaTeX 中插入 Ti\u003cem\u003ek\u003c/em\u003eZ 代码绘制的动画。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e以及介绍一些运用动画效果实现的黑科技效果。\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003ch2 id=\"主角登场——animate-宏包\"\u003e\u003ca href=\"#主角登场——animate-宏包\" class=\"headerlink\" title=\"主角登场——animate 宏包\"\u003e\u003c/a\u003e主角登场——\u003ccode\u003eanimate\u003c/code\u003e 宏包\u003c/h2\u003e\u003cp\u003e要在 LaTeX 中插入动画，首先要考虑输出文件类型是否支持这样的需求。否则，插入动画就变成了无根之木、无源之水。\u003c/p\u003e\n\u003cp\u003e目前来说，主流的 LaTeX 输出格式是 PDF。PDF 的全称是 Portable Document Format。它是最早由 Adobe 公司提出的文档格式标准；因其优良的特性，现已逐渐发展成为固定格式文本交换的事实标准。\u003c/p\u003e\n\u003cp\u003e自 2000 年始，1.3 版本的 PDF 开始支持 JavaScript。而后，相关特性在后续版本中不断完善。因此，若是 PDF 浏览器支持相关 \u003ca target=\"_blank\" rel=\"noopener\" href=\"//www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/js_api_reference.pdf\"\u003eAPI\u003c/a\u003e，则可以利用 JavaScript 在 PDF 文稿中做到很多事情——当然，包括了动画。因此，在 PDF 中插入动画是可能的。\u003c/p\u003e\n\u003cp\u003eAlexander Grahn 根据上述 API，开发了 \u003ccode\u003eanimate\u003c/code\u003e 宏包。该宏包利用 JavaScript，允许用户在 LaTeX 文稿中插入动画，并在支持 JavaScript 的 PDF 阅读器中查看。特别喜人的是，\u003ccode\u003eanimate\u003c/code\u003e 宏包支持目前最流行的几种编译方式；因此，你无须像使用 \u003ccode\u003emedia9\u003c/code\u003e 之类的宏包那样，被编译方式绊住脚。目前 \u003ccode\u003eanimate\u003c/code\u003e 支持的编译方式有\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003epdfLaTeX / LuaLaTeX\u003c/li\u003e\n\u003cli\u003eLaTeX -\u0026gt; dvips -\u0026gt; ps2pdf / LaTeX -\u0026gt; dvipdfmx\u003c/li\u003e\n\u003cli\u003eXeLaTeX -\u0026gt; xdvipdfmx\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e当然，支持这些特性的 PDF 阅读器则比较少。目前已知的有\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAdobe Acrobat / Reader\u003c/li\u003e\n\u003cli\u003ePDF-XChange\u003c/li\u003e\n\u003cli\u003eFoxit Reader\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"使用-animate-宏包\"\u003e\u003ca href=\"#使用-animate-宏包\" class=\"headerlink\" title=\"使用 animate 宏包\"\u003e\u003c/a\u003e使用 \u003ccode\u003eanimate\u003c/code\u003e 宏包\u003c/h2\u003e\u003cp\u003e此处不表如何安装 \u003ccode\u003eanimate\u003c/code\u003e 宏包，我们来看如何使用 \u003ccode\u003eanimate\u003c/code\u003e 宏包。\u003c/p\u003e\n\u003cp\u003e和其它宏包一样，在 LaTeX 中使用 \u003ccode\u003e\\usepackage[\u0026lt;options\u0026gt;]{animate}\u003c/code\u003e 即可引入 \u003ccode\u003eanimate\u003c/code\u003e 宏包。唯独需要注意的有三点\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e必须在引入 \u003ccode\u003eanimate\u003c/code\u003e 宏包之前，显式地引入 \u003ccode\u003egraphicx\u003c/code\u003e 宏包；\u003c/li\u003e\n\u003cli\u003e若希望使用 LaTeX -\u0026gt; dvipdfmx 这一工具链，则需要给 \u003ccode\u003egraphicx\u003c/code\u003e 和 \u003ccode\u003eanimate\u003c/code\u003e 宏包都加上 \u003ccode\u003edvipdfmx\u003c/code\u003e 选项（\u003ca href=\"/2015/06/01/returned-exit-code-not-0/\"\u003e原因\u003c/a\u003e）；\u003c/li\u003e\n\u003cli\u003e和交叉引用中遇到的问题一样，使用 \u003ccode\u003eanimate\u003c/code\u003e 宏包创建动画，也需要两次编译（第一次创建 JavaScript 内容，第二次在具体位置插入内容）。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003eanimate\u003c/code\u003e 宏包支持不少参数。不过，仅有 \u003ccode\u003edvipdfmx\u003c/code\u003e 和 \u003ccode\u003exetex\u003c/code\u003e 两个驱动选项只能在载入宏包时使用——而其中仅有 \u003ccode\u003edvipdfmx\u003c/code\u003e 是必须的。宏包支持的其他参数，具体的命令、环境也都支持。若是在载入宏包是提供这些参数，相当于给命令、环境设置了「默认值」。因此，这部分参数放在之后具体介绍。\u003c/p\u003e\n\u003ch2 id=\"使用-animate-宏包插入-GIF-动图——-animategraphics\"\u003e\u003ca href=\"#使用-animate-宏包插入-GIF-动图——-animategraphics\" class=\"headerlink\" title=\"使用 animate 宏包插入 GIF 动图——\\animategraphics\"\u003e\u003c/a\u003e使用 \u003ccode\u003eanimate\u003c/code\u003e 宏包插入 GIF 动图——\u003ccode\u003e\\animategraphics\u003c/code\u003e\u003c/h2\u003e\u003cp\u003e\u003ccode\u003eanimate\u003c/code\u003e 提供了 \u003ccode\u003e\\animategraphics\u003c/code\u003e 命令，用于插入「一系列」的图片，而后将他们组成动画——相当于插入了动图。\u003c/p\u003e\n\u003cp\u003e具体来说，其命令是\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\animategraphics\u003c/span\u003e[\u0026lt;options\u0026gt;]{\u0026lt;frame rate\u0026gt;}{\u0026lt;file basename\u0026gt;}{\u0026lt;first\u0026gt;}{\u0026lt;last\u0026gt;}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e此处 \u003ccode\u003eoptions\u003c/code\u003e 是命令的参数，主要用于控制动画的各种效果，具体参数将在下一节中介绍。先前我们讲过这部分参数大都也可用于宏包选项。\u003ccode\u003eframe rate\u003c/code\u003e 的单位是 Hz，表示 1 秒钟内，「放映」多少帧。\u003c/p\u003e\n\u003cp\u003e前面说该命令用于插入一系列图片，\u003ccode\u003eanimate\u003c/code\u003e 宏包要求这一系列图片有共同的文件名前缀，而后以数字编号表述其顺序。\u003ccode\u003efile basename\u003c/code\u003e 选项用于记录该前缀；\u003ccode\u003efirst\u003c/code\u003e 和 \u003ccode\u003elast\u003c/code\u003e 则是这一系列图片编号的起止。\u003c/p\u003e\n\u003cp\u003e关于文件名后缀，\u003ccode\u003eanimate\u003c/code\u003e 也做了具体要求。首先，\u003ccode\u003eanimate\u003c/code\u003e 要求插入的图片，\u003cstrong\u003e后缀名必须是小写\u003c/strong\u003e。其次，\u003ccode\u003eanimate\u003c/code\u003e 对文件搜索顺序做了规定（实际上是 \u003ccode\u003egraphicx\u003c/code\u003e 的规定）：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003epdfLaTeX / LuaLaTeX：\u003ccode\u003epdf\u003c/code\u003e, \u003ccode\u003emps\u003c/code\u003e, \u003ccode\u003epng\u003c/code\u003e, \u003ccode\u003ejpg\u003c/code\u003e, \u003ccode\u003ejpeg\u003c/code\u003e, \u003ccode\u003ejbig2\u003c/code\u003e, \u003ccode\u003ejb2\u003c/code\u003e, \u003ccode\u003ejp2\u003c/code\u003e, \u003ccode\u003ej2k\u003c/code\u003e, \u003ccode\u003ejpx\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eXeLaTeX / LaTeX -\u0026gt; dvipdfmx：\u003ccode\u003epdf\u003c/code\u003e, \u003ccode\u003emps\u003c/code\u003e, \u003ccode\u003eeps\u003c/code\u003e, \u003ccode\u003eps\u003c/code\u003e, \u003ccode\u003epng\u003c/code\u003e, \u003ccode\u003ejpg\u003c/code\u003e, \u003ccode\u003ejpeg\u003c/code\u003e, \u003ccode\u003ebmp\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eLaTeX -\u0026gt; dvips -\u0026gt; ps2pdf：\u003ccode\u003eeps\u003c/code\u003e, \u003ccode\u003emps\u003c/code\u003e, \u003ccode\u003eps\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e注意到两件事情：一，上述后缀名中没有 \u003ccode\u003egif\u003c/code\u003e，这意味着不能直接插入 GIF 格式的动图；二，前面提到，使用 \u003ccode\u003eanimate\u003c/code\u003e 宏包插入动图实际是插入一系列的图片，这意味着我们需要将 GIF 格式的动图，预先转换成一系列符合要求的格式之图片。\u003c/p\u003e\n\u003cp\u003e转换格式需要用到 \u003ca target=\"_blank\" rel=\"noopener\" href=\"//www.imagemagick.org/script/index.php\"\u003eImageMagick\u003c/a\u003e 这一开源的工具。安装它，Mac 用户可以使用 \u003ccode\u003ebrew install ImageMagick\u003c/code\u003e，Linux 用户可以使用各自的包管理器，Windows 用户则需要\u003ca target=\"_blank\" rel=\"noopener\" href=\"//www.imagemagick.org/script/download.php#windows\"\u003e下载\u003c/a\u003e安装。\u003c/p\u003e\n\u003cp\u003e安装好 \u003ccode\u003eImageMagick\u003c/code\u003e 之后，我们就可以用它提供的 \u003ccode\u003econvert\u003c/code\u003e 命令将 GIF 格式的动图逐帧地切分成一系列图片了。假设你的目标图片是 \u003ccode\u003efoo.gif\u003c/code\u003e，那么使用如下命令可以得到一系列图片：\u003ccode\u003efoo-0.png\u003c/code\u003e, \u003ccode\u003efoo-1.png\u003c/code\u003e, \u003ccode\u003efoo-2.png\u003c/code\u003e, ...\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003econvert foo.gif -coalesce foo.png\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e而后，我们就可以用 \u003ccode\u003eanimate\u003c/code\u003e 提供的 \u003ccode\u003e\\animategraphics\u003c/code\u003e 命令插入动图了。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\documentclass\u003c/span\u003e{article}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{graphicx}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{animate}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\animategraphics\u003c/span\u003e{24}{foo-}{0}{300}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/LaTeX/Convolution_of_spiky_function_with_box2.gif\"/\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e图片引用自 \u003ca target=\"_blank\" rel=\"noopener\" href=\"//zh.wikipedia.org/wiki/%E5%8D%B7%E7%A7%AF\"\u003eWikipedia\u003c/a\u003e。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"animate-选项\"\u003e\u003ca href=\"#animate-选项\" class=\"headerlink\" title=\"animate 选项\"\u003e\u003c/a\u003e\u003ccode\u003eanimate\u003c/code\u003e 选项\u003c/h2\u003e\u003cp\u003e\u003ccode\u003eanimate\u003c/code\u003e 宏包提供的选项，按照适用范围可以分为三类：只能用于宏包的选项、只能用于接口的选项（命令和环境）、二者皆适用的选项。现分别介绍。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e这里仅介绍其中重要的部分，未尽之详细，请参考 \u003ccode\u003eanimate\u003c/code\u003e 的宏包文档。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"只能用于宏包的选项\"\u003e\u003ca href=\"#只能用于宏包的选项\" class=\"headerlink\" title=\"只能用于宏包的选项\"\u003e\u003c/a\u003e只能用于宏包的选项\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e\u003ccode\u003edvipdfmx\u003c/code\u003e：驱动选项，表示用户希望使用 LaTeX -\u0026gt; dvipdfmx 进行编译。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003exetex\u003c/code\u003e：驱动选项，表示用户希望使用 XeLaTeX -\u0026gt; xdvipdfmx 进行编译。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"只能用于接口的选项\"\u003e\u003ca href=\"#只能用于接口的选项\" class=\"headerlink\" title=\"只能用于接口的选项\"\u003e\u003c/a\u003e只能用于接口的选项\u003c/h3\u003e\u003cp\u003e这里的接口指的是 \u003ccode\u003eanimate\u003c/code\u003e 宏包提供的用户接口。例如我们已经见过的 \u003ccode\u003e\\animategraphics\u003c/code\u003e 命令，以及下一节会介绍的 \u003ccode\u003eanimateinline\u003c/code\u003e 环境。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003elabel=\u0026lt;label text\u0026gt;\u003c/code\u003e：为 \u003ccode\u003eanimate\u003c/code\u003e 对象指定唯一的标签，可用于之后的 JavaScript 控制。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eevery=\u0026lt;num\u0026gt;\u003c/code\u003e：只为每个第 \u003ccode\u003e\u0026lt;num\u0026gt;\u003c/code\u003e 帧构建动画，而忽略剩余的帧。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"二者皆适用的选项\"\u003e\u003ca href=\"#二者皆适用的选项\" class=\"headerlink\" title=\"二者皆适用的选项\"\u003e\u003c/a\u003e二者皆适用的选项\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e\u003ccode\u003etype=\u0026lt;type name\u0026gt;\u003c/code\u003e：使用指定的图片类型（而不按照前面提到的顺序搜索）。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eposter[= first | \u0026lt;num\u0026gt; | last | none]\u003c/code\u003e：指定用于打印和默认展示的动画帧，默认是第一帧。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eautopause\u003c/code\u003e：当动画所在页不再呈现时，自动暂停动画。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eautoresume\u003c/code\u003e：当被暂停的动画重新呈现时，自动恢复播放。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eautoplay\u003c/code\u003e：当动画所在页在 PDF 阅读器中呈现时，自动播放动画。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eloop\u003c/code\u003e：播放到最后一帧时，从第一帧开始继续播放；如此往复。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epalindrome\u003c/code\u003e：播放到最后一帧时，逐帧倒退；如此往复。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003estep\u003c/code\u003e：忽略 \u003ccode\u003eframe rate\u003c/code\u003e，只在每次点击鼠标时播放一帧。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ewidth=\u0026lt;h-size\u0026gt;, height=\u0026lt;v-size\u0026gt;, totalheight=\u0026lt;v-size\u0026gt;, keepaspectratio\u003c/code\u003e：按绝对长度缩放动画的大小。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003escale=\u0026lt;factor\u0026gt;\u003c/code\u003e：按比例缩放动画的大小。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003econtrols\u003c/code\u003e：展示用于控制动画的按钮。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ebegin=\u0026lt;begin content\u0026gt;, end=\u0026lt;end content\u0026gt;\u003c/code\u003e：仅用于 \u003ccode\u003eanimateinline\u003c/code\u003e 环境，在每一帧的内容前后添加相应内容。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"使用-animate-插入用户绘制的动画——animateinline-环境\"\u003e\u003ca href=\"#使用-animate-插入用户绘制的动画——animateinline-环境\" class=\"headerlink\" title=\"使用 animate 插入用户绘制的动画——animateinline 环境\"\u003e\u003c/a\u003e使用 \u003ccode\u003eanimate\u003c/code\u003e 插入用户绘制的动画——\u003ccode\u003eanimateinline\u003c/code\u003e 环境\u003c/h2\u003e\u003cp\u003e之前我们介绍了如何使用 ImageMagick 拆分 GIF 动图，而后用 \u003ccode\u003e\\animategraphics\u003c/code\u003e 将拆分得到的一系列图片在 LaTeX 中插入 PDF 文档，变成动画。然而，这可能存在几个问题\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e从它处获取的 GIF 动图可能侵犯他人版权；\u003c/li\u003e\n\u003cli\u003e自行制作 GIF 动图成本较高——不如直接用 Ti\u003cem\u003ek\u003c/em\u003eZ 等工具绘制。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e因此，这就引出了更高级的主题：使用 \u003ccode\u003eanimate\u003c/code\u003e 宏包，插入用户自行绘制的动画。这需要引入一个新的用户接口——\u003ccode\u003eanimateinline\u003c/code\u003e 环境。它的语法是这样的：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{animateinline}[\u0026lt;options\u0026gt;]{\u0026lt;frame rate\u0026gt;}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e... typeset material ...\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\newframe\u003c/span\u003e[\u0026lt;frame rate\u0026gt;]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e... typeset material ...\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\newframe\u003c/span\u003e*[\u0026lt;frame rate\u0026gt;]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e... typeset material ...\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\newframe\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\multiframe\u003c/span\u003e{\u0026lt;number of frames\u0026gt;}{[\u0026lt;variables\u0026gt;]}{\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e... repeated (parameterized) material ... }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{animateinline}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e显而易见，\u003ccode\u003eanimateinline\u003c/code\u003e 环境的语法比 \u003ccode\u003e\\animategraphics\u003c/code\u003e 要复杂得多。不过，仔细看的话，其实是有相通之处的。\u003c/p\u003e\n\u003cp\u003e首先，和 \u003ccode\u003e\\animategraphics\u003c/code\u003e 命令一样，\u003ccode\u003eanimateinline\u003c/code\u003e 环境允许用户通过 \u003ccode\u003eoptions\u003c/code\u003e 和 \u003ccode\u003eframe rate\u003c/code\u003e 控制动画的基本行为。不同之处在于，\u003ccode\u003e\\animategraphics\u003c/code\u003e 的动画内容是固定死的——由图片提供，而 \u003ccode\u003eanimateinline\u003c/code\u003e 的动画内容则需要用户在 LaTeX 代码中逐帧绘制。因此，\u003ccode\u003eanimateinline\u003c/code\u003e 环境提供了三个命令来辅助和控制这些内容。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\\newframe\u003c/code\u003e 和 \u003ccode\u003e\\newframe*\u003c/code\u003e 的作用正如其名：结束上一帧并开始下一帧。唯一的不同在于，\u003ccode\u003e\\newframe\u003c/code\u003e 会立即开始下一帧，而 \u003ccode\u003e\\newframe*\u003c/code\u003e 则会暂停并等待用户的点击再开始下一帧。它们接受一个可选参数，以便在动画的中途改变 \u003ccode\u003eframe rate\u003c/code\u003e。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\\multiframe\u003c/code\u003e 则更为强大，它能提供类似循环的功能，并将「循环变量」传递到 \u003ccode\u003e\\multiframe\u003c/code\u003e 内部供内部绘图命令使用。具体来说，首先我们需要给出循环的次数 \u003ccode\u003enumber of frames\u003c/code\u003e，而后指定循环变量 \u003ccode\u003evariables\u003c/code\u003e。循环变量的书写格式如下\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u0026lt;variable name\u0026gt;=\u0026lt;initial value\u0026gt;+\u0026lt;increment\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e这里，\u003ccode\u003evariable name\u003c/code\u003e 由若干个字母组成，不含 LaTeX 命令的反斜线。需要注意的是，\u003ccode\u003evariable name\u003c/code\u003e 的首字母是有意义的，它决定了变量的类型。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e整数：\u003ccode\u003ei\u003c/code\u003e, \u003ccode\u003eI\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e浮点数：\u003ccode\u003en\u003c/code\u003e, \u003ccode\u003eN\u003c/code\u003e, \u003ccode\u003er\u003c/code\u003e, \u003ccode\u003eR\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e长度：\u003ccode\u003ed\u003c/code\u003e, \u003ccode\u003eD\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003einitial value\u003c/code\u003e 表示循环变量的初始值，而 \u003ccode\u003eincrement\u003c/code\u003e 表示循环变量在每次循环末尾自增的值。\u003c/p\u003e\n\u003cp\u003e因此，我们可以写出如下代码\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\multiframe\u003c/span\u003e{10}{iAngle=0+10, dLineWidth=3pt+-0.1pt}{\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e... repeated (parameterized) material ... }\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e这样，循环会执行 10 次，同时带有两个循环变量：整型变量 \u003ccode\u003eiAngle\u003c/code\u003e 和 \u003ccode\u003edLineWidth\u003c/code\u003e。前者从 \u003ccode\u003e0\u003c/code\u003e 开始，每次增加 \u003ccode\u003e10\u003c/code\u003e；后者从 \u003ccode\u003e3pt\u003c/code\u003e 开始，每次减少 \u003ccode\u003e0.1pt\u003c/code\u003e。而后，在循环体中（\u003ccode\u003e\\multiframe\u003c/code\u003e 命令的内部），我们就可以使用 \u003ccode\u003e\\iAngle\u003c/code\u003e 和 \u003ccode\u003e\\dLineWidth\u003c/code\u003e 获得循环变量的值了。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e35\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e36\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e37\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e38\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e39\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e40\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e41\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e42\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e43\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e44\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e45\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e46\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e47\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e48\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e49\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e50\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e51\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e52\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e53\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e54\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e55\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e56\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e57\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e58\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e59\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e60\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e61\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e62\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e63\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e64\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e65\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e66\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e67\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e68\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e69\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e70\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e71\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e72\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e73\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e74\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e75\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e76\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e77\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e78\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e79\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\documentclass\u003c/span\u003e{article}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{graphicx}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{animate}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{tikz}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usetikzlibrary\u003c/span\u003e{positioning}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\tikzset\u003c/span\u003e{global scale/.style={\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    scale=\u003cspan class=\"params\"\u003e#1\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    every node/.append style={scale=\u003cspan class=\"params\"\u003e#1\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\tikzset\u003c/span\u003e{global xscale/.style={\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    xscale=\u003cspan class=\"params\"\u003e#1\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    every node/.append style={xscale=\u003cspan class=\"params\"\u003e#1\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\tikzset\u003c/span\u003e{global yslant/.style={\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    yslant=\u003cspan class=\"params\"\u003e#1\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    every node/.append style={yslant=\u003cspan class=\"params\"\u003e#1\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\newcommand\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\twodimdrawcontent\u003c/span\u003e}[2]{\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\useasboundingbox\u003c/span\u003e (0, -6) rectangle (16.1, 3);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{scope}[global yslant = -0.6, xshift = 1cm, yshift = -1cm]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\node\u003c/span\u003e (A) at (0, 0) {};\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\node\u003c/span\u003e (B) at (3, 0) {};\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\node\u003c/span\u003e (C) at (3, 3) {};\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\node\u003c/span\u003e (D) at (0, 3) {};\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\draw\u003c/span\u003e (0,0) grid (3,3);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{scope}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\node\u003c/span\u003e[anchor = north, xscale = 2] at (2, -5) {Kernel};\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{scope}[xshift = 6cm, global yslant = -0.6, yshift = -2cm]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\node\u003c/span\u003e (E) at (0cm + \u003cspan class=\"params\"\u003e#1\u003c/span\u003ecm, 2cm - \u003cspan class=\"params\"\u003e#2\u003c/span\u003ecm) {};\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\node\u003c/span\u003e (F) at (3cm + \u003cspan class=\"params\"\u003e#1\u003c/span\u003ecm, 2cm - \u003cspan class=\"params\"\u003e#2\u003c/span\u003ecm) {};\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\node\u003c/span\u003e (G) at (3cm + \u003cspan class=\"params\"\u003e#1\u003c/span\u003ecm, 5cm - \u003cspan class=\"params\"\u003e#2\u003c/span\u003ecm) {};\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\node\u003c/span\u003e (H) at (0cm + \u003cspan class=\"params\"\u003e#1\u003c/span\u003ecm, 5cm - \u003cspan class=\"params\"\u003e#2\u003c/span\u003ecm) {};\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\draw\u003c/span\u003e[fill, blue!20] (0cm + \u003cspan class=\"params\"\u003e#1\u003c/span\u003ecm, 2cm - \u003cspan class=\"params\"\u003e#2\u003c/span\u003ecm) rectangle (3cm + \u003cspan class=\"params\"\u003e#1\u003c/span\u003ecm, 5cm - \u003cspan class=\"params\"\u003e#2\u003c/span\u003ecm);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\draw\u003c/span\u003e[fill, blue!50] (1cm + \u003cspan class=\"params\"\u003e#1\u003c/span\u003ecm, 3cm - \u003cspan class=\"params\"\u003e#2\u003c/span\u003ecm) rectangle (2cm + \u003cspan class=\"params\"\u003e#1\u003c/span\u003ecm, 4cm - \u003cspan class=\"params\"\u003e#2\u003c/span\u003ecm);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\draw\u003c/span\u003e (0,0) grid (5,5);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{scope}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\node\u003c/span\u003e[anchor = north, xshift = 6cm, xscale = 2] at (2, -5) {Input};\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{scope}[xshift = 12cm, global yslant = -0.6, xshift = 1cm, yshift = -1cm]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\node\u003c/span\u003e (I) at (0.5cm + \u003cspan class=\"params\"\u003e#1\u003c/span\u003ecm, 2.5cm - \u003cspan class=\"params\"\u003e#2\u003c/span\u003ecm) {};\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\draw\u003c/span\u003e[fill, red!20] (0cm + \u003cspan class=\"params\"\u003e#1\u003c/span\u003ecm, 2cm - \u003cspan class=\"params\"\u003e#2\u003c/span\u003ecm) rectangle (1cm + \u003cspan class=\"params\"\u003e#1\u003c/span\u003ecm, 3cm - \u003cspan class=\"params\"\u003e#2\u003c/span\u003ecm);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\draw\u003c/span\u003e (0,0) grid (3, 3);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{scope}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\node\u003c/span\u003e[anchor = north, xshift = 12cm, xscale = 2] at (2, -5) {Output};\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\draw\u003c/span\u003e[dashed, blue] (A.center) -- (E.center);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\draw\u003c/span\u003e[dashed, blue] (B.center) -- (F.center);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\draw\u003c/span\u003e[dashed, blue] (C.center) -- (G.center);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\draw\u003c/span\u003e[dashed, blue] (D.center) -- (H.center);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\draw\u003c/span\u003e[dashed, red] (E.center) -- (I.center);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\draw\u003c/span\u003e[dashed, red] (F.center) -- (I.center);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\draw\u003c/span\u003e[dashed, red] (G.center) -- (I.center);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\draw\u003c/span\u003e[dashed, red] (H.center) -- (I.center);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{animateinline}[\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    loop,autopause,controls,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    buttonsize=1.2em,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    buttonbg=0.6:0.6:1,buttonfg=0.2:0.2:1,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    begin={\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{tikzpicture}[global scale = 0.7, global xscale = 0.5, on grid]},\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    end={\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{tikzpicture}}]{1.8}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\multiframe\u003c/span\u003e{3}{icol=0+1}{\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      \u003cspan class=\"keyword\"\u003e\\xdef\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\icol\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\icol\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      \u003cspan class=\"keyword\"\u003e\\xdef\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\irow\u003c/span\u003e{0}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      \u003cspan class=\"keyword\"\u003e\\whiledo\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\lengthtest\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\irow\u003c/span\u003e sp \u0026lt; 2sp}}{\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003e\\twodimdrawcontent\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\irow\u003c/span\u003e}{\u003cspan class=\"keyword\"\u003e\\icol\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003e\\newframe\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003e\\pgfmathsetmacro\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\irow\u003c/span\u003e}{\u003cspan class=\"keyword\"\u003e\\irow\u003c/span\u003e + 1}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003e\\xdef\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\irow\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\irow\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      \u003cspan class=\"keyword\"\u003e\\twodimdrawcontent\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\irow\u003c/span\u003e}{\u003cspan class=\"keyword\"\u003e\\icol\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{animateinline}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e绘图的核心代码定义在 \u003ccode\u003e\\twodimdrawcontent\u003c/code\u003e 这一命令当中。该命令的内容完全是 Ti\u003cem\u003ek\u003c/em\u003eZ 的语法，不在此篇的涵盖范畴中。因此不表。唯一需要注意的是，我们使用了 \u003ccode\u003e\\useasboundingbox (0, -6) rectangle (16.1, 3);\u003c/code\u003e 限定每一个动画帧的大小。这是因为 \u003ccode\u003eanimateinline\u003c/code\u003e 会根据第一帧的大小来确定动画的大小；若是每一帧大小不同，则可能出现某些帧显示不全的现象。\u003c/p\u003e\n\u003cp\u003e我们仔细看 \u003ccode\u003eanimateinline\u003c/code\u003e 环境中的参数。\u003ccode\u003eloop\u003c/code\u003e, \u003ccode\u003eautopause\u003c/code\u003e, \u003ccode\u003econtrols\u003c/code\u003e 我们很熟悉了；\u003ccode\u003ebuttomsize\u003c/code\u003e, \u003ccode\u003ebuttonbg\u003c/code\u003e, \u003ccode\u003ebuttonfg\u003c/code\u003e 顾名思义，是用来调整按钮的样式的；\u003ccode\u003ebegin\u003c/code\u003e 和 \u003ccode\u003eend\u003c/code\u003e 则在每一帧的内容前后加上了 \u003ccode\u003etikzpicture\u003c/code\u003e 环境。这样，我们可以直接使用 \u003ccode\u003e\\twodimdrawcontent\u003c/code\u003e 来绘制动画帧。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eanimateinline\u003c/code\u003e 环境的帧率（frame rate）是 1.8，这意味着每秒会播放 1.8 个动画帧（每 5 秒播放 9 帧）。具体的动画帧内容，则由 \u003ccode\u003e\\multiframe\u003c/code\u003e 给出。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\\multiframe\u003c/code\u003e 循环 3 次，对应循环变量为 \u003ccode\u003eicol\u003c/code\u003e。这是一个整型变量，从 0 开始每次自增 1。在循环体内，我们首先定义 \u003ccode\u003e\\xdef\\icol{\\icol}\u003c/code\u003e；这是因为，\u003ccode\u003e\\multiframe\u003c/code\u003e 给出的循环变量，若直接传给 \u003ccode\u003e\\twodimdrawcontent\u003c/code\u003e 则无法正确展开。随后我们将 \u003ccode\u003e\\irow\u003c/code\u003e 定义为 0。接下来，我们使用 \u003ccode\u003e\\whiledo\u003c/code\u003e 的循环。此处不使用 \u003ccode\u003e\\multiframe\u003c/code\u003e 的原因是它无法嵌套。这一循环的变量是 \u003ccode\u003e\\irow\u003c/code\u003e。它从 0 开始，每次循环末尾由 \u003ccode\u003e\\pgfmathsetmacro{\\irow}{\\irow + 1}\u003c/code\u003e, \u003ccode\u003e\\xdef\\irow{\\irow}\u003c/code\u003e 自增 1。\u003ccode\u003e\\whiledo\u003c/code\u003e 循环两次，内部用 \u003ccode\u003e\\twodimdrawcontent{\\irow}{\\icol}\u003c/code\u003e, \u003ccode\u003e\\newframe\u003c/code\u003e 制作出一帧动画。最后在 \u003ccode\u003e\\whiledo\u003c/code\u003e 循环的外部，画出第三帧。\u003c/p\u003e\n\u003cp\u003e如此，就能得到我们在\u003ca href=\"/2017/07/27/convolutions-and-convolution-neural-network/\"\u003e前文\u003c/a\u003e中的动画效果了。\u003c/p\u003e\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/MachineLearning/convolutions_on_images.gif\"/\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e偏好使用 PSTricks 的用户，可以参考 \u003ccode\u003eanimate\u003c/code\u003e 宏包文档里的示例。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"一点彩蛋\"\u003e\u003ca href=\"#一点彩蛋\" class=\"headerlink\" title=\"一点彩蛋\"\u003e\u003c/a\u003e一点彩蛋\u003c/h2\u003e\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\documentclass\u003c/span\u003e{article}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{graphicx}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{animate}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\newcommand\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\myemph\u003c/span\u003e}[1]{\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{animateinline}[autoplay, loop]{.5}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\emph\u003c/span\u003e{\u003cspan class=\"params\"\u003e#1\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\newframe\u003c/span\u003e[1.5]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\relax\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{animateinline}}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eThis is \u003cspan class=\"keyword\"\u003e\\myemph\u003c/span\u003e{important}!\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n    \u003c/div\u003e",
  "Date": "2017-08-10T09:40:13Z",
  "Author": "Liam Huang"
}