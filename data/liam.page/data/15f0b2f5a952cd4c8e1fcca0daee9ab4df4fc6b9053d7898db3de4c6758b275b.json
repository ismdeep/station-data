{
  "Source": "liam.page",
  "Title": "LaTeX 黑魔法（七）：TeX 中作为参数的 dimen 和 skip",
  "Link": "https://liam.page/2018/12/10/dimen-and-skip-as-argument-in-TeX/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003e接触 TeX 稍久的用户，应该多少都接触过 \u003ccode\u003e\\kern\u003c/code\u003e 和 \u003ccode\u003e\\hskip\u003c/code\u003e 两个命令。那么不知你是否会好奇，TeX 是如何获取它们的参数的呢？要知道，像 \u003ccode\u003eI\\kern37ptlike\\hskip100ptcake\u003c/code\u003e 这种看上去奇奇怪怪的写法，能正常工作，但 \u003ccode\u003e\\hskip 2pt minuscule chances of error\u003c/code\u003e 这种看起来正常的写法却会报错。\u003c/p\u003e\n\u003cp\u003e此篇介绍一下 TeX 中作为参数的 dimen 和 skip。\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003ch2 id=\"作为参数的-dimen\"\u003e\u003ca href=\"#作为参数的-dimen\" class=\"headerlink\" title=\"作为参数的 dimen\"\u003e\u003c/a\u003e作为参数的 dimen\u003c/h2\u003e\u003cp\u003e命令 \u003ccode\u003e\\kern\u003c/code\u003e 的参数是 ⟨dimen⟩，因此我们以它为例。具体来说，TeX 在读入 \u003ccode\u003e\\kern\u003c/code\u003e 这个 token 之后，会先去寻找一个十进制分数（⟨decimal number⟩），而后寻找合法的单位（⟨unit of measure⟩）。在十进制分数和单位之间的空格都会被忽略。在单位之后，则有一个可选空格。\u003c/p\u003e\n\u003cp\u003e这里，十进制分数可以是：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e任意在 TeX 中合法的整数；\u003c/li\u003e\n\u003cli\u003e任意合法的十进制分数（以句点或逗号作为整数与小数部分的分隔）。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e特别说明一下以逗号作为整数与小数部分的分隔的问题。在中国，大多数时候，我们都以句点作为小数点，来分隔十进制分数的整数与小数部分；例如 \u003ccode\u003e1.25\u003c/code\u003e。同时，逗号通常用于大数记录时的千分标记；例如 \u003ccode\u003e1, 000.25\u003c/code\u003e。但是，在部分国家（例如法国和德国），在表示十进制分数时，句点和逗号的用法正好颠倒。因此，\u003ccode\u003e1, 000.25\u003c/code\u003e 在法国和德国记作 \u003ccode\u003e1. 000,25\u003c/code\u003e。有趣的是，\u003ccode\u003e\\kern , pt\u003c/code\u003e 是一个合法的铅空。它会产生一个宽度为 \u003ccode\u003e0pt\u003c/code\u003e 的铅空。这是因为，逗号在此被当做是小数点。而小数点前后的数字是零时，是可以省略的。\u003c/p\u003e\n\u003cp\u003e这里的单位，指得是 TeX 接受的，以两个字符表达的长度单位。包括：\u003ccode\u003ept\u003c/code\u003e, \u003ccode\u003ecm\u003c/code\u003e, \u003ccode\u003emm\u003c/code\u003e, \u003ccode\u003ein\u003c/code\u003e, \u003ccode\u003edd\u003c/code\u003e, \u003ccode\u003epc\u003c/code\u003e, \u003ccode\u003ecc\u003c/code\u003e, \u003ccode\u003ebp\u003c/code\u003e, \u003ccode\u003esp\u003c/code\u003e, \u003ccode\u003eem\u003c/code\u003e, \u003ccode\u003eex\u003c/code\u003e。对于 pdfTeX 来说，还包括 \u003ccode\u003epx\u003c/code\u003e。如果 TeX 在读入一个合法的十进制分数之后，没有找到合法的单位，则会报错：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e! Illegal unit of measure (pt inserted).\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e因此，\u003ccode\u003e\\kern37ptlike\u003c/code\u003e 是合法的。它与 \u003ccode\u003e\\kern 37 pt like\u003c/code\u003e 等价。\u003c/p\u003e\n\u003ch2 id=\"作为参数的-skip\"\u003e\u003ca href=\"#作为参数的-skip\" class=\"headerlink\" title=\"作为参数的 skip\"\u003e\u003c/a\u003e作为参数的 skip\u003c/h2\u003e\u003cp\u003e命令 \u003ccode\u003e\\hskip\u003c/code\u003e 的参数是 ⟨skip⟩，因此我们以它为例。具体来说，TeX 在读入 \u003ccode\u003e\\hskip\u003c/code\u003e 这个 token 之后，会先和上述步骤一样，寻找一个 ⟨dimen⟩，作为 ⟨skip⟩ 的自然长度。而后，TeX 会在展开得到的 token list 当中继续寻找 \u003ccode\u003eplus\u003c/code\u003e。如果 TeX 找到了 \u003ccode\u003eplus\u003c/code\u003e，则 TeX 又会去寻找一个 ⟨dimen⟩。不过，此时十进制分数之后，除了长度单位，还可以是 \u003ccode\u003efil\u003c/code\u003e, \u003ccode\u003efill\u003c/code\u003e 或者 \u003ccode\u003efilll\u003c/code\u003e。其中 \u003ccode\u003efil(|l|ll)\u003c/code\u003e 之后的可选空格会被忽略。特别地，如果没有找到 \u003ccode\u003eplus\u003c/code\u003e，TeX 也会继续寻找 \u003ccode\u003eminus\u003c/code\u003e。找到 \u003ccode\u003eminus\u003c/code\u003e 之后的规则，就跟 \u003ccode\u003eplus\u003c/code\u003e 的情况一样了。\u003c/p\u003e\n\u003cp\u003e因此，在 \u003ccode\u003e\\hskip 2pt minuscule chances of errors\u003c/code\u003e 这个例子中，TeX 读入 \u003ccode\u003e2pt\u003c/code\u003e 作为 \u003ccode\u003e\\hskip\u003c/code\u003e 的自然长度。而后，尽管没有找到 \u003ccode\u003eplus\u003c/code\u003e，但找到了 \u003ccode\u003eminus\u003c/code\u003e——它藏在 \u003ccode\u003eminuscule\u003c/code\u003e 这个单词中。很不幸，此时在 \u003ccode\u003eminus\u003c/code\u003e 之后没有一个合法的 ⟨dimen⟩，于是 TeX 会报错。如果你不了解 TeX 读入 ⟨skip⟩ 的规则，那这种报错还是蛮令人挠头的。\u003c/p\u003e\n\u003cp\u003e为了避免这些问题，在 ⟨skip⟩ 之后，果断地加一个 \u003ccode\u003e\\relax\u003c/code\u003e 总归是个好主意。\u003c/p\u003e\n\u003ch2 id=\"bonus-奇怪的-fil-l-ll\"\u003e\u003ca href=\"#bonus-奇怪的-fil-l-ll\" class=\"headerlink\" title=\"bonus! 奇怪的 fil(|l|ll)\"\u003e\u003c/a\u003ebonus! 奇怪的 \u003ccode\u003efil(|l|ll)\u003c/code\u003e\u003c/h2\u003e\u003cp\u003e首先我们来看一个例子。你认为下面的写法是合法的吗？\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\hskip\u003c/span\u003e 0pt plus 1 fil L l minus 2 fiLL\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e答案是合法的……\u003c/p\u003e\n\u003cp\u003e事实上，\u003ccode\u003efill\u003c/code\u003e 和 \u003ccode\u003efilll\u003c/code\u003e 并不是 TeX 的关键字。真实情况是，\u003ccode\u003efil\u003c/code\u003e 和 \u003ccode\u003el\u003c/code\u003e 是 TeX 关键字。而 TeX 在读入 \u003ccode\u003efil\u003c/code\u003e 之后，会尝试继续寻找 \u003ccode\u003el\u003c/code\u003e 这个关键字。如果找到了，就拼在一起，作为弹力更大的弹簧。此外，TeX 的关键字是不区分大小写的。\u003c/p\u003e\n\u003cp\u003e因此，\u003ccode\u003efil L l\u003c/code\u003e 就相当于 \u003ccode\u003efilll\u003c/code\u003e；而 \u003ccode\u003efiLL\u003c/code\u003e 就相当于是 \u003ccode\u003efill\u003c/code\u003e。也因此，如果你不了解这一点，下面的例子可能会让你很伤脑筋——\u003ccode\u003eLet\u0026#39;s Go\u003c/code\u003e 当中的 \u003ccode\u003eL\u003c/code\u003e 怎么不输出了？\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\hskip\u003c/span\u003e 0pt plus 1fil Let\u0026#39;s go\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e通常，我们（雾）把这种情况称之为「神秘的 L」。\u003ccode\u003e←_←\u003c/code\u003e\u003c/p\u003e\n\n    \u003c/div\u003e",
  "Date": "2018-12-10T02:32:37Z",
  "Author": "Liam Huang"
}