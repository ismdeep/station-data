{
  "Source": "liam.page",
  "Title": "【Life on Python】批量切割图片",
  "Link": "https://liam.page/2014/01/27/Py-Incise-Images/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003e按照 \u003ccode\u003ehorizon\u003c/code\u003e 和 \u003ccode\u003evertic\u003c/code\u003e 两个变量切割当前目录下所有图片（包括子目录）。\u003c/p\u003e\n\u003cp\u003e代码很简单，就不封装了。\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e Image \u003cspan class=\"keyword\"\u003eas\u003c/span\u003e img\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e os\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eimgTypes = [\u003cspan class=\"string\"\u003e\u0026#39;.png\u0026#39;\u003c/span\u003e,\u003cspan class=\"string\"\u003e\u0026#39;.jpg\u0026#39;\u003c/span\u003e,\u003cspan class=\"string\"\u003e\u0026#39;.bmp\u0026#39;\u003c/span\u003e]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehorizon = \u003cspan class=\"number\"\u003e8\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003evertic  = \u003cspan class=\"number\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003efor\u003c/span\u003e root, dirs, files \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e os.walk(\u003cspan class=\"string\"\u003e\u0026#39;.\u0026#39;\u003c/span\u003e):\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003efor\u003c/span\u003e currentFile \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e files:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        crtFile = root + \u003cspan class=\"string\"\u003e\u0026#39;\\\\\u0026#39;\u003c/span\u003e + currentFile\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e crtFile[crtFile.rindex(\u003cspan class=\"string\"\u003e\u0026#39;.\u0026#39;\u003c/span\u003e):].lower() \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e imgTypes:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            crtIm = img.\u003cspan class=\"built_in\"\u003eopen\u003c/span\u003e(crtFile)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            crtW, crtH = crtIm.size\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            hStep = crtW // horizon\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            vStep = crtH // vertic\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            \u003cspan class=\"keyword\"\u003efor\u003c/span\u003e i \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"built_in\"\u003erange\u003c/span\u003e(vertic):\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                \u003cspan class=\"keyword\"\u003efor\u003c/span\u003e j \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"built_in\"\u003erange\u003c/span\u003e(horizon):\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    crtOutFileName = crtFile[:crtFile.rindex(\u003cspan class=\"string\"\u003e\u0026#39;.\u0026#39;\u003c/span\u003e)] + \\\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        \u003cspan class=\"string\"\u003e\u0026#39;_\u0026#39;\u003c/span\u003e + \u003cspan class=\"built_in\"\u003estr\u003c/span\u003e(i) + \u003cspan class=\"string\"\u003e\u0026#39;_\u0026#39;\u003c/span\u003e + \u003cspan class=\"built_in\"\u003estr\u003c/span\u003e(j)\\\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        + crtFile[crtFile.rindex(\u003cspan class=\"string\"\u003e\u0026#39;.\u0026#39;\u003c/span\u003e):].lower()\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    box = (j * hStep, i * vStep, (j + \u003cspan class=\"number\"\u003e1\u003c/span\u003e) * hStep, (i + \u003cspan class=\"number\"\u003e1\u003c/span\u003e) * vStep)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    cropped = crtIm.crop(box)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                    cropped.save(crtOutFileName)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n    \u003c/div\u003e",
  "Date": "2014-01-26T16:00:00Z",
  "Author": "Liam Huang"
}