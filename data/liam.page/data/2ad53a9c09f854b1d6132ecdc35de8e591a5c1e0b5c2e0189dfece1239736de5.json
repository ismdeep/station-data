{
  "Source": "liam.page",
  "Title": "三门问题的数学原理及模拟实验",
  "Link": "https://liam.page/2018/02/26/Monty-Hall-problem/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003e三门问题是一个源自博弈论的数学游戏。三门问题的等价问题出现的很早，三囚犯问题至少在 1959 年马丁·加德纳的《数学游戏》专栏中就已有阐述。但是让三门问题真正引起广泛讨论的，当属美国的电视游戏节目 \u003cem\u003eLet\u0026#39;s Make a Deal\u003c/em\u003e。因该节目的主持人名为蒙蒂·霍尔，故而该问题也称为「蒙蒂·霍尔问题」。问题的描述大致如下：\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e参赛者会看见三扇关闭了的门，其中一扇的后面有汽车，选中后面有汽车的那扇门就可以赢得该汽车，而另外两扇门后面则各藏有一只山羊。当参赛者选定了一扇门，但未去开启它的时候，节目主持人开启剩下两扇门的其中一扇，露出其中一只山羊。主持人其后会问参赛者要不要换另一扇仍然关上的门。问题是：换另一扇门会否增加参赛者赢得汽车的机会率？\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e三门问题引起了广泛的讨论。例如在\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.guokr.com/post/9314/\"\u003e果壳网\u003c/a\u003e和\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://www.zhihu.com/search?q=%E4%B8%89%E9%97%A8%E9%97%AE%E9%A2%98\u0026amp;type=content\"\u003e知乎网\u003c/a\u003e上，你能找到大量相关讨论。\u003c/p\u003e\n\u003cp\u003e本文将尽可能清晰地对三门问题做完整讨论。\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003ch2 id=\"三门问题的概率表述\"\u003e\u003ca href=\"#三门问题的概率表述\" class=\"headerlink\" title=\"三门问题的概率表述\"\u003e\u003c/a\u003e三门问题的概率表述\u003c/h2\u003e\u003ch3 id=\"贝叶斯公式\"\u003e\u003ca href=\"#贝叶斯公式\" class=\"headerlink\" title=\"贝叶斯公式\"\u003e\u003c/a\u003e贝叶斯公式\u003c/h3\u003e\u003cp\u003e贝叶斯公式，是关于条件概率的公式。假设有事件 $A$ 和事件 $B$，它们地位等同。贝叶斯公式可以根据给定事件 $A$ 时事件 $B$ 的条件概率 $P(B\\mid A)$ 去计算给定事件 $B$ 时事件 $A$ 的条件概率 $P(A\\mid B)$；或者反过来。贝叶斯公式的数学表示是：\u003c/p\u003e\n\u003cp\u003e$$P(A\\mid B) = \\frac{P(A) P(B\\mid A)}{P(B)}.$$\u003c/p\u003e\n\u003cp\u003e其中，$P(A)$ 是事件 $A$ 的先验概率；$P(A\\mid B)$ 是给定事件 $B$ 时事件 $A$ 的条件概率，在此一般称为后验概率；$P(B)$ 是事件 $B$ 的先验概率，在此一般称为边缘概率；$P(B\\mid A)$ 是给定时间 $A$ 时事件 $B$ 的条件概率。\u003c/p\u003e\n\u003ch3 id=\"三门问题的概率建模\"\u003e\u003ca href=\"#三门问题的概率建模\" class=\"headerlink\" title=\"三门问题的概率建模\"\u003e\u003c/a\u003e三门问题的概率建模\u003c/h3\u003e\u003cp\u003e在三门问题中，若有以下定义：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e事件 $A$：参赛者选择的门后有汽车；\u003c/li\u003e\n\u003cli\u003e事件 $B$：主持人选择的门后有汽车。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e则，根据贝叶斯公式，有\u003c/p\u003e\n\u003cp\u003e$$P(A\\mid \\bar B) = \\frac{P(A) P(\\bar B\\mid A)}{P(\\bar B)}.$$\u003c/p\u003e\n\u003cp\u003e因此，问题转换为求解并判断后验概率 $P(A\\mid \\bar B)$：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e若 $P(A\\mid \\bar B) \u0026lt; \\frac{1}{2}$，则答案是「是」；\u003c/li\u003e\n\u003cli\u003e若 $P(A\\mid \\bar B) \\geqslant \\frac{1}{2}$，则答案是「否」。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e考虑 $P(\\bar B\\mid A)$ 表示已知参赛者选择的门后有汽车时，主持人选择的门后无汽车的概率，因为已知三扇门后只有一台汽车，因此 $P(\\bar B\\mid A)\\equiv 1$。又考虑到参赛者选择的门后有汽车的概率始终是 $P(A) = \\frac{1}{3}$，因此问题实质上是要看边缘概率 $P(\\bar B)$ 的值：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e若 $P(\\bar B) \u0026gt; \\frac{2}{3}$，则 $P(A\\mid \\bar B) \u0026lt; \\frac{1}{2}$，答案是「是」；\u003c/li\u003e\n\u003cli\u003e若 $P(\\bar B) \\leqslant \\frac{2}{3}$，则 $P(A\\mid \\bar B) \\geqslant \\frac{1}{2}$，答案是「否」。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"边缘概率-P-bar-B-之谜\"\u003e\u003ca href=\"#边缘概率-P-bar-B-之谜\" class=\"headerlink\" title=\"边缘概率 $P(\\bar B)$ 之谜\"\u003e\u003c/a\u003e边缘概率 $P(\\bar B)$ 之谜\u003c/h2\u003e\u003ch3 id=\"两种答案\"\u003e\u003ca href=\"#两种答案\" class=\"headerlink\" title=\"两种答案\"\u003e\u003c/a\u003e两种答案\u003c/h3\u003e\u003cp\u003e关于三门问题，两种答案争执已久。归纳起来，可以是：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e既然主持人排除了一个错误选项，那么原始问题就变成了二选一的新问题，此时选哪个都一样，中奖概率都是 $\\frac{1}{2}$。因此答案是「否」。\u003c/li\u003e\n\u003cli\u003e三扇门的中奖概率都是 $\\frac{1}{3}$，参赛者选中的门的中奖概率自然也是 $\\frac{1}{3}$；而主持人选择的门打开后，$\\frac{1}{3}$ 就「跑到」另一扇门上去了，所以另一扇门的中奖概率是 $\\frac{2}{3}$。因此答案是「是」。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"暗藏的假设\"\u003e\u003ca href=\"#暗藏的假设\" class=\"headerlink\" title=\"暗藏的假设\"\u003e\u003c/a\u003e暗藏的假设\u003c/h3\u003e\u003cp\u003e根据贝叶斯公式，目标后验概率为 $P(A\\mid \\bar B) = \\frac{1}{3P(\\bar B)}$。因此，以上两种答案对应边缘概率 $P(\\bar B)$ 分别是 $P(\\bar B) = \\frac{2}{3}$ 和 $P(\\bar B) = 1$；这又对应了两种假设：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e主持人并不知道门后的情况，随机选择后恰好门后是羊；特别地，主持人不知道参赛者选择的门后的情况，因而主持人的选择没有带来新的信息量。即：$$P(\\bar B) = P(\\bar B\\mid A)P(A) + P(\\bar B\\mid\\bar A)P(\\bar A) = 1\\cdot\\frac{1}{3} + \\frac{1}{2}\\cdot\\frac{2}{3} = \\frac{2}{3}.$$\u003c/li\u003e\n\u003cli\u003e主持人知道门后的情况，因此选择的门后边必然是羊；特别地，主持人知道参赛者选择的门后的情况，因而主持人的选择带来了新的信息量。即：$P(\\bar B) = 1$。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e这两种假设即是长期持续的争论的直接原因，而其根源在于原始问题用模糊的语言玩了一个文字游戏。「节目主持人开启剩下两扇门的其中一扇」，并没有体现出主持人事先是否知道门后的情况；因而两种理解都算是可以接受的。这即是三门问题引起争论的原因，也是其陷阱所在。\u003c/p\u003e\n\u003ch3 id=\"破解谜题\"\u003e\u003ca href=\"#破解谜题\" class=\"headerlink\" title=\"破解谜题\"\u003e\u003c/a\u003e破解谜题\u003c/h3\u003e\u003cp\u003e尽管在原始问题中，有「文字游戏」的嫌疑，但由于「露出其中一只山羊」的保证，事实上主持人的选择就变成了确定性的结论，因而带来了信息量。以概率论的角度来描述，即是 $P(\\bar B) = 1$。\u003c/p\u003e\n\u003cp\u003e因此，三门问题的答案，应当是「换另一扇门会增加参赛者赢得汽车的机会（概率从 $\\frac{1}{3}$ 增加到 $\\frac{2}{3}$）」。\u003c/p\u003e\n\u003ch2 id=\"回到小孩子的思维\"\u003e\u003ca href=\"#回到小孩子的思维\" class=\"headerlink\" title=\"回到小孩子的思维\"\u003e\u003c/a\u003e回到小孩子的思维\u003c/h2\u003e\u003cp\u003e行文至此，尽管已经从概率论的角度解答了原始问题，并给出了问题令人困惑的根本原因，但可能仍然有人拒绝这一反直觉的答案。为此，此处给出一个运用小孩子的思维的解法：枚举。\u003c/p\u003e\n\u003cp\u003e根据题目，参赛者需要在三扇门中进行选择，而门后共有一台汽车和两只羊。不妨将其设为\u003ccode\u003e汽车\u003c/code\u003e和\u003ccode\u003e羊A\u003c/code\u003e 及\u003ccode\u003e羊B\u003c/code\u003e。那么，若参赛者在主持人展示一只羊之后更改选择，则获胜的概率为 $\\frac{2}{3}$（失败的概率则是 $\\frac{1}{3}$）。所有可能的情况枚举如下：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e当参赛者一开始选择\u003ccode\u003e汽车\u003c/code\u003e时（$\\frac{1}{3}$ 概率），不论主持人选择\u003ccode\u003e羊A\u003c/code\u003e 还是\u003ccode\u003e羊B\u003c/code\u003e，若参赛者更换选择，都不能赢得\u003ccode\u003e汽车\u003c/code\u003e。\u003c/li\u003e\n\u003cli\u003e当参赛者一开始选择\u003ccode\u003e羊A\u003c/code\u003e时（$\\frac{1}{3}$ 概率），主持人必然选择\u003ccode\u003e羊B\u003c/code\u003e，若参赛者更换选择，则必然赢得\u003ccode\u003e汽车\u003c/code\u003e。\u003c/li\u003e\n\u003cli\u003e当参赛者一开始选择\u003ccode\u003e羊B\u003c/code\u003e时（$\\frac{1}{3}$ 概率），主持人必然选择\u003ccode\u003e羊A\u003c/code\u003e，若参赛者更换选择，则必然赢得\u003ccode\u003e汽车\u003c/code\u003e。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"计算机模拟实验\"\u003e\u003ca href=\"#计算机模拟实验\" class=\"headerlink\" title=\"计算机模拟实验\"\u003e\u003c/a\u003e计算机模拟实验\u003c/h2\u003e\u003cp\u003e所谓「实践是检验真理的唯一标准」，在给出了尽可能清晰的解答之后，本文也尝试用计算机模拟的方法，进行实践检验。\u003c/p\u003e\n\u003cp\u003ePython 代码（\u003ca href=\"/uploads/teaching/Python/monty_hall.py\"\u003e在此下载\u003c/a\u003e）读起来很容易，因此不做详细说明，而只给出简单的解释。对于参赛者的两种选择（在主持人打开一扇门后是否更改选择），代码分别进行了 10000 轮，每轮 1000 次的实验。而后，代码统计每轮 1000 次实验中，参赛者成功赢得汽车的频率；并将 10000 轮频率绘制成图展示。\u003c/p\u003e\n\u003cp\u003e以下是「不更改」的实验结果。不难发现，频率分布在 $\\frac{1}{3}$ 左右，每轮实验的具体频率在它附近抖动。\u003c/p\u003e\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/mathematics/monty_hall_unchange_frequency.png\" alt=\"三门问题中参赛者不更改选择时成功的频率折线图\"/\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/mathematics/monty_hall_unchange_distribution.png\" alt=\"三门问题中参赛者不更改选择时成功的频率分布图\"/\u003e\u003c/p\u003e\n\u003cp\u003e以下是「更改」的实验结果。不难发现，频率分布在 $\\frac{2}{3}$ 左右，每轮实验的具体频率在它附近抖动。\u003c/p\u003e\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/mathematics/monty_hall_change_frequency.png\" alt=\"三门问题中参赛者更改选择时成功的频率折线图\"/\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/mathematics/monty_hall_change_distribution.png\" alt=\"三门问题中参赛者更改选择时成功的频率分布图\"/\u003e\u003c/p\u003e\n\u003cp\u003e据此，计算机模拟实验的结果，与前文分析的结果相同。\u003c/p\u003e\n\n    \u003c/div\u003e",
  "Date": "2018-02-26T08:10:04Z",
  "Author": "Liam Huang"
}