{
  "Source": "liam.page",
  "Title": "解决 beamer 中列表环境无法两端切齐的问题",
  "Link": "https://liam.page/2017/04/11/justifying-in-beamer-s-lists/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003e众所周知，\u003ccode\u003ebeamer\u003c/code\u003e 作为一个幻灯片文档类，大多数情况是不做两端对齐的。但是，有些强（chu）迫（nv）症（zuo）宝宝总喜欢让列表环境有两端对齐的效果。\u003c/p\u003e\n\u003cp\u003e这篇文章来治一治这样的强迫症。\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003ch2 id=\"原因分析\"\u003e\u003ca href=\"#原因分析\" class=\"headerlink\" title=\"原因分析\"\u003e\u003c/a\u003e原因分析\u003c/h2\u003e\u003cp\u003e为了支持幻灯片的效果，\u003ccode\u003ebeamer\u003c/code\u003e 重定义了 LaTeX 中常见的列表环境。对列表环境的重定义放在 \u003ccode\u003ebeamerbaselocalstructure.sty\u003c/code\u003e 当中。我们截取一段对 \u003ccode\u003eitemize\u003c/code\u003e 环境的重定义看看。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\renewcommand\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\itemize\u003c/span\u003e}[1][]{\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\beamer@ifempty\u003c/span\u003e{\u003cspan class=\"params\"\u003e#1\u003c/span\u003e}{}{\u003cspan class=\"keyword\"\u003e\\def\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\beamer@defaultospec\u003c/span\u003e{\u003cspan class=\"params\"\u003e#1\u003c/span\u003e}}\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\ifnum\u003c/span\u003e \u003cspan class=\"keyword\"\u003e\\@itemdepth\u003c/span\u003e \u0026gt;2\u003cspan class=\"keyword\"\u003e\\relax\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\@toodeep\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\else\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\advance\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\@itemdepth\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\@ne\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\beamer@computepref\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\@itemdepth\u003c/span\u003e\u003cspan class=\"comment\"\u003e% sets \\beameritemnestingprefix\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\usebeamerfont\u003c/span\u003e{itemize/enumerate \u003cspan class=\"keyword\"\u003e\\beameritemnestingprefix\u003c/span\u003e body}\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\usebeamercolor\u003c/span\u003e[fg]{itemize/enumerate \u003cspan class=\"keyword\"\u003e\\beameritemnestingprefix\u003c/span\u003e body}\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\usebeamertemplate\u003c/span\u003e{itemize/enumerate \u003cspan class=\"keyword\"\u003e\\beameritemnestingprefix\u003c/span\u003e body begin}\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\list\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      {\u003cspan class=\"keyword\"\u003e\\usebeamertemplate\u003c/span\u003e{itemize \u003cspan class=\"keyword\"\u003e\\beameritemnestingprefix\u003c/span\u003e item}}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      {\u003cspan class=\"keyword\"\u003e\\def\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\makelabel\u003c/span\u003e\u003cspan class=\"params\"\u003e##1\u003c/span\u003e{\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e          {\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            \u003cspan class=\"keyword\"\u003e\\hss\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\llap\u003c/span\u003e{{\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                \u003cspan class=\"keyword\"\u003e\\usebeamerfont\u003c/span\u003e*{itemize \u003cspan class=\"keyword\"\u003e\\beameritemnestingprefix\u003c/span\u003e item}\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                \u003cspan class=\"keyword\"\u003e\\usebeamercolor\u003c/span\u003e[fg]{itemize \u003cspan class=\"keyword\"\u003e\\beameritemnestingprefix\u003c/span\u003e item}\u003cspan class=\"params\"\u003e##1\u003c/span\u003e}}\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e          }\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        }\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      }\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\fi\u003c/span\u003e\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\beamer@cramped\u003c/span\u003e\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\raggedright\u003c/span\u003e\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\beamer@firstlineitemizeunskip\u003c/span\u003e\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e不难发现，在重定义的 \u003ccode\u003e\\itemize\u003c/code\u003e 也就是 \u003ccode\u003eitemize\u003c/code\u003e 环境的前半段命令中，显式地使用了 \u003ccode\u003e\\raggedright\u003c/code\u003e 命令。这个命令的作用，是在不在右侧尝试对齐文字。于是我们会看到这样的效果。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\documentclass\u003c/span\u003e{beamer}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{mwe}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{frame}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{itemize}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\item\u003c/span\u003e \u003cspan class=\"keyword\"\u003e\\blindtext\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{itemize}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{frame}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/LaTeX/beamer_itemize_raggedright.png\"/\u003e\u003c/p\u003e\n\u003cp\u003e因此，修正这个问题，我们只需要修正 \u003ccode\u003e\\raggedright\u003c/code\u003e 的效果就好了。\u003c/p\u003e\n\u003ch2 id=\"patchcmd\"\u003e\u003ca href=\"#patchcmd\" class=\"headerlink\" title=\"patchcmd\"\u003e\u003c/a\u003e\u003ccode\u003epatchcmd\u003c/code\u003e\u003c/h2\u003e\u003cp\u003e我们在\u003ca href=\"/2016/06/10/pseudocode-with-vertical-line/\"\u003e排版伪代码时打印垂直的缩进提示线\u003c/a\u003e一文中，介绍了来自 \u003ccode\u003eetoolbox\u003c/code\u003e 宏包的 \u003ccode\u003e\\patchcmd\u003c/code\u003e 命令。这个命令可以在 TeX 宏中搜索特定的内容，然后替换成想要的东西。\u003c/p\u003e\n\u003cp\u003e不过，来自 \u003ccode\u003eetoolbox\u003c/code\u003e 的 \u003ccode\u003e\\patchcmd\u003c/code\u003e 在对付「带有可选参数的命令」就会失效。为了解决这个问题，我们可以引入来自 \u003ccode\u003expatch\u003c/code\u003e 的 \u003ccode\u003e\\xpatchcmd\u003c/code\u003e 命令。这个命令的用法和 \u003ccode\u003e\\patchcmd\u003c/code\u003e 完全一样；并且它支持对带可选参数的命令进行补丁。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e值得一提的是，\u003ccode\u003expatch\u003c/code\u003e 宏包里定义的命令，都有非常明确的用法，整个宏包的代码量也不多。因此，是学习 LaTeX3 的一个很好的实例。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e于是，我们只需要给 \u003ccode\u003e\\itemize\u003c/code\u003e 命令打个补丁就可以了。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{ragged2e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{xpatch}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\xpatchcmd\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\itemize\u003c/span\u003e}{\u003cspan class=\"keyword\"\u003e\\raggedright\u003c/span\u003e}{\u003cspan class=\"keyword\"\u003e\\justifying\u003c/span\u003e}{}{}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e这里，我们使用 \u003ccode\u003e\\xpatchcmd\u003c/code\u003e 命令，将 \u003ccode\u003e\\itemize\u003c/code\u003e 命令中的 \u003ccode\u003e\\raggedright\u003c/code\u003e 替换成来自 \u003ccode\u003eragged2e\u003c/code\u003e 宏包的 \u003ccode\u003e\\justifying\u003c/code\u003e 命令。这个命令，会使 TeX 尝试将文字做两端切齐。我们可以看一下效果。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\documentclass\u003c/span\u003e{beamer}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{mwe}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{ragged2e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{xpatch}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\xpatchcmd\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\itemize\u003c/span\u003e}{\u003cspan class=\"keyword\"\u003e\\raggedright\u003c/span\u003e}{\u003cspan class=\"keyword\"\u003e\\justifying\u003c/span\u003e}{}{}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{frame}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{itemize}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\item\u003c/span\u003e \u003cspan class=\"keyword\"\u003e\\blindtext\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{itemize}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{frame}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/LaTeX/beamer_itemize_justifying.png\"/\u003e\u003c/p\u003e\n\u003cp\u003e如果想要修正 \u003ccode\u003eenumerate\u003c/code\u003e 或者 \u003ccode\u003edescription\u003c/code\u003e 环境的两端切齐问题，也可以用类似的操作。\u003c/p\u003e\n\n    \u003c/div\u003e",
  "Date": "2017-04-11T14:03:06Z",
  "Author": "Liam Huang"
}