{
  "Source": "liam.page",
  "Title": "使用 BibTeX 生成参考文献列表",
  "Link": "https://liam.page/2016/01/23/using-bibtex-to-generate-reference/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003eLaTeX 是一些理工专业论文排版的事实标准。既然是论文排版，就不可避免会涉及到参考文献的处理。Oren Patashnik 和 Leslie Lamport 在 1985 年开发的 BibTeX 是在 LaTeX 社区相当流行的参考文献格式化工具。\u003c/p\u003e\n\u003cp\u003e其实网络上流传的 BibTeX 教程很多，本不用我再来插一句嘴。不过这么多年来，始终有很多朋友会对几个问题反复提问。这让我感到，现有的教程恐怕是不够的。这篇文章尝试将 BibTeX 的基本用法讲解清楚，同时适当地提及一些处理流程，争取在有限的篇幅里，讲清楚 BibTeX 的来龙去脉。\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003ch2 id=\"bst-和-bib-格式简介\"\u003e\u003ca href=\"#bst-和-bib-格式简介\" class=\"headerlink\" title=\"bst 和 bib 格式简介\"\u003e\u003c/a\u003ebst 和 bib 格式简介\u003c/h2\u003e\u003cp\u003eBibTeX 涉及到两种特有的辅助的文件格式：\u003ccode\u003ebst\u003c/code\u003e 和 \u003ccode\u003ebib\u003c/code\u003e。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ebst\u003c/code\u003e 是 (B)ibliography (ST)yle 的缩写。顾名思义，和 \u003ccode\u003esty\u003c/code\u003e 文件是 style 的缩写一样，\u003ccode\u003ebst\u003c/code\u003e 文件控制着参考文献列表的格式。在这里说的「格式」，主要指参考文献列表中的编号、排序规则、对人名的处理（是否缩写）、月份的处理（是否缩写）、期刊名称的缩写等。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ebib\u003c/code\u003e 是 BibTeX 定义的「参考文献数据库」。通常，我们会按照 BibTeX 规定的格式，向 \u003ccode\u003ebib\u003c/code\u003e 文件写入多条文献信息。在实际使用时，我们就可以根据 \u003ccode\u003ebib\u003c/code\u003e 文件中定义的文献标记（label），从数据库中调取文献信息，继而排版成参考文献列表。\u003c/p\u003e\n\u003cp\u003e值得注意的是，\u003ccode\u003ebib\u003c/code\u003e 是一个数据库，其中的内容并不一定等于 LaTeX 排版参考文献列表时的内容。也就是说，如果 \u003ccode\u003ebib\u003c/code\u003e 数据库中有 10 条文献信息，并不一定说 LaTeX 排版出来的 PDF 文件中，参考文献列表里也一定有 10 条。实际排版出来的参考文献列表中有多少条文献，实际是哪几条，具体由文中使用的 \u003ccode\u003e\\cite\u003c/code\u003e 命令（以及 \u003ccode\u003e\\nocite\u003c/code\u003e 命令）指定。如果没有使用 \u003ccode\u003e\\cite\u003c/code\u003e 命令调取文献信息，那么即使在 \u003ccode\u003ebib\u003c/code\u003e 文件中定义了文献信息，也不会展现在参考文献列表中。很多人对此误解甚深，于是经常有人问道「为什么我在 \u003ccode\u003ebib\u003c/code\u003e 文件里写的文献，不出现在参考文献中」之类的问题。\u003c/p\u003e\n\u003ch2 id=\"BibTeX-的工作流程\"\u003e\u003ca href=\"#BibTeX-的工作流程\" class=\"headerlink\" title=\"BibTeX 的工作流程\"\u003e\u003c/a\u003eBibTeX 的工作流程\u003c/h2\u003e\u003cp\u003e介绍中提到，BibTeX 是一个参考文献格式化工具。这个定义，给 BibTeX 的用处做了良好的界定：BibTeX 不是用来排版参考文献的，更不是个排版工具，\u003cstrong\u003e它只是根据需要，按照（\u003ccode\u003ebst\u003c/code\u003e 文件规定的）某种格式，将（\u003ccode\u003ebib\u003c/code\u003e 文件中包含的）参考文献信息，\u003cem\u003e格式化\u003c/em\u003e 为 LaTeX 能够使用的列表信息\u003c/strong\u003e。\u003c/p\u003e\n\u003cp\u003e清楚了 BibTeX 需要做的事情（用软件工程的话说，就是清楚了 BibTeX 的 API），我们就可以理清 BibTeX 的工作流程。\u003c/p\u003e\n\u003ch3 id=\"知道需要哪些参考文献信息\"\u003e\u003ca href=\"#知道需要哪些参考文献信息\" class=\"headerlink\" title=\"知道需要哪些参考文献信息\"\u003e\u003c/a\u003e知道需要哪些参考文献信息\u003c/h3\u003e\u003cp\u003e既然 BibTeX 会\u003cem\u003e根据需要\u003c/em\u003e 格式化数据，那么首先要解决的问题就是：BibTeX 如何了解此处的「需求」。\u003c/p\u003e\n\u003cp\u003e对 BibTeX 稍有了解的读者可能知道，运行 BibTeX 的命令行命令是：\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ebibtex foo.aux \u003cspan class=\"comment\"\u003e# 其中后缀名 .aux 可以省略\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e实际上，BibTeX 正是通过读取 \u003ccode\u003eaux\u003c/code\u003e 文件中的 \u003ccode\u003e\\citation{}\u003c/code\u003e 标记，来确定用户需要哪些参考文献的。\u003c/p\u003e\n\u003cp\u003e举个例子，假设用户用 LaTeX 编译了以下代码：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003cfigcaption\u003e\u003cspan\u003efoo.tex\u003c/span\u003e\u003c/figcaption\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\documentclass\u003c/span\u003e{article}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ebar\u003cspan class=\"keyword\"\u003e\\cite\u003c/span\u003e{baz}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e如果该文件名为 \u003ccode\u003efoo.tex\u003c/code\u003e，那么就会生成 \u003ccode\u003efoo.aux\u003c/code\u003e。其内容大约是：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003cfigcaption\u003e\u003cspan\u003efoo.aux\u003c/span\u003e\u003c/figcaption\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\relax\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\citation\u003c/span\u003e{baz}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e在这里，\u003ccode\u003e\\relax\u003c/code\u003e 表示休息一会儿，什么也不做；\u003ccode\u003e\\citation\u003c/code\u003e 则是由 \u003ccode\u003etex\u003c/code\u003e 文件中的 \u003ccode\u003e\\cite\u003c/code\u003e 命令写入 \u003ccode\u003eaux\u003c/code\u003e 文件的标记。它说明了：用户需要标记为 \u003ccode\u003ebaz\u003c/code\u003e 的参考文献信息。\u003c/p\u003e\n\u003cp\u003e当 BibTeX 读入 \u003ccode\u003eaux\u003c/code\u003e 文件的时候，它就会记录下所有 \u003ccode\u003e\\citation\u003c/code\u003e 命令中的内容（即文献标记——label），这样就知道了用户需要哪些参考文献信息。\u003c/p\u003e\n\u003ch3 id=\"了解文献列表格式以及读取文献数据库\"\u003e\u003ca href=\"#了解文献列表格式以及读取文献数据库\" class=\"headerlink\" title=\"了解文献列表格式以及读取文献数据库\"\u003e\u003c/a\u003e了解文献列表格式以及读取文献数据库\u003c/h3\u003e\u003cp\u003e当 BibTeX 清楚了用户需要哪些文献信息，接下来自然应该搞清楚用户想要什么样的格式。而知道了格式之后，就可以从数据库中抽取所需的文献信息，按照格式准备数据。\u003c/p\u003e\n\u003cp\u003e为了讲清楚这个步骤，我们对上述 LaTeX 代码做些许的修改。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003cfigcaption\u003e\u003cspan\u003efoo.tex\u003c/span\u003e\u003c/figcaption\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\documentclass\u003c/span\u003e{article}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\bibliographystyle\u003c/span\u003e{unsrt}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ebar\u003cspan class=\"keyword\"\u003e\\cite\u003c/span\u003e{baz}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\bibliography\u003c/span\u003e{foobar}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e同样，我们将它保存为 \u003ccode\u003efoo.tex\u003c/code\u003e，经由 LaTeX 编译之后得到一个 \u003ccode\u003efoo.aux\u003c/code\u003e 文件，其内容如下：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003cfigcaption\u003e\u003cspan\u003efoo.aux\u003c/span\u003e\u003c/figcaption\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\relax\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\bibstyle\u003c/span\u003e{unsrt}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\citation\u003c/span\u003e{baz}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\bibdata\u003c/span\u003e{foobar}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e简单的对比，不难发现：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003ccode\u003efoo.tex\u003c/code\u003e 中新增的 \u003ccode\u003e\\bibliographystyle{unsrt}\u003c/code\u003e 与 \u003ccode\u003eaux\u003c/code\u003e 文件中的 \u003ccode\u003e\\bibstyle{unsrt}\u003c/code\u003e 相对应。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003efoo.tex\u003c/code\u003e 中新增的 \u003ccode\u003e\\bibliography{foobar}\u003c/code\u003e 与 \u003ccode\u003eaux\u003c/code\u003e 文件中的 \u003ccode\u003e\\bibdata{foobar}\u003c/code\u003e 相对应。\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e根据命令的名字，我们很容易猜测各个命令的作用。\u003ccode\u003etex\u003c/code\u003e 文件中的 \u003ccode\u003e\\bibliographystyle\u003c/code\u003e 指定了用户期待的参考文献列表格式文件，并将其写入 \u003ccode\u003eaux\u003c/code\u003e 文件备用，通过 \u003ccode\u003e\\bibstyle\u003c/code\u003e 标记。与此同时，\u003ccode\u003e\\bibliography\u003c/code\u003e 命令则用 \u003ccode\u003e\\bibdata\u003c/code\u003e 在 \u003ccode\u003eaux\u003c/code\u003e 文件中记录了参考文献数据库的名字（不含扩展名）。\u003c/p\u003e\n\u003cp\u003e在这里，\u003ccode\u003eunsrt\u003c/code\u003e 是 unsort 的缩写，它对应着 \u003ccode\u003eunsrt.bst\u003c/code\u003e 文件，是大多数 TeX 发行版自带的标准格式文件之一；\u003ccode\u003efoobar\u003c/code\u003e 则对应着 \u003ccode\u003efoobar.bib\u003c/code\u003e 文件，该文件是用户自己编写或生成的参考文献数据库。\u003c/p\u003e\n\u003ch3 id=\"实际操作看看\"\u003e\u003ca href=\"#实际操作看看\" class=\"headerlink\" title=\"实际操作看看\"\u003e\u003c/a\u003e实际操作看看\u003c/h3\u003e\u003cp\u003e我们假设上述 \u003ccode\u003efoobar.bib\u003c/code\u003e 文件有如下内容：\u003c/p\u003e\n\u003cfigure class=\"highlight xquery\"\u003e\u003cfigcaption\u003e\u003cspan\u003efoobar.bib\u003c/span\u003e\u003c/figcaption\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e@BOOK{\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    baz,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    title = {Dummy Book},\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    publisher = {Egypt},\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    year = {\u003cspan class=\"number\"\u003e321\u003c/span\u003e},\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    author = {The King}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e我们在命令行执行以下操作：\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003elatex foo.tex   \u003cspan class=\"comment\"\u003e# .tex 可以省略\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ebibtex foo.aux  \u003cspan class=\"comment\"\u003e# .aux 可以省略\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e我们会发现，BibTeX 生成了两个文件：\u003ccode\u003efoo.bbl\u003c/code\u003e 和 \u003ccode\u003efoo.blg\u003c/code\u003e。其中 \u003ccode\u003efoo.bbl\u003c/code\u003e 的内容如下：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003cfigcaption\u003e\u003cspan\u003efoo.bbl\u003c/span\u003e\u003c/figcaption\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{thebibliography}{1}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\bibitem\u003c/span\u003e{baz}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eThe King.\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\newblock\u003c/span\u003e {\u003cspan class=\"keyword\"\u003e\\em\u003c/span\u003e Dummy Book}.\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\newblock\u003c/span\u003e Egypt, 321.\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{thebibliography}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e显然，这就是一个标准的 LaTeX 环境。对 LaTeX 参考文献排版稍有了解的读者可能知道 \u003ccode\u003ethebibliography\u003c/code\u003e 环境正是 LaTeX 中手工编排参考文献时使用的环境。因此，**\u003ccode\u003efoo.bbl\u003c/code\u003e 就是 BibTeX 格式化输出的结果**，LaTeX 只需要将该文件的内容读入，就能在相应的位置输出格式化之后的参考文献列表了。\u003c/p\u003e\n\u003cp\u003e接下来，我们看看 \u003ccode\u003efoo.blg\u003c/code\u003e 的内容。\u003ccode\u003eblg\u003c/code\u003e 实际是 BibTeX Log 的缩写，亦即这是一个日志文件。\u003c/p\u003e\n\u003cfigure class=\"highlight applescript\"\u003e\u003cfigcaption\u003e\u003cspan\u003efoo.blg\u003c/span\u003e\u003c/figcaption\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eThis \u003cspan class=\"keyword\"\u003eis\u003c/span\u003e BibTeX, Version \u003cspan class=\"number\"\u003e0.99\u003c/span\u003ed (TeX Live \u003cspan class=\"number\"\u003e2015\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCapacity: max_strings=\u003cspan class=\"number\"\u003e35307\u003c/span\u003e, hash_size=\u003cspan class=\"number\"\u003e35307\u003c/span\u003e, hash_prime=\u003cspan class=\"number\"\u003e30011\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eThe top-level auxiliary \u003cspan class=\"built_in\"\u003efile\u003c/span\u003e: foo.aux\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eThe style \u003cspan class=\"built_in\"\u003efile\u003c/span\u003e: unsrt.bst\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eDatabase \u003cspan class=\"built_in\"\u003efile\u003c/span\u003e \u003cspan class=\"comment\"\u003e#1: foobar.bib\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eYou\u0026#39;ve used \u003cspan class=\"number\"\u003e1\u003c/span\u003e entry,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e...\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e我们看到，BibTeX 打出的日志文件中，记录了读入 \u003ccode\u003eaux\u003c/code\u003e/\u003ccode\u003ebst\u003c/code\u003e/\u003ccode\u003ebib\u003c/code\u003e 文件的情况。特别地，记录了所需的参考文献条目（entry）的数量（此处为 1）。\u003c/p\u003e\n\u003cp\u003e日志中值得注意的地方是在提到 \u003ccode\u003ebib\u003c/code\u003e 文件时，使用了 \u003ccode\u003e#1\u003c/code\u003e 的标记。既然存在 \u003ccode\u003e#1\u003c/code\u003e，那么合理推测也可以存在 \u003ccode\u003e#2\u003c/code\u003e。也就是说，BibTeX 可能支持两个或更多的 \u003ccode\u003ebib\u003c/code\u003e 数据库共同工作。具体如何实现，请读者自己阅读相关资料（手册或 Google 检索）后实验。\u003c/p\u003e\n\u003cp\u003e紧接着，我们再执行一次 LaTeX：\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003elatex foo.tex\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e首先，来看看 \u003ccode\u003eaux\u003c/code\u003e 文件会发生什么变化：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003cfigcaption\u003e\u003cspan\u003efoo.aux\u003c/span\u003e\u003c/figcaption\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\relax\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\bibstyle\u003c/span\u003e{unsrt}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\citation\u003c/span\u003e{baz}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\bibdata\u003c/span\u003e{foobar}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\bibcite\u003c/span\u003e{baz}{1}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e相比上一次的 \u003ccode\u003efoo.aux\u003c/code\u003e，在读入 BibTeX 之后，LaTeX 向 \u003ccode\u003eaux\u003c/code\u003e 文件写入了更多的信息。这里 \u003ccode\u003e\\bibcite{baz}{1}\u003c/code\u003e 将 \u003ccode\u003ebaz\u003c/code\u003e 这一参考文献标记（label）与参考文献编号（数字 1）绑定起来了。\u003c/p\u003e\n\u003cp\u003e接下来，我们看看 \u003ccode\u003edvi\u003c/code\u003e 文件的内容：\u003c/p\u003e\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/LaTeX/foo.pdf.png\" alt=\"foo.pdf\"/\u003e\u003c/p\u003e\n\u003cp\u003e不难发现，由于读入了 \u003ccode\u003efoo.bbl\u003c/code\u003e 文件，参考文献列表已经正确展现出来了。然而，正文中依然有一个问号。\u003c/p\u003e\n\u003cp\u003e实际上，LaTeX 需要 \u003ccode\u003eaux\u003c/code\u003e 文件中的 \u003ccode\u003e\\bibcite\u003c/code\u003e 命令，将参考文献标记与参考文献编号关联起来，从而在 \u003ccode\u003etex\u003c/code\u003e 文件中的 \u003ccode\u003e\\cite\u003c/code\u003e 命令位置填上正确的参考文献编号。我们注意到，在我们第二次执行 LaTeX 命令编译之前，\u003ccode\u003efoo.aux\u003c/code\u003e 文件中是没有这些信息的，直到编译完成，这些信息才被正确写入。因此，第二次执行 LaTeX 命令时，LaTeX 还不能填入正确的文献编号，于是就写入了一个问号作为占位符。\u003c/p\u003e\n\u003cp\u003e解决这个问题的办法也很简单——此时 \u003ccode\u003eaux\u003c/code\u003e 文件中已经有了需要的信息，再编译一遍就好了。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003elatex foo.tex\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e如果没有意外，此时的 \u003ccode\u003efoo.dvi\u003c/code\u003e 文件应该看起来一切正常了。\u003c/p\u003e\n\u003ch3 id=\"小结\"\u003e\u003ca href=\"#小结\" class=\"headerlink\" title=\"小结\"\u003e\u003c/a\u003e小结\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003eBibTeX 是一个参考文献格式化工具，它会根据需要，按照（\u003ccode\u003ebst\u003c/code\u003e 文件规定的）某种格式，将（\u003ccode\u003ebib\u003c/code\u003e 文件中包含的）参考文献信息，\u003cem\u003e格式化\u003c/em\u003e 为 LaTeX 能够使用的列表信息。\u003c/li\u003e\n\u003cli\u003e正确使用 BibTeX 处理参考文献，需要先用 (Xe/PDF)LaTeX 编译 \u003ccode\u003etex\u003c/code\u003e 文件，生成 \u003ccode\u003eaux\u003c/code\u003e 辅助文件。\u003c/li\u003e\n\u003cli\u003e执行 BibTeX 将读入 \u003ccode\u003eaux\u003c/code\u003e 文件，搞清楚用户需要哪些文献。\u003c/li\u003e\n\u003cli\u003e紧接着，BibTeX 根据 \u003ccode\u003eaux\u003c/code\u003e 文件中的内容，找到正确的 \u003ccode\u003ebst\u003c/code\u003e 和 \u003ccode\u003ebib\u003c/code\u003e 文件，并将参考文献信息格式化为 LaTeX 的 \u003ccode\u003ethebibliography\u003c/code\u003e 环境，作为 \u003ccode\u003ebbl\u003c/code\u003e 文件输出。\u003c/li\u003e\n\u003cli\u003e第二次执行 (Xe/PDF)LaTeX 将会读入新生成的 \u003ccode\u003ebbl\u003c/code\u003e 文件，同时更新 \u003ccode\u003eaux\u003c/code\u003e 文件。\u003c/li\u003e\n\u003cli\u003e此时，参考文献列表将会正常展示，但是正文中的引用标记显示为问号。\u003c/li\u003e\n\u003cli\u003e第三次执行 (Xe/PDF)LaTeX 将会读入 \u003ccode\u003ebbl\u003c/code\u003e 文件和更新过后的 \u003ccode\u003eaux\u003c/code\u003e 文件。此时，参考文献相关内容都正常显示。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e因此，总的来说，想要正确使用 BibTeX 协同 LaTeX 处理参考文献，需要编译四次：\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e(xe/pdf)latex foo.tex   \u003cspan class=\"comment\"\u003e# 表示使用 latex, pdflatex 或 xelatex 编译，下同\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ebibtex foo.aux\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(xe/pdf)latex foo.tex\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(xe/pdf)latex foo.tex\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"常见问题\"\u003e\u003ca href=\"#常见问题\" class=\"headerlink\" title=\"常见问题\"\u003e\u003c/a\u003e常见问题\u003c/h2\u003e\u003cblockquote\u003e\n\u003cp\u003e我希望将一条文献展示在参考文献列表中，但不想在正文中用 \u003ccode\u003e\\cite\u003c/code\u003e 命令引用，怎么办？\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e首先，确保这条文献已经写入了 \u003ccode\u003ebib\u003c/code\u003e 文件。其次，可以在 \u003ccode\u003e\\bibliography\u003c/code\u003e 命令之前，用 \u003ccode\u003e\\nocite{label}\u003c/code\u003e 提示 BibTeX 调取这条文献。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e我有很多条文献，都存在这样的情况。每条文献逐一 \u003ccode\u003e\\nocite\u003c/code\u003e 太繁琐了，有没有懒人适用的办法？\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e有的。\u003ccode\u003e\\nocite{*}\u003c/code\u003e。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e每次都要编译四次，我感觉懒癌又要发作了，有没有办法治疗？\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e有的。可以尝试 LaTeXmk, TeXify 之类的自动化工具。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e我对默认提供的 \u003ccode\u003ebst\u003c/code\u003e 文件的格式效果不满意，哪里能找到更多的 \u003ccode\u003ebst\u003c/code\u003e？\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e现代 TeX 发行版都提供了多种 \u003ccode\u003ebst\u003c/code\u003e 可供选择，每个 \u003ccode\u003ebst\u003c/code\u003e 文件的格式、适用范围、使用条件都不一样，需要仔细甄别。具体可以去安装目录下搜索试试。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e有没有遵循国家标准的 \u003ccode\u003ebst\u003c/code\u003e？\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e有的，\u003ca href=\"/2014/05/09/gbt7714-2005-bibtex-style/\"\u003e这里\u003c/a\u003e。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e我找到的 \u003ccode\u003ebst\u003c/code\u003e，效果都不满意，怎么办？\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e你可以在命令行执行 \u003ccode\u003elatex makebst\u003c/code\u003e，制作一个符合自己要求的 \u003ccode\u003ebst\u003c/code\u003e 文件。你需要回答大约 100 个关于参考文献列表效果的问题。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003ebib\u003c/code\u003e 文件怎么生成？\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e你可以手写，或者用 JabRef 之类的文献工具生成。具体请自行 Google 检索，篇幅所限就不展开了。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e我听说还有一个名为 biblatex 的工具，能介绍一下吗？\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003ebiblatex 与 BibTeX 是不同的工具，超出了本文的范围。如果感兴趣，可以阅读\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://tex.stackexchange.com/questions/12806/guidelines-for-customizing-biblatex-styles/13076#13076\"\u003e这篇文章\u003c/a\u003e。\u003c/p\u003e\n\n    \u003c/div\u003e",
  "Date": "2016-01-22T16:58:38Z",
  "Author": "Liam Huang"
}