{
  "Source": "liam.page",
  "Title": "【LaTeX Tips】如何确定某个宏定义的位置",
  "Link": "https://liam.page/2013/11/20/LaTeX-How-to-find-out-where-a-macro-is-defined/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003e我们在排错的时候，经常希望知道出错的宏是在哪里定义的，然后通过比对定义和现有情况判断错误原因。\u003c/p\u003e\n\u003cp\u003eLeoLiu 在 \u003ca target=\"_blank\" rel=\"noopener\" href=\"http://tex.stackexchange.com/a/8523/38350\"\u003eTeX.SX\u003c/a\u003e 给出了一个利用 \u003ccode\u003efilehook\u003c/code\u003e 宏包实现的方法，效果拔群！当然，方法有些讨巧。\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003cp\u003e代码：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\documentclass\u003c/span\u003e{article}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{filehook,currfile}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\newwrite\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\finder\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\immediate\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\openout\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\finder\u003c/span\u003e=\u003cspan class=\"keyword\"\u003e\\jobname\u003c/span\u003e.fnd\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\def\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\searchmacro\u003c/span\u003e\u003cspan class=\"params\"\u003e#1\u003c/span\u003e{\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\AtBeginOfFiles\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\ifdefined\u003c/span\u003e\u003cspan class=\"params\"\u003e#1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      \u003cspan class=\"keyword\"\u003e\\expandafter\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\def\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\csname\u003c/span\u003e \u003cspan class=\"keyword\"\u003e\\currfilename\u003c/span\u003e:found\u003cspan class=\"keyword\"\u003e\\endcsname\u003c/span\u003e{}\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\fi\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\AtEndOfFiles\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\ifdefined\u003c/span\u003e\u003cspan class=\"params\"\u003e#1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      \u003cspan class=\"keyword\"\u003e\\unless\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\ifcsname\u003c/span\u003e \u003cspan class=\"keyword\"\u003e\\currfilename\u003c/span\u003e:found\u003cspan class=\"keyword\"\u003e\\endcsname\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003e\\immediate\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\write\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\finder\u003c/span\u003e{found in \u0026#39;\u003cspan class=\"keyword\"\u003e\\currfilename\u003c/span\u003e\u0026#39;}\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\fi\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\fi\u003c/span\u003e}}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\searchmacro\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\url\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{hyperref}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003edummy\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e编译后，在 \u003ccode\u003e\\jobname.fnd\u003c/code\u003e 里我们能找到\u003c/p\u003e\n\u003cfigure class=\"highlight plaintext\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003efound in \u0026#39;url.sty\u0026#39;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efound in \u0026#39;hyperref.sty\u0026#39;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e也就是说，\u003ccode\u003e\\url\u003c/code\u003e 是在 \u003ccode\u003eurl.sty\u003c/code\u003e 里定义的，而 \u003ccode\u003eurl.sty\u003c/code\u003e 被 \u003ccode\u003ehyperref.sty\u003c/code\u003e 调用。\u003c/p\u003e\n\u003chr/\u003e\n\u003cp\u003eWe would be glad to know where a certain macro is defined, when we are debugging. LeoLiu provided a method by using the package \u003ccode\u003efilehook\u003c/code\u003e, on the website \u003ca target=\"_blank\" rel=\"noopener\" href=\"http://tex.stackexchange.com/a/8523/38350\"\u003eTeX.SX\u003c/a\u003e. It\u0026#39;s really great!\u003c/p\u003e\n\u003cp\u003eThe code is somewhat tricky:\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\documentclass\u003c/span\u003e{article}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{filehook,currfile}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\newwrite\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\finder\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\immediate\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\openout\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\finder\u003c/span\u003e=\u003cspan class=\"keyword\"\u003e\\jobname\u003c/span\u003e.fnd\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\def\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\searchmacro\u003c/span\u003e\u003cspan class=\"params\"\u003e#1\u003c/span\u003e{\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\AtBeginOfFiles\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\ifdefined\u003c/span\u003e\u003cspan class=\"params\"\u003e#1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      \u003cspan class=\"keyword\"\u003e\\expandafter\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\def\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\csname\u003c/span\u003e \u003cspan class=\"keyword\"\u003e\\currfilename\u003c/span\u003e:found\u003cspan class=\"keyword\"\u003e\\endcsname\u003c/span\u003e{}\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\fi\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\AtEndOfFiles\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\ifdefined\u003c/span\u003e\u003cspan class=\"params\"\u003e#1\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      \u003cspan class=\"keyword\"\u003e\\unless\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\ifcsname\u003c/span\u003e \u003cspan class=\"keyword\"\u003e\\currfilename\u003c/span\u003e:found\u003cspan class=\"keyword\"\u003e\\endcsname\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003e\\immediate\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\write\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\finder\u003c/span\u003e{found in \u0026#39;\u003cspan class=\"keyword\"\u003e\\currfilename\u003c/span\u003e\u0026#39;}\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003e\\fi\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\fi\u003c/span\u003e}}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\searchmacro\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\url\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{hyperref}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003edummy\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003eAfter compiling, we will get\u003c/p\u003e\n\u003cfigure class=\"highlight plaintext\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003efound in \u0026#39;url.sty\u0026#39;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efound in \u0026#39;hyperref.sty\u0026#39;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003ein \u003ccode\u003e\\jobname.fnd\u003c/code\u003e. That is to say, \u003ccode\u003e\\url\u003c/code\u003e is defined in \u003ccode\u003eurl.sty\u003c/code\u003e, which is inputed by \u003ccode\u003ehyperref.sty\u003c/code\u003e.\u003c/p\u003e\n\n    \u003c/div\u003e",
  "Date": "2013-11-19T16:00:00Z",
  "Author": "Liam Huang"
}