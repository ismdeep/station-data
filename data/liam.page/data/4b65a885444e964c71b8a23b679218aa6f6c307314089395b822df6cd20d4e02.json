{
  "Source": "liam.page",
  "Title": "尾注的处理",
  "Link": "https://liam.page/2016/10/14/LaTeX-endnotes/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003eLaTeX 中的 \u003ccode\u003e\\footnote\u003c/code\u003e 命令可以产生脚注——在正文位置留下一个编号，在当前页的底部输出实际的注释内容。这个功能很好用，但是在一些情况下，可能产生意想不到的情况。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e数量少而大段的尾注导致尾注先于标记出现；\u003c/li\u003e\n\u003cli\u003e数量多而小段的尾注导致尾注晚于标记出现。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e这些不太寻常的注释会导致 LaTeX 标注文档类没有办法很好地处理脚注。这里，后者可以通过 \u003ccode\u003efootmisc\u003c/code\u003e 宏包的 \u003ccode\u003epara\u003c/code\u003e 选项来挽救，但是前者就没有什么好办法了。于是，我们想到了尾注。\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003ch2 id=\"简介\"\u003e\u003ca href=\"#简介\" class=\"headerlink\" title=\"简介\"\u003e\u003c/a\u003e简介\u003c/h2\u003e\u003cp\u003e尾注，即将注释与标记分离，写在文档的末尾。LaTeX 标准文档类没有提供尾注的功能，而由 \u003ccode\u003eendnotes\u003c/code\u003e 宏包提供。\u003c/p\u003e\n\u003cp\u003e尾注的用法和脚注基本相同，只需要\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e将原本需要使用 \u003ccode\u003e\\footnote\u003c/code\u003e 命令的地方替换成 \u003ccode\u003e\\endnote\u003c/code\u003e；\u003c/li\u003e\n\u003cli\u003e在需要输出尾注的地方，执行 \u003ccode\u003e\\theendnotes\u003c/code\u003e 命令。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"给尾注加上类似-footnote-的横线\"\u003e\u003ca href=\"#给尾注加上类似-footnote-的横线\" class=\"headerlink\" title=\"给尾注加上类似 \\footnote 的横线\"\u003e\u003c/a\u003e给尾注加上类似 \u003ccode\u003e\\footnote\u003c/code\u003e 的横线\u003c/h2\u003e\u003cp\u003e默认的尾注标题，只有一个光秃秃的 \u003ccode\u003eNotes\u003c/code\u003e 字样，和默认的脚注样式不太一样。我们可以通过修改 \u003ccode\u003e\\enoteheading\u003c/code\u003e 命令来修改这个样式。这里我们以 \u003ccode\u003ebook\u003c/code\u003e 类为例（\u003ccode\u003earticle\u003c/code\u003e 类应该将 \u003ccode\u003e\\section*\u003c/code\u003e 改为 \u003ccode\u003e\\subsection*\u003c/code\u003e）。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\documentclass\u003c/span\u003e{book}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{endnotes}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\makeatletter\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\def\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\enoteheading\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\section\u003c/span\u003e*{\u003cspan class=\"keyword\"\u003e\\notesname\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\@mkboth\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\MakeUppercase\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\notesname\u003c/span\u003e}}{\u003cspan class=\"keyword\"\u003e\\MakeUppercase\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\notesname\u003c/span\u003e}}}\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\mbox\u003c/span\u003e{}\u003cspan class=\"keyword\"\u003e\\par\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\vskip\u003c/span\u003e-2.3\u003cspan class=\"keyword\"\u003e\\baselineskip\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\noindent\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\rule\u003c/span\u003e{.5\u003cspan class=\"keyword\"\u003e\\textwidth\u003c/span\u003e}{0.4pt}\u003cspan class=\"keyword\"\u003e\\par\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\vskip\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\baselineskip\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\makeatother\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\chapter\u003c/span\u003e{First}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eTesting.\u003cspan class=\"keyword\"\u003e\\endnote\u003c/span\u003e{First test.} Hello \u003cspan class=\"keyword\"\u003e\\LaTeX\u003c/span\u003e{}.\u003cspan class=\"keyword\"\u003e\\endnote\u003c/span\u003e{LaTeX}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\theendnotes\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/LaTeX/endnotes_01.png\"/\u003e\u003c/p\u003e\n\u003ch2 id=\"在每个章节后输出尾注\"\u003e\u003ca href=\"#在每个章节后输出尾注\" class=\"headerlink\" title=\"在每个章节后输出尾注\"\u003e\u003c/a\u003e在每个章节后输出尾注\u003c/h2\u003e\u003cp\u003e不难发现，其实尾注输出的位置取决于 \u003ccode\u003e\\theendnotes\u003c/code\u003e 命令的位置。因此我们只需要在每个 \u003ccode\u003e\\chapter\u003c/code\u003e 命令之前（\u003ccode\u003ebook\u003c/code\u003e 类，\u003ccode\u003earticle\u003c/code\u003e 类是 \u003ccode\u003e\\section\u003c/code\u003e 命令）加上 \u003ccode\u003e\\theendnotes\u003c/code\u003e 命令就好了。\u003c/p\u003e\n\u003cp\u003e不过，由于 \u003ccode\u003e\\endnote\u003c/code\u003e 是在全文范围内编号的，如果希望尾注的编号在输出章节尾注后重新开始，那么我们需要在调用 \u003ccode\u003e\\theendnotes\u003c/code\u003e 之后将计数器置零——当然你也可以使用 \u003ccode\u003e\\counterwithin\u003c/code\u003e 之类的命令来实现。这里我们用 \u003ccode\u003eetoolbox\u003c/code\u003e 提供的 \u003ccode\u003e\\csappto\u003c/code\u003e 命令来实现这个效果。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\documentclass\u003c/span\u003e{book}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{endnotes}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{etoolbox}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\makeatletter\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\def\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\enoteheading\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\section\u003c/span\u003e*{\u003cspan class=\"keyword\"\u003e\\notesname\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\@mkboth\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\MakeUppercase\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\notesname\u003c/span\u003e}}{\u003cspan class=\"keyword\"\u003e\\MakeUppercase\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\notesname\u003c/span\u003e}}}\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  \u003cspan class=\"keyword\"\u003e\\mbox\u003c/span\u003e{}\u003cspan class=\"keyword\"\u003e\\par\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\vskip\u003c/span\u003e-2.3\u003cspan class=\"keyword\"\u003e\\baselineskip\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\noindent\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\rule\u003c/span\u003e{.5\u003cspan class=\"keyword\"\u003e\\textwidth\u003c/span\u003e}{0.4pt}\u003cspan class=\"keyword\"\u003e\\par\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\vskip\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\baselineskip\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\makeatother\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\csappto\u003c/span\u003e{theendnotes}{\u003cspan class=\"keyword\"\u003e\\setcounter\u003c/span\u003e{endnote}{0}}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\chapter\u003c/span\u003e{First}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eTesting.\u003cspan class=\"keyword\"\u003e\\endnote\u003c/span\u003e{First test.} Hello \u003cspan class=\"keyword\"\u003e\\LaTeX\u003c/span\u003e{}.\u003cspan class=\"keyword\"\u003e\\endnote\u003c/span\u003e{LaTeX}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\theendnotes\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\chapter\u003c/span\u003e{Next}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eAgain.\u003cspan class=\"keyword\"\u003e\\endnote\u003c/span\u003e{Second test.}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\theendnotes\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/LaTeX/endnotes_02.png\"/\u003e\u003c/p\u003e\n\n    \u003c/div\u003e",
  "Date": "2016-10-14T00:01:46Z",
  "Author": "Liam Huang"
}