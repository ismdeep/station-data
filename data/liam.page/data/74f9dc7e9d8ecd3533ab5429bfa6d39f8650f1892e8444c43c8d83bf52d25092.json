{
  "Source": "liam.page",
  "Title": "macOS 上 Bash 中的主机名",
  "Link": "https://liam.page/2020/04/27/hostname-on-BASH-in-macOS/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003e今天被问到我的 macOS 中 Terminal.app 里的主机名为什么是一颗红心「❤️」。因为设置这个主机名的时间太过久远我也忘记了。于是顺手查了查，得到 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://superuser.com/a/346722\"\u003esuperuser 上的回答\u003c/a\u003e。于是这篇文章做一个翻译、记录和扩展。\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003cp\u003e如果你没有覆盖默认设置的话，Bash 里的环境变量 \u003ccode\u003eHOSTNAME\u003c/code\u003e 保存的是 BSD 主机名的第一个标签（第一个句点前的内容）。于是，若你主机名是 \u003ccode\u003efoo.bar.baz\u003c/code\u003e，那么 Bash 里的环境变量 \u003ccode\u003eHOSTNAME\u003c/code\u003e 的值就会被预设为 \u003ccode\u003efoo\u003c/code\u003e。\u003c/p\u003e\n\u003cp\u003e那么，BSD 主机名来自哪呢？macOS 会按如下顺序寻找：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003ccode\u003e/etc/hostconfig\u003c/code\u003e 当中\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/Library/Preferences/SystemConfiguration/preferences.plist\u003c/code\u003e 当中的 \u003ccode\u003eSystem ▸ System ▸ HostName\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e通过 DNS 反查你的 IP 得到的主机名\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/Library/Preferences/SystemConfiguration/preferences.plist\u003c/code\u003e 当中的 \u003ccode\u003eSystem ▸ Network ▸ HostNames ▸ LocalHostName\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e如果上述所有方案都没有取得主机名，那就简单地设置为 \u003ccode\u003elocalhost\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e这里：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e上述 (1) 不建议修改。\u003c/li\u003e\n\u003cli\u003e上述 (2) 需要通过命令行工具 \u003ccode\u003esudo scutil --set HostName FooBar\u003c/code\u003e 来设置。\u003c/li\u003e\n\u003cli\u003e上述 (3) 由不得普通用户设置。\u003c/li\u003e\n\u003cli\u003e上述 (4) 可在 System Preferences ▸ Sharing 当中设置。\u003c/li\u003e\n\u003c/ul\u003e\n\n    \u003c/div\u003e",
  "Date": "2020-04-27T09:27:29Z",
  "Author": "Liam Huang"
}