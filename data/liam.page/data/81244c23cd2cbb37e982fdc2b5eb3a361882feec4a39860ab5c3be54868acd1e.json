{
  "Source": "liam.page",
  "Title": "TeX 主题选讲：字符",
  "Link": "https://liam.page/2018/05/09/TeX-by-Topic-Characters/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cblockquote\u003e\n\u003cp\u003e此篇基本上是译文，原文是 Victor Eijkhout 所著的《TeX by Topic》的第三章。译文项目参见：\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/CTeX-org/tex-by-topic-cn/releases/latest\"\u003eCTeX-org/tex-by-topic-cn\u003c/a\u003e。\u003cbr/\u003e转载请保留本段文字，尊重原作者和译者版权。\u003cbr/\u003e由于原著使用 GFDL，故而本文也被传染地同样使用 GFDL 许可，而不是本站默认的 BY-NC-SA 4.0 许可。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eTeX 在其内部使用字符编码来表示字符；本章讨论字符编码及相关命令。\u003c/p\u003e\n\u003cp\u003e所涉命令编目：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e\\char\u003c/code\u003e:  显式指定所要排版的字符。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\chardef\u003c/code\u003e:  将一个控制序列定义为一个字符编码的同义词。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\accent\u003c/code\u003e:  放置重音符号的命令。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\if\u003c/code\u003e:  测试字符编码是否相等。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\ifx\u003c/code\u003e:  测试字符编码与分类码是否都相等。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\let\u003c/code\u003e:  将一个控制序列定义为一个记号的同义词。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\uccode\u003c/code\u003e:  对于给定的字符编码，查询或设置其对应的大写变体的编码。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\lccode\u003c/code\u003e:  对于给定的字符编码，查询或设置其对应的小写变体的编码。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\uppercase\u003c/code\u003e:  将普通文本（\u003ccode\u003e\u0026lt;general text\u0026gt;\u003c/code\u003e）转换为大写形式。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\lowercase\u003c/code\u003e:  将普通文本（\u003ccode\u003e\u0026lt;general text\u0026gt;\u003c/code\u003e）转换为小写形式。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\string\u003c/code\u003e:  将一个记号转换为一个字符串。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\escapechar\u003c/code\u003e:  将控制序列转换为一串字符记号时，用作转义字符的字符之编码。在 IniTeX 中默认为 92（\u003ccode\u003e\\\u003c/code\u003e）。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003ch2 id=\"字符编码\"\u003e\u003ca href=\"#字符编码\" class=\"headerlink\" title=\"字符编码\"\u003e\u003c/a\u003e字符编码\u003c/h2\u003e\u003cp\u003e在概念上说，认为 TeX 内部直接对字符进行处理是最简单的；但是实际上 TeX 内部处理的是整数，即\u003cstrong\u003e字符编码\u003c/strong\u003e。\u003c/p\u003e\n\u003cp\u003e不同系统中，字符的编码方式可能不同。因此，TeX 使用其自身定义的字符编码方案。任何从文件或用户终端读入的字符，都会依据编码表转换成字符编码。之后，TeX 会根据这一字符编码为它们分配分类码。编码表基于 7-位 ASCII 编码表，可编码 128 个字符。\u003c/p\u003e\n\u003cp\u003e反引号（\u003ccode\u003e`\u003c/code\u003e，或称左引号）可将字符（准确说是字符记号）转换为其字符编码。在 TeX 中，所有需要 \u003ccode\u003e\u0026lt;number\u0026gt;\u003c/code\u003e 的地方，都可以通过这种方式将一个字符记号的编码传给 TeX：反引号加字符或是反引号加单字符控制序列。例如 \u003ccode\u003e\u003ccode\u003e\\count\\\u003c/code\u003ea\u003c/code\u003e 和 \u003ccode\u003e\\count`\\a\u003c/code\u003e 都表示 \u003ccode\u003e\\count97\u003c/code\u003e。\u003c/p\u003e\n\u003cp\u003e第二种方式在某些情况下是有必要的，例如在下例中，若去掉 \u003ccode\u003e\\\u003c/code\u003e，就会让 TeX 产生误解。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\catcode\u003c/span\u003e`\u003cspan class=\"keyword\"\u003e\\%\u003c/span\u003e=11\u003cspan class=\"keyword\"\u003e\\quad\u003c/span\u003e or\u003cspan class=\"keyword\"\u003e\\quad\u003c/span\u003e \u003cspan class=\"keyword\"\u003e\\def\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\CommentSign\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\char\u003c/span\u003e`\u003cspan class=\"keyword\"\u003e\\%\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e例如在下例中，\u003ccode\u003e=11\u003c/code\u003e 会被认为是注释。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\catcode\u003c/span\u003e`\u003cspan class=\"comment\"\u003e%=11\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e单字符的控制序列可以由任何分类码的字符组成。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e译注：特别地，可以是无效字符。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e当字符记号被转换为字符编码后，字符编码就与字符的形状没有关联了。当然，对于大多数字符来说，在视觉上，其排版输出与输入是一致的。例如输入 \u003ccode\u003ea\u003c/code\u003e 会排版输出字符「a」。不过，即使在常见的符号中，也有例外情况。在计算机现代罗马字体中，就没有小于号和大于号。\u003c/p\u003e\n\u003cp\u003e为了使 TeX 在输出端也不依赖具体的机器，\u003ccode\u003edvi\u003c/code\u003e 文件格式也是用这种字符编码：操作码 $n=0\\ldots127$ 表示：「从当前字体中取出第 $n$ 个字符。」在 \u003cem\u003eTeXprogram\u003c/em\u003e 中可以找到 \u003ccode\u003edvi\u003c/code\u003e 文件的操作码的完整定义。\u003c/p\u003e\n\u003ch2 id=\"字符相关的控制序列\"\u003e\u003ca href=\"#字符相关的控制序列\" class=\"headerlink\" title=\"字符相关的控制序列\"\u003e\u003c/a\u003e字符相关的控制序列\u003c/h2\u003e\u003cp\u003e有许多种方式可以用控制序列来表示字符。例如说，\u003ccode\u003e\\char\u003c/code\u003e 命令可以指定一个用于打印的字符；\u003ccode\u003e\\let\u003c/code\u003e 命令可引入一个与指定字符记号同义的控制序列——包括其字符编码和其分类码。\u003c/p\u003e\n\u003ch3 id=\"表示要排版的字符：-char\"\u003e\u003ca href=\"#表示要排版的字符：-char\" class=\"headerlink\" title=\"表示要排版的字符：\\char\"\u003e\u003c/a\u003e表示要排版的字符：\u003ccode\u003e\\char\u003c/code\u003e\u003c/h3\u003e\u003cp\u003e字符可以通过数值来表示，比如 \u003ccode\u003e\\char98\u003c/code\u003e。该命令会将当前字体中编码为 98 的字符添加到正在构建的水平列表中。\u003c/p\u003e\n\u003cp\u003e相较而言，用八进制或十六进制表示字符编码可能比用十进制更方便。在数值前加上单引号，即可使用八进制数：\u003ccode\u003e\\char\u0026#39;142\u003c/code\u003e；在数值前使用双引号，即可使用十六进制数：\u003ccode\u003e\\char\u0026#34;62\u003c/code\u003e。注意，连续使用两个单引号，比如 \u003ccode\u003e\\char\u0026#39;\u0026#39;62\u003c/code\u003e 是错误的写法——将两个单引号替换为一个双引号的工作是由可视化处理器承担的，而不是数字扫描操作（执行处理器）。\u003c/p\u003e\n\u003cp\u003e由于可用反引号获取字符的编码，在当前字体的编码与 ASCII 兼容时，用 \u003ccode\u003e\\char`b\u003c/code\u003e 或 \u003ccode\u003e\\char`\\b\u003c/code\u003e 也可以得到 \u0026#34;b\u0026#34; 这个字符。\u003c/p\u003e\n\u003cp\u003e表面上看，\u003ccode\u003e\\char\u003c/code\u003e 命令与 \u003ccode\u003e^^\u003c/code\u003e 替换机制类似：两种机制都是通过间接的方式来访问字符。但是，\u003ccode\u003e^^\u003c/code\u003e 替换机制发生的非常早——在 TeX 的输入处理器为字符分配分类码之前；而 \u003ccode\u003e\\char\u003c/code\u003e 命令则在可视化处理器中起作用。从效果上看，\u003ccode\u003e\\char\u003c/code\u003e 是告诉 TeX：「排版字体中第 $n$ 个字符。」\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\\chardef\u003c/code\u003e 命令可定义一个控制序列定义作为一个\u003cstrong\u003e字符编码\u003c/strong\u003e的代替品。它的用法是\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\chardef\u003c/span\u003e\u0026lt;control sequence\u0026gt;\u0026lt;equals\u0026gt;\u0026lt;number\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e此处的 \u003ccode\u003e\u0026lt;number\u0026gt;\u003c/code\u003e 可以是显式给出的数字，也可以是计数器值，也可以是用反引号提取得到的字符编码（见上文）。在 plain TeX 中，就有类似下面的用法：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\chardef\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\%\u003c/span\u003e=`\u003cspan class=\"keyword\"\u003e\\%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e它等价于下面的定义方式：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\chardef\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\%\u003c/span\u003e=37\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e如此定义之后，控制字符 \u003ccode\u003e\\%\u003c/code\u003e 就变成了 \u003ccode\u003e\\char37\u003c/code\u003e 的同义词。也就是说，它可以用于排版第 37 个字符（通常是百分号）。\u003c/p\u003e\n\u003cp\u003e用 \u003ccode\u003e\\chardef\u003c/code\u003e 命令定义的控制序列可作为 \u003ccode\u003e\u0026lt;number\u0026gt;\u003c/code\u003e 使用。在诸如 \u003ccode\u003e\\newbox\u003c/code\u003e 的分配类命令中，就用到了这一特性。用 \u003ccode\u003e\\mathchardef\u003c/code\u003e 命令定义的记号同样可以这样使用。\u003c/p\u003e\n\u003ch3 id=\"隐式字符记号：-let\"\u003e\u003ca href=\"#隐式字符记号：-let\" class=\"headerlink\" title=\"隐式字符记号：\\let\"\u003e\u003c/a\u003e隐式字符记号：\u003ccode\u003e\\let\u003c/code\u003e\u003c/h3\u003e\u003cp\u003e另一种定义表示字符的控制序列的方式是使用 \u003ccode\u003e\\let\u003c/code\u003e  命令，并且将字符记号置于可选等号的右边：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\let\u003c/span\u003e\u0026lt;control sequence\u0026gt;\u0026lt;equals\u0026gt;\u0026lt;token\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e如此，得到的控制序列称为\u003cstrong\u003e隐式字符\u003c/strong\u003e记号。\u003c/p\u003e\n\u003cp\u003e在 plain TeX 中有对左右花括号定义同义控制序列：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\let\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\bgroup\u003c/span\u003e={ \u003cspan class=\"keyword\"\u003e\\let\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\egroup\u003c/span\u003e=}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e如此，得到的控制序列被称为「隐式花括号」。\u003c/p\u003e\n\u003cp\u003e通过 \u003ccode\u003e\\let\u003c/code\u003e 和 \u003ccode\u003e\\chardef\u003c/code\u003e 将字符赋值给控制序列是有区别的。被 \u003ccode\u003e\\let\u003c/code\u003e 定义的控制序列是字符编码与分类码这一组合的替代品。\u003c/p\u003e\n\u003cp\u003e例如在下例中，\u003ccode\u003e\\b\u003c/code\u003e 关闭了 \u003ccode\u003e\\m\u003c/code\u003e 定义所在的分组，因此 TeX 会提示错误：「未定义的控制序列」。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\catcode\u003c/span\u003e`|=2 \u003cspan class=\"comment\"\u003e% make the bar an end of group\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\let\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\b\u003c/span\u003e=|  \u003cspan class=\"comment\"\u003e% make \\b a bar character\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e{\u003cspan class=\"keyword\"\u003e\\def\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\m\u003c/span\u003e{...}\u003cspan class=\"keyword\"\u003e\\b\u003c/span\u003e \u003cspan class=\"keyword\"\u003e\\m\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e又例如在下例中，\u003ccode\u003e\\b\u003c/code\u003e 的定义在分类码修改之前，因此它无法承担分组结束符的作用，只能表示一条竖线（或是其他任何在当前字体中编号为 124 的字符）。因此，这里构造的是一个不闭合的分组。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\let\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\b\u003c/span\u003e=| \u003cspan class=\"comment\"\u003e% make \\b a bar character\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\catcode\u003c/span\u003e`|=2  \u003cspan class=\"comment\"\u003e% make the bar character end of group\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e{\u003cspan class=\"keyword\"\u003e\\def\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\m\u003c/span\u003e{...}\u003cspan class=\"keyword\"\u003e\\b\u003c/span\u003e \u003cspan class=\"keyword\"\u003e\\m\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e前一个例子表明，即是花括号本身被重定义了（例如在排版 C 语言代码时被定义成活动字符），分组开始和结束的功能依然可以由控制序列 \u003ccode\u003e\\bgroup\u003c/code\u003e 和 \u003ccode\u003e\\egroup\u003c/code\u003e 来承担。\u003c/p\u003e\n\u003cp\u003e隐式字符记号的行为与真实字符记号非常相似。举例来说，在如此定义之后，\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\catcode\u003c/span\u003e`|=2 \u003cspan class=\"keyword\"\u003e\\let\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\b\u003c/span\u003e=|\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e以下两个真值测试均为真。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\if\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\b\u003c/span\u003e|\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\ifcat\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\b\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\n\u003cp\u003e再举一例。在 plain TeX 中，有如下对上标和下标符号的定义：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\let\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\sp\u003c/span\u003e=\u003cspan class=\"built_in\"\u003e^\u003c/span\u003e \u003cspan class=\"keyword\"\u003e\\let\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\sb\u003c/span\u003e=\u003cspan class=\"built_in\"\u003e_\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e如此一来，即使键盘上没有这两个符号，也可以通过这两个控制序列得到数学环境的上标和下标。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ex\u003cspan class=\"keyword\"\u003e\\sp\u003c/span\u003e2\u003cspan class=\"keyword\"\u003e\\sb\u003c/span\u003e{ij}\u003cspan class=\"keyword\"\u003e\\quad\u003c/span\u003e gives\u003cspan class=\"keyword\"\u003e\\quad\u003c/span\u003e \u003cspan class=\"built_in\"\u003e$\u003c/span\u003ex\u003cspan class=\"keyword\"\u003e\\sp\u003c/span\u003e2\u003cspan class=\"keyword\"\u003e\\sb\u003c/span\u003e{ij}\u003cspan class=\"built_in\"\u003e$\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e若是编写格式的人的键盘上也没有这些键，那么就要用更深的技巧了：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e{\u003cspan class=\"keyword\"\u003e\\lccode\u003c/span\u003e`,=94 \u003cspan class=\"keyword\"\u003e\\lccode\u003c/span\u003e`.=95 \u003cspan class=\"keyword\"\u003e\\catcode\u003c/span\u003e`,=7 \u003cspan class=\"keyword\"\u003e\\catcode\u003c/span\u003e`.=8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\lowercase\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\global\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\let\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\sp\u003c/span\u003e=, \u003cspan class=\"keyword\"\u003e\\global\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\let\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\sb\u003c/span\u003e=.}}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e至于它为什么能起作用，可详见后文关于 \u003ccode\u003e\\lowercase\u003c/code\u003e 的介绍。由于我们无法键入 \u003ccode\u003e^\u003c/code\u003e，因此 TeX2 中的 \u003ccode\u003e^^\u003c/code\u003e 表示法无法在此解决问题。考虑到上标和下标的字符编码以十六进制表示分别是 \u003ccode\u003e5e\u003c/code\u003e 和 \u003ccode\u003e5f\u003c/code\u003e，利用 TeX3 中扩展的表示法可以依照如下方式解决问题：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e{\u003cspan class=\"keyword\"\u003e\\catcode\u003c/span\u003e`\u003cspan class=\"keyword\"\u003e\\,\u003c/span\u003e=7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\global\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\let\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\sp\u003c/span\u003e=,,5e \u003cspan class=\"keyword\"\u003e\\global\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\let\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\sb\u003c/span\u003e=,,5f}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\n\u003cp\u003e使用 \u003ccode\u003e\\meaning\u003c/code\u003e 命令可以查看使用 \u003ccode\u003e\\let\u003c/code\u003e 定义的命令究竟代表哪个字符。例如下列代码将给出 \u0026#34;the character 3\u0026#34;。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\let\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\x\u003c/span\u003e=3 \u003cspan class=\"keyword\"\u003e\\meaning\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\x\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\n\u003ch2 id=\"重音\"\u003e\u003ca href=\"#重音\" class=\"headerlink\" title=\"重音\"\u003e\u003c/a\u003e重音\u003c/h2\u003e\u003cp\u003e重音符号可用水平命令（\u003ccode\u003e\u0026lt;horizontal command\u0026gt;\u003c/code\u003e）\u003ccode\u003e\\accent\u003c/code\u003e 给出。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\accent\u003c/span\u003e\u0026lt;8-bit number\u0026gt;\u0026lt;optional assignments\u0026gt;\u0026lt;character\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e其中，\u003ccode\u003e\u0026lt;character\u0026gt;\u003c/code\u003e 是分类码为 11 或 12 的字符，或是形如 \u003ccode\u003e\\char`\u0026lt;8-bit number\u0026gt;\u003c/code\u003e 的命令，抑或是一个由 \u003ccode\u003e\\chardef\u003c/code\u003e 定义的记号。此时，重音符号会被放置在该字符的上方。若 \u003ccode\u003e\u0026lt;character\u0026gt;\u003c/code\u003e 不是上述四种情况之中的任意一种，则重音符号会被 \u003ccode\u003e\\char\u003c/code\u003e 命令直接处理，从而给出一个「悬在半空」的重音符号。可选的 \u003ccode\u003e\u0026lt;optional assignments\u0026gt;\u003c/code\u003e 可用于改变重音和字符的字体。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\\accent\u003c/code\u003e 命令后必须紧跟 \u003ccode\u003e\u0026lt;character\u0026gt;\u003c/code\u003e。这一规定避免了将重音符号置于连字之上或是置于另一个重音符号之上。在诸如印度语及越南语的少数语言中，确实存在双重音符号的情况；因此这种规定有时可能会令人不爽。不过，将重音符号置于另一个之上可以在数学模式中实现。\u003c/p\u003e\n\u003cp\u003e添加重音符号不会改变字符的宽度。对于重音符号摆放的位置，TeX 假设字体文件中，重音符号摆放的高度与字母 x 的高度相适应；对于其他高度的字母，TeX 则可以通过向上或向下移动恰当的高度来调整重音符号的位置。\u003c/p\u003e\n\u003cp\u003e在 TeX 中没有真正的下重音，而是将它们视作位置较低的上重音实现的。更准确的做法是：编写一个宏，测量紧跟着的字符的尺寸，而后相应地升高或降低重音符号的位置。plain TeX 中的变音宏 \u003ccode\u003e\\c\u003c/code\u003e 就是这样做的。不过，对于有下伸部分的字母，它不会降低重音符号的位置。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e译注：所谓下伸部分，指的是个别小写字母比其它小写字母更低的部分。比如「p」、「q」的「小尾巴」。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e重音符号的水平位置由 \u003ccode\u003e\\fontdimen1\u003c/code\u003e（\u003cstrong\u003e每点倾斜\u003c/strong\u003e，\u003cstrong\u003eslant per point\u003c/strong\u003e）控制。为此，TeX 会引入铅空以校正重音符号的水平位置。注意，尽管这些铅空是自动插入的，但这些铅空隶属\u003cstrong\u003e显式\u003c/strong\u003e铅空。因此，它们会抑制铅空前后的连字符。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e译注：铅空是活字印刷排版时代，排版工人用于调整字符水平位置而使用的空白铅块。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e以下代码能将水平列表转储出来，作为铅空和重音符号的示例。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\setbox\u003c/span\u003e0=\u003cspan class=\"keyword\"\u003e\\hbox\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\it\u003c/span\u003e \u003cspan class=\"keyword\"\u003e\\`\u003c/span\u003el}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\showbox\u003c/span\u003e0\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e其结果是\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\hbox\u003c/span\u003e(9.58334+0.0)x2.55554\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e.\u003cspan class=\"keyword\"\u003e\\kern\u003c/span\u003e -0.61803 (for accent)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e.\u003cspan class=\"keyword\"\u003e\\hbox\u003c/span\u003e(6.94444+0.0)x5.11108, shifted -2.6389\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e..\u003cspan class=\"keyword\"\u003e\\tenit\u003c/span\u003e ^^R\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e.\u003cspan class=\"keyword\"\u003e\\kern\u003c/span\u003e -4.49306 (for accent)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e.\u003cspan class=\"keyword\"\u003e\\tenit\u003c/span\u003e l\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e注意，TeX 首先放置重音符号，以保证最后一个字符的倾斜校正仍然有效。\u003c/p\u003e\n\u003ch2 id=\"字符真值测试\"\u003e\u003ca href=\"#字符真值测试\" class=\"headerlink\" title=\"字符真值测试\"\u003e\u003c/a\u003e字符真值测试\u003c/h2\u003e\u003cp\u003e使用 \u003ccode\u003e\\if\u003c/code\u003e 可检测两个字符记号的字符编码是否相等：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\if\u003c/span\u003e\u0026lt;token\u003cspan class=\"built_in\"\u003e$\u003c/span\u003e\u003cspan class=\"built_in\"\u003e_\u003c/span\u003e1\u003cspan class=\"built_in\"\u003e$\u003c/span\u003e\u0026gt;\u0026lt;token\u003cspan class=\"built_in\"\u003e$\u003c/span\u003e\u003cspan class=\"built_in\"\u003e_\u003c/span\u003e2\u003cspan class=\"built_in\"\u003e$\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003eTeX 遇到 \u003ccode\u003e\\if\u003c/code\u003e 后，会对其后的记号持续展开，直至遇见两个不可展开的记号。而后，不管分类码如何，若这两个记号的字符编码相等，则真值测试为真。\u003c/p\u003e\n\u003cp\u003e对于 TeX 来说，不可展开的控制序列的字符码是 256 而分类码为 16（因此控制序列的字符编码只与控制序列的字符编码相等），除非控制序列被 \u003ccode\u003e\\let\u003c/code\u003e 定义成一个非活动字符记号——如前所述，此时该控制序列的字符编码和分类码与相应的字符相同。\u003c/p\u003e\n\u003cp\u003e后续章节会介绍用于检验分类码的 \u003ccode\u003e\\ifcat\u003c/code\u003e 命令；此处关注真值测试\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\ifx\u003c/span\u003e\u0026lt;token\u003cspan class=\"built_in\"\u003e$\u003c/span\u003e\u003cspan class=\"built_in\"\u003e_\u003c/span\u003e1\u003cspan class=\"built_in\"\u003e$\u003c/span\u003e\u0026gt;\u0026lt;token\u003cspan class=\"built_in\"\u003e$\u003c/span\u003e\u003cspan class=\"built_in\"\u003e_\u003c/span\u003e2\u003cspan class=\"built_in\"\u003e$\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e则检验字符编码和分类码是否均相等。特别注意的是，TeX 不会展开 \u003ccode\u003e\\ifx\u003c/code\u003e 之后的记号。不过，若它们是宏，则 TeX 会检验它们的展开是否相等。\u003c/p\u003e\n\u003cp\u003e对于 \u003ccode\u003e\\chardef\u003c/code\u003e 定义的数量，则可以用 \u003ccode\u003e\\ifnum\u003c/code\u003e 来检验。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\chardef\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\a\u003c/span\u003e=`x \u003cspan class=\"keyword\"\u003e\\chardef\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\b\u003c/span\u003e=`y \u003cspan class=\"keyword\"\u003e\\ifnum\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\a\u003c/span\u003e=\u003cspan class=\"keyword\"\u003e\\b\u003c/span\u003e \u003cspan class=\"comment\"\u003e% is false\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e这是因为由 \u003ccode\u003e\\chardef\u003c/code\u003e 定义的记号可被当做是数字来使用。\u003c/p\u003e\n\u003ch2 id=\"大写和小写\"\u003e\u003ca href=\"#大写和小写\" class=\"headerlink\" title=\"大写和小写\"\u003e\u003c/a\u003e大写和小写\u003c/h2\u003e\u003ch3 id=\"大写和小写的编码\"\u003e\u003ca href=\"#大写和小写的编码\" class=\"headerlink\" title=\"大写和小写的编码\"\u003e\u003c/a\u003e大写和小写的编码\u003c/h3\u003e\u003cp\u003e每个字符编码都有对应的\u003cstrong\u003e大写编码\u003c/strong\u003e和\u003cstrong\u003e小写编码\u003c/strong\u003e。它们可分别用\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\uccode\u003c/span\u003e\u0026lt;number\u0026gt;\u0026lt;equals\u0026gt;\u0026lt;number\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e和\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\lccode\u003c/span\u003e\u0026lt;number\u0026gt;\u0026lt;equals\u0026gt;\u0026lt;number\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e来指定。在 IniTeX 中，\u003ccode\u003ea..z\u003c/code\u003e 及 \u003ccode\u003eA..Z\u003c/code\u003e 的大写编码为 \u003ccode\u003eA..Z\u003c/code\u003e 而小写编码为 \u003ccode\u003ea..z\u003c/code\u003e。其余所有的字符的大写编码和小写编码均为零。\u003c/p\u003e\n\u003ch3 id=\"大写和小写命令\"\u003e\u003ca href=\"#大写和小写命令\" class=\"headerlink\" title=\"大写和小写命令\"\u003e\u003c/a\u003e大写和小写命令\u003c/h3\u003e\u003cp\u003e\u003ccode\u003e\\uppercase{...}\u003c/code\u003e 和 \u003ccode\u003e\\lowercase{...}\u003c/code\u003e 命令会遍历参数记号列表，而后将所有对应大写编码或小写编码不为零的显式字符替换成相应的大写编码或小写编码，分类码则维持不变。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\\uppercase\u003c/code\u003e 和 \u003ccode\u003e\\lowercase\u003c/code\u003e 命令的参数是普通文本（\u003ccode\u003e\u0026lt;general text\u0026gt;\u003c/code\u003e），其定义如下：\u003c/p\u003e\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/LaTeX/general_text.png\"/\u003e\u003c/p\u003e\n\u003cp\u003e此处，左花括号可以是隐式字符记号，但右花括号必须是分类码为 2 的显式字符记号。在寻找左花括号时，TeX 会进行宏展开。\u003c/p\u003e\n\u003cp\u003e与 \u003ccode\u003e\\number\u003c/code\u003e 和 \u003ccode\u003e\\string\u003c/code\u003e 不同，大小写转换不是宏展开，而是在执行处理器中执行的。下列尝试得到 \u003ccode\u003e\\A\u003c/code\u003e 的代码会因 \u003ccode\u003e\\uppercase\u003c/code\u003e 不可展开而报错——TeX 将在 \u003ccode\u003e\\uppercase\u003c/code\u003e 之前插入 \u003ccode\u003e\\endcsname\u003c/code\u003e。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e译注：这里的表述比较奇怪。事实上，TeX 要求 \u003ccode\u003e\\csname\u003c/code\u003e 和 \u003ccode\u003e\\endcsname\u003c/code\u003e 之间的内容展开到底后不能有不可展开的原语；而 \u003ccode\u003e\\uppercase\u003c/code\u003e 正是一个不可展开的原语，故而报错。这里提出 TeX 在 \u003ccode\u003e\\uppercase\u003c/code\u003e 之前插入 \u003ccode\u003e\\endcsname\u003c/code\u003e，原因可能是 TeX 在发现问题「尝试修复的过程中」，会做这样的操作。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\expandafter\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\csname\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\uppercase\u003c/span\u003e{a}\u003cspan class=\"keyword\"\u003e\\endcsname\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e正确的写法如下：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\uppercase\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\csname\u003c/span\u003e a\u003cspan class=\"keyword\"\u003e\\endcsname\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e下例对 \u003ccode\u003e\\uppercase\u003c/code\u003e 的使用是正确的，它可用于检测一个字符是否为大写：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\def\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\ifIsUppercase\u003c/span\u003e\u003cspan class=\"params\"\u003e#1\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\uppercase\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\if\u003c/span\u003e\u003cspan class=\"params\"\u003e#1\u003c/span\u003e}\u003cspan class=\"params\"\u003e#1\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e大写检测也可以这样做：\u003ccode\u003e\\ifnum`#1=\\uccode`#1\u003c/code\u003e。\u003c/p\u003e\n\u003cp\u003e首字母大写（首字母的字符编码与其 \u003ccode\u003e\\lccode\u003c/code\u003e 不同）的单词是否允许截断连字取决于 \u003ccode\u003e\\uchyph\u003c/code\u003e 参数。若改参数为正数，则允许对首字母大写的单词进行截断连字。\u003c/p\u003e\n\u003ch3 id=\"关键字的大写与小写形式\"\u003e\u003ca href=\"#关键字的大写与小写形式\" class=\"headerlink\" title=\"关键字的大写与小写形式\"\u003e\u003c/a\u003e关键字的大写与小写形式\u003c/h3\u003e\u003cp\u003eTeX 关键字可以是大写形式也可以是小写形式。比如 \u003ccode\u003ept\u003c/code\u003e 还可以写作 \u003ccode\u003epT\u003c/code\u003e、\u003ccode\u003ePt\u003c/code\u003e 以及 \u003ccode\u003ePT\u003c/code\u003e。此处，TeX 不使用 \u003ccode\u003e\\uccode\u003c/code\u003e 及 \u003ccode\u003e\\lccode\u003c/code\u003e 表来确定小写形式；而是直接在大写字母的字符编码上加 32 来得到其小写形式——ASCII 编码中，同一字母大小写形式之差为 32。这种做法与 TeX 在处理非罗马字符时的具体实现方式有些关联；详见 TeXbook 第 370 页。\u003c/p\u003e\n\u003ch3 id=\"巧用-uppercase-和-lowercase\"\u003e\u003ca href=\"#巧用-uppercase-和-lowercase\" class=\"headerlink\" title=\"巧用 \\uppercase 和 \\lowercase\"\u003e\u003c/a\u003e巧用 \u003ccode\u003e\\uppercase\u003c/code\u003e 和 \u003ccode\u003e\\lowercase\u003c/code\u003e\u003c/h3\u003e\u003cp\u003e利用 \u003ccode\u003e\\uppercase\u003c/code\u003e 和 \u003ccode\u003e\\lowercase\u003c/code\u003e 不会改变分类码的特性，可以构造出一些其它方式难以构造的字符编码-分类码配对。\u003c/p\u003e\n\u003cp\u003e再将一个稍有些不同的例子。考虑这一问题（已由 Rainer Schopf 解决）：给定一个计数器 \u003ccode\u003e\\newcount\\mycount\u003c/code\u003e，如何将其值作为字符编号输出到终端？解法如下。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\lccode\u003c/span\u003e`a=\u003cspan class=\"keyword\"\u003e\\mycount\u003c/span\u003e \u003cspan class=\"keyword\"\u003e\\chardef\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\terminal\u003c/span\u003e=16\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\lowercase\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\write\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\terminal\u003c/span\u003e{a}}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e此处，\u003ccode\u003e\\lowercase\u003c/code\u003e 命令有效地将 \u003ccode\u003e\\write\u003c/code\u003e 命令的参数，从「\u003ccode\u003ea\u003c/code\u003e」转换成目标值。\u003c/p\u003e\n\u003ch2 id=\"字符相关编码\"\u003e\u003ca href=\"#字符相关编码\" class=\"headerlink\" title=\"字符相关编码\"\u003e\u003c/a\u003e字符相关编码\u003c/h2\u003e\u003cp\u003e每个字符编码都有一系列与之相关的 \u003ccode\u003e\u0026lt;codename\u0026gt;\u003c/code\u003e。这些整数的取值范围各不相同；它们决定了在不同场合下，TeX 会如何处理该字符，或是决定了在不同场合下，该字符会如何影响 TeX 自身。\u003c/p\u003e\n\u003cp\u003e这些编码的名字罗列如下：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e\\catcode\u003c/code\u003e:  4 位数字（\u003ccode\u003e\u0026lt;4-bit number\u0026gt;\u003c/code\u003e，0--15）；字符的分类码。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\mathcode\u003c/code\u003e:  15 位数字（\u003ccode\u003e\u0026lt;15-bit number\u0026gt;\u003c/code\u003e，0--\u003ccode\u003e\u0026#34;7FFF\u003c/code\u003e 或 \u003ccode\u003e\u0026#34;8000\u003c/code\u003e）；它决定 TeX 在数学环境下如何处理该字符。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\delcode\u003c/code\u003e:  27 位数字（\u003ccode\u003e\u0026lt;27-bit number\u0026gt;\u003c/code\u003e，0--\u003ccode\u003e\\hex7$\\,$FFF$\\,$FFF\u003c/code\u003e）；它决定 TeX 在数学环境下如何处理出现在 \u003ccode\u003e\\left\u003c/code\u003e 和 \u003ccode\u003e\\right\u003c/code\u003e 之后的该字符。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\sfcode\u003c/code\u003e:  整数；它决定 TeX 如何处理位于该字符之后的空距。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\lccode\u003c/code\u003e、\u003ccode\u003e\\uccode\u003c/code\u003e:  8 位数字（\u003ccode\u003e\u0026lt;8-bit number\u0026gt;\u003c/code\u003e，0--255）；如前所述，这是字符的小写及大写的编码。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"将记号转换为字符串\"\u003e\u003ca href=\"#将记号转换为字符串\" class=\"headerlink\" title=\"将记号转换为字符串\"\u003e\u003c/a\u003e将记号转换为字符串\u003c/h2\u003e\u003cp\u003e\u003ccode\u003e\\string\u003c/code\u003e  命令能将其下一个记号展开为由若干字符组成的字符串。例如，下例将输出 \u003ccode\u003e\\control\u003c/code\u003e。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\tt\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\string\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\control\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e又例如下例将输出 \u003ccode\u003e$\u003c/code\u003e。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\tt\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\string\u003c/span\u003e\u003cspan class=\"built_in\"\u003e$\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e注意，字符串操作位于记号化之后。因此下例\u003cstrong\u003e不能\u003c/strong\u003e输出注释符号 \u003ccode\u003e%\u003c/code\u003e，因为早在输入处理器中，注释符号就被删除了。于是，下例中的 \u003ccode\u003e\\string\u003c/code\u003e 会将下一行的第一个记号转换为字符串。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\tt\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\string\u003c/span\u003e\u003cspan class=\"comment\"\u003e%\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003ccode\u003e\\string\u003c/code\u003e 命令由展开处理器执行。因此，除非显式地禁止，它必然会被展开。\u003c/p\u003e\n\u003ch3 id=\"输出控制序列\"\u003e\u003ca href=\"#输出控制序列\" class=\"headerlink\" title=\"输出控制序列\"\u003e\u003c/a\u003e输出控制序列\u003c/h3\u003e\u003cp\u003e上例使用了打字机字族。这是因为，在计算机现代字体中，罗马字族里没有反斜线这一字符。 不过，TeX 也可以使用其它字符来打印控制序列：具体来说，TeX 使用 \u003ccode\u003e\\escapechar\u003c/code\u003e 保存的字符编码对应的字符来打印控制序列。在使用下列命令时，也会用到 \u003ccode\u003e\\escapechar\u003c/code\u003e 这个宏保存的值： \u003ccode\u003e\\write\u003c/code\u003e、\u003ccode\u003e\\message\u003c/code\u003e、\u003ccode\u003e\\errmessage\u003c/code\u003e、\u003ccode\u003e\\show\u003c/code\u003e、\u003ccode\u003e\\showthe\u003c/code\u003e 以及 \u003ccode\u003e\\meaning\u003c/code\u003e。若 \u003ccode\u003e\\escapechar\u003c/code\u003e 的值为负或者大于 255，则转义字符不会显示出来；此外，在 IniTeX 中 \u003ccode\u003e\\escapechar\u003c/code\u003e 的默认值是 92，即反斜线的字符编码。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e译注：\u003ccode\u003e\\tt\u003c/code\u003e 是 plain TeX 风格的字体选择命令。在 LaTeX 中，应当使用 \u003ccode\u003e\\ttfamily\u003c/code\u003e 或者 \u003ccode\u003e\\texttt\u003c/code\u003e 代替。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e在 \u003ccode\u003e\\write\u003c/code\u003e 语句中，有时可用 \u003ccode\u003e\\noexpand\u003c/code\u003e 代替 \u003ccode\u003e\\string\u003c/code\u003e。\u003c/p\u003e\n\u003ch3 id=\"string-输出输出字符串的分类码\"\u003e\u003ca href=\"#string-输出输出字符串的分类码\" class=\"headerlink\" title=\"\\string 输出输出字符串的分类码\"\u003e\u003c/a\u003e\u003ccode\u003e\\string\u003c/code\u003e 输出输出字符串的分类码\u003c/h3\u003e\u003cp\u003e\u003ccode\u003e\\string\u003c/code\u003e 命令输出的字符串中，各个字符的分类码均为 12，唯独被字符串化的控制序列中的空格，其分类码是 10。由于控制序列内部不存在分类码的说法，\u003ccode\u003e\\string\u003c/code\u003e 输出的所有空格必定只是\u003cstrong\u003e空格字符\u003c/strong\u003e，也就是说，它的字符编码是 32。由于 TeX 的输入处理器会将所有空格记号的字符编码设置为 32，「滑稽空格」出现在控制序列中的机会相当渺茫。\u003c/p\u003e\n\u003cp\u003e在分类码方面，其他命令的行为与 \u003ccode\u003e\\string\u003c/code\u003e 表现一致：\u003ccode\u003e\\number\u003c/code\u003e、\u003ccode\u003e\\romannumeral\u003c/code\u003e、\u003ccode\u003e\\jobname\u003c/code\u003e、\u003ccode\u003e\\fontname\u003c/code\u003e、\u003ccode\u003e\\meaning\u003c/code\u003e 以及 \u003ccode\u003e\\the\u003c/code\u003e。\u003c/p\u003e\n\n    \u003c/div\u003e",
  "Date": "2018-05-09T01:23:29Z",
  "Author": "Liam Huang"
}