{
  "Source": "liam.page",
  "Title": "让所有的公式都使用正文直立字体",
  "Link": "https://liam.page/2015/05/07/make-every-equations-in-your-document-upright/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003e首先说明，\u003cstrong\u003e这是邪道\u003c/strong\u003e，除非你知道自己在干什么，请不要使用这篇文章提到的方法。这篇文章纯粹是一个技巧的记录，在某些时候可能会有用。\u003c/p\u003e\n\u003cp\u003e有时候我们会需要将公式字体修改为正文的 \u003ccode\u003e\\rmfamily\\upright\\normalsize\u003c/code\u003e 的样式。虽然看起来很复杂，其实却很简单。我们只需要在导言区末尾添加以下两行代码：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\everymath\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\expandafter\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\the\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\everymath\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\mathgroup\u003c/span\u003e0}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\everydisplay\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\expandafter\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\the\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\everydisplay\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\mathgroup\u003c/span\u003e0}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003ch3 id=\"解释\"\u003e\u003ca href=\"#解释\" class=\"headerlink\" title=\"解释\"\u003e\u003c/a\u003e解释\u003c/h3\u003e\u003cp\u003e这里实际起作用的是 \u003ccode\u003e\\mathgroup0\u003c/code\u003e。它将数学字体设置为第 \u003ccode\u003e0\u003c/code\u003e 组字体，也就是正文字体。\u003c/p\u003e\n\u003cp\u003e而 \u003ccode\u003e\\expandafter{\\the\\everymath\u003c/code\u003e 能在外层的 \u003ccode\u003e\\everymath\u003c/code\u003e 起作用之前，先将内层的 \u003ccode\u003e\\everymath\u003c/code\u003e 展开。这样可以将 \u003ccode\u003e\\everymath\u003c/code\u003e 的结果保留。若不然，比如有代码：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\everymath\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\displaystyle\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\everymath\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\mathgroup\u003c/span\u003e0}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e作者的本意是将每个行内数学公式都是用 \u003ccode\u003e\\displaystyle\u003c/code\u003e，同时设置字体为正文字体。但实际上，由于第二行的存在，第一行的效果被覆盖掉了。为了保证我们添加的代码不影响已有的设置，所以要用 \u003ccode\u003e\\expandafter{\\the\\everymath\u003c/code\u003e 的方式对已有的设置进行保护。例如，下面的代码则可以达到目的：\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\everymath\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\displaystyle\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\everymath\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\expandafter\u003c/span\u003e{\u003cspan class=\"keyword\"\u003e\\the\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\everymath\u003c/span\u003e\u003cspan class=\"keyword\"\u003e\\mathgroup\u003c/span\u003e0}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\n    \u003c/div\u003e",
  "Date": "2015-05-07T09:33:54Z",
  "Author": "Liam Huang"
}