{
  "Source": "liam.page",
  "Title": "用 Python 将中文数字转换成阿拉伯数字",
  "Link": "https://liam.page/2016/07/26/translate-Chinese-digits-to-Arabic-number/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003e在工作中，时不时会遇到需要将中文数字或者全角数字转换为半角阿拉伯数字的情形，于是写了一个简单的脚本来处理这样的情况。\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003cp\u003e脚本很简单，唯一需要思考一下的是，为什么「万」和「亿」不能与「千」、「百」、「十」放在一起处理。这个问题想通了，代码也就好理解了。\u003c/p\u003e\n\u003cp\u003e不多说，上代码。\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003cfigcaption\u003e\u003cspan\u003econvertChineseDigitsToArabic.py\u003c/span\u003e\u003c/figcaption\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e28\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e29\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e30\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e31\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e32\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e33\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e34\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e35\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e36\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e37\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e38\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e39\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e40\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e41\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e42\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e43\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e44\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e45\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e46\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e47\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003echs_arabic_map = {\u003cspan class=\"string\"\u003eu\u0026#39;零\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e0\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;一\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;二\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e2\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;三\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e3\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;四\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e4\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"string\"\u003eu\u0026#39;五\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e5\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;六\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e6\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;七\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e7\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;八\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e8\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;九\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e9\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"string\"\u003eu\u0026#39;十\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e10\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;百\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e100\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;千\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e10\u003c/span\u003e ** \u003cspan class=\"number\"\u003e3\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;万\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e10\u003c/span\u003e ** \u003cspan class=\"number\"\u003e4\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"string\"\u003eu\u0026#39;〇\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e0\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;壹\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;贰\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e2\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;叁\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e3\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;肆\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e4\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"string\"\u003eu\u0026#39;伍\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e5\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;陆\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e6\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;柒\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e7\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;捌\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e8\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;玖\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e9\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"string\"\u003eu\u0026#39;拾\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e10\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;佰\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e100\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;仟\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e10\u003c/span\u003e ** \u003cspan class=\"number\"\u003e3\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;萬\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e10\u003c/span\u003e ** \u003cspan class=\"number\"\u003e4\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"string\"\u003eu\u0026#39;亿\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e10\u003c/span\u003e ** \u003cspan class=\"number\"\u003e8\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;億\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e10\u003c/span\u003e ** \u003cspan class=\"number\"\u003e8\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;幺\u0026#39;\u003c/span\u003e: \u003cspan class=\"number\"\u003e1\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"string\"\u003eu\u0026#39;０\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e0\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;１\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e1\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;２\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e2\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;３\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e3\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;４\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e4\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"string\"\u003eu\u0026#39;５\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e5\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;６\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e6\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;７\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e7\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;８\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e8\u003c/span\u003e, \u003cspan class=\"string\"\u003eu\u0026#39;９\u0026#39;\u003c/span\u003e:\u003cspan class=\"number\"\u003e9\u003c/span\u003e}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"title function_\"\u003econvertChineseDigitsToArabic\u003c/span\u003e (chinese_digits, encoding=\u003cspan class=\"string\"\u003e\u0026#34;utf-8\u0026#34;\u003c/span\u003e):\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"built_in\"\u003eisinstance\u003c/span\u003e (chinese_digits, \u003cspan class=\"built_in\"\u003estr\u003c/span\u003e):\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        chinese_digits = chinese_digits.decode (encoding)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    result  = \u003cspan class=\"number\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    tmp     = \u003cspan class=\"number\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    hnd_mln = \u003cspan class=\"number\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003efor\u003c/span\u003e count \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"built_in\"\u003erange\u003c/span\u003e(\u003cspan class=\"built_in\"\u003elen\u003c/span\u003e(chinese_digits)):\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        curr_char  = chinese_digits[count]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        curr_digit = chs_arabic_map.get(curr_char, \u003cspan class=\"literal\"\u003eNone\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e# meet 「亿」 or 「億」\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e curr_digit == \u003cspan class=\"number\"\u003e10\u003c/span\u003e ** \u003cspan class=\"number\"\u003e8\u003c/span\u003e:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            result  = result + tmp\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            result  = result * curr_digit\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            \u003cspan class=\"comment\"\u003e# get result before 「亿」 and store it into hnd_mln\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            \u003cspan class=\"comment\"\u003e# reset `result`\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            hnd_mln = hnd_mln * \u003cspan class=\"number\"\u003e10\u003c/span\u003e ** \u003cspan class=\"number\"\u003e8\u003c/span\u003e + result\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            result  = \u003cspan class=\"number\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            tmp     = \u003cspan class=\"number\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e# meet 「万」 or 「萬」\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003eelif\u003c/span\u003e curr_digit == \u003cspan class=\"number\"\u003e10\u003c/span\u003e ** \u003cspan class=\"number\"\u003e4\u003c/span\u003e:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            result = result + tmp\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            result = result * curr_digit\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            tmp    = \u003cspan class=\"number\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e# meet 「十」, 「百」, 「千」 or their traditional version\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003eelif\u003c/span\u003e curr_digit \u0026gt;= \u003cspan class=\"number\"\u003e10\u003c/span\u003e:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            tmp    = \u003cspan class=\"number\"\u003e1\u003c/span\u003e \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e tmp == \u003cspan class=\"number\"\u003e0\u003c/span\u003e \u003cspan class=\"keyword\"\u003eelse\u003c/span\u003e tmp\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            result = result + curr_digit * tmp\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            tmp    = \u003cspan class=\"number\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"comment\"\u003e# meet single digit\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003eelif\u003c/span\u003e curr_digit \u003cspan class=\"keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"keyword\"\u003enot\u003c/span\u003e \u003cspan class=\"literal\"\u003eNone\u003c/span\u003e:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            tmp = tmp * \u003cspan class=\"number\"\u003e10\u003c/span\u003e + curr_digit\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003cspan class=\"keyword\"\u003eelse\u003c/span\u003e:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e            \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e result\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    result = result + tmp\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    result = result + hnd_mln\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e result\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e完整版见：\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://github.com/Liam0205/py-tools/blob/master/convertChineseDigitsToArabic.py\"\u003eGitHub Repo\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e测试用例来自：\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://fayaa.com/code/view/37/\"\u003efayaa\u003c/a\u003e\u003c/p\u003e\n\n    \u003c/div\u003e",
  "Date": "2016-07-26T12:09:59Z",
  "Author": "Liam Huang"
}