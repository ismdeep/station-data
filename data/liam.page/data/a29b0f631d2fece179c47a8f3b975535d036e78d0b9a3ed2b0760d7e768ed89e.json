{
  "Source": "liam.page",
  "Title": "使用合适的字体回退机制（Fallback）改善网页在 Windows 平台的字体显示效果",
  "Link": "https://liam.page/2015/04/30/using-font-fallback-to-enhance-the-appreance-on-windows/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003e昨天在群里提起 Windows 平台下坑爹的中易宋体之屏显效果，今日忽而想起自己的博客在 Windows 平台下显示的也是宋体。当然，这不是我的错。原本的字体机制，博客会按照顺序选择一款无衬线字体，直到无可选择时采用系统默认的无衬线字体。但是坑死人不偿命的云都死系统，把 SimSun （中易宋体）这个带有衬线（好吧，严格来说中文没有这个概念，我们跟着西文勉强这么称呼它）的字体也放进了系统 sans serif 字族里面去。其结果就是，不能丑陋更多。\u003c/p\u003e\n\u003cp\u003e作为一个强迫症患者，我们来看看如何修复这个问题。\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003ch2 id=\"字体选择\"\u003e\u003ca href=\"#字体选择\" class=\"headerlink\" title=\"字体选择\"\u003e\u003c/a\u003e字体选择\u003c/h2\u003e\u003cp\u003e配置字体回退机制，两个主要的原则就是：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e屏显效果好的字体放前面\u003c/li\u003e\n\u003cli\u003e适用范围小的字体放前面\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e两条原则共同的作用就是：在尽可能多的平台下，获得相对更好的字体屏显效果。\u003c/p\u003e\n\u003cp\u003e对于中文来说，安装在作业系统中的主流黑体，屏显效果有大致如下的排序：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eHiragino Sans GB - 冬青黑体\u003c/li\u003e\n\u003cli\u003eSource Han Sans CN - 思源黑体\u003c/li\u003e\n\u003cli\u003eMicrosoft YaHei - 微软雅黑 (On Windows)\u003c/li\u003e\n\u003cli\u003eSTXihei - 华文细黑\u003c/li\u003e\n\u003cli\u003eWenQuanYi Micro Hei - 文泉驿米黑\u003c/li\u003e\n\u003cli\u003eSimHei - 中易黑体\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e其中冬青黑体和华文细黑，默认安装在 OS X 作业系统上；微软雅黑和中易黑体则主要安装在 Windows 作业系统上；思源黑体和文泉驿米黑则是 Linux 系统的主流中文黑体。\u003c/p\u003e\n\u003cp\u003e参考这一屏显效果排序，再结合一些实际情况（比如，在 OS X 作业系统中可能会因为安装 MS Office 而获得微软雅黑和中易宋体），我们给出了这样一个字体回退机制：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eHiragino Sans GB\u003c/li\u003e\n\u003cli\u003eSTXihei\u003c/li\u003e\n\u003cli\u003eSource Han Sans CN\u003c/li\u003e\n\u003cli\u003eMicrosoft YaHei\u003c/li\u003e\n\u003cli\u003eWenQuanYi Micro Hei\u003c/li\u003e\n\u003cli\u003eSimHei\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e这样，再加上西文的字体和系统默认的 \u003ccode\u003esans serif\u003c/code\u003e，我们就得到了完整的字体回退列表：\u003c/p\u003e\n\u003cfigure class=\"highlight plaintext\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003efont-sans = \u0026#34;Helvetica Neue\u0026#34;, \u0026#34;Helvetica\u0026#34;, \u0026#34;Hiragino Sans GB\u0026#34;, \u0026#34;Source Han Sans CN\u0026#34;, \u0026#34;STXihei\u0026#34;, \u0026#34;Microsoft YaHei\u0026#34;, \u0026#34;WenQuanYi Micro Hei\u0026#34;, \u0026#34;SimHei\u0026#34;, \u0026#34;Arial\u0026#34;, sans-serif\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"修改-modernist-主题的字体回退配置\"\u003e\u003ca href=\"#修改-modernist-主题的字体回退配置\" class=\"headerlink\" title=\"修改 modernist 主题的字体回退配置\"\u003e\u003c/a\u003e修改 \u003ccode\u003emodernist\u003c/code\u003e 主题的字体回退配置\u003c/h2\u003e\u003cp\u003e网页的字体回退机制一般写在样式表（CSS）文件中。\u003ccode\u003ehexo\u003c/code\u003e 的样式表文件是从一些 \u003ccode\u003estyl\u003c/code\u003e 文件中产生的，每一个主题的 \u003ccode\u003estyl\u003c/code\u003e 文件结构都不大一样，所以这篇文章以我使用的 \u003ccode\u003emodernist\u003c/code\u003e 为准讲述。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003emodernist\u003c/code\u003e 的作者很有心，将一些可能需要个性化配置的变量专门储存在名为 \u003ccode\u003evariable.styl\u003c/code\u003e 的文件里。这个文件位于 \u003ccode\u003e./theme/modernist/source/css/_base/variable.styl\u003c/code\u003e，我们打开它，然后将 \u003ccode\u003efont-default\u003c/code\u003e 和 \u003ccode\u003efont-title\u003c/code\u003e 的值改为：\u003c/p\u003e\n\u003cfigure class=\"highlight plaintext\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u0026#34;Helvetica Neue\u0026#34;, \u0026#34;Helvetica\u0026#34;, \u0026#34;Hiragino Sans GB\u0026#34;, \u0026#34;Source Han Sans CN\u0026#34;, \u0026#34;STXihei\u0026#34;, \u0026#34;Microsoft YaHei\u0026#34;, \u0026#34;WenQuanYi Micro Hei\u0026#34;, \u0026#34;SimHei\u0026#34;, \u0026#34;Arial\u0026#34;, sans-serif\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e之后，我们在命令行运行\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ehexo clean \u0026amp;\u0026amp; hexo d -g\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e就能将修复好的 CSS 文件推送到仓库了。\u003c/p\u003e\n\u003cp\u003e之后在 Windows 中打开，就会依照上述字体顺序去检索字体。对于新版的 Windows 系统，一般会以微软雅黑打开；对于旧版的 Windows 字体，一般会以中易黑体打开。\u003c/p\u003e\n\n    \u003c/div\u003e",
  "Date": "2015-04-30T09:18:40Z",
  "Author": "Liam Huang"
}