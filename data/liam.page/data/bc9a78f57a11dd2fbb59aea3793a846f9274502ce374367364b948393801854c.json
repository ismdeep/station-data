{
  "Source": "liam.page",
  "Title": "使用 Python 记录键盘事件",
  "Link": "https://liam.page/2019/12/06/record-keyboard-events-by-python/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003e今天也不知道是想了什么，突然就想要试试看我有效击键时的手速到底有多快。为此，需要记录下来击键的记录。于是找到了 Python 的 \u003ccode\u003ekeyboard\u003c/code\u003e 库。\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003cp\u003e安装非常简单，只需执行 \u003ccode\u003epip install keyboard\u003c/code\u003e 即可。而后保存并执行如下代码：\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e keyboard\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e time\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ekeyboard.hook(\u003cspan class=\"keyword\"\u003elambda\u003c/span\u003e e: \u003cspan class=\"built_in\"\u003eprint\u003c/span\u003e(e, time.clock()))\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ekeyboard.wait(\u003cspan class=\"string\"\u003e\u0026#39;Ctrl\u0026#39;\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e这里，我们利用 \u003ccode\u003ekeyboard.hook\u003c/code\u003e 为每个键盘事件下钩子，并且执行其中的 \u003ccode\u003elambda\u003c/code\u003e 函数。\u003ccode\u003ekeyboard.wait()\u003c/code\u003e 的作用是阻塞进程，直到按下 \u003ccode\u003eCtrl\u003c/code\u003e 键。\u003c/p\u003e\n\u003cp\u003e测试结果如下：\u003c/p\u003e\n\u003cfigure class=\"highlight plaintext\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(g down) 4.450576466\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(g up) 4.505627652\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(i down) 4.510628277\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(t down) 4.570555791\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(i up) 4.580582066\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(space down) 4.581583136\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(p down) 4.630656009\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(t up) 4.671189791\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(space up) 4.693182730\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(p up) 4.705543556\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(u down) 4.705867633\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(s down) 4.730623806\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(u up) 4.750832241\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(s up) 4.795770594\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(h down) 4.810543976\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(h up) 4.86056459\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(enter down) 4.920739469\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(enter up) 4.930514276\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eKeyboardEvent(ctrl down) 7.030813124\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e从中可见，在敲下 \u003ccode\u003egit push\u0026lt;enter\u0026gt;\u003c/code\u003e 这条命令的过程中，发生了多次击键交错的现象（即上一个按键还未完全弹起，下一个按键就已经触发）。这是在高速击键时很常见的现象。此外，输入到执行这条命令，总共花费了不到 \u003ccode\u003e0.5 s\u003c/code\u003e 的时间，不愧曾经单身多年 \u003ccode\u003e←_←\u003c/code\u003e。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e你的手速如何呢？\u003c/p\u003e\n\u003c/blockquote\u003e\n\n    \u003c/div\u003e",
  "Date": "2019-12-06T09:25:10Z",
  "Author": "Liam Huang"
}