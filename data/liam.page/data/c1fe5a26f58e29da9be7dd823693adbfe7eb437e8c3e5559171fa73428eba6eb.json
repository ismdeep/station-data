{
  "Source": "liam.page",
  "Title": "一点黑魔法：Linux 中对纯文本文件的列操作",
  "Link": "https://liam.page/2016/11/07/how-to-remove-a-column-from-a-plain-text-file-on-Linux/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003e如果你经常和数据打交道，那么你肯定会经常需要对列进行操作。在 Linux 中，对纯文本文件的列操作有两个十分有用的命令：\u003ccode\u003ecut\u003c/code\u003e 和 \u003ccode\u003epaste\u003c/code\u003e。其中 \u003ccode\u003ecut\u003c/code\u003e 主要用于从纯文本文件中取出某些列，\u003ccode\u003epaste\u003c/code\u003e 则可以用于按列合并。\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003ch2 id=\"cut-命令\"\u003e\u003ca href=\"#cut-命令\" class=\"headerlink\" title=\"cut 命令\"\u003e\u003c/a\u003e\u003ccode\u003ecut\u003c/code\u003e 命令\u003c/h2\u003e\u003cp\u003e假设有这样一个测试文件 \u003ccode\u003ecut.txt\u003c/code\u003e：\u003c/p\u003e\n\u003cfigure class=\"highlight plaintext\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1|2|3|4|5|6|7|8|九|0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|3|4|5|6|7|8|九|0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|3|4|5|6|7|8|九|0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|3|4|5|6|7|8|九|0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|3|4|5|6|7|8|九|0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|3|4|5|6|7|8|九|0\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e我们将用这个测试文件来做一些实验。\u003c/p\u003e\n\u003ch3 id=\"cut-基础与字节模式\"\u003e\u003ca href=\"#cut-基础与字节模式\" class=\"headerlink\" title=\"cut 基础与字节模式\"\u003e\u003c/a\u003e\u003ccode\u003ecut\u003c/code\u003e 基础与字节模式\u003c/h3\u003e\u003cp\u003e前面说过，\u003ccode\u003ecut\u003c/code\u003e 命令的本职工作就是取出某些列。实际上，更准确地说法，是 \u003ccode\u003ecut\u003c/code\u003e 命令逐行地处理输入，并从中取出某些列。这里说的「列」有三种模式：\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e-b      \u003cspan class=\"comment\"\u003e# 以字节作为标准取出列\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e-c      \u003cspan class=\"comment\"\u003e# 以字符作为标准取出列\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e-f      \u003cspan class=\"comment\"\u003e# 以域 (field) 作为标准取出列\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e首先我们看看字节模式。比如我们可以取出每一行的第三个字节中的内容。我们知道，英文字符都是以 ASCII 编码用一个字符保存的。这样，我们预期会输出 6 个 2。我们来看下实际的输出。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003ecut\u003c/span\u003e -b 3 cut.txt\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e完美，完全符合预期！\u003c/p\u003e\n\u003cp\u003e我们来看一下 \u003ccode\u003ecut\u003c/code\u003e 命令的样式\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"built_in\"\u003ecut\u003c/span\u003e -[b,c,f] \u0026lt;columns\u0026gt; \u0026lt;filename\u0026gt;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e在刚才的例子中，我们选择了字节模式（\u003ccode\u003e-b\u003c/code\u003e），并指定了第三列。值得一提的是，\u003ccode\u003ecut\u003c/code\u003e 命令的列指定风格非常的灵活。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e3       \u003cspan class=\"comment\"\u003e# 第三列\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3,5,8   \u003cspan class=\"comment\"\u003e# 第三列、第五列、第八列\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3-5,8   \u003cspan class=\"comment\"\u003e# 第三列至第五列、第八列\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e-3,8    \u003cspan class=\"comment\"\u003e# 第一列至第三列、第八列\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1,3-    \u003cspan class=\"comment\"\u003e# 第一列、第三列至最后一列\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e字节模式在某些情况会遇到问题。比如，遇到非 ASCII 编码的字符时（特别是多字节字符），就会遇到问题。我们试着看看用 \u003ccode\u003e-b\u003c/code\u003e 模式输出第 17 列会怎样。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003ecut\u003c/span\u003e -b 17 cut.txt\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e实际上，\u003ccode\u003e-b\u003c/code\u003e 模式的第 17 列，会输出「九」的第一个字节。具体输出的内容取决于系统使用的编码。如果我们想输出字符「九」就需要使用字符模式了。\u003c/p\u003e\n\u003ch3 id=\"字符模式与域模式\"\u003e\u003ca href=\"#字符模式与域模式\" class=\"headerlink\" title=\"字符模式与域模式\"\u003e\u003c/a\u003e字符模式与域模式\u003c/h3\u003e\u003cp\u003e\u003ccode\u003e-c\u003c/code\u003e 是字符模式。为了输出一列汉字「九」，我们可以这样\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003ecut\u003c/span\u003e -c 17 cut.txt\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e九\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e九\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e九\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e九\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e九\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e九\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e除了解析列的方式不一样之外，\u003ccode\u003e-c\u003c/code\u003e 和 \u003ccode\u003e-b\u003c/code\u003e 完全一样。\u003c/p\u003e\n\u003cp\u003e类似的，还有域模式。与字节模式以及字符模式最大的不同是，域模式可以指定单个字符作为分隔符，逐行地将文件分成若干列。比如，这里我们可以用 \u003ccode\u003e|\u003c/code\u003e 作为分隔符，输出第三列至第五列以及第九列。注意，在列模式下，分隔符也会按需输出。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003ecut\u003c/span\u003e -d \u003cspan class=\"string\"\u003e\u0026#39;|\u0026#39;\u003c/span\u003e -f 3-5,9 cut.txt\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3|4|5|九\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3|4|5|九\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3|4|5|九\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3|4|5|九\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3|4|5|九\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3|4|5|九\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"补集\"\u003e\u003ca href=\"#补集\" class=\"headerlink\" title=\"补集\"\u003e\u003c/a\u003e补集\u003c/h3\u003e\u003cp\u003e\u003ccode\u003ecut\u003c/code\u003e 命令还支持 \u003ccode\u003e--complement\u003c/code\u003e 参数，意思是取补集。比如在我们刚才的例子中，取补集就意味着取出第一列、第二列、第六列至第八列以及第十列。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003ecut\u003c/span\u003e -d \u003cspan class=\"string\"\u003e\u0026#39;|\u0026#39;\u003c/span\u003e -f 3-5,9 --complement cut.txt\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|6|7|8|0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|6|7|8|0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|6|7|8|0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|6|7|8|0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|6|7|8|0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|6|7|8|0\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e使用 \u003ccode\u003e--complement\u003c/code\u003e 参数，我们可以很容易地从纯文本中删除某一列。比如我们想删除第四列\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003ecut\u003c/span\u003e -d \u003cspan class=\"string\"\u003e\u0026#39;|\u0026#39;\u003c/span\u003e -f 4 --complement cut.txt\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|3|5|6|7|8|九|0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|3|5|6|7|8|九|0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|3|5|6|7|8|九|0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|3|5|6|7|8|九|0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|3|5|6|7|8|九|0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1|2|3|5|6|7|8|九|0\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e轻而易举\u003ccode\u003e~\u003c/code\u003e\u003c/p\u003e\n\u003ch3 id=\"一点黑魔法：处理连续空格分割的情况\"\u003e\u003ca href=\"#一点黑魔法：处理连续空格分割的情况\" class=\"headerlink\" title=\"一点黑魔法：处理连续空格分割的情况\"\u003e\u003c/a\u003e一点黑魔法：处理连续空格分割的情况\u003c/h3\u003e\u003cp\u003e\u003ccode\u003ecut\u003c/code\u003e 在处理连续空格分割列的时候，结果就会变得一团糟。不过，好在我们有 \u003ccode\u003etr\u003c/code\u003e 命令。使用 \u003ccode\u003e-s\u003c/code\u003e 参数，可以逐行地将连续的字符 unique 成单独的一个字符。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003ewho\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLiam :0           2016-11-08 00:07\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLiam pts/0        2016-11-08 00:23 (:0.0)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLiam pts/1        2016-11-08 00:15 (:0.0)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003ewho\u003c/span\u003e | \u003cspan class=\"built_in\"\u003etr\u003c/span\u003e -s \u003cspan class=\"string\"\u003e\u0026#39; \u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLiam :0 2016-11-08 00:07\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLiam pts/0 2016-11-08 00:23 (:0.0)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLiam pts/1 2016-11-08 00:15 (:0.0)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e这样，我们就能轻易地获得各个用户的登录时间了\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003ewho\u003c/span\u003e | \u003cspan class=\"built_in\"\u003etr\u003c/span\u003e -s \u003cspan class=\"string\"\u003e\u0026#39; \u0026#39;\u003c/span\u003e | \u003cspan class=\"built_in\"\u003ecut\u003c/span\u003e -d \u003cspan class=\"string\"\u003e\u0026#39; \u0026#39;\u003c/span\u003e -f 1,3,4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLiam 2016-11-08 00:07\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLiam 2016-11-08 00:23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eLiam 2016-11-08 00:15\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"paste-命令\"\u003e\u003ca href=\"#paste-命令\" class=\"headerlink\" title=\"paste 命令\"\u003e\u003c/a\u003e\u003ccode\u003epaste\u003c/code\u003e 命令\u003c/h2\u003e\u003ch3 id=\"基本用法\"\u003e\u003ca href=\"#基本用法\" class=\"headerlink\" title=\"基本用法\"\u003e\u003c/a\u003e基本用法\u003c/h3\u003e\u003cp\u003e相比 \u003ccode\u003ecut\u003c/code\u003e 命令，\u003ccode\u003epaste\u003c/code\u003e 命令的用法就简单粗暴许多了。\u003c/p\u003e\n\u003cp\u003e假设我们有三个文件\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003ecat\u003c/span\u003e paste1.txt  | $ \u003cspan class=\"built_in\"\u003ecat\u003c/span\u003e paste2.txt | $ \u003cspan class=\"built_in\"\u003ecat\u003c/span\u003e paste3.txt\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1                 | a                | A\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2                 | b                | B\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3                 | c                | C\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e现在我们用 \u003ccode\u003epaste\u003c/code\u003e 试试看\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003epaste\u003c/span\u003e paste1.txt paste2.txt\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e1    a\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2    b\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3    c\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003epaste\u003c/span\u003e paste2.txt paste1.txt\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ea    1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eb    2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ec    3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003epaste\u003c/span\u003e paste2.txt paste1.txt paste3.txt\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ea    1    A\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eb    2    B\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ec    3    C\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003epaste\u003c/span\u003e paste2.txt paste1.txt paste3.txt | sed -n l\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ea\\t1\\tA\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eb\\t2\\tB\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ec\\t3\\tC\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e不难发现，\u003ccode\u003epaste\u003c/code\u003e 命令支持输入多个文件，并按顺序将他们用制表符粘在一起。如果你想用其他的分隔符将他们粘在一起，也可以像 \u003ccode\u003ecut\u003c/code\u003e 命令那样使用 \u003ccode\u003e-d\u003c/code\u003e 参数指定。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003epaste\u003c/span\u003e -d \u003cspan class=\"string\"\u003e\u0026#39;|\u0026#39;\u003c/span\u003e paste2.txt paste1.txt paste3.txt\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ea|1|A\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eb|2|B\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ec|3|C\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"一点黑魔法：避免使用临时文件\"\u003e\u003ca href=\"#一点黑魔法：避免使用临时文件\" class=\"headerlink\" title=\"一点黑魔法：避免使用临时文件\"\u003e\u003c/a\u003e一点黑魔法：避免使用临时文件\u003c/h3\u003e\u003cp\u003e如果我们需要将几个程序的即时输出（标准输出）按列粘在一起的话，可能不得不将这些输出先写入临时文件当中，然后再调用 \u003ccode\u003epaste\u003c/code\u003e 命令。不过，也有不用这样麻烦的办法——使用 \u003ca target=\"_blank\" rel=\"noopener\" href=\"http://www.gnu.org/software/bash/manual/html_node/Process-Substitution.html\"\u003eBash Process Substituation\u003c/a\u003e 来解决这个问题。\u003c/p\u003e\n\u003cp\u003e简单来说，就是使用 \u003ccode\u003e\u0026lt;(command)\u003c/code\u003e 来「伪装成一个文件」的样子，作为 \u003ccode\u003epaste\u003c/code\u003e 命令的输入。比如\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003epaste\u003c/span\u003e -d \u003cspan class=\"string\"\u003e\u0026#39;|\u0026#39;\u003c/span\u003e \u0026lt;(\u003cspan class=\"built_in\"\u003ecat\u003c/span\u003e paste2.txt) \u0026lt;(\u003cspan class=\"built_in\"\u003ecat\u003c/span\u003e paste1.txt) \u0026lt;(\u003cspan class=\"built_in\"\u003ecat\u003c/span\u003e paste3.txt)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ea|1|A\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eb|2|B\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ec|3|C\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n    \u003c/div\u003e",
  "Date": "2016-11-07T15:34:00Z",
  "Author": "Liam Huang"
}