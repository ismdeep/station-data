{
  "Source": "liam.page",
  "Title": "USB 3.0 射频噪声对 2.4GHz 无线设备的干扰",
  "Link": "https://liam.page/2020/01/19/USB-3-0-Radio-Frequency-Interference-Impact-on-2-4-GHz-Wireless-Devices/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003e早些年，第一次使用 USB 3.0 硬盘的时候，我就发现了它对 Wi-Fi 网络信号的影响。为了解决这个问题，当时投资几百块，换了 NetGear 的路由器，并启用其 5GHz 的 Wi-Fi 信号。最近，在结合 rMBP 使用无线鼠标时，我发现鼠标经常出现跳帧的现象。因为距离上一次踩坑的时间已经过去六七年的时间，一时完全没想到可能是 USB 3.0 带来的问题。在经历了一系列折腾之后，才突然想起这个坑。特此记录。\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003ch2 id=\"向外辐射的电磁波\"\u003e\u003ca href=\"#向外辐射的电磁波\" class=\"headerlink\" title=\"向外辐射的电磁波\"\u003e\u003c/a\u003e向外辐射的电磁波\u003c/h2\u003e\u003cp\u003e有高中物理电磁知识的人都应该知道一个基本事实：任何未经完全屏蔽的非直流电流，都会向外辐射电磁波。在高中物理中，它的基本形式就是 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://zh.wikipedia.org/wiki/LC%E7%94%B5%E8%B7%AF\"\u003eLC 谐振电路\u003c/a\u003e。但另一方面，向外辐射电磁波的另一个条件是电路开路。也就是说，在连续的电路中，一般来说很难产生足以干扰其他设备的射频信号。此外，线缆通常也会考虑屏蔽电磁辐射。因此，一般来说，产生电磁射频噪声的干扰源，通常是电路的连接点，例如接头、引脚处。\u003c/p\u003e\n\u003ch2 id=\"USB-3-0-的射频噪声\"\u003e\u003ca href=\"#USB-3-0-的射频噪声\" class=\"headerlink\" title=\"USB 3.0 的射频噪声\"\u003e\u003c/a\u003eUSB 3.0 的射频噪声\u003c/h2\u003e\u003cp\u003e根据 Intel 于 2012 年发布的\u003ca target=\"_blank\" rel=\"noopener\" href=\"https://usb.org/sites/default/files/327216.pdf\"\u003e白皮书\u003c/a\u003e，从 USB 3.0 的 \u003ca target=\"_blank\" rel=\"noopener\" href=\"https://zh.wikipedia.org/wiki/Sinc%E5%87%BD%E6%95%B0\"\u003e\u003ccode\u003esinc\u003c/code\u003e 函数\u003c/a\u003e来看，USB 3.0 的频谱很宽，从直流一直到 5GHz 都有所涉及。\u003c/p\u003e\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/computer-skills/usb3-sinc.jpg\"/\u003e\u003c/p\u003e\n\u003cp\u003e直接在笔记本上测量 USB 3.0 线对（transmit-pair）上的频谱则有如下分布。\u003c/p\u003e\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/computer-skills/usb3-noise-power-over-frequence.jpg\"/\u003e\u003c/p\u003e\n\u003cp\u003e于是，不难想见，USB 3.0 的接头处，在非常广的频谱上，都会向外辐射无线电干扰。那么射频干扰主要集中在什么频段呢？Intel 以实验说话，发现射频干扰主要集中在 2.4GHz -- 2.5GHz 之间。\u003c/p\u003e\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/computer-skills/usb3-noise-HDD.jpg\"/\u003e\u003c/p\u003e\n\u003cp\u003e那么为什么射频干扰主要集中在 2.4GHz -- 2.5GHz 之间呢？USB 3.0 是以 NRZ-I 方式进行编码的。因此，在一个时钟周期里，随着电平的两次翻转，可以传递出 2bit 的信息。考虑到 USB 3.0 的比特率是 5Gbps，即，每秒传输 5Gb。因此，它的电平周期是 2.5GHz。这就是 USB 3.0 设备产生的射频干扰集中在 2.5GHz 附近的原因。\u003c/p\u003e\n\u003ch2 id=\"信噪比与干扰\"\u003e\u003ca href=\"#信噪比与干扰\" class=\"headerlink\" title=\"信噪比与干扰\"\u003e\u003c/a\u003e信噪比与干扰\u003c/h2\u003e\u003cp\u003e无线信号接收器是否能够正确解析无线信号，不仅取决于无线信号的强度，还取决于接收器所处环境的无线噪声强度。并不是说无线信号强度大，就一定能正确解析无线信号。假设有一个 -20 dBm（分贝毫瓦，对数能量单位）的信号，已经算很强了；但若环境中有一个 -20dBm 的同频率干扰信号，则原信号依然是不可辨别的。\u003c/p\u003e\n\u003cp\u003e因此，人们定义了信噪比（Signal-to-Noise ratio）这个概念。信噪比的单位也是分贝（dB）。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e$$\\text{SNR} = 10 \\log_{10}\\Bigl(\\frac{P_{\\text{signal}}}{P_{\\text{noise}}}\\Bigr).$$\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e为了能够正确解调无线信号，无线信号接收器都会有一个最低限度的信噪比要求。当无线信号过于衰弱，或是无线噪声过于强大时，信噪比就可能低于无线信号接收器所需的最低信噪比。如此一来，无线信号接收器就无法正常工作了。\u003c/p\u003e\n\u003ch2 id=\"2-4GHz\"\u003e\u003ca href=\"#2-4GHz\" class=\"headerlink\" title=\"2.4GHz\"\u003e\u003c/a\u003e2.4GHz\u003c/h2\u003e\u003cp\u003e无线电信号频段是有限的资源。在大多数主要国家，都有相应的法律法规，来约束和限制无线电信号频段的使用。2.4GHz 是国际通用的不受约束的频段（当然，这里的不受约束，指的是你可以使用，但功率不能太大）。因此，大多数无线设备，都在这一频段工作。常见的有 Wi-Fi、无线鼠标、无线键盘、蓝牙等外设。\u003c/p\u003e\n\u003cp\u003e不巧的是，USB 3.0 的射频干扰主要集中在 2.4GHz 和 2.5GHz 之间，正好与这一通用频段重合。于是，USB 3.0 设备干扰 Wi-Fi、无线鼠标等，也就不奇怪了。\u003c/p\u003e\n\u003ch2 id=\"解决办法\"\u003e\u003ca href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"\u003e\u003c/a\u003e解决办法\u003c/h2\u003e\u003cp\u003e解决办法很简单。\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e屏蔽：使用金属箔纸，将 USB 3.0 的连接处和电缆包裹起来，起到无线屏蔽的作用。当然，这对动手能力要求很高。\u003c/li\u003e\n\u003cli\u003e远离：由于无线信号强度随着信号源的距离的增加而快速衰减（平方衰减），因此，使用 USB 2.0 延长线，将无线信号接收器（如果有）远离 USB 3.0 的设备和借口，即可避免这一问题。\u003c/li\u003e\n\u003cli\u003e换频：由于 USB 3.0 的射频干扰主要集中在 2.4GHz 至 2.5GHz 之间，那么换成不在 2.4GHz 频段工作的设备即可。例如，可以更换成 5(.8) GHz 的设备。\u003c/li\u003e\n\u003cli\u003e有线：开历史倒车，从无线设备切换回到有线设备，彻底绕开无线干扰这个问题。\u003ccode\u003eXD\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\n    \u003c/div\u003e",
  "Date": "2020-01-19T02:34:48Z",
  "Author": "Liam Huang"
}