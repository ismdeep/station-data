{
  "Source": "liam.page",
  "Title": "Shell 变量引用和字符串处理",
  "Link": "https://liam.page/2016/11/08/Shell-variable-reference-and-string-cut-off/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003e使用 Linux，免不了和 Shell 打交道。和 Shell 打交道，就免不了和 Shell 的变量及字符串打交道。这里总结一下 Shell 对变量的引用和字符串处理的一些经验。\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003ch2 id=\"变量和变量的引用方式\"\u003e\u003ca href=\"#变量和变量的引用方式\" class=\"headerlink\" title=\"变量和变量的引用方式\"\u003e\u003c/a\u003e变量和变量的引用方式\u003c/h2\u003e\u003cp\u003eShell 的变量以 \u003ccode\u003evar=\u0026lt;value\u0026gt;\u003c/code\u003e 的方式定义，以 \u003ccode\u003e$var\u003c/code\u003e 或者 \u003ccode\u003e${var}\u003c/code\u003e 的方式使用。Shell 的变量没有类型的分别，实际就是一个字符串。因此 Shell 变量的使用和字符串密不可分。这一节先介绍一下变量的一些特殊的引用方法。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e$var\u003c/code\u003e/\u003ccode\u003e${var}\u003c/code\u003e - 最基本的用法，返回变量 \u003ccode\u003evar\u003c/code\u003e 的值——一个字符串。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e${var-\u0026#34;something\u0026#34;}\u003c/code\u003e - 当 \u003ccode\u003evar\u003c/code\u003e 没有被预先定义时，返回 \u003ccode\u003e\u0026#34;something\u0026#34;\u003c/code\u003e。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e${var：-\u0026#34;something\u0026#34;}\u003c/code\u003e - 当 \u003ccode\u003evar\u003c/code\u003e 没有被预先定义，或者被定义为空时，返回 \u003ccode\u003e\u0026#34;something\u0026#34;\u003c/code\u003e。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e${var=\u0026#34;something\u0026#34;}\u003c/code\u003e - 当 \u003ccode\u003evar\u003c/code\u003e 没有被预先定义时，返回 \u003ccode\u003e\u0026#34;something\u0026#34;\u003c/code\u003e，同时设置 \u003ccode\u003evar=\u0026#34;something\u0026#34;\u003c/code\u003e。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e${var:=\u0026#34;something\u0026#34;}\u003c/code\u003e - 当 \u003ccode\u003evar\u003c/code\u003e 没有被预先定义，或者被定义为空时，返回 \u003ccode\u003e\u0026#34;something\u0026#34;\u003c/code\u003e，同时设置 \u003ccode\u003evar=\u0026#34;something\u0026#34;\u003c/code\u003e。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e${var?\u0026#34;something\u0026#34;}\u003c/code\u003e - 当 \u003ccode\u003evar\u003c/code\u003e 没有被预先定义时，返回 \u003ccode\u003e\u0026#34;something\u0026#34;\u003c/code\u003e，而后终止脚本。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e${var:?\u0026#34;something\u0026#34;}\u003c/code\u003e - 当 \u003ccode\u003evar\u003c/code\u003e 没有被预先定义，或者被定义为空时，返回 \u003ccode\u003e\u0026#34;something\u0026#34;\u003c/code\u003e，而后终止脚本。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e${var+\u0026#34;something\u0026#34;}\u003c/code\u003e - 当 \u003ccode\u003evar\u003c/code\u003e 已经被定义时，返回 \u003ccode\u003e\u0026#34;something\u0026#34;\u003c/code\u003e。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e${var:+\u0026#34;something\u0026#34;}\u003c/code\u003e - 当 \u003ccode\u003evar\u003c/code\u003e 已经被定义并且不为空时，返回 \u003ccode\u003e\u0026#34;something\u0026#34;\u003c/code\u003e。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003cfigcaption\u003e\u003cspan\u003e示例\u003c/span\u003e\u003c/figcaption\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${#var}\u003c/span\u003e  \u003cspan class=\"comment\"\u003e# return the length of ${var}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var-\u0026#34;hello\u0026#34;}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehello\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ var=\u003cspan class=\"string\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var-\u0026#34;hello\u0026#34;}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var:-\u0026#34;hello\u0026#34;}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehello\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${#var}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e0\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eunset\u003c/span\u003e var\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var=\u0026#34;hello\u0026#34;}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehello\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehello\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eunset\u003c/span\u003e var; var=\u003cspan class=\"string\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var:=\u0026#34;hello\u0026#34;}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehello\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${#var}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"圆括号的使用\"\u003e\u003ca href=\"#圆括号的使用\" class=\"headerlink\" title=\"圆括号的使用\"\u003e\u003c/a\u003e圆括号的使用\u003c/h2\u003e\u003cp\u003e除了花括号之外，\u003ccode\u003e$\u003c/code\u003e 符号还可以搭配圆括号使用。基本有两种用法：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e$(command)\u003c/code\u003e - 返回 \u003ccode\u003ecommand\u003c/code\u003e 执行完毕的输出结果，相当于 \u003ccode\u003e`command`\u003c/code\u003e。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e$((expression))\u003c/code\u003e - 执行算术运算 \u003ccode\u003eexpression\u003c/code\u003e 并返回运算结果，例如 \u003ccode\u003e$((2 + 3 * 2))\u003c/code\u003e 返回 \u003ccode\u003e8\u003c/code\u003e。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"按长度截取字符串\"\u003e\u003ca href=\"#按长度截取字符串\" class=\"headerlink\" title=\"按长度截取字符串\"\u003e\u003c/a\u003e按长度截取字符串\u003c/h2\u003e\u003cp\u003e当 Shell 变量中保存着内容时，我们就可以按索引和长度截取字符串中的内容。Shell 变量的索引从 \u003ccode\u003e0\u003c/code\u003e 开始。主要有两种方式：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e${var:pos}\u003c/code\u003e - 返回从 \u003ccode\u003epos\u003c/code\u003e 开始一直到末尾的字符串。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e${var:pos:len}\u003c/code\u003e - 返回从 \u003ccode\u003epos\u003c/code\u003e 开始长度为 \u003ccode\u003elen\u003c/code\u003e 的字符串。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003cfigcaption\u003e\u003cspan\u003e示例\u003c/span\u003e\u003c/figcaption\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ var=\u003cspan class=\"string\"\u003e\u0026#34;hello\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehello\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${#var}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var:3}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003elo\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var:6}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var:0:3}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehel\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var:0:6}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehello\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"按匹配截取字符串\"\u003e\u003ca href=\"#按匹配截取字符串\" class=\"headerlink\" title=\"按匹配截取字符串\"\u003e\u003c/a\u003e按匹配截取字符串\u003c/h2\u003e\u003cp\u003eShell 的变量支持从左或者从右删除包含通配符的子串：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e使用 \u003ccode\u003e#\u003c/code\u003e 或者 \u003ccode\u003e##\u003c/code\u003e 从左删除子串；\u003c/li\u003e\n\u003cli\u003e使用 \u003ccode\u003e%\u003c/code\u003e 或者 \u003ccode\u003e%%\u003c/code\u003e 从右删除子串。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e单符号的版本（\u003ccode\u003e#\u003c/code\u003e/\u003ccode\u003e%\u003c/code\u003e）尽可能短地匹配子串；双符号的版本（\u003ccode\u003e##\u003c/code\u003e/\u003ccode\u003e%%\u003c/code\u003e）尽可能长地匹配子串。\u003c/p\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003cfigcaption\u003e\u003cspan\u003e示例\u003c/span\u003e\u003c/figcaption\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ var=\u003cspan class=\"string\"\u003e\u0026#34;hellohello\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehellohello\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var#*ll}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eohello\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var##*ll}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eo\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var%ll*}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehellohe\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var%%ll*}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehe\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"字符串替换\"\u003e\u003ca href=\"#字符串替换\" class=\"headerlink\" title=\"字符串替换\"\u003e\u003c/a\u003e字符串替换\u003c/h2\u003e\u003cp\u003eShell 的变量也支持字符串替换。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e${var/FROM/TO}\u003c/code\u003e - 将 \u003ccode\u003e$var\u003c/code\u003e 中的第一个 \u003ccode\u003eFROM\u003c/code\u003e 匹配的子串替换成 \u003ccode\u003eTO\u003c/code\u003e，然后返回。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e${var//FROM/TO}\u003c/code\u003e - 将 \u003ccode\u003e$var\u003c/code\u003e 中所有的 \u003ccode\u003eFROM\u003c/code\u003e 匹配的子串替换成 \u003ccode\u003eTO\u003c/code\u003e，然后返回。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e${var/#FROM/TO\u003c/code\u003e - 若 \u003ccode\u003e$var\u003c/code\u003e 从第一个字符开始能够匹配 \u003ccode\u003eFROM\u003c/code\u003e，则替换成 \u003ccode\u003eTO\u003c/code\u003e 然后返回；否则直接返回 \u003ccode\u003e${var}\u003c/code\u003e。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e${var/%FROM/TO}\u003c/code\u003e - 若 \u003ccode\u003e$var\u003c/code\u003e 从最后一个字符开始能够匹配 \u003ccode\u003eFROM\u003c/code\u003e，则替换成 \u003ccode\u003eTO\u003c/code\u003e 然后返回；否则直接返回 \u003ccode\u003e${var}\u003c/code\u003e。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cfigure class=\"highlight bash\"\u003e\u003cfigcaption\u003e\u003cspan\u003e示例\u003c/span\u003e\u003c/figcaption\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e$ var=\u003cspan class=\"string\"\u003e\u0026#34;hellohello\u0026#34;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehellohello\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var/ll/xx}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehexxohello\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var//ll/xx}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehexxohexxo\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var/#*ll/xx}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003exxo\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var/#*lx/xx}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehellohello\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var/%ll*/xx}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehexx\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var/%lx*/xx}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehellohello\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e$ \u003cspan class=\"built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"variable\"\u003e${var}\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ehellohello\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n    \u003c/div\u003e",
  "Date": "2016-11-08T15:05:10Z",
  "Author": "Liam Huang"
}