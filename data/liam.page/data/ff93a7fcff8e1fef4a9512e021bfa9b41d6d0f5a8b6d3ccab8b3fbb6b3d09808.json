{
  "Source": "liam.page",
  "Title": "xeCJK 宏包的隐藏技能：字符映射",
  "Link": "https://liam.page/2016/05/12/the-hidden-skill-of-the-xeCJK-package-Mapping/",
  "Content": "\u003cdiv class=\"post-body\" itemprop=\"articleBody\"\u003e\n\n      \n        \u003cp\u003e有段时间没写 LaTeX 相关的文章了，此篇讲一讲 \u003ccode\u003exeCJK\u003c/code\u003e 宏包中的 \u003ccode\u003eMapping\u003c/code\u003e 功能。\u003c/p\u003e\n\u003cp\u003e由于中文空心句号是一个小圈，容易与作为下标的数字 \u003ccode\u003e0\u003c/code\u003e 或字母 \u003ccode\u003eo\u003c/code\u003e 混淆。因此，在专业数学书籍、论文排版中，最好是使用实心句点 \u003ccode\u003e．\u003c/code\u003e 来代替中文空心句号。但是，使用中文空心句号编写中文 LaTeX 手稿是大家的习惯；这样一来，使用查找替换固然是一个方案，但是繁琐且容易出错。这时候，我们就可以用到 \u003ccode\u003exeCJK\u003c/code\u003e 宏包提供的 \u003ccode\u003eMapping\u003c/code\u003e 选项。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eMapping\u003c/code\u003e 实际上是借助了 \u003ca target=\"_blank\" rel=\"noopener\" href=\"http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi\u0026amp;id=teckit\"\u003eTECKit\u003c/a\u003e 来做字符映射。\u003ccode\u003exeCJK\u003c/code\u003e 的作者还预先定义了能够实现简体中文和正体中文相互转换的映射表。因此，使用 \u003ccode\u003exeCJK\u003c/code\u003e 还能实现中文的简正转换。\u003c/p\u003e\n\u003cspan id=\"more\"\u003e\u003c/span\u003e\n\n\u003ch2 id=\"基本用法\"\u003e\u003ca href=\"#基本用法\" class=\"headerlink\" title=\"基本用法\"\u003e\u003c/a\u003e基本用法\u003c/h2\u003e\u003cp\u003e相信你对 \u003ccode\u003exeCJK\u003c/code\u003e 宏包的基本用法已经了解，因此我就不对下面的代码作过多的解释。我们来看一下 \u003ccode\u003eMapping\u003c/code\u003e 选项的基本用法。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003cfigcaption\u003e\u003cspan\u003emapping_fullwidth-stop.tex\u003c/span\u003e\u003c/figcaption\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e%!TeX program = xelatex\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\documentclass\u003c/span\u003e{article}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{xeCJK}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\setCJKmainfont\u003c/span\u003e[Mapping = fullwidth-stop]{STSong} \u003cspan class=\"comment\"\u003e% 华文宋体\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e华文宋体。\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e可以发现，中文空心句号自动映射成了实心句点。\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/LaTeX/mapping_fullwidth-stop.png\"/\u003e\u003c/p\u003e\n\u003cp\u003e这里我们为文档主字体调用了 \u003ccode\u003efullwidth-stop\u003c/code\u003e 这一映射文件。它的作用是将中文空心句号映射成实心句点，这个文件是 \u003ccode\u003exeCJK\u003c/code\u003e 的作者预先定义的。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003exeCJK\u003c/code\u003e 的作者也有定义作用与之完全相反的映射文件：\u003ccode\u003efull-stop\u003c/code\u003e。\u003c/p\u003e\n\u003ch2 id=\"简正转换\"\u003e\u003ca href=\"#简正转换\" class=\"headerlink\" title=\"简正转换\"\u003e\u003c/a\u003e简正转换\u003c/h2\u003e\u003cp\u003e除了中文空心句号和实心句点的映射，\u003ccode\u003exeCJK\u003c/code\u003e 的作者还提供了 \u003ccode\u003ehan-trad\u003c/code\u003e 和 \u003ccode\u003ehan-simp\u003c/code\u003e 两个映射文件。前者可以将 TeX 手稿中的简体中文字符映射成正体中文字符；后者则相反。\u003c/p\u003e\n\u003cfigure class=\"highlight tex\"\u003e\u003cfigcaption\u003e\u003cspan\u003emapping_han-trad.tex\u003c/span\u003e\u003c/figcaption\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e%!TeX program = xelatex\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\documentclass\u003c/span\u003e{article}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\usepackage\u003c/span\u003e{xeCJK}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\setCJKmainfont\u003c/span\u003e[Mapping = han-trad]{STSong} \u003cspan class=\"comment\"\u003e% 华文宋体\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\begin\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e华文宋体。\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e可以发现，简体中文字符，都被一一地映射为对应的正体中文字符。\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003e\\end\u003c/span\u003e{document}\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cimg data-src=\"/uploads/images/LaTeX/mapping_han-trad.png\"/\u003e\u003c/p\u003e\n\u003cp\u003e不过，需要注意的是：在简化汉字的过程中，存在多个正体中文汉字映射到同一个简体中文汉字上的情况；同时，也存在一个正体中文汉字在表达不同含义时映射到不同简体中文汉字的情况。由于技术所限，\u003ccode\u003exeCJK\u003c/code\u003e 的映射机制只能做到一一对应，无法实现上述复杂的映射状况。因此，在使用 \u003ccode\u003eMapping = han-trad\u003c/code\u003e 时，会出现类似如下的情况：简体的「发挥」和「头发」被转换成正体的「發揮」和「頭發」，但后者应作「頭髮」。\u003c/p\u003e\n\u003ch2 id=\"再深入一步\"\u003e\u003ca href=\"#再深入一步\" class=\"headerlink\" title=\"再深入一步\"\u003e\u003c/a\u003e再深入一步\u003c/h2\u003e\u003cp\u003e\u003ccode\u003exeCJK\u003c/code\u003e 只提供了四个预定义的映射文件，如果还想要用这种方式制作更多的效果，就需要自己定义映射文件了。这可以参考 TECKit 的文档：\u003ca target=\"_blank\" rel=\"noopener\" href=\"http://scripts.sil.org/teckit\"\u003ehttp://scripts.sil.org/teckit\u003c/a\u003e。\u003c/p\u003e\n\n    \u003c/div\u003e",
  "Date": "2016-05-12T13:24:02Z",
  "Author": "Liam Huang"
}