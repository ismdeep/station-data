{
  "Source": "morningspace",
  "Title": "Elastic Shell 101 - Working with Index",
  "Link": "https://morningspace.github.io/tech/elash101-2/",
  "Content": "\u003cdiv class=\"page__inner-wrap\"\u003e\n      \n\n      \u003csection class=\"page__content e-content\" itemprop=\"text\"\u003e\n        \n          \u003caside class=\"sidebar__right sticky\"\u003e\n            \u003cnav class=\"toc\"\u003e\n              \u003cheader\u003e\u003ch4 class=\"nav__title\"\u003e\u003ci class=\"fas fa-file-alt\"\u003e\u003c/i\u003e 在本页上\u003c/h4\u003e\u003c/header\u003e\n              \u003cul class=\"toc__menu\"\u003e\u003cli\u003e\u003ca href=\"#what-is-it\"\u003eWhat is it\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"#create-index\"\u003eCreate index\u003c/a\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"#config-folder\"\u003eConfig folder\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"#option-none\"\u003eOption none\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"#create-more-indices\"\u003eCreate more indices\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"#update-index-settings\"\u003eUpdate index settings\u003c/a\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"#parametermized-config\"\u003eParametermized config\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"#add-documents\"\u003eAdd documents\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"#run-bulk\"\u003eRun bulk\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"#search-documents\"\u003eSearch documents\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"#delete-index\"\u003eDelete index\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\n\n            \u003c/nav\u003e\n          \u003c/aside\u003e\n        \n        \u003cp\u003e\u003cimg src=\"/assets/images/studio/elash/101.jpg\" alt=\"\"/\u003e\u003c/p\u003e\n\n\u003ch2 id=\"what-is-it\"\u003eWhat is it\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/morningspace/elastic-shell\"\u003eElastic Shell\u003c/a\u003e is an open source project that includes a set of command line utilities and run as a client to help you manage \u003ca href=\"https://www.elastic.co/products/elasticsearch\"\u003eElasticsearch\u003c/a\u003e. It is entirely written in Bash Shell.\u003c/p\u003e\n\n\u003cp\u003e“Elastic Shell 101” is a series of posts that tells you how to use it.\u003c/p\u003e\n\n\u003cp\u003eIn this post, I will show you how to use Elastic Shell \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex\u003c/code\u003e command to manage Elasticsearch indices.\u003c/p\u003e\n\n\u003ch2 id=\"create-index\"\u003eCreate index\u003c/h2\u003e\n\n\u003cp\u003eLet’s use \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex create\u003c/code\u003e command to create an index.\u003c/p\u003e\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003ebash-4.4# elash index create\n\nCommands/Options:\n  companydatabase\n  github\n  ...\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eYou will notice a list of indices that can be created. This actually comes from what we put in the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003econfig\u003c/code\u003e folder.\u003c/p\u003e\n\n\u003ch3 id=\"config-folder\"\u003eConfig folder\u003c/h3\u003e\n\n\u003cp\u003eElastic Shell has a folder that includes all configuration required during the run. It’s a sub-folder in the Elastic Shell home folder. Let’s take look at its overall structure:\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"/assets/images/studio/elash/config-folder.jpg\" alt=\"\"/\u003e\u003c/p\u003e\n\n\u003cp\u003eThe \u003ccode class=\"language-plaintext highlighter-rouge\"\u003emain.properties\u003c/code\u003e file includes the general configuration. Other sub-folders include the detailed configuration that will be used by particular command.\u003c/p\u003e\n\n\u003cp\u003eLet’s take closer look at \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex\u003c/code\u003e folder, and we will talk about other folders later. We see two sub-folders in \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex\u003c/code\u003e folder, each of which maps to an index. The index name is actually the folder name. So, what the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex create\u003c/code\u003e command lists are actually the folder names.\u003c/p\u003e\n\n\u003cp\u003eThere are a couple of sample indices distributed along with Elastic Shell. Choose one of them and append after the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex create\u003c/code\u003e command. For example, the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003egithub\u003c/code\u003e index represents all the GitHub issues of the \u003ca href=\"https://github.com/elastic/elasticsearch\"\u003eElasticsearch project on GitHub\u003c/a\u003e.\u003c/p\u003e\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003ebash-4.4# elash index create github\n\nCommands/Options:\n  index-default\n  index-one-shard-no-replica\n  none\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eThen, you will see the available index configuration, where each one maps to a file in JSON format under the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex\u003c/code\u003e folder. For example, \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex-default\u003c/code\u003e maps to \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex-default.json\u003c/code\u003e. Add more JSON files where the filenames start with \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex\u003c/code\u003e. They will be added to the above list.\u003c/p\u003e\n\n\u003ch3 id=\"option-none\"\u003eOption none\u003c/h3\u003e\n\n\u003cp\u003eThere is a special configuration option called \u003ccode class=\"language-plaintext highlighter-rouge\"\u003enone\u003c/code\u003e. This maps to empty request body when we send request to Elasticsearch to create an index. It tells Elasticsearch to use the default settings when create index.\u003c/p\u003e\n\n\u003cp\u003eHere, let’s use \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex-default\u003c/code\u003e and check the content of \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex-default.json\u003c/code\u003e at first. It includes the mappings and settings for the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003egithub\u003c/code\u003e index:\u003c/p\u003e\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003ebash-4.4# \u003cspan class=\"nb\"\u003ecat \u003c/span\u003eelash/config/index/github/index-default.json \n\u003cspan class=\"o\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"s2\"\u003e\u0026#34;mappings\u0026#34;\u003c/span\u003e: \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"s2\"\u003e\u0026#34;issues\u0026#34;\u003c/span\u003e: \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"s2\"\u003e\u0026#34;properties\u0026#34;\u003c/span\u003e: \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n          ...\n          \u003cspan class=\"s2\"\u003e\u0026#34;title\u0026#34;\u003c/span\u003e: \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"s2\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan class=\"s2\"\u003e\u0026#34;text\u0026#34;\u003c/span\u003e,\n            \u003cspan class=\"s2\"\u003e\u0026#34;fields\u0026#34;\u003c/span\u003e: \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n              \u003cspan class=\"s2\"\u003e\u0026#34;keyword\u0026#34;\u003c/span\u003e: \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"s2\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan class=\"s2\"\u003e\u0026#34;keyword\u0026#34;\u003c/span\u003e,\n                \u003cspan class=\"s2\"\u003e\u0026#34;ignore_above\u0026#34;\u003c/span\u003e: 256\n              \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n          \u003cspan class=\"o\"\u003e}\u003c/span\u003e,\n          \u003cspan class=\"s2\"\u003e\u0026#34;updated_at\u0026#34;\u003c/span\u003e: \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"s2\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan class=\"s2\"\u003e\u0026#34;date\u0026#34;\u003c/span\u003e\n          \u003cspan class=\"o\"\u003e}\u003c/span\u003e,\n          ...\n        \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e}\u003c/span\u003e,\n    \u003cspan class=\"s2\"\u003e\u0026#34;settings\u0026#34;\u003c/span\u003e: \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"s2\"\u003e\u0026#34;index\u0026#34;\u003c/span\u003e: \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"s2\"\u003e\u0026#34;number_of_shards\u0026#34;\u003c/span\u003e: \u003cspan class=\"s2\"\u003e\u0026#34;5\u0026#34;\u003c/span\u003e,\n        \u003cspan class=\"s2\"\u003e\u0026#34;number_of_replicas\u0026#34;\u003c/span\u003e: \u003cspan class=\"s2\"\u003e\u0026#34;1\u0026#34;\u003c/span\u003e\n      \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eLet’s append \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex-default\u003c/code\u003e after \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex create\u003c/code\u003e command.\u003c/p\u003e\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003ebash-4.4# elash index create github index-default\n\nCreate github\n\u003cspan class=\"nt\"\u003e-------------------------------------------------\u003c/span\u003e\n\u003cspan class=\"o\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"s2\"\u003e\u0026#34;acknowledged\u0026#34;\u003c/span\u003e: \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e,\n  \u003cspan class=\"s2\"\u003e\u0026#34;shards_acknowledged\u0026#34;\u003c/span\u003e: \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e,\n  \u003cspan class=\"s2\"\u003e\u0026#34;index\u0026#34;\u003c/span\u003e: \u003cspan class=\"s2\"\u003e\u0026#34;github\u0026#34;\u003c/span\u003e\n\u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\nCommands/Options:\n  companydatabase\n  github\n  ...\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eWhen we see this, it tells us the index has been created successfully. This is actually the returned response from the Elasticsearch cluster.\u003c/p\u003e\n\n\u003ch3 id=\"create-more-indices\"\u003eCreate more indices\u003c/h3\u003e\n\n\u003cp\u003eWe can create more indices in one line. It’s easy. Just chain more indices with their configuration. For example, we can create both the index \u003ccode class=\"language-plaintext highlighter-rouge\"\u003egithub\u003c/code\u003e and \u003ccode class=\"language-plaintext highlighter-rouge\"\u003ecompanydatabase\u003c/code\u003e. Choose \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex-default.json\u003c/code\u003e for \u003ccode class=\"language-plaintext highlighter-rouge\"\u003egithub\u003c/code\u003e and \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex.json\u003c/code\u003e for \u003ccode class=\"language-plaintext highlighter-rouge\"\u003ecompanydatabase\u003c/code\u003e.\u003c/p\u003e\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003ebash-4.4# elash index create github index-default companydatabase index\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2 id=\"update-index-settings\"\u003eUpdate index settings\u003c/h2\u003e\n\n\u003cp\u003eAfter create index, we can update the index settings using \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex update\u003c/code\u003e command. Choose index \u003ccode class=\"language-plaintext highlighter-rouge\"\u003egithub\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003ebash-4.4# elash index update settings github\n\nCommands/Options:\n  settings-no-refresh-no-replica\n  settings-parameterized\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eYou will see the available settings that maps the settings files in the index configuration folder. The two files which the names start with \u003ccode class=\"language-plaintext highlighter-rouge\"\u003esettings\u003c/code\u003e map to the available settings that are listed above when we run \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex update settings\u003c/code\u003e command.\u003c/p\u003e\n\n\u003cp\u003eLet’s take look at \u003ccode class=\"language-plaintext highlighter-rouge\"\u003esettings-no-refresh-no-replica.json\u003c/code\u003e at first:\u003c/p\u003e\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003ebash-4.4# \u003cspan class=\"nb\"\u003ecat \u003c/span\u003eelash/config/index/github/settings-no-refresh-no-replica.json \n\u003cspan class=\"o\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"s2\"\u003e\u0026#34;index\u0026#34;\u003c/span\u003e: \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"s2\"\u003e\u0026#34;number_of_replicas\u0026#34;\u003c/span\u003e: 0,\n    \u003cspan class=\"s2\"\u003e\u0026#34;refresh_interval\u0026#34;\u003c/span\u003e : \u003cspan class=\"s2\"\u003e\u0026#34;-1\u0026#34;\u003c/span\u003e\n  \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eAs the filename explains, it defines the number of replicas zero and disables the index refreshing. Use it to update the index settings:\u003c/p\u003e\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003ebash-4.4# elash index update settings github settings-no-refresh-no-replica\n\nUpdate github Settings\n\u003cspan class=\"nt\"\u003e-------------------------------------------------\u003c/span\u003e\n\u003cspan class=\"o\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"s2\"\u003e\u0026#34;acknowledged\u0026#34;\u003c/span\u003e: \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\nCommands/Options:\n  companydatabase\n  github\n  ...\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eThen run \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex cat indices\u003c/code\u003e command and check the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003erep\u003c/code\u003e column to see if the settings update has taken effect.\u003c/p\u003e\n\n\u003ch3 id=\"parametermized-config\"\u003eParametermized config\u003c/h3\u003e\n\n\u003cp\u003eCheck the other pre-defined settings \u003ccode class=\"language-plaintext highlighter-rouge\"\u003esettings-parameterized.json\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003ebash-4.4# \u003cspan class=\"nb\"\u003ecat \u003c/span\u003eelash/config/index/github/settings-parameterized.json \n\u003cspan class=\"o\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"s2\"\u003e\u0026#34;index\u0026#34;\u003c/span\u003e : \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"s2\"\u003e\u0026#34;number_of_replicas\u0026#34;\u003c/span\u003e : \u003cspan class=\"s2\"\u003e\u0026#34;@@index_number_of_replicas\u0026#34;\u003c/span\u003e,\n    \u003cspan class=\"s2\"\u003e\u0026#34;refresh_interval\u0026#34;\u003c/span\u003e : \u003cspan class=\"s2\"\u003e\u0026#34;@@index_refresh_interval\u0026#34;\u003c/span\u003e\n  \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eYou may notice that the actual values of the above two settings are parameterized. These are defined as variables in \u003ccode class=\"language-plaintext highlighter-rouge\"\u003emain.properties\u003c/code\u003e, where you can see the default value of \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex_number_of_replicas\u003c/code\u003e is one, and the default value of \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex_refresh_interval\u003c/code\u003e is 30 sec. This can be overridden by defining environment variables.\u003c/p\u003e\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003ebash-4.4# cat elash/config/main.properties \n# net settings\nnet_host=${net_host:-http://elasticsearch:9200}\nnet_use_ssl=${net_use_ssl:-false}\nnet_ssl_no_validate=${net_ssl_no_validate:-true}\nnet_client_cert=${net_client_cert:-./certs/admin.crt.pem}\nnet_client_key=${net_client_key:-./certs/admin.key.pem}\nnet_certificate=${net_certificate:-}\n\n# index settings\nindex_name=${index_name:-github}\nindex_number_of_replicas=${index_number_of_replicas:-1}\nindex_refresh_interval=${index_refresh_interval:-30s}\n...\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2 id=\"add-documents\"\u003eAdd documents\u003c/h2\u003e\n\n\u003cp\u003eNow, let’s try to add some sample documents to the \u003ccode class=\"language-plaintext highlighter-rouge\"\u003egithub\u003c/code\u003e index. Run \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex doc add\u003c/code\u003e command, choose \u003ccode class=\"language-plaintext highlighter-rouge\"\u003egithub\u003c/code\u003e as index, and append \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eissues\u003c/code\u003e as document type.\u003c/p\u003e\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003ebash-4.4# elash index doc add github issues\n\nCommands/Options:\n  doc-issue-1\n  doc-issue-2\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eYou will see the list of all pre-prepared sample documents. Each one represents a real github issue grabbed from the \u003ca href=\"https://github.com/elastic/elasticsearch\"\u003eElasticsearch project on GitHub\u003c/a\u003e. They can also be found in the index configuration folder. As always, we can add multiple documents in one line. Let’s add all the sample documents as below:\u003c/p\u003e\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003ebash-4.4# elash index doc add github issues doc-issue-1 doc-issue-2\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2 id=\"run-bulk\"\u003eRun bulk\u003c/h2\u003e\n\n\u003cp\u003eA more efficient way to add multiple documents is to use \u003ca href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html\"\u003eElasticsearch bulk API\u003c/a\u003e. This is also supported by Elastic Shell. Let’s run \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex bulk\u003c/code\u003e command and choose \u003ccode class=\"language-plaintext highlighter-rouge\"\u003egithub\u003c/code\u003e index.\u003c/p\u003e\n\u003cdiv class=\"language-plaintext highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003ebash-4.4# elash index bulk github\n\nCommands/Options:\n  bulk-closed-issues\n  bulk-open-issues\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eThe list above includes a couple of pre-prepared sample bulk requests, which can also be found in the index configuration folder.\u003c/p\u003e\n\u003cul\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003ebulk-open-issues.json\u003c/code\u003e includes all open issues as a snapshot that was grabbed from \u003ca href=\"https://github.com/elastic/elasticsearch\"\u003eElasticsearch project on GitHub\u003c/a\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ccode class=\"language-plaintext highlighter-rouge\"\u003ebulk-closed-issues.json\u003c/code\u003e includes some of the closed issues.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eLet’s dump them all into our Elasticsearch cluster.\u003c/p\u003e\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003ebash-4.4# elash index bulk github bulk-closed-issues bulk-open-issues\n\nProgress\n\u003cspan class=\"nt\"\u003e------------------------------------------------------------------------------\u003c/span\u003e\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 9929k  100  463k  100 9466k   247k  5062k  0:00:01  0:00:01 \u003cspan class=\"nt\"\u003e--\u003c/span\u003e:--:-- 5310k\n\nBulk to github\n\u003cspan class=\"nt\"\u003e------------------------------------------------------------------------------\u003c/span\u003e\n\u003cspan class=\"o\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"s2\"\u003e\u0026#34;took\u0026#34;\u003c/span\u003e: 1692,\n  \u003cspan class=\"s2\"\u003e\u0026#34;errors\u0026#34;\u003c/span\u003e: \u003cspan class=\"nb\"\u003efalse\u003c/span\u003e,\n  ...\n\n\u003cspan class=\"o\"\u003e(\u003c/span\u003etrancated...\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\nCommands/Options:\n  bulk-closed-issues\n  bulk-open-issues\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eWe can see the returned responses are truncated. This is because there are too many issues being processed and the response will be very large if we dump all the outputs to the console.\u003c/p\u003e\n\n\u003ch2 id=\"search-documents\"\u003eSearch documents\u003c/h2\u003e\n\n\u003cp\u003eAfter populated the data, you can run \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex search\u003c/code\u003e command to search document using pre-prepared search query. Follow the same pattern and let Elastic Shell tell you what’s next to be append at the end of the command.\u003c/p\u003e\n\n\u003ch2 id=\"delete-index\"\u003eDelete index\u003c/h2\u003e\n\n\u003cp\u003eTo delete the index, it’s easy. Just run \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex delete\u003c/code\u003e command. Again, we can delete multiple indices in one line.\u003c/p\u003e\n\u003cdiv class=\"language-shell highlighter-rouge\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"highlight\"\u003e\u003ccode\u003ebash-4.4# elash index delete github companydatabase\n\nDelete github\n\u003cspan class=\"nt\"\u003e-------------------------------------------------\u003c/span\u003e\n\u003cspan class=\"o\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"s2\"\u003e\u0026#34;acknowledged\u0026#34;\u003c/span\u003e: \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\nDelete companydatabase\n\u003cspan class=\"nt\"\u003e-------------------------------------------------\u003c/span\u003e\n\u003cspan class=\"o\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"s2\"\u003e\u0026#34;acknowledged\u0026#34;\u003c/span\u003e: \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\nCommands/Options:\n  companydatabase\n  github\n  ...\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eIf you run \u003ccode class=\"language-plaintext highlighter-rouge\"\u003eindex cat indices\u003c/code\u003e command, you will see the two indices have gone.\u003c/p\u003e\n\n\u003cp\u003eFor more stories on Elastic Shell, stay tuned for next posts! Any question about this post or Elastic Shell, feel free to leave comments or drop email at morningspace@yahoo.com.\u003c/p\u003e\n\n        \n      \u003c/section\u003e\n\n      \u003cfooter class=\"page__meta\"\u003e\n        \n        \n  \n\n\n  \n\n  \u003cp class=\"page__taxonomy\"\u003e\n    \u003cstrong\u003e\u003ci class=\"fas fa-fw fa-tags\" aria-hidden=\"true\"\u003e\u003c/i\u003e 标签: \u003c/strong\u003e\n    \u003cspan itemprop=\"keywords\"\u003e\n    \n      \u003ca href=\"/tags/#elasticsearch\" class=\"page__taxonomy-item p-category\" rel=\"tag\"\u003eelasticsearch\u003c/a\u003e\u003cspan class=\"sep\"\u003e, \u003c/span\u003e\n    \n      \u003ca href=\"/tags/#shell\" class=\"page__taxonomy-item p-category\" rel=\"tag\"\u003eshell\u003c/a\u003e\u003cspan class=\"sep\"\u003e, \u003c/span\u003e\n    \n      \u003ca href=\"/tags/#studio\" class=\"page__taxonomy-item p-category\" rel=\"tag\"\u003estudio\u003c/a\u003e\u003cspan class=\"sep\"\u003e, \u003c/span\u003e\n    \n      \u003ca href=\"/tags/#studio-elash-101\" class=\"page__taxonomy-item p-category\" rel=\"tag\"\u003estudio-elash-101\u003c/a\u003e\n    \n    \u003c/span\u003e\n  \u003c/p\u003e\n\n\n\n\n  \n\n\n  \n\n  \u003cp class=\"page__taxonomy\"\u003e\n    \u003cstrong\u003e\u003ci class=\"fas fa-fw fa-folder-open\" aria-hidden=\"true\"\u003e\u003c/i\u003e 分类: \u003c/strong\u003e\n    \u003cspan itemprop=\"keywords\"\u003e\n    \n      \u003ca href=\"/categories/#tech\" class=\"page__taxonomy-item p-category\" rel=\"tag\"\u003etech\u003c/a\u003e\n    \n    \u003c/span\u003e\n  \u003c/p\u003e\n\n\n        \n\n  \u003cp class=\"page__date\"\u003e\u003cstrong\u003e\u003ci class=\"fas fa-fw fa-calendar-alt\" aria-hidden=\"true\"\u003e\u003c/i\u003e 更新时间:\u003c/strong\u003e \u003ctime class=\"dt-published\" datetime=\"2019-03-29T00:00:00+08:00\"\u003eMarch 29, 2019\u003c/time\u003e\u003c/p\u003e\n\n      \u003c/footer\u003e\n\n      \u003csection class=\"page__share\"\u003e\n  \n    \u003ch4 class=\"page__share-title\"\u003e分享\u003c/h4\u003e\n  \n\n  \u003ca href=\"https://twitter.com/intent/tweet?text=Elastic+Shell+101+-+Working+with+Index%20https%3A%2F%2Fmorningspace.github.io%2Ftech%2Felash101-2%2F\" class=\"btn btn--twitter\" onclick=\"window.open(this.href, \u0026#39;window\u0026#39;, \u0026#39;left=20,top=20,width=500,height=500,toolbar=1,resizable=0\u0026#39;); return false;\" title=\"分享 Twitter\"\u003e\u003ci class=\"fab fa-fw fa-twitter\" aria-hidden=\"true\"\u003e\u003c/i\u003e\u003cspan\u003e Twitter\u003c/span\u003e\u003c/a\u003e\n\n  \u003ca href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fmorningspace.github.io%2Ftech%2Felash101-2%2F\" class=\"btn btn--facebook\" onclick=\"window.open(this.href, \u0026#39;window\u0026#39;, \u0026#39;left=20,top=20,width=500,height=500,toolbar=1,resizable=0\u0026#39;); return false;\" title=\"分享 Facebook\"\u003e\u003ci class=\"fab fa-fw fa-facebook\" aria-hidden=\"true\"\u003e\u003c/i\u003e\u003cspan\u003e Facebook\u003c/span\u003e\u003c/a\u003e\n\n  \u003ca href=\"https://www.linkedin.com/shareArticle?mini=true\u0026amp;url=https%3A%2F%2Fmorningspace.github.io%2Ftech%2Felash101-2%2F\" class=\"btn btn--linkedin\" onclick=\"window.open(this.href, \u0026#39;window\u0026#39;, \u0026#39;left=20,top=20,width=500,height=500,toolbar=1,resizable=0\u0026#39;); return false;\" title=\"分享 LinkedIn\"\u003e\u003ci class=\"fab fa-fw fa-linkedin\" aria-hidden=\"true\"\u003e\u003c/i\u003e\u003cspan\u003e LinkedIn\u003c/span\u003e\u003c/a\u003e\n\u003c/section\u003e\n\n\n      \n  \u003cnav class=\"pagination\"\u003e\n    \n      \u003ca href=\"/tech/elash101-1/\" class=\"pagination--pager\" title=\"Elastic Shell 101 - Getting Started\n\"\u003e向前\u003c/a\u003e\n    \n    \n      \u003ca href=\"/tech/elash101-3/\" class=\"pagination--pager\" title=\"Elastic Shell 101 - Manage Snapshot Interactively\n\"\u003e向后\u003c/a\u003e\n    \n  \u003c/nav\u003e\n\n    \u003c/div\u003e",
  "Date": "2019-03-29T00:00:00+08:00",
  "Author": "MornigSpace"
}