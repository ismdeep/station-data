{
  "Source": "qiwsir.github.io",
  "Title": "分析梅西和罗纳尔多的比赛数据",
  "Link": "https://qiwsir.github.io/2020/06/18/football-data-analysis/",
  "Content": "\u003carticle class=\"post-article\"\u003e\n    \u003ch2\u003e分析梅西和罗纳尔多的比赛数据\u003c/h2\u003e\n    \u003cp class=\"post-date\"\u003e2020-06-18\u003c/p\u003e\n    \u003csection class=\"markdown-content\"\u003e\u003cp\u003e作者：Adil Moujahid\u003c/p\u003e\n\u003cp\u003e翻译：老齐\u003c/p\u003e\n\u003cp\u003e与本书相关的图书推荐：\u003cstrong\u003e《跟老齐学Python：数据分析》\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90_20200209114241.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e本书是数据分析、机器学习、深度学习的起步读物，向学习者阐述了这些领域的最基本工具Numpy、Pandas以及数据可视化的使用和实现方法，其中贯穿着诸多实际案例。\u003c/p\u003e\n\u003chr/\u003e\n\u003cp\u003e2003年，迈克尔·刘易斯出版了《点球成金》，这是一本关于比利·比恩的书，他是奥克兰运动家棒球队队的总经理，他将统计分析应用于棒球，以确定和招募被低估的棒球运动员。通过数据的运用，比利·比恩所取得的胜利与薪资水平翻倍的球队一样多，并且从2000年到2003年连续4年参加了附加赛。\u003c/p\u003e\n\u003cp\u003e2011年，《点球成金》被改编成电影，由布拉德·皮特饰演比利·比恩。这本书和这部电影都很成功，极大地促进了利用数据提高比赛成绩的理念。对体育数据进行分析，进而提交竞技比赛成绩，通常称之为\u003cstrong\u003e体育分析\u003c/strong\u003e（Sport analytics）。\u003c/p\u003e\n\u003cp\u003e在棒球中，这项运动的性质使得收集大量关于比赛中的数据点比较容易。你可以从这个链接下载数据（\u003ca href=\"http://www.seanlahman.com/baseball-archive/statistics/），其中包含了自1871年以来的关于球员和球队的比赛数据和其他统计数据。如果你对分析棒球数据感兴趣，你可以本微信公众号关注相关的文章。\" target=\"_blank\" rel=\"noopener\"\u003ehttp://www.seanlahman.com/baseball-archive/statistics/），其中包含了自1871年以来的关于球员和球队的比赛数据和其他统计数据。如果你对分析棒球数据感兴趣，你可以本微信公众号关注相关的文章。\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e然而，收集足球数据就变得复杂多了。在足球场上，22个队员无时不刻不在运动中，他们在球场上的位置和移动路径的可能可以说有无穷种，幸运的是，在这几年里，随着传感器技术和视频分析技术的进步，获得高质量的足球比赛数据也称为了可能，从而可以利用这些数据对比赛、球队和球员的情况进行分析。在本文中，我们将使用公开的足球数据集，分析梅西和罗纳尔多在2017-2018赛季中的有关数据，并为此开发一个网页，在网页上，我们以交互的方式来比较这两名球员在场上的位置。\u003c/p\u003e\n\u003cp\u003e非常感谢Luca Pappalardo博士（\u003ca href=\"https://lucapappalardo.com/）和他的同事们，感谢他们为公众提供了这么伟大的数据集。\" target=\"_blank\" rel=\"noopener\"\u003ehttps://lucapappalardo.com/）和他的同事们，感谢他们为公众提供了这么伟大的数据集。\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e下面的动画，就是这个应用的简单演示，你可以到github仓库中得到源码（\u003ca href=\"https://github.com/adilmoujahid/streamlit-messi-ronaldo）。\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/adilmoujahid/streamlit-messi-ronaldo）。\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/streamlit-messi-ronaldo_20200618113457.gif\" alt=\"\"/\u003e\u003c/p\u003e\n\u003ch2 id=\"1-数据准备\"\u003e\u003ca href=\"#1-数据准备\" class=\"headerlink\" title=\"1. 数据准备\"\u003e\u003c/a\u003e1. 数据准备\u003c/h2\u003e\u003cp\u003e过去十年里，梅西和罗纳尔多共获得11个金球奖（梅西6个，罗纳尔多5个），可以说统治当时的世界足球。这两位球员都被认为是有史以来最伟大的球员之一，所以也经常被拿来比较。\u003c/p\u003e\n\u003cp\u003e我们将分析这两位球员在2017-2018赛季西班牙联赛中的表现，这是罗纳尔多转会尤文图斯之前在西班牙的最后一个赛季。\u003c/p\u003e\n\u003ch3 id=\"1-1-获取数据\"\u003e\u003ca href=\"#1-1-获取数据\" class=\"headerlink\" title=\"1.1 获取数据\"\u003e\u003c/a\u003e1.1 获取数据\u003c/h3\u003e\u003cp\u003e首先，我们要下载有关数据集，下载地址是：\u003ca href=\"https://figshare.com/collections/Soccer_match_event_dataset/4415000/5。然后关注如下部分：\" target=\"_blank\" rel=\"noopener\"\u003ehttps://figshare.com/collections/Soccer_match_event_dataset/4415000/5。然后关注如下部分：\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ematches/matches_Spain.json\u003c/strong\u003e: 西班牙联赛2017-18赛季有关信息。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eevents/events_Spain.json\u003c/strong\u003e: 西班牙联赛2017-18赛季中每场比赛的所有事件。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eplayers.json\u003c/strong\u003e: 参加了7场国际国内重要比赛的所有球员（意大利、西班牙、发过、德国和英超联赛，2018年世界杯，2016年欧洲杯）。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eteams.json\u003c/strong\u003e: 参加了7场国际国内重要比赛的所有球队。\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003etags2name.csv\u003c/strong\u003e: 标记符和标记名称的对应关系\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"1-2-读入数据\"\u003e\u003ca href=\"#1-2-读入数据\" class=\"headerlink\" title=\"1.2 读入数据\"\u003e\u003c/a\u003e1.2 读入数据\u003c/h3\u003e\u003cp\u003e下面是我们使用的Python库：\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e json\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e unicodedata\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e numpy \u003cspan class=\"keyword\"\u003eas\u003c/span\u003e np\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e pandas \u003cspan class=\"keyword\"\u003eas\u003c/span\u003e pd\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e然后从\u003ccode\u003eplayers.json\u003c/code\u003e文件，根据id读入两个球员的数据：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e梅西的id是3359\u003c/li\u003e\n\u003cli\u003e罗纳尔多的id是3322\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e再从\u003ccode\u003eteams.json\u003c/code\u003e文件中根据id找到他们所在的球队：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e巴塞罗那的id是676\u003c/li\u003e\n\u003cli\u003e皇家马德里的id是675\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e接下来读入西班牙联赛的比赛数据：\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003ewith\u003c/span\u003e open(\u003cspan class=\"string\"\u003e\u0026#39;../data/matches/matches_Spain.json\u0026#39;\u003c/span\u003e) \u003cspan class=\"keyword\"\u003eas\u003c/span\u003e json_file:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    matches_spain_data = json.load(json_file)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003ewith\u003c/span\u003e open(\u003cspan class=\"string\"\u003e\u0026#39;../data/events/events_Spain.json\u0026#39;\u003c/span\u003e) \u003cspan class=\"keyword\"\u003eas\u003c/span\u003e json_file:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    events_spain_data = json.load(json_file)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch3 id=\"1-3-构造数据\"\u003e\u003ca href=\"#1-3-构造数据\" class=\"headerlink\" title=\"1.3 构造数据\"\u003e\u003c/a\u003e1.3 构造数据\u003c/h3\u003e\u003cp\u003e从前述数据中，分别得到皇家马德里和巴塞罗那两个俱乐部的比赛信息。\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ebarca_matches  = [match \u003cspan class=\"keyword\"\u003efor\u003c/span\u003e match \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e matches_spain_data \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;676\u0026#39;\u003c/span\u003e \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e match[\u003cspan class=\"string\"\u003e\u0026#39;teamsData\u0026#39;\u003c/span\u003e].keys()]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ereal_matches  = [match \u003cspan class=\"keyword\"\u003efor\u003c/span\u003e match \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e matches_spain_data \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"string\"\u003e\u0026#39;675\u0026#39;\u003c/span\u003e \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e match[\u003cspan class=\"string\"\u003e\u0026#39;teamsData\u0026#39;\u003c/span\u003e].keys()]\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e将它们转化为DataFrame对象。\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ebarca_matches_df = pd.DataFrame(barca_matches)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ereal_matches_df = pd.DataFrame(real_matches)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ebarca_matches_df.head(\u003cspan class=\"number\"\u003e2\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e输出：\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e \tstatus \troundId \tgameweek \tteamsData \tseasonId \tdateutc \twinner \tvenue \twyId \tlabel \tdate \treferees \tduration \tcompetitionId\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"number\"\u003e0\u003c/span\u003e \tPlayed \t\u003cspan class=\"number\"\u003e4406122\u003c/span\u003e \t\u003cspan class=\"number\"\u003e38\u003c/span\u003e \t{\u003cspan class=\"string\"\u003e\u0026#39;676\u0026#39;\u003c/span\u003e: {\u003cspan class=\"string\"\u003e\u0026#39;scoreET\u0026#39;\u003c/span\u003e: \u003cspan class=\"number\"\u003e0\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;coachId\u0026#39;\u003c/span\u003e: \u003cspan class=\"number\"\u003e92894\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;side... \t181144 \t2018-05-20 18:45:00 \t676 \tCamp Nou \t2565922 \tBarcelona - Real Sociedad, 1 - 0 \tMay 20, 2018 at 8:45:00 PM GMT+2 \t[{\u0026#39;\u003c/span\u003erefereeId\u003cspan class=\"string\"\u003e\u0026#39;: 398931, \u0026#39;\u003c/span\u003erole\u003cspan class=\"string\"\u003e\u0026#39;: \u0026#39;\u003c/span\u003ereferee\u003cspan class=\"string\"\u003e\u0026#39;}, {\u0026#39;\u003c/span\u003er... \tRegular \t\u003cspan class=\"number\"\u003e795\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"number\"\u003e1\u003c/span\u003e \tPlayed \t\u003cspan class=\"number\"\u003e4406122\u003c/span\u003e \t\u003cspan class=\"number\"\u003e37\u003c/span\u003e \t{\u003cspan class=\"string\"\u003e\u0026#39;676\u0026#39;\u003c/span\u003e: {\u003cspan class=\"string\"\u003e\u0026#39;scoreET\u0026#39;\u003c/span\u003e: \u003cspan class=\"number\"\u003e0\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;coachId\u0026#39;\u003c/span\u003e: \u003cspan class=\"number\"\u003e92894\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;side... \t181144 \t2018-05-13 18:45:00 \t695 \tEstadio Ciudad de Valencia \t2565917 \tLevante - Barcelona, 5 - 4 \tMay 13, 2018 at 8:45:00 PM GMT+2 \t[{\u0026#39;\u003c/span\u003erefereeId\u003cspan class=\"string\"\u003e\u0026#39;: 420995, \u0026#39;\u003c/span\u003erole\u003cspan class=\"string\"\u003e\u0026#39;: \u0026#39;\u003c/span\u003ereferee\u003cspan class=\"string\"\u003e\u0026#39;}, {\u0026#39;\u003c/span\u003er... \tRegular \t\u003cspan class=\"number\"\u003e795\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e接下来，将梅西和罗纳尔多的有关数据，也生成为DataFrame。\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emessi_events_data = []\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003efor\u003c/span\u003e event \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e events_spain_data:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e event[\u003cspan class=\"string\"\u003e\u0026#39;playerId\u0026#39;\u003c/span\u003e] == \u003cspan class=\"number\"\u003e3359\u003c/span\u003e:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        messi_events_data.append(event)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emessi_events_data_df = pd.DataFrame(messi_events_data)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eronaldo_events_data = []\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003efor\u003c/span\u003e event \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e events_spain_data:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003eif\u003c/span\u003e event[\u003cspan class=\"string\"\u003e\u0026#39;playerId\u0026#39;\u003c/span\u003e] == \u003cspan class=\"number\"\u003e3322\u003c/span\u003e:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        ronaldo_events_data.append(event)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eronaldo_events_data_df = pd.DataFrame(ronaldo_events_data)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e从\u003ccode\u003etags2name.csv\u003c/code\u003e中选择我们需要的时间标签：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e101\u003c/strong\u003e: Goal（进球）\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e301\u003c/strong\u003e: Assist（助攻）\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e302\u003c/strong\u003e: key Pass （关键传球）\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e401\u003c/strong\u003e: Left Foot（左脚）\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e402\u003c/strong\u003e: Right Foot（右脚）\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e将这些标签加入到DataFrame中作为一列。\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"title\"\u003eadd_tag\u003c/span\u003e\u003cspan class=\"params\"\u003e(tags, tag_id)\u003c/span\u003e:\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e tag_id \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e [tag[\u003cspan class=\"string\"\u003e\u0026#39;id\u0026#39;\u003c/span\u003e] \u003cspan class=\"keyword\"\u003efor\u003c/span\u003e tag \u003cspan class=\"keyword\"\u003ein\u003c/span\u003e tags]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e messi_events_data_df.columns\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e输出：\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eIndex([\u003cspan class=\"string\"\u003e\u0026#39;eventId\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;subEventName\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;tags\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;playerId\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;positions\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;matchId\u0026#39;\u003c/span\u003e,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e       \u003cspan class=\"string\"\u003e\u0026#39;eventName\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;teamId\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;matchPeriod\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;eventSec\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;subEventId\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;id\u0026#39;\u003c/span\u003e],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e      dtype=\u003cspan class=\"string\"\u003e\u0026#39;object\u0026#39;\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emessi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;goal\u0026#39;\u003c/span\u003e] = messi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;tags\u0026#39;\u003c/span\u003e].apply(\u003cspan class=\"keyword\"\u003elambda\u003c/span\u003e x: add_tag(x, \u003cspan class=\"number\"\u003e101\u003c/span\u003e))\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emessi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;assist\u0026#39;\u003c/span\u003e] = messi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;tags\u0026#39;\u003c/span\u003e].apply(\u003cspan class=\"keyword\"\u003elambda\u003c/span\u003e x: add_tag(x, \u003cspan class=\"number\"\u003e301\u003c/span\u003e))\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emessi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;key_pass\u0026#39;\u003c/span\u003e] = messi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;tags\u0026#39;\u003c/span\u003e].apply(\u003cspan class=\"keyword\"\u003elambda\u003c/span\u003e x: add_tag(x, \u003cspan class=\"number\"\u003e302\u003c/span\u003e))\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emessi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;left_foot\u0026#39;\u003c/span\u003e] = messi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;tags\u0026#39;\u003c/span\u003e].apply(\u003cspan class=\"keyword\"\u003elambda\u003c/span\u003e x: add_tag(x, \u003cspan class=\"number\"\u003e401\u003c/span\u003e))\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emessi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;right_foot\u0026#39;\u003c/span\u003e] = messi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;tags\u0026#39;\u003c/span\u003e].apply(\u003cspan class=\"keyword\"\u003elambda\u003c/span\u003e x: add_tag(x, \u003cspan class=\"number\"\u003e402\u003c/span\u003e))\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;goal\u0026#39;\u003c/span\u003e] = ronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;tags\u0026#39;\u003c/span\u003e].apply(\u003cspan class=\"keyword\"\u003elambda\u003c/span\u003e x: add_tag(x, \u003cspan class=\"number\"\u003e101\u003c/span\u003e))\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;assist\u0026#39;\u003c/span\u003e] = ronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;tags\u0026#39;\u003c/span\u003e].apply(\u003cspan class=\"keyword\"\u003elambda\u003c/span\u003e x: add_tag(x, \u003cspan class=\"number\"\u003e301\u003c/span\u003e))\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;key_pass\u0026#39;\u003c/span\u003e] = ronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;tags\u0026#39;\u003c/span\u003e].apply(\u003cspan class=\"keyword\"\u003elambda\u003c/span\u003e x: add_tag(x, \u003cspan class=\"number\"\u003e302\u003c/span\u003e))\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;left_foot\u0026#39;\u003c/span\u003e] = ronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;tags\u0026#39;\u003c/span\u003e].apply(\u003cspan class=\"keyword\"\u003elambda\u003c/span\u003e x: add_tag(x, \u003cspan class=\"number\"\u003e401\u003c/span\u003e))\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;right_foot\u0026#39;\u003c/span\u003e] = ronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;tags\u0026#39;\u003c/span\u003e].apply(\u003cspan class=\"keyword\"\u003elambda\u003c/span\u003e x: add_tag(x, \u003cspan class=\"number\"\u003e402\u003c/span\u003e))\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emessi_events_data_df.head(\u003cspan class=\"number\"\u003e2\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e输出：\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e \teventId \tsubEventName \ttags \tplayerId \tpositions \tmatchId \teventName \tteamId \tmatchPeriod \teventSec \tsubEventId \tid \tgoal \tassist \tkey_pass \tleft_foot \tright_foot\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"number\"\u003e0\u003c/span\u003e \t\u003cspan class=\"number\"\u003e8\u003c/span\u003e \tSimple \u003cspan class=\"keyword\"\u003epass\u003c/span\u003e \t[{\u003cspan class=\"string\"\u003e\u0026#39;id\u0026#39;\u003c/span\u003e: \u003cspan class=\"number\"\u003e1801\u003c/span\u003e}] \t\u003cspan class=\"number\"\u003e3359\u003c/span\u003e \t[{\u003cspan class=\"string\"\u003e\u0026#39;y\u0026#39;\u003c/span\u003e: \u003cspan class=\"number\"\u003e50\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;x\u0026#39;\u003c/span\u003e: \u003cspan class=\"number\"\u003e50\u003c/span\u003e}, {\u003cspan class=\"string\"\u003e\u0026#39;y\u0026#39;\u003c/span\u003e: \u003cspan class=\"number\"\u003e50\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;x\u0026#39;\u003c/span\u003e: \u003cspan class=\"number\"\u003e40\u003c/span\u003e}] \t\u003cspan class=\"number\"\u003e2565554\u003c/span\u003e \tPass \t\u003cspan class=\"number\"\u003e676\u003c/span\u003e \t\u003cspan class=\"number\"\u003e1\u003c/span\u003eH \t\u003cspan class=\"number\"\u003e1.012047\u003c/span\u003e \t\u003cspan class=\"number\"\u003e85\u003c/span\u003e \t\u003cspan class=\"number\"\u003e180465950\u003c/span\u003e \t\u003cspan class=\"literal\"\u003eFalse\u003c/span\u003e \t\u003cspan class=\"literal\"\u003eFalse\u003c/span\u003e \t\u003cspan class=\"literal\"\u003eFalse\u003c/span\u003e \t\u003cspan class=\"literal\"\u003eFalse\u003c/span\u003e \t\u003cspan class=\"literal\"\u003eFalse\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"number\"\u003e1\u003c/span\u003e \t\u003cspan class=\"number\"\u003e8\u003c/span\u003e \tSimple \u003cspan class=\"keyword\"\u003epass\u003c/span\u003e \t[{\u003cspan class=\"string\"\u003e\u0026#39;id\u0026#39;\u003c/span\u003e: \u003cspan class=\"number\"\u003e1801\u003c/span\u003e}] \t\u003cspan class=\"number\"\u003e3359\u003c/span\u003e \t[{\u003cspan class=\"string\"\u003e\u0026#39;y\u0026#39;\u003c/span\u003e: \u003cspan class=\"number\"\u003e64\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;x\u0026#39;\u003c/span\u003e: \u003cspan class=\"number\"\u003e71\u003c/span\u003e}, {\u003cspan class=\"string\"\u003e\u0026#39;y\u0026#39;\u003c/span\u003e: \u003cspan class=\"number\"\u003e67\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;x\u0026#39;\u003c/span\u003e: \u003cspan class=\"number\"\u003e54\u003c/span\u003e}] \t\u003cspan class=\"number\"\u003e2565554\u003c/span\u003e \tPass \t\u003cspan class=\"number\"\u003e676\u003c/span\u003e \t\u003cspan class=\"number\"\u003e1\u003c/span\u003eH \t\u003cspan class=\"number\"\u003e51.068905\u003c/span\u003e \t\u003cspan class=\"number\"\u003e85\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e把前面关于比赛的信息也合并过来。\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emessi_events_data_df = pd.merge(messi_events_data_df, barca_matches_df, left_on=\u003cspan class=\"string\"\u003e\u0026#39;matchId\u0026#39;\u003c/span\u003e, right_on=\u003cspan class=\"string\"\u003e\u0026#39;wyId\u0026#39;\u003c/span\u003e, copy=\u003cspan class=\"literal\"\u003eFalse\u003c/span\u003e, how=\u003cspan class=\"string\"\u003e\u0026#34;left\u0026#34;\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eronaldo_events_data_df = pd.merge(ronaldo_events_data_df, real_matches_df, left_on=\u003cspan class=\"string\"\u003e\u0026#39;matchId\u0026#39;\u003c/span\u003e, right_on=\u003cspan class=\"string\"\u003e\u0026#39;wyId\u0026#39;\u003c/span\u003e, copy=\u003cspan class=\"literal\"\u003eFalse\u003c/span\u003e, how=\u003cspan class=\"string\"\u003e\u0026#34;left\u0026#34;\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e保存数据。\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emessi_events_data_df.to_pickle(\u003cspan class=\"string\"\u003e\u0026#39;../data/messi_events_data_df.pkl\u0026#39;\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eronaldo_events_data_df.to_pickle(\u003cspan class=\"string\"\u003e\u0026#39;../data/ronaldo_events_data_df.pkl\u0026#39;\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e接下来，还要讲皇家马德里和巴塞罗那两只球队在2017-18赛季的比赛相关数据读取出来。\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ebarca_matches_dates_df = barca_matches_df[[\u003cspan class=\"string\"\u003e\u0026#39;label\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;date\u0026#39;\u003c/span\u003e]].copy()\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ereal_matches_dates_df = real_matches_df[[\u003cspan class=\"string\"\u003e\u0026#39;label\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;date\u0026#39;\u003c/span\u003e]].copy()\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ebarca_matches_dates_df[\u003cspan class=\"string\"\u003e\u0026#39;date\u0026#39;\u003c/span\u003e] = pd.to_datetime(barca_matches_df[\u003cspan class=\"string\"\u003e\u0026#39;date\u0026#39;\u003c/span\u003e], utc=\u003cspan class=\"literal\"\u003eTrue\u003c/span\u003e).dt.date\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ereal_matches_dates_df[\u003cspan class=\"string\"\u003e\u0026#39;date\u0026#39;\u003c/span\u003e] = pd.to_datetime(real_matches_df[\u003cspan class=\"string\"\u003e\u0026#39;date\u0026#39;\u003c/span\u003e], utc=\u003cspan class=\"literal\"\u003eTrue\u003c/span\u003e).dt.date\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e#Change date to string \u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ebarca_matches_dates_df[\u003cspan class=\"string\"\u003e\u0026#39;date\u0026#39;\u003c/span\u003e] = barca_matches_dates_df[\u003cspan class=\"string\"\u003e\u0026#39;date\u0026#39;\u003c/span\u003e].apply(\u003cspan class=\"keyword\"\u003elambda\u003c/span\u003e x: x.strftime(\u003cspan class=\"string\"\u003e\u0026#39;%Y-%m-%d\u0026#39;\u003c/span\u003e))\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ereal_matches_dates_df[\u003cspan class=\"string\"\u003e\u0026#39;date\u0026#39;\u003c/span\u003e] = real_matches_dates_df[\u003cspan class=\"string\"\u003e\u0026#39;date\u0026#39;\u003c/span\u003e].apply(\u003cspan class=\"keyword\"\u003elambda\u003c/span\u003e x: x.strftime(\u003cspan class=\"string\"\u003e\u0026#39;%Y-%m-%d\u0026#39;\u003c/span\u003e))\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ebarca_matches_dates_df = barca_matches_dates_df.rename(columns={\u003cspan class=\"string\"\u003e\u0026#34;label\u0026#34;\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#34;match\u0026#34;\u003c/span\u003e})\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ereal_matches_dates_df = real_matches_dates_df.rename(columns={\u003cspan class=\"string\"\u003e\u0026#34;label\u0026#34;\u003c/span\u003e: \u003cspan class=\"string\"\u003e\u0026#34;match\u0026#34;\u003c/span\u003e})\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ebarca_matches_dates_df.head(\u003cspan class=\"number\"\u003e2\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e输出：\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e                               match \tdate\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"number\"\u003e0\u003c/span\u003e \tBarcelona - Real Sociedad, \u003cspan class=\"number\"\u003e1\u003c/span\u003e - \u003cspan class=\"number\"\u003e0\u003c/span\u003e \t\u003cspan class=\"number\"\u003e2018\u003c/span\u003e\u003cspan class=\"number\"\u003e-05\u003c/span\u003e\u003cspan class=\"number\"\u003e-20\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"number\"\u003e1\u003c/span\u003e \t      Levante - Barcelona, \u003cspan class=\"number\"\u003e5\u003c/span\u003e - \u003cspan class=\"number\"\u003e4\u003c/span\u003e \t\u003cspan class=\"number\"\u003e2018\u003c/span\u003e\u003cspan class=\"number\"\u003e-05\u003c/span\u003e\u003cspan class=\"number\"\u003e-13\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e也保存一下。\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ebarca_matches_dates_df.to_pickle(\u003cspan class=\"string\"\u003e\u0026#39;../data/barca_matches_dates_df.pkl\u0026#39;\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ereal_matches_dates_df.to_pickle(\u003cspan class=\"string\"\u003e\u0026#39;../data/real_matches_dates_df.pkl\u0026#39;\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003ch2 id=\"2-分析数据\"\u003e\u003ca href=\"#2-分析数据\" class=\"headerlink\" title=\"2. 分析数据\"\u003e\u003c/a\u003e2. 分析数据\u003c/h2\u003e\u003cp\u003e在这部分，要分析梅西和罗纳尔多在球场上的表现数据了，我们会利用一些统计分析，以可视化的方式表现他们在球场上的状况。\u003c/p\u003e\n\u003cp\u003e球员的行为统计。\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003egoals = [messi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;goal\u0026#39;\u003c/span\u003e].sum(), ronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;goal\u0026#39;\u003c/span\u003e].sum()]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eassists = [messi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;assist\u0026#39;\u003c/span\u003e].sum(), ronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;assist\u0026#39;\u003c/span\u003e].sum()]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eshots = [messi_events_data_df[messi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;eventName\u0026#39;\u003c/span\u003e] == \u003cspan class=\"string\"\u003e\u0026#39;Shot\u0026#39;\u003c/span\u003e].count()[\u003cspan class=\"string\"\u003e\u0026#39;eventName\u0026#39;\u003c/span\u003e],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e         ronaldo_events_data_df[ronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;eventName\u0026#39;\u003c/span\u003e] == \u003cspan class=\"string\"\u003e\u0026#39;Shot\u0026#39;\u003c/span\u003e].count()[\u003cspan class=\"string\"\u003e\u0026#39;eventName\u0026#39;\u003c/span\u003e]]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efree_kicks = [messi_events_data_df[messi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;subEventName\u0026#39;\u003c/span\u003e] == \u003cspan class=\"string\"\u003e\u0026#39;Free kick shot\u0026#39;\u003c/span\u003e].count()[\u003cspan class=\"string\"\u003e\u0026#39;subEventName\u0026#39;\u003c/span\u003e], \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e              ronaldo_events_data_df[ronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;subEventName\u0026#39;\u003c/span\u003e] == \u003cspan class=\"string\"\u003e\u0026#39;Free kick shot\u0026#39;\u003c/span\u003e].count()[\u003cspan class=\"string\"\u003e\u0026#39;subEventName\u0026#39;\u003c/span\u003e]]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003epasses = [messi_events_data_df[messi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;eventName\u0026#39;\u003c/span\u003e] == \u003cspan class=\"string\"\u003e\u0026#39;Pass\u0026#39;\u003c/span\u003e].count()[\u003cspan class=\"string\"\u003e\u0026#39;eventName\u0026#39;\u003c/span\u003e],\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e          ronaldo_events_data_df[ronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;eventName\u0026#39;\u003c/span\u003e] == \u003cspan class=\"string\"\u003e\u0026#39;Pass\u0026#39;\u003c/span\u003e].count()[\u003cspan class=\"string\"\u003e\u0026#39;eventName\u0026#39;\u003c/span\u003e]]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003estats_df = pd.DataFrame([goals, assists, shots, free_kicks, passes], \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        columns=[\u003cspan class=\"string\"\u003e\u0026#39;Messi\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;Ronaldo\u0026#39;\u003c/span\u003e], \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e                        index=[\u003cspan class=\"string\"\u003e\u0026#39;Goals\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;Assists\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;Shots\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;Free Kicks\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;Passes\u0026#39;\u003c/span\u003e])\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eprint(stats_df)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cimg src=\"https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/f1_20200618110112.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e左脚和右脚球比较。\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emessi_lf_goals = messi_events_data_df[messi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;left_foot\u0026#39;\u003c/span\u003e] == \u003cspan class=\"literal\"\u003eTrue\u003c/span\u003e][\u003cspan class=\"string\"\u003e\u0026#39;goal\u0026#39;\u003c/span\u003e].sum()\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003emessi_rf_goals = messi_events_data_df[messi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;right_foot\u0026#39;\u003c/span\u003e] == \u003cspan class=\"literal\"\u003eTrue\u003c/span\u003e][\u003cspan class=\"string\"\u003e\u0026#39;goal\u0026#39;\u003c/span\u003e].sum()\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eprint(\u003cspan class=\"string\"\u003e\u0026#34;Messi\u0026#39;s goals with left foot: \u0026#34;\u003c/span\u003e, messi_lf_goals)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eprint(\u003cspan class=\"string\"\u003e\u0026#34;Messi\u0026#39;s goals with right foot: \u0026#34;\u003c/span\u003e, messi_rf_goals)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 输出：\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eMessi\u003cspan class=\"string\"\u003e\u0026#39;s goals with left foot:  32\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"string\"\u003eMessi\u0026#39;\u003c/span\u003es goals \u003cspan class=\"keyword\"\u003ewith\u003c/span\u003e right foot:  \u003cspan class=\"number\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eronaldo_lf_goals = ronaldo_events_data_df[ronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;left_foot\u0026#39;\u003c/span\u003e] == \u003cspan class=\"literal\"\u003eTrue\u003c/span\u003e][\u003cspan class=\"string\"\u003e\u0026#39;goal\u0026#39;\u003c/span\u003e].sum()\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eronaldo_rf_goals = ronaldo_events_data_df[ronaldo_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;right_foot\u0026#39;\u003c/span\u003e] == \u003cspan class=\"literal\"\u003eTrue\u003c/span\u003e][\u003cspan class=\"string\"\u003e\u0026#39;goal\u0026#39;\u003c/span\u003e].sum()\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eprint(\u003cspan class=\"string\"\u003e\u0026#34;Ronaldo\u0026#39;s goals with left foot: \u0026#34;\u003c/span\u003e, ronaldo_lf_goals)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eprint(\u003cspan class=\"string\"\u003e\u0026#34;Ronaldo\u0026#39;s goals with right foot: \u0026#34;\u003c/span\u003e, ronaldo_rf_goals)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"comment\"\u003e# 输出：\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eRonaldo\u003cspan class=\"string\"\u003e\u0026#39;s goals with left foot:  7\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"string\"\u003eRonaldo\u0026#39;\u003c/span\u003es goals \u003cspan class=\"keyword\"\u003ewith\u003c/span\u003e right foot:  \u003cspan class=\"number\"\u003e14\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e两个球员在球场上的有关数据都保存在了\u003ccode\u003emessi_events_data_df\u003c/code\u003e和\u003ccode\u003eronaldo_events_data_df\u003c/code\u003e中，我们可以创建一个坐标写，两个坐标轴的范围都是[0, 100]，表示占进攻一方场上的百分比，下面用可视化方式展示。\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emessi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;positions\u0026#39;\u003c/span\u003e].head()\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e输出：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/f2_20200618111741.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003efrom\u003c/span\u003e plots \u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e *\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003efrom\u003c/span\u003e bokeh.io \u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e output_notebook\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003efrom\u003c/span\u003e bokeh.plotting \u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e figure, show\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eoutput_notebook()\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e在这里，使用了bokeh可视化模块，涉及到两个简单的函数：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003edraw_pitch()\u003c/code\u003e：绘制空图的函数\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eplot_events(player_events, event_name, plot_color):\u003c/code\u003e输入DataFrame的数据，实现数据可视化。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e函数的源码，可以通过连接得到（\u003ca href=\"https://github.com/adilmoujahid/streamlit-messi-ronaldo/blob/master/plots.py）\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/adilmoujahid/streamlit-messi-ronaldo/blob/master/plots.py）\u003c/a\u003e\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003emessi_goals = messi_events_data_df[messi_events_data_df[\u003cspan class=\"string\"\u003e\u0026#39;goal\u0026#39;\u003c/span\u003e] == \u003cspan class=\"literal\"\u003eTrue\u003c/span\u003e][\u003cspan class=\"string\"\u003e\u0026#39;positions\u0026#39;\u003c/span\u003e]\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ep_messi = plot_events(messi_goals, \u003cspan class=\"string\"\u003e\u0026#39;Goals\u0026#39;\u003c/span\u003e, \u003cspan class=\"string\"\u003e\u0026#39;red\u0026#39;\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eshow(p_messi)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e注：如果在调试环境中，会得到动态图示，这里显示的是截图效果。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/bokeh_plot_20200618112432.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003ch2 id=\"3-创建web应用\"\u003e\u003ca href=\"#3-创建web应用\" class=\"headerlink\" title=\"3. 创建web应用\"\u003e\u003c/a\u003e3. 创建web应用\u003c/h2\u003e\u003cp\u003e现在我们知道了如何读取、构造和绘制数据，下面可以开始创建web应用。这个应用的目标是比较梅西和罗纳尔多的比赛，集中在进球、助攻、射门、任意球和传球。\u003c/p\u003e\n\u003cp\u003e每个动作类型都有一个标签，在选项卡中，我们将显示各种动作的统计数据和位置，分解按比赛计数。该应用还将有一个过滤器，可以使用它来选择左、右脚的动作。\u003c/p\u003e\n\u003cp\u003e开发中，利用一个开源的框架Streamlit（\u003ca href=\"https://www.streamlit.io/），它是Python中的一个库，可以用`pip\" target=\"_blank\" rel=\"noopener\"\u003ehttps://www.streamlit.io/），它是Python中的一个库，可以用`pip\u003c/a\u003e install`安装。Streamlit可以很容实现一个web应用，只需要使用Python，不需要HTML/CSS/JS等代码。\u003c/p\u003e\n\u003cp\u003e你可以在本项目的代码仓库中下载应用源码，然后在本地执行\u003ccode\u003estreamlit run app.py\u003c/code\u003e将项目运行起来，并在浏览器打开\u003ccode\u003ehttp://localhost:8501\u003c/code\u003e查看效果。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/streamlit-messi-ronaldo_20200618113457.gif\" alt=\"\"/\u003e\u003c/p\u003e\n\u003ch2 id=\"最后\"\u003e\u003ca href=\"#最后\" class=\"headerlink\" title=\"最后\"\u003e\u003c/a\u003e最后\u003c/h2\u003e\u003cp\u003e本文，我们分析了梅西和罗纳尔多的有关数据，你其实可以参考本文内容，继续分析其他球员、球队或者每场比赛。\u003c/p\u003e\n\u003cp\u003e原文链接：\u003ca href=\"http://adilmoujahid.com/posts/2020/06/streamlit-messi-ronaldo/\" target=\"_blank\" rel=\"noopener\"\u003ehttp://adilmoujahid.com/posts/2020/06/streamlit-messi-ronaldo/\u003c/a\u003e\u003c/p\u003e\n\u003c/section\u003e\n    \u003c!-- Tags START --\u003e\n    \n    \u003c!-- Tags END --\u003e\n    \u003c!-- NAV START --\u003e\n    \n  \u003cdiv class=\"nav-container\"\u003e\n    \u003c!-- reverse left and right to put prev and next in a more logic postition --\u003e\n    \n      \u003ca class=\"nav-left\" href=\"/2020/06/16/python-nonetype/\"\u003e\n        \u003cspan class=\"nav-arrow\"\u003e← \u003c/span\u003e\n        \n          理解Python中的NoneType对象\n        \n      \u003c/a\u003e\n    \n    \n      \u003ca class=\"nav-right\" href=\"/2020/06/23/python-keywords/\"\u003e\n        \n          必须要了解的Python关键词\n        \n        \u003cspan class=\"nav-arrow\"\u003e →\u003c/span\u003e\n      \u003c/a\u003e\n    \n  \u003c/div\u003e\n\n    \u003c!-- NAV END --\u003e\n    \u003c!-- 打赏 START --\u003e\n    \n      \u003cdiv class=\"money-like\"\u003e\n        \u003cdiv class=\"reward-btn\"\u003e\n          赏\n          \u003cspan class=\"money-code\"\u003e\n            \u003cspan class=\"alipay-code\"\u003e\n              \u003cdiv class=\"code-image\"\u003e\u003c/div\u003e\n              \u003cb\u003e使用支付宝打赏\u003c/b\u003e\n            \u003c/span\u003e\n            \u003cspan class=\"wechat-code\"\u003e\n              \u003cdiv class=\"code-image\"\u003e\u003c/div\u003e\n              \u003cb\u003e使用微信打赏\u003c/b\u003e\n            \u003c/span\u003e\n          \u003c/span\u003e\n        \u003c/div\u003e\n        \u003cp class=\"notice\"\u003e若你觉得我的文章对你有帮助，欢迎点击上方按钮对我打赏\u003c/p\u003e\n      \u003c/div\u003e\n    \n    \u003c!-- 打赏 END --\u003e\n    \u003c!-- 二维码 START --\u003e\n    \u003c!--% if (theme.qrcode) { %--\u003e\n      \u003cdiv class=\"qrcode\"\u003e\n        \u003c!--canvas id=\"share-qrcode\"\u003e\u003c/!--canvas--\u003e\n        \u003cimg src=\"https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/WechatIMG6_20200109154827.jpeg\" width=\"400\"/\u003e\n        \u003cp class=\"notice\"\u003e关注微信公众号，读文章、听课程，提升技能\u003c/p\u003e\n      \u003c/div\u003e\n    \u003c!--% } %--\u003e\n    \u003c!-- 二维码 END --\u003e\n    \n      \u003c!-- No Comment --\u003e\n    \n  \u003c/article\u003e",
  "Date": "2020-06-18T00:00:00Z",
  "Author": "老齐教室"
}