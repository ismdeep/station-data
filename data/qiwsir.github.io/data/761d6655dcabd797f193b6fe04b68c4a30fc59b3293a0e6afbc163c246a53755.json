{
  "Source": "qiwsir.github.io",
  "Title": "Python中`__name__`有什么用",
  "Link": "https://qiwsir.github.io/2021/02/18/name-in-python/",
  "Content": "\u003carticle class=\"post-article\"\u003e\n    \u003ch2\u003ePython中`__name__`有什么用\u003c/h2\u003e\n    \u003cp class=\"post-date\"\u003e2021-02-18\u003c/p\u003e\n    \u003csection class=\"markdown-content\"\u003e\u003cp\u003e\u003cstrong\u003e注：\u003c/strong\u003e 有的读者在学习《Python大学实用教程》第7章模块和包$^{[2]}$时，对变量\u003ccode\u003e__name__\u003c/code\u003e感到困惑，现补充解释。\u003c/p\u003e\n\u003cimg src=\"https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/my_book4_20200116132005.png\" style=\"zoom:50%;\"/\u003e\n\n\u003cp\u003e与本书更多的有关资料，请访问：\u003ca href=\"http://www.itdiffer.com/python_course.html\" target=\"_blank\" rel=\"noopener\"\u003ehttp://www.itdiffer.com/python_course.html\u003c/a\u003e\u003c/p\u003e\n\u003chr/\u003e\n\u003cp\u003e在Python程序中，你会经常看到\u003ccode\u003e__name__\u003c/code\u003e，例如：\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eif\u003c/span\u003e __name__ == \u003cspan class=\"string\"\u003e\u0026#39;__main__\u0026#39;\u003c/span\u003e:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    main()\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e本文将介绍如何正确使用和理解这个变量。\u003c/p\u003e\n\u003cp\u003e请注意，\u003ccode\u003e__name__\u003c/code\u003e在程序中是一个变量，只不过这个变量的命名有点奇怪，用双下划线开头和结尾。这种命名的方法，在Pyhton的类对象设计中，常常用于一些具有特殊作用的属性或者方法名称$^{[2]}$。\u003c/p\u003e\n\u003cp\u003e如果将编写的一个Python文件，即\u003ccode\u003e.py\u003c/code\u003e为扩展名的文件，作为模块被其他程序引入的时候，我们需要通过\u003ccode\u003e__name__\u003c/code\u003e这个变量，决定在引入的时候是否要运行该文件。\u003c/p\u003e\n\u003cp\u003e例如创建一个文件\u003ccode\u003enamescript.py\u003c/code\u003e，内容如下：\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"title\"\u003emy_function\u003c/span\u003e\u003cspan class=\"params\"\u003e()\u003c/span\u003e:\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    print(\u003cspan class=\"string\"\u003e\u0026#39;the value of __name__ is \u0026#39;\u003c/span\u003e + __name__)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"title\"\u003emain\u003c/span\u003e\u003cspan class=\"params\"\u003e()\u003c/span\u003e:\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    my_function()\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eif\u003c/span\u003e __name__ == \u003cspan class=\"string\"\u003e\u0026#34;__main__\u0026#34;\u003c/span\u003e:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    main()\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e如果执行\u003ccode\u003enamescript.py\u003c/code\u003e文件，其执行流程如下：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://gitee.com/qiwsir/images/raw/master/2021-2-18/1613608619460-name01.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e在程序中的代码被执行之前，Python解析器先给\u003ccode\u003e__name__\u003c/code\u003e变量赋值为\u003ccode\u003e__main__\u003c/code\u003e。然后逐行执行程序中的代码。注意，当执行到第7行的时候，判断\u003ccode\u003e__name__\u003c/code\u003e的值是否为\u003ccode\u003e__main__\u003c/code\u003e，如果条件为真，就执行\u003ccode\u003emain()\u003c/code\u003e这个前面自定义的函数，并最终打印出结果。\u003c/p\u003e\n\u003cp\u003e如果将\u003ccode\u003enamescript.py\u003c/code\u003e文件作为一个模块，在另外一个文件中引入，例如在名为\u003ccode\u003eimportingscript.py\u003c/code\u003e的文件中，有代码：\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e namescript \u003cspan class=\"keyword\"\u003eas\u003c/span\u003e ns\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ens.my_function()\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e这样，就在\u003ccode\u003eimportingscript.py\u003c/code\u003e文件中使用了\u003ccode\u003enamescript.py\u003c/code\u003e文件中定义的函数\u003ccode\u003emy_function\u003c/code\u003e。如此，避免了重复代码，而且提升了开发效率。这是Python语言的重要特点。\u003c/p\u003e\n\u003cp\u003e如果执行\u003ccode\u003eimportscript.py\u003c/code\u003e文件，其流程如下图所示：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://gitee.com/qiwsir/images/raw/master/2021-2-18/1613611502784-module.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e在\u003ccode\u003eimportscript.py\u003c/code\u003e中，变量\u003ccode\u003e__name__\u003c/code\u003e被赋值为\u003ccode\u003e__main__\u003c/code\u003e，然后执行\u003ccode\u003eimport namescript\u003c/code\u003e，Python解析器会自动在模块名字后面增加\u003ccode\u003e.py\u003c/code\u003e并在检索目录中查找该文件——所以，在引入模块的时候不要写成\u003ccode\u003eimport namescript.py\u003c/code\u003e。找到了，就引入该文件中的所有代码。\u003c/p\u003e\n\u003cp\u003e然后，将\u003ccode\u003enamescript.py\u003c/code\u003e文件所运行的空间中的\u003ccode\u003e__name__\u003c/code\u003e设置为\u003ccode\u003enamescript\u003c/code\u003e。结合上图，在\u003ccode\u003eimportingscript.py\u003c/code\u003e和\u003ccode\u003enamescript.py\u003c/code\u003e中，分别有两个同名的\u003ccode\u003e__name__\u003c/code\u003e变量，但是，它们的值不同。如此，在\u003ccode\u003enamescript.py\u003c/code\u003e中，因为\u003ccode\u003e__name__\u003c/code\u003e的值是\u003ccode\u003enamescript\u003c/code\u003e了，于是该文件中的\u003ccode\u003eif __name__ == \u0026#34;__main__\u0026#34;\u003c/code\u003e条件不再成立，所以此条件下的\u003ccode\u003emain()\u003c/code\u003e函数不再执行。\u003c/p\u003e\n\u003cp\u003e在\u003ccode\u003eimportingscript.py\u003c/code\u003e中，调用了\u003ccode\u003enamescript.my_function()\u003c/code\u003e，打印的结果是：\u003ccode\u003ethe value of __name__ is namescript\u003c/code\u003e，这里的\u003ccode\u003e__name__\u003c/code\u003e当然是\u003ccode\u003enamescript.py\u003c/code\u003e中的变量。\u003c/p\u003e\n\u003cp\u003e如果在\u003ccode\u003eimportingscript.py\u003c/code\u003e中，增加\u003ccode\u003eprint(__name__)\u003c/code\u003e，打印出来的结果应该是\u003ccode\u003e__main__\u003c/code\u003e。\u003c/p\u003e\n\u003cp\u003e本文内容作为《Python大学实用教程》第7章的补充和拓展，从而理解\u003ccode\u003e__name__\u003c/code\u003e变量的作用及其在模块编写中的应用效果。\u003c/p\u003e\n\u003ch2 id=\"参考文献：\"\u003e\u003ca href=\"#参考文献：\" class=\"headerlink\" title=\"参考文献：\"\u003e\u003c/a\u003e参考文献：\u003c/h2\u003e\u003cp\u003e[1]. \u003ca href=\"https://medium.com/free-code-camp/whats-in-a-python-s-name-506262fe61e8\" target=\"_blank\" rel=\"noopener\"\u003ehttps://medium.com/free-code-camp/whats-in-a-python-s-name-506262fe61e8\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e[2]. Python大学实用教程. 齐伟. 北京：电子工业出版社. 2019.3，第1版\u003c/p\u003e\n\u003c/section\u003e\n    \u003c!-- Tags START --\u003e\n    \n    \u003c!-- Tags END --\u003e\n    \u003c!-- NAV START --\u003e\n    \n  \u003cdiv class=\"nav-container\"\u003e\n    \u003c!-- reverse left and right to put prev and next in a more logic postition --\u003e\n    \n      \u003ca class=\"nav-left\" href=\"/2021/02/16/speed-up-sklearn/\"\u003e\n        \u003cspan class=\"nav-arrow\"\u003e← \u003c/span\u003e\n        \n          如何提速机器学习模型训练\n        \n      \u003c/a\u003e\n    \n    \n      \u003ca class=\"nav-right\" href=\"/2021/02/18/hash-table-and-dictionary/\"\u003e\n        \n          通过散列表深入理解字典\n        \n        \u003cspan class=\"nav-arrow\"\u003e →\u003c/span\u003e\n      \u003c/a\u003e\n    \n  \u003c/div\u003e\n\n    \u003c!-- NAV END --\u003e\n    \u003c!-- 打赏 START --\u003e\n    \n      \u003cdiv class=\"money-like\"\u003e\n        \u003cdiv class=\"reward-btn\"\u003e\n          赏\n          \u003cspan class=\"money-code\"\u003e\n            \u003cspan class=\"alipay-code\"\u003e\n              \u003cdiv class=\"code-image\"\u003e\u003c/div\u003e\n              \u003cb\u003e使用支付宝打赏\u003c/b\u003e\n            \u003c/span\u003e\n            \u003cspan class=\"wechat-code\"\u003e\n              \u003cdiv class=\"code-image\"\u003e\u003c/div\u003e\n              \u003cb\u003e使用微信打赏\u003c/b\u003e\n            \u003c/span\u003e\n          \u003c/span\u003e\n        \u003c/div\u003e\n        \u003cp class=\"notice\"\u003e若你觉得我的文章对你有帮助，欢迎点击上方按钮对我打赏\u003c/p\u003e\n      \u003c/div\u003e\n    \n    \u003c!-- 打赏 END --\u003e\n    \u003c!-- 二维码 START --\u003e\n    \u003c!--% if (theme.qrcode) { %--\u003e\n      \u003cdiv class=\"qrcode\"\u003e\n        \u003c!--canvas id=\"share-qrcode\"\u003e\u003c/!--canvas--\u003e\n        \u003cimg src=\"https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/WechatIMG6_20200109154827.jpeg\" width=\"400\"/\u003e\n        \u003cp class=\"notice\"\u003e关注微信公众号，读文章、听课程，提升技能\u003c/p\u003e\n      \u003c/div\u003e\n    \u003c!--% } %--\u003e\n    \u003c!-- 二维码 END --\u003e\n    \n      \u003c!-- No Comment --\u003e\n    \n  \u003c/article\u003e",
  "Date": "2021-02-18T00:00:00Z",
  "Author": "老齐教室"
}