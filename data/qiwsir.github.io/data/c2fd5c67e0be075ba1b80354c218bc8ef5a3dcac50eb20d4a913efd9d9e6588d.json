{
  "Source": "qiwsir.github.io",
  "Title": "Python中的SQL库：SQLite",
  "Link": "https://qiwsir.github.io/2020/05/03/sql-library-sqlite/",
  "Content": "\u003carticle class=\"post-article\"\u003e\n    \u003ch2\u003ePython中的SQL库：SQLite\u003c/h2\u003e\n    \u003cp class=\"post-date\"\u003e2020-05-03\u003c/p\u003e\n    \u003csection class=\"markdown-content\"\u003e\u003cp\u003e作者：老齐\u003c/p\u003e\n\u003cp\u003e与本文相关的图书推荐：《数据准备和特征工程》\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B2_20200114135935.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003chr/\u003e\n\u003cp\u003e现在所发布的各种网站，或者客户端应用的程序，绝大多数要跟数据库连接——毋庸置疑，大数据时代就这么来了。使用任何一种当下流行的高级编程语言，都可以通过某个专门的模块连接数据库。能够对数据库进行操作的软件程序，我们称之为“数据库管理系统（database management system，DBMS）。不同的数据库具有不同的DBMS，程序连接了DBMS就能够对数据库实施：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e增：向数据库中增加记录或者字段内容\u003c/li\u003e\n\u003cli\u003e删：删除数据库中的记录或字段内容\u003c/li\u003e\n\u003cli\u003e改：修改数据库中记录或字段内容\u003c/li\u003e\n\u003cli\u003e查：根据一定要求查询记录或字段内容\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e这些基本操作。\u003c/p\u003e\n\u003cp\u003e本系列文章，将着重讨论Python语言为关系型数据库提供的SQL库，即用Python语言编写的程序，通过这些库（模块）连接DBMS，进而通过程序完成对数据库的各项操作。\u003c/p\u003e\n\u003ch2 id=\"数据库基本结构\"\u003e\u003ca href=\"#数据库基本结构\" class=\"headerlink\" title=\"数据库基本结构\"\u003e\u003c/a\u003e数据库基本结构\u003c/h2\u003e\u003cp\u003e本文中，我们会应用一个结构简单的数据库，它包括以下4张表：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eusers\u003c/li\u003e\n\u003cli\u003eposts\u003c/li\u003e\n\u003cli\u003ecomments\u003c/li\u003e\n\u003cli\u003elikes\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e每张表的基本结构和各表之间的关系模式如下：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/python-sql-database-schema_20200502114040.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eusers\u003c/code\u003e和\u003ccode\u003eposts\u003c/code\u003e两张表之间是一对多的关系，即一个用户可以发布多篇文章。同样，一个用户也可以发布多篇评论，所以\u003ccode\u003eusers\u003c/code\u003e和\u003ccode\u003ecomments\u003c/code\u003e之间也是一对多的关系。至于\u003ccode\u003eusers\u003c/code\u003e和\u003ccode\u003elikes\u003c/code\u003e两张表的关系，由此也就一目了然了，也是一对多。\u003c/p\u003e\n\u003ch2 id=\"连接数据库\"\u003e\u003ca href=\"#连接数据库\" class=\"headerlink\" title=\"连接数据库\"\u003e\u003c/a\u003e连接数据库\u003c/h2\u003e\u003cp\u003e本文要讨论的数据库是SQLite，这是一种小型数据库，它不需要启动数据库服务器，可以用类似读写文件的方式对这种数据库进行操作。Python标准库中已经提供了连接模块。\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eimport sqlite3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efrom sqlite3 import Error\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003edef create_connection(path):\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    connection = None\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    try:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        connection = sqlite3.connect(path)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        print(\u0026#34;Connection to SQLite DB successful\u0026#34;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    except Error as e:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        print(f\u0026#34;The error \u0026#39;{e}\u0026#39; occurred\u0026#34;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    return connection\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e以上创建了一个连接数据库的函数\u003ccode\u003ecreate_connection\u003c/code\u003e，函数中的主要操作是\u003ccode\u003econnection = sqlite3.connect(path)\u003c/code\u003e，创建了与指定数据库（\u003ccode\u003epath\u003c/code\u003e参数）的连接对象。如果该数据库存在，则连接该数据库，否则，根据\u003ccode\u003epath\u003c/code\u003e创建此数据库并连接。\u003c/p\u003e\n\u003cp\u003e例如：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003econnection = create_connection(\u0026#34;/Users/qiwsir/DB/sqlite/sm_app.sqlite\u0026#34;)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e这就在指定位置创建了名为\u003ccode\u003esm_app.sqlite\u003c/code\u003e的数据库，并创建了链接对象。\u003c/p\u003e\n\u003ch2 id=\"创建数据库表\"\u003e\u003ca href=\"#创建数据库表\" class=\"headerlink\" title=\"创建数据库表\"\u003e\u003c/a\u003e创建数据库表\u003c/h2\u003e\u003cp\u003e对于SQLite数据库，要在Python中执行各种SQL语句，需要通过\u003ccode\u003ecursor.execute()\u003c/code\u003e函数。下面就创建一个专门的函数，来完成各种SQL语句的操作。\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003edef execute_query(connection, query):\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    cursor = connection.cursor()\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    try:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        cursor.execute(query)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        connection.commit()\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        print(\u0026#34;Query executed successfully\u0026#34;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    except Error as e:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        print(f\u0026#34;The error \u0026#39;{e}\u0026#39; occurred\u0026#34;)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e上述函数中的\u003ccode\u003econnection\u003c/code\u003e参数，是前面所创建的数据库连接对象。\u003ccode\u003equery\u003c/code\u003e则是SQL语句组成的字符串。\u003c/p\u003e\n\u003cp\u003e例如，如下是创建\u003ccode\u003eusers\u003c/code\u003e表的SQL语句：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ecreate_users_table = \u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCREATE TABLE IF NOT EXISTS users (\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  id INTEGER PRIMARY KEY AUTOINCREMENT,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  name TEXT NOT NULL,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  age INTEGER,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  gender TEXT,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  nationality TEXT\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e通过此语句，将创建\u003ccode\u003eusers\u003c/code\u003e数据库表，其中包括的字段有：\u003ccode\u003eid, name, age, gender, nationality\u003c/code\u003e，然后用下面的方式，调用函数：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eexecute_query(connection, create_users_table)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e如此，即创建了\u003ccode\u003eusers\u003c/code\u003e数据库表，并具有前述个字段。\u003c/p\u003e\n\u003cp\u003e同样方法，编写创建\u003ccode\u003eposts\u003c/code\u003e表的SQL语句字符串：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ecreate_posts_table = \u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCREATE TABLE IF NOT EXISTS posts(\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  id INTEGER PRIMARY KEY AUTOINCREMENT, \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  title TEXT NOT NULL, \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  description TEXT NOT NULL, \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  user_id INTEGER NOT NULL, \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  FOREIGN KEY (user_id) REFERENCES users (id)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e注意，前面已经说过了，\u003ccode\u003eusers\u003c/code\u003e和\u003ccode\u003eposts\u003c/code\u003e两张表之间是一对多的关系，那么在\u003ccode\u003eposts\u003c/code\u003e表中就增加了一个名为\u003ccode\u003euser_id\u003c/code\u003e的字段作为外键，它的值与\u003ccode\u003eusers\u003c/code\u003e表中的\u003ccode\u003eid\u003c/code\u003e字段值对应。\u003c/p\u003e\n\u003cp\u003e执行如下操作，创建\u003ccode\u003eposts\u003c/code\u003e表：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eexecute_query(connection, create_posts_table)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e下面的程序，是创建另外两张表。\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ecreate_comments_table = \u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCREATE TABLE IF NOT EXISTS comments (\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  id INTEGER PRIMARY KEY AUTOINCREMENT, \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  text TEXT NOT NULL, \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  user_id INTEGER NOT NULL, \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  post_id INTEGER NOT NULL, \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  FOREIGN KEY (user_id) REFERENCES users (id) FOREIGN KEY (post_id) REFERENCES posts (id)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecreate_likes_table = \u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eCREATE TABLE IF NOT EXISTS likes (\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  id INTEGER PRIMARY KEY AUTOINCREMENT, \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  user_id INTEGER NOT NULL, \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  post_id integer NOT NULL, \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  FOREIGN KEY (user_id) REFERENCES users (id) FOREIGN KEY (post_id) REFERENCES posts (id)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eexecute_query(connection, create_comments_table)  \u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eexecute_query(connection, create_likes_table)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e从上述操作可以看出，在Python程序中操作SQLite数据库，跟直接使用SQL语句差不多，只不过这里是将所有SQL语句放到字符串里面，而后通过\u003ccode\u003ecursor.execute()\u003c/code\u003e函数执行。不仅这里，后面的操作也都如此。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/%E8%BD%BB%E6%9D%BE%E5%85%A5%E9%97%A8_20200122130623.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003ch2 id=\"插入\"\u003e\u003ca href=\"#插入\" class=\"headerlink\" title=\"插入\"\u003e\u003c/a\u003e插入\u003c/h2\u003e\u003cp\u003e向SQLite数据库插入记录，同样还是使用前面已经编写的\u003ccode\u003eexecute_query()\u003c/code\u003e函数，我们需要做的就是编写\u003ccode\u003eINSERT INTO\u003c/code\u003e语句。例如：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ecreate_users = \u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eINSERT INTO\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  users (name, age, gender, nationality)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eVALUES\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#39;James\u0026#39;, 25, \u0026#39;male\u0026#39;, \u0026#39;USA\u0026#39;),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#39;Leila\u0026#39;, 32, \u0026#39;female\u0026#39;, \u0026#39;France\u0026#39;),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#39;Brigitte\u0026#39;, 35, \u0026#39;female\u0026#39;, \u0026#39;England\u0026#39;),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#39;Mike\u0026#39;, 40, \u0026#39;male\u0026#39;, \u0026#39;Denmark\u0026#39;),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#39;Elizabeth\u0026#39;, 21, \u0026#39;female\u0026#39;, \u0026#39;Canada\u0026#39;);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eexecute_query(connection, create_users)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e上述操作是向\u003ccode\u003eusers\u003c/code\u003e表中增加几条用户记录。\u003c/p\u003e\n\u003cp\u003e前面在创建\u003ccode\u003eusers\u003c/code\u003e表的时候，将\u003ccode\u003eid\u003c/code\u003e字段设置为自增加了，所以在这里不需要为这个字段提供值，\u003ccode\u003eusers\u003c/code\u003e表会自动将每个用户记录的\u003ccode\u003eid\u003c/code\u003e值从1开始增加。\u003c/p\u003e\n\u003cp\u003e再如，下面是向\u003ccode\u003eposts\u003c/code\u003e表中增加6条记录：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ecreate_posts = \u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eINSERT INTO\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  posts (title, description, user_id)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eVALUES\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#34;Happy\u0026#34;, \u0026#34;I am feeling very happy today\u0026#34;, 1),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#34;Hot Weather\u0026#34;, \u0026#34;The weather is very hot today\u0026#34;, 2),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#34;Help\u0026#34;, \u0026#34;I need some help with my work\u0026#34;, 2),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#34;Great News\u0026#34;, \u0026#34;I am getting married\u0026#34;, 1),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#34;Interesting Game\u0026#34;, \u0026#34;It was a fantastic game of tennis\u0026#34;, 5),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#34;Party\u0026#34;, \u0026#34;Anyone up for a late-night party today?\u0026#34;, 3);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eexecute_query(connection, create_posts)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e值得注意的是，\u003ccode\u003euser_id\u003c/code\u003e的值，因为它是\u003ccode\u003eposts\u003c/code\u003e的外键，其值必须是\u003ccode\u003eusers\u003c/code\u003e表中\u003ccode\u003eid\u003c/code\u003e记录已有的值，否则就会报错。\u003c/p\u003e\n\u003cp\u003e用同样的方法，对另外两个表\u003ccode\u003ecomments\u003c/code\u003e和\u003ccode\u003elikes\u003c/code\u003e都可以插入记录。\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e19\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e20\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e21\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e22\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e23\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e24\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e25\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e26\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e27\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ecreate_comments = \u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eINSERT INTO\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  comments (text, user_id, post_id)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eVALUES\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#39;Count me in\u0026#39;, 1, 6),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#39;What sort of help?\u0026#39;, 5, 3),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#39;Congrats buddy\u0026#39;, 2, 4),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#39;I was rooting for Nadal though\u0026#39;, 4, 5),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#39;Help with your thesis?\u0026#39;, 2, 3),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (\u0026#39;Many congratulations\u0026#39;, 5, 4);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecreate_likes = \u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eINSERT INTO\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  likes (user_id, post_id)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eVALUES\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (1, 6),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (2, 3),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (1, 5),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (5, 4),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (2, 4),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (4, 2),\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  (3, 6);\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eexecute_query(connection, create_comments)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eexecute_query(connection, create_likes)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e以上执行\u003ccode\u003eINSERT INTO\u003c/code\u003e语句，也同样是应用\u003ccode\u003eexecute_query()\u003c/code\u003e函数完成。\u003c/p\u003e\n\u003ch2 id=\"查询\"\u003e\u003ca href=\"#查询\" class=\"headerlink\" title=\"查询\"\u003e\u003c/a\u003e查询\u003c/h2\u003e\u003cp\u003e毫无疑问，查询操作的SQL语句，也要放到\u003ccode\u003ecursor.execute()\u003c/code\u003e中执行，但是，这还没完，因为还要有查询的返回结果，就是调用\u003ccode\u003ecursor.fetchall()\u003c/code\u003e，得到元组组成的列表，每个元组就是数据库表中的一个记录。\u003c/p\u003e\n\u003cp\u003e为此，可以编写一个用于查询操作的函数。\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003edef execute_read_query(connection, query):\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    cursor = connection.cursor()\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    result = None\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    try:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        cursor.execute(query)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        result = cursor.fetchall()\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        return result\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    except Error as e:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e        print(f\u0026#34;The error \u0026#39;{e}\u0026#39; occurred\u0026#34;)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e例如查询\u003ccode\u003eusers\u003c/code\u003e表中的所有记录：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eselect_users = \u0026#34;SELECT * from users\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eusers = execute_read_query(connection, select_users)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efor user in users:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    print(user)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e返回结果如下：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e(1, \u0026#39;James\u0026#39;, 25, \u0026#39;male\u0026#39;, \u0026#39;USA\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(2, \u0026#39;Leila\u0026#39;, 32, \u0026#39;female\u0026#39;, \u0026#39;France\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(3, \u0026#39;Brigitte\u0026#39;, 35, \u0026#39;female\u0026#39;, \u0026#39;England\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(4, \u0026#39;Mike\u0026#39;, 40, \u0026#39;male\u0026#39;, \u0026#39;Denmark\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(5, \u0026#39;Elizabeth\u0026#39;, 21, \u0026#39;female\u0026#39;, \u0026#39;Canada\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e类似地，可以查询\u003ccode\u003eposts\u003c/code\u003e的所有记录：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eselect_posts = \u0026#34;SELECT * FROM posts\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eposts = execute_read_query(connection, select_posts)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efor post in posts:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    print(post)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e输出结果：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e(1, \u0026#39;Happy\u0026#39;, \u0026#39;I am feeling very happy today\u0026#39;, 1)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(2, \u0026#39;Hot Weather\u0026#39;, \u0026#39;The weather is very hot today\u0026#39;, 2)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(3, \u0026#39;Help\u0026#39;, \u0026#39;I need some help with my work\u0026#39;, 2)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(4, \u0026#39;Great News\u0026#39;, \u0026#39;I am getting married\u0026#39;, 1)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(5, \u0026#39;Interesting Game\u0026#39;, \u0026#39;It was a fantastic game of tennis\u0026#39;, 5)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(6, \u0026#39;Party\u0026#39;, \u0026#39;Anyone up for a late-night party today?\u0026#39;, 3)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e以上是比较简单的查询操作，如果进行稍微复杂的，比SQL语句中的\u003ccode\u003eJOIN\u003c/code\u003e和\u003ccode\u003eWHERE\u003c/code\u003e等，也都能用同样的方法实现。\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eselect_users_posts = \u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eSELECT\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  users.id,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  users.name,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  posts.description\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eFROM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  posts\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  INNER JOIN users ON users.id = posts.user_id\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eusers_posts = execute_read_query(connection, select_users_posts)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efor users_post in users_posts:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    print(users_post)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e输出：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e(1, \u0026#39;James\u0026#39;, \u0026#39;I am feeling very happy today\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(2, \u0026#39;Leila\u0026#39;, \u0026#39;The weather is very hot today\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(2, \u0026#39;Leila\u0026#39;, \u0026#39;I need some help with my work\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(1, \u0026#39;James\u0026#39;, \u0026#39;I am getting married\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(5, \u0026#39;Elizabeth\u0026#39;, \u0026#39;It was a fantastic game of tennis\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(3, \u0026#39;Brigitte\u0026#39;, \u0026#39;Anyone up for a late night party today?\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e再如：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eselect_posts_comments_users = \u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eSELECT\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  posts.description as post,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  text as comment,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  name\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eFROM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  posts\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  INNER JOIN comments ON posts.id = comments.post_id\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  INNER JOIN users ON users.id = comments.user_id\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eposts_comments_users = execute_read_query(\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    connection, select_posts_comments_users\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efor posts_comments_user in posts_comments_users:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    print(posts_comments_user)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e输出：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e(\u0026#39;Anyone up for a late night party today?\u0026#39;, \u0026#39;Count me in\u0026#39;, \u0026#39;James\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(\u0026#39;I need some help with my work\u0026#39;, \u0026#39;What sort of help?\u0026#39;, \u0026#39;Elizabeth\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(\u0026#39;I am getting married\u0026#39;, \u0026#39;Congrats buddy\u0026#39;, \u0026#39;Leila\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(\u0026#39;It was a fantastic game of tennis\u0026#39;, \u0026#39;I was rooting for Nadal though\u0026#39;, \u0026#39;Mike\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(\u0026#39;I need some help with my work\u0026#39;, \u0026#39;Help with your thesis?\u0026#39;, \u0026#39;Leila\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(\u0026#39;I am getting married\u0026#39;, \u0026#39;Many congratulations\u0026#39;, \u0026#39;Elizabeth\u0026#39;)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e上述操作中，通过\u003ccode\u003ecursor.fetchall()\u003c/code\u003e方法，返回了所有的记录内容。如果要查看返回的记录名称，怎么操作？可以使用\u003ccode\u003ecursor\u003c/code\u003e对象的\u003ccode\u003edescription\u003c/code\u003e属性。\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003ecursor = connection.cursor()\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecursor.execute(select_posts_comments_users)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecursor.fetchall()\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ecolumn_names = [description[0] for description in cursor.description]\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eprint(column_names)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e输出：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e[\u0026#39;post\u0026#39;, \u0026#39;comment\u0026#39;, \u0026#39;name\u0026#39;]\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e下面的代码，演示了含\u003ccode\u003eWHERE\u003c/code\u003e的SQL语句查询结果：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eselect_post_likes = \u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eSELECT\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  description as Post,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  COUNT(likes.id) as Likes\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eFROM\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  likes,\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  posts\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eWHERE\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  posts.id = likes.post_id\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eGROUP BY\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  likes.post_id\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003epost_likes = execute_read_query(connection, select_post_likes)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efor post_like in post_likes:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    print(post_like)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e输出：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e(\u0026#39;The weather is very hot today\u0026#39;, 1)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(\u0026#39;I need some help with my work\u0026#39;, 1)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(\u0026#39;I am getting married\u0026#39;, 2)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(\u0026#39;It was a fantastic game of tennis\u0026#39;, 1)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e(\u0026#39;Anyone up for a late night party today?\u0026#39;, 2)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e\u003cimg src=\"https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90_20200209114241.png\" alt=\"\"/\u003e\u003c/p\u003e\n\u003ch2 id=\"更新\"\u003e\u003ca href=\"#更新\" class=\"headerlink\" title=\"更新\"\u003e\u003c/a\u003e更新\u003c/h2\u003e\u003cp\u003e有了前面的操作经验，再执行\u003ccode\u003eUPDATE\u003c/code\u003e，就轻车熟路了。\u003c/p\u003e\n\u003cp\u003e先查询\u003ccode\u003eposts\u003c/code\u003e中\u003ccode\u003eid=2\u003c/code\u003e的记录：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eselect_post_description = \u0026#34;SELECT description FROM posts WHERE id = 2\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003epost_description = execute_read_query(connection, select_post_description)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003efor description in post_description:\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e    print(description)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e输出：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e(\u0026#39;The weather is very hot today\u0026#39;,)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e将此条记录内容进行更新：\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003eupdate_post_description = \u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eUPDATE\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  posts\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eSET\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  description = \u0026#34;The weather has become pleasant now\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eWHERE\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e  id = 2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eexecute_query(connection, update_post_description)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e如果再用前面的方法进行查询，就可以看到更新之后的结果了。\u003c/p\u003e\n\u003ch2 id=\"删除\"\u003e\u003ca href=\"#删除\" class=\"headerlink\" title=\"删除\"\u003e\u003c/a\u003e删除\u003c/h2\u003e\u003cp\u003e执行删除操作的SQL语句，可以通过前面所创建的\u003ccode\u003eexecute_query()\u003c/code\u003e函数完成。\u003c/p\u003e\n\u003cfigure class=\"highlight plain\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003edelete_comment = \u0026#34;DELETE FROM comments WHERE id = 5\u0026#34;\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eexecute_query(connection, delete_comment)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e以上演示了在Python程序中对SQLite数据库的各项操作，后续会继续演示其他常用关系型数据库，敬请关注。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e搜索技术问答的公众号：老齐教室\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003e在公众号中回复：\u003cstrong\u003e老齐\u003c/strong\u003e，可查看所有文章、书籍、课程。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/section\u003e\n    \u003c!-- Tags START --\u003e\n    \n    \u003c!-- Tags END --\u003e\n    \u003c!-- NAV START --\u003e\n    \n  \u003cdiv class=\"nav-container\"\u003e\n    \u003c!-- reverse left and right to put prev and next in a more logic postition --\u003e\n    \n      \u003ca class=\"nav-left\" href=\"/2020/05/02/web-stack-forth/\"\u003e\n        \u003cspan class=\"nav-arrow\"\u003e← \u003c/span\u003e\n        \n          剖析Web技术栈（四）\n        \n      \u003c/a\u003e\n    \n    \n      \u003ca class=\"nav-right\" href=\"/2020/05/04/sql-library-mysql/\"\u003e\n        \n          Python中的SQL库：MySQL\n        \n        \u003cspan class=\"nav-arrow\"\u003e →\u003c/span\u003e\n      \u003c/a\u003e\n    \n  \u003c/div\u003e\n\n    \u003c!-- NAV END --\u003e\n    \u003c!-- 打赏 START --\u003e\n    \n      \u003cdiv class=\"money-like\"\u003e\n        \u003cdiv class=\"reward-btn\"\u003e\n          赏\n          \u003cspan class=\"money-code\"\u003e\n            \u003cspan class=\"alipay-code\"\u003e\n              \u003cdiv class=\"code-image\"\u003e\u003c/div\u003e\n              \u003cb\u003e使用支付宝打赏\u003c/b\u003e\n            \u003c/span\u003e\n            \u003cspan class=\"wechat-code\"\u003e\n              \u003cdiv class=\"code-image\"\u003e\u003c/div\u003e\n              \u003cb\u003e使用微信打赏\u003c/b\u003e\n            \u003c/span\u003e\n          \u003c/span\u003e\n        \u003c/div\u003e\n        \u003cp class=\"notice\"\u003e若你觉得我的文章对你有帮助，欢迎点击上方按钮对我打赏\u003c/p\u003e\n      \u003c/div\u003e\n    \n    \u003c!-- 打赏 END --\u003e\n    \u003c!-- 二维码 START --\u003e\n    \u003c!--% if (theme.qrcode) { %--\u003e\n      \u003cdiv class=\"qrcode\"\u003e\n        \u003c!--canvas id=\"share-qrcode\"\u003e\u003c/!--canvas--\u003e\n        \u003cimg src=\"https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/WechatIMG6_20200109154827.jpeg\" width=\"400\"/\u003e\n        \u003cp class=\"notice\"\u003e关注微信公众号，读文章、听课程，提升技能\u003c/p\u003e\n      \u003c/div\u003e\n    \u003c!--% } %--\u003e\n    \u003c!-- 二维码 END --\u003e\n    \n      \u003c!-- No Comment --\u003e\n    \n  \u003c/article\u003e",
  "Date": "2020-05-03T00:00:00Z",
  "Author": "老齐教室"
}