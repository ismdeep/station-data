{
  "Source": "qiwsir.github.io",
  "Title": "《数据准备和特征工程》勘误与修订",
  "Link": "https://qiwsir.github.io/2020/04/07/ml-feature-enginning/",
  "Content": "\u003carticle class=\"post-article\"\u003e\n    \u003ch2\u003e《数据准备和特征工程》勘误与修订\u003c/h2\u003e\n    \u003cp class=\"post-date\"\u003e2020-04-07\u003c/p\u003e\n    \u003csection class=\"markdown-content\"\u003e\u003ch1 id=\"2020年3月第1版第1次印刷\"\u003e\u003ca href=\"#2020年3月第1版第1次印刷\" class=\"headerlink\" title=\"2020年3月第1版第1次印刷\"\u003e\u003c/a\u003e2020年3月第1版第1次印刷\u003c/h1\u003e\u003ch2 id=\"勘误\"\u003e\u003ca href=\"#勘误\" class=\"headerlink\" title=\"勘误\"\u003e\u003c/a\u003e勘误\u003c/h2\u003e\u003ch3 id=\"前言\"\u003e\u003ca href=\"#前言\" class=\"headerlink\" title=\"前言\"\u003e\u003c/a\u003e前言\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e位置：第1自然段，第2行\u003c/li\u003e\n\u003cli\u003e原文：另外，数据科学业界中还流传着另一句话：\u003c/li\u003e\n\u003cli\u003e修改为：\u003cdel\u003e另外\u003c/del\u003e，数据科学业界\u003cdel\u003e中\u003c/del\u003e还流传着另一句话：\u003c/li\u003e\n\u003cli\u003e说明：去掉原文中的“另外”和“中”\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"第003页\"\u003e\u003ca href=\"#第003页\" class=\"headerlink\" title=\"第003页\"\u003e\u003c/a\u003e第003页\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e位置：正文，第5自然段，第5行\u003c/li\u003e\n\u003cli\u003e原文：各环节之间不仅前后衔接，而且还可能循环往复。\u003c/li\u003e\n\u003cli\u003e修改为：各环节之间不仅前后衔接，\u003cdel\u003e而且\u003c/del\u003e还可能循环往复。\u003c/li\u003e\n\u003cli\u003e说明：去掉原文中的“而且”。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"第014页\"\u003e\u003ca href=\"#第014页\" class=\"headerlink\" title=\"第014页\"\u003e\u003c/a\u003e第014页\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e位置：正文，第3自然段。\u003c/li\u003e\n\u003cli\u003e原文：⑫的作用是……。注意，这一句必须在且只能在代码块的第1行。\u003c/li\u003e\n\u003cli\u003e修改为：⑫的作用是……。\u003cdel\u003e注意，这一句必须在且只能在代码块的第1行。\u003c/del\u003e\u003c/li\u003e\n\u003cli\u003e说明：删除“注意……”这一句。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"第015页\"\u003e\u003ca href=\"#第015页\" class=\"headerlink\" title=\"第015页\"\u003e\u003c/a\u003e第015页\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e位置：正文，倒数第1段，倒数第1行\u003c/li\u003e\n\u003cli\u003e原文：⑰是惰性操作，……，直到执行后续操作。\u003c/li\u003e\n\u003cli\u003e修改为：\u003cdel\u003e⑰是惰性操作，……，直到执行后续操作。\u003c/del\u003e\u003c/li\u003e\n\u003cli\u003e说明：原文所示的那一句删除。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"第038页\"\u003e\u003ca href=\"#第038页\" class=\"headerlink\" title=\"第038页\"\u003e\u003c/a\u003e第038页\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e位置：代码段，In[9]，第2行\u003c/li\u003e\n\u003cli\u003e原文：\u003ccode\u003etdatas.to_csv(\u0026#34;./chapter01/movies.csv\u0026#34;)\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e修改为：\u003ccode\u003edatas.to_csv(\u0026#34;./chapter01/movies.csv\u0026#34;)\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e说明：原文中，在\u003ccode\u003edatas\u003c/code\u003e前面的字母 t 应该去掉\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"第042页\"\u003e\u003ca href=\"#第042页\" class=\"headerlink\" title=\"第042页\"\u003e\u003c/a\u003e第042页\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e位置：动手练习，第1题，整个题目进行修改。\u003c/li\u003e\n\u003cli\u003e修改为：在网上找到一个可用于读取数据的API，练习通过API读取数据。\u003c/li\u003e\n\u003cli\u003e说明：原文中的题目，因为API失效，不能使用，所以将题目内容更改。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"修订\"\u003e\u003ca href=\"#修订\" class=\"headerlink\" title=\"修订\"\u003e\u003c/a\u003e修订\u003c/h2\u003e\u003ch3 id=\"第009页\"\u003e\u003ca href=\"#第009页\" class=\"headerlink\" title=\"第009页\"\u003e\u003c/a\u003e第009页\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e\u003cp\u003e说明：在正文倒数第1段之前，即“下面就使用这个函数读取Excel文件的数据”此段落之前，插入如下内容\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e为了顺利使用\u003ccode\u003epd.read_excel\u003c/code\u003e函数，先安装两个操作Excel文件常用的第三方包：xlrd、openpyxl。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"第029页\"\u003e\u003ca href=\"#第029页\" class=\"headerlink\" title=\"第029页\"\u003e\u003c/a\u003e第029页\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e说明：在第一段代码之后，在“建议读者在上述基础上，……”这段之前，增加下述内容。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e利用read_sql_query函数，能够对数据库表直接使用SQL语句。此外，Pandas中还有一个名为read_sql的函数，它是对函数read_sql_query和read_sql_table的高级封装，用这个函数能够从指定数据库文件中读取数据。\u003c/p\u003e\n\u003cp\u003e为了使用这个函数，必须安装SQLAlchemy模块。\u003c/p\u003e\n\u003cfigure class=\"highlight shell\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e pip install sqlalchemy\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e在演示读取数据之前，先创建一个SQLite的数据库文件（SQLite数据库是Python默认支持的，Python中有相应的标准库sqlite3）。\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003efrom\u003c/span\u003e sqlalchemy \u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e create_engine\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eengine = create_engine(\u003cspan class=\"string\"\u003e\u0026#39;sqlite:///data.db\u0026#39;\u003c/span\u003e, echo=\u003cspan class=\"literal\"\u003eFalse\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e创建名称为data.db的SQLite数据库，并用变量engine引用此数据库对象。\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003eimport\u003c/span\u003e pandas \u003cspan class=\"keyword\"\u003eas\u003c/span\u003e pd\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003epath = \u003cspan class=\"string\"\u003e\u0026#39;/Users/qiwsir/Documents/Codes/DataSet/pm25\u0026#39;\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ediadf = pd.read_csv(path+\u003cspan class=\"string\"\u003e\u0026#34;/pm2.csv\u0026#34;\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003ediadf.to_sql(\u003cspan class=\"string\"\u003e\u0026#34;diadata.db\u0026#34;\u003c/span\u003e, con=engine, index_label=\u003cspan class=\"string\"\u003e\u0026#39;ID\u0026#39;\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e从CSV文件中的读取数据，然后执行to_sql方法，将数据保存到前面创建的数据库中，并将相应的数据库表命名为diadata.db。\u003c/p\u003e\n\u003cp\u003e执行完上述操作之后，在本地就可以看到名为data.db的数据库文件，如果用可视化工具打开这个数据库，可以查看到里面的内容（如下图所示，相关操作方法请参阅《Python大学实用教程》）。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/Users/qiwsir/Documents/Codes/FeatureEngineering/chapter1/sqlitedata.png\" alt=\"image-20200414181157920\"/\u003e\u003c/p\u003e\n\u003cp\u003e接下来，就可以使用Pandas的read_sql函数从这个数据库中读取数据库表diadata.db中的数据了。\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003edf = pd.read_sql(\u003cspan class=\"string\"\u003e\u0026#39;diadata.db\u0026#39;\u003c/span\u003e, con=engine, index_col=\u003cspan class=\"string\"\u003e\u0026#39;ID\u0026#39;\u003c/span\u003e)\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003edf.head()\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003cp\u003e输出：\u003c/p\u003e\n\u003cfigure class=\"highlight python\"\u003e\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\t RANK\tCITY_ID\tCITY_NAME\tExposed days\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003eID\t\t\t\t\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"number\"\u003e0\u003c/span\u003e\t \u003cspan class=\"number\"\u003e1\u003c/span\u003e\t  \u003cspan class=\"number\"\u003e594\u003c/span\u003e\t     拉萨\t      \u003cspan class=\"number\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"number\"\u003e1\u003c/span\u003e\t \u003cspan class=\"number\"\u003e2\u003c/span\u003e\t  \u003cspan class=\"number\"\u003e579\u003c/span\u003e\t     玉溪\t      \u003cspan class=\"number\"\u003e7\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"number\"\u003e2\u003c/span\u003e\t \u003cspan class=\"number\"\u003e3\u003c/span\u003e\t  \u003cspan class=\"number\"\u003e263\u003c/span\u003e\t     厦门\t      \u003cspan class=\"number\"\u003e8\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"number\"\u003e3\u003c/span\u003e\t \u003cspan class=\"number\"\u003e4\u003c/span\u003e\t  \u003cspan class=\"number\"\u003e267\u003c/span\u003e\t     泉州\t      \u003cspan class=\"number\"\u003e9\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"number\"\u003e4\u003c/span\u003e\t \u003cspan class=\"number\"\u003e5\u003c/span\u003e\t  \u003cspan class=\"number\"\u003e271\u003c/span\u003e\t     漳州\t      \u003cspan class=\"number\"\u003e10\u003c/span\u003e\u003c/span\u003e\u003cbr/\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003c/figure\u003e\n\n\u003c/section\u003e\n    \u003c!-- Tags START --\u003e\n    \n    \u003c!-- Tags END --\u003e\n    \u003c!-- NAV START --\u003e\n    \n  \u003cdiv class=\"nav-container\"\u003e\n    \u003c!-- reverse left and right to put prev and next in a more logic postition --\u003e\n    \n      \u003ca class=\"nav-left\" href=\"/2020/04/05/book-reader-reply/\"\u003e\n        \u003cspan class=\"nav-arrow\"\u003e← \u003c/span\u003e\n        \n          读者来信：阅读齐老师图书的一些感想\n        \n      \u003c/a\u003e\n    \n    \n      \u003ca class=\"nav-right\" href=\"/2020/04/10/dl-information-theroy/\"\u003e\n        \n          用信息论剖析深度学习\n        \n        \u003cspan class=\"nav-arrow\"\u003e →\u003c/span\u003e\n      \u003c/a\u003e\n    \n  \u003c/div\u003e\n\n    \u003c!-- NAV END --\u003e\n    \u003c!-- 打赏 START --\u003e\n    \n      \u003cdiv class=\"money-like\"\u003e\n        \u003cdiv class=\"reward-btn\"\u003e\n          赏\n          \u003cspan class=\"money-code\"\u003e\n            \u003cspan class=\"alipay-code\"\u003e\n              \u003cdiv class=\"code-image\"\u003e\u003c/div\u003e\n              \u003cb\u003e使用支付宝打赏\u003c/b\u003e\n            \u003c/span\u003e\n            \u003cspan class=\"wechat-code\"\u003e\n              \u003cdiv class=\"code-image\"\u003e\u003c/div\u003e\n              \u003cb\u003e使用微信打赏\u003c/b\u003e\n            \u003c/span\u003e\n          \u003c/span\u003e\n        \u003c/div\u003e\n        \u003cp class=\"notice\"\u003e若你觉得我的文章对你有帮助，欢迎点击上方按钮对我打赏\u003c/p\u003e\n      \u003c/div\u003e\n    \n    \u003c!-- 打赏 END --\u003e\n    \u003c!-- 二维码 START --\u003e\n    \u003c!--% if (theme.qrcode) { %--\u003e\n      \u003cdiv class=\"qrcode\"\u003e\n        \u003c!--canvas id=\"share-qrcode\"\u003e\u003c/!--canvas--\u003e\n        \u003cimg src=\"https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/WechatIMG6_20200109154827.jpeg\" width=\"400\"/\u003e\n        \u003cp class=\"notice\"\u003e关注微信公众号，读文章、听课程，提升技能\u003c/p\u003e\n      \u003c/div\u003e\n    \u003c!--% } %--\u003e\n    \u003c!-- 二维码 END --\u003e\n    \n      \u003c!-- No Comment --\u003e\n    \n  \u003c/article\u003e",
  "Date": "2020-04-07T00:00:00Z",
  "Author": "老齐教室"
}